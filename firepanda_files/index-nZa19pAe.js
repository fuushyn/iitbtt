var bs=Object.defineProperty;var Bs=(et,_,_e)=>_ in et?bs(et,_,{enumerable:!0,configurable:!0,writable:!0,value:_e}):et[_]=_e;var Ir=(et,_,_e)=>(Bs(et,typeof _!="symbol"?_+"":_,_e),_e);(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))tt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const st of it.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&tt(st)}).observe(document,{childList:!0,subtree:!0});function _e(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function tt(rt){if(rt.ep)return;rt.ep=!0;const it=_e(rt);fetch(rt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}function getAugmentedNamespace(et){if(et.__esModule)return et;var _=et.default;if(typeof _=="function"){var _e=function tt(){return this instanceof tt?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};_e.prototype=_.prototype}else _e={};return Object.defineProperty(_e,"__esModule",{value:!0}),Object.keys(et).forEach(function(tt){var rt=Object.getOwnPropertyDescriptor(et,tt);Object.defineProperty(_e,tt,rt.get?rt:{enumerable:!0,get:function(){return et[tt]}})}),_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(et){return et===null||typeof et!="object"?null:(et=z$2&&et[z$2]||et["@@iterator"],typeof et=="function"?et:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(et,_,_e){this.props=et,this.context=_,this.refs=D$2,this.updater=_e||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(et,_){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,_,"setState")};E$2.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$1(et,_,_e){this.props=et,this.context=_,this.refs=D$2,this.updater=_e||B$1}var H$2=G$1.prototype=new F$2;H$2.constructor=G$1;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,_,_e){var tt,rt={},it=null,st=null;if(_!=null)for(tt in _.ref!==void 0&&(st=_.ref),_.key!==void 0&&(it=""+_.key),_)J$1.call(_,tt)&&!L$3.hasOwnProperty(tt)&&(rt[tt]=_[tt]);var At=arguments.length-2;if(At===1)rt.children=_e;else if(1<At){for(var ut=Array(At),ct=0;ct<At;ct++)ut[ct]=arguments[ct+2];rt.children=ut}if(et&&et.defaultProps)for(tt in At=et.defaultProps,At)rt[tt]===void 0&&(rt[tt]=At[tt]);return{$$typeof:l$2,type:et,key:it,ref:st,props:rt,_owner:K$2.current}}function N$2(et,_){return{$$typeof:l$2,type:et.type,key:_,ref:et.ref,props:et.props,_owner:et._owner}}function O$1(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$2}function escape$1(et){var _={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(_e){return _[_e]})}var P$1=/\/+/g;function Q$2(et,_){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):_.toString(36)}function R$1(et,_,_e,tt,rt){var it=typeof et;(it==="undefined"||it==="boolean")&&(et=null);var st=!1;if(et===null)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(et.$$typeof){case l$2:case n$2:st=!0}}if(st)return st=et,rt=rt(st),et=tt===""?"."+Q$2(st,0):tt,I$2(rt)?(_e="",et!=null&&(_e=et.replace(P$1,"$&/")+"/"),R$1(rt,_,_e,"",function(ct){return ct})):rt!=null&&(O$1(rt)&&(rt=N$2(rt,_e+(!rt.key||st&&st.key===rt.key?"":(""+rt.key).replace(P$1,"$&/")+"/")+et)),_.push(rt)),1;if(st=0,tt=tt===""?".":tt+":",I$2(et))for(var At=0;At<et.length;At++){it=et[At];var ut=tt+Q$2(it,At);st+=R$1(it,_,_e,ut,rt)}else if(ut=A$2(et),typeof ut=="function")for(et=ut.call(et),At=0;!(it=et.next()).done;)it=it.value,ut=tt+Q$2(it,At++),st+=R$1(it,_,_e,ut,rt);else if(it==="object")throw _=String(et),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return st}function S$3(et,_,_e){if(et==null)return et;var tt=[],rt=0;return R$1(et,tt,"","",function(it){return _.call(_e,it,rt++)}),tt}function T$3(et){if(et._status===-1){var _=et._result;_=_(),_.then(function(_e){(et._status===0||et._status===-1)&&(et._status=1,et._result=_e)},function(_e){(et._status===0||et._status===-1)&&(et._status=2,et._result=_e)}),et._status===-1&&(et._status=0,et._result=_)}if(et._status===1)return et._result.default;throw et._result}var U$3={current:null},V$3={transition:null},W$2={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$2};react_production_min.Children={map:S$3,forEach:function(et,_,_e){S$3(et,function(){_.apply(this,arguments)},_e)},count:function(et){var _=0;return S$3(et,function(){_++}),_},toArray:function(et){return S$3(et,function(_){return _})||[]},only:function(et){if(!O$1(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(et,_,_e){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var tt=C$2({},et.props),rt=et.key,it=et.ref,st=et._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,st=K$2.current),_.key!==void 0&&(rt=""+_.key),et.type&&et.type.defaultProps)var At=et.type.defaultProps;for(ut in _)J$1.call(_,ut)&&!L$3.hasOwnProperty(ut)&&(tt[ut]=_[ut]===void 0&&At!==void 0?At[ut]:_[ut])}var ut=arguments.length-2;if(ut===1)tt.children=_e;else if(1<ut){At=Array(ut);for(var ct=0;ct<ut;ct++)At[ct]=arguments[ct+2];tt.children=At}return{$$typeof:l$2,type:et.type,key:rt,ref:it,props:tt,_owner:st}};react_production_min.createContext=function(et){return et={$$typeof:u$4,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$1,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var _=M$2.bind(null,et);return _.type=et,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$3,render:et}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(et){return{$$typeof:y$2,_payload:{_status:-1,_result:et},_init:T$3}};react_production_min.memo=function(et,_){return{$$typeof:x$2,type:et,compare:_===void 0?null:_}};react_production_min.startTransition=function(et){var _=V$3.transition;V$3.transition={};try{et()}finally{V$3.transition=_}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(et,_){return U$3.current.useCallback(et,_)};react_production_min.useContext=function(et){return U$3.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$3.current.useDeferredValue(et)};react_production_min.useEffect=function(et,_){return U$3.current.useEffect(et,_)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(et,_,_e){return U$3.current.useImperativeHandle(et,_,_e)};react_production_min.useInsertionEffect=function(et,_){return U$3.current.useInsertionEffect(et,_)};react_production_min.useLayoutEffect=function(et,_){return U$3.current.useLayoutEffect(et,_)};react_production_min.useMemo=function(et,_){return U$3.current.useMemo(et,_)};react_production_min.useReducer=function(et,_,_e){return U$3.current.useReducer(et,_,_e)};react_production_min.useRef=function(et){return U$3.current.useRef(et)};react_production_min.useState=function(et){return U$3.current.useState(et)};react_production_min.useSyncExternalStore=function(et,_,_e){return U$3.current.useSyncExternalStore(et,_,_e)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const e$2=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$1=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(et,_,_e){var tt,rt={},it=null,st=null;_e!==void 0&&(it=""+_e),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(st=_.ref);for(tt in _)m$3.call(_,tt)&&!p$3.hasOwnProperty(tt)&&(rt[tt]=_[tt]);if(et&&et.defaultProps)for(tt in _=et.defaultProps,_)rt[tt]===void 0&&(rt[tt]=_[tt]);return{$$typeof:k$1,type:et,key:it,ref:st,props:rt,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _(Lt,Mt){var Rt=Lt.length;Lt.push(Mt);e:for(;0<Rt;){var Nt=Rt-1>>>1,Gt=Lt[Nt];if(0<rt(Gt,Mt))Lt[Nt]=Mt,Lt[Rt]=Gt,Rt=Nt;else break e}}function _e(Lt){return Lt.length===0?null:Lt[0]}function tt(Lt){if(Lt.length===0)return null;var Mt=Lt[0],Rt=Lt.pop();if(Rt!==Mt){Lt[0]=Rt;e:for(var Nt=0,Gt=Lt.length,Wt=Gt>>>1;Nt<Wt;){var Xt=2*(Nt+1)-1,Yt=Lt[Xt],Zt=Xt+1,er=Lt[Zt];if(0>rt(Yt,Rt))Zt<Gt&&0>rt(er,Yt)?(Lt[Nt]=er,Lt[Zt]=Rt,Nt=Zt):(Lt[Nt]=Yt,Lt[Xt]=Rt,Nt=Xt);else if(Zt<Gt&&0>rt(er,Rt))Lt[Nt]=er,Lt[Zt]=Rt,Nt=Zt;else break e}}return Mt}function rt(Lt,Mt){var Rt=Lt.sortIndex-Mt.sortIndex;return Rt!==0?Rt:Lt.id-Mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;et.unstable_now=function(){return it.now()}}else{var st=Date,At=st.now();et.unstable_now=function(){return st.now()-At}}var ut=[],ct=[],ht=1,ot=null,nt=3,at=!1,lt=!1,dt=!1,ft=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mt(Lt){for(var Mt=_e(ct);Mt!==null;){if(Mt.callback===null)tt(ct);else if(Mt.startTime<=Lt)tt(ct),Mt.sortIndex=Mt.expirationTime,_(ut,Mt);else break;Mt=_e(ct)}}function yt(Lt){if(dt=!1,mt(Lt),!lt)if(_e(ut)!==null)lt=!0,Ct(vt);else{var Mt=_e(ct);Mt!==null&&Ft(yt,Mt.startTime-Lt)}}function vt(Lt,Mt){lt=!1,dt&&(dt=!1,pt(Bt),Bt=-1),at=!0;var Rt=nt;try{for(mt(Mt),ot=_e(ut);ot!==null&&(!(ot.expirationTime>Mt)||Lt&&!Dt());){var Nt=ot.callback;if(typeof Nt=="function"){ot.callback=null,nt=ot.priorityLevel;var Gt=Nt(ot.expirationTime<=Mt);Mt=et.unstable_now(),typeof Gt=="function"?ot.callback=Gt:ot===_e(ut)&&tt(ut),mt(Mt)}else tt(ut);ot=_e(ut)}if(ot!==null)var Wt=!0;else{var Xt=_e(ct);Xt!==null&&Ft(yt,Xt.startTime-Mt),Wt=!1}return Wt}finally{ot=null,nt=Rt,at=!1}}var wt=!1,bt=null,Bt=-1,Tt=5,It=-1;function Dt(){return!(et.unstable_now()-It<Tt)}function Ut(){if(bt!==null){var Lt=et.unstable_now();It=Lt;var Mt=!0;try{Mt=bt(!0,Lt)}finally{Mt?_t():(wt=!1,bt=null)}}else wt=!1}var _t;if(typeof gt=="function")_t=function(){gt(Ut)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,xt=St.port2;St.port1.onmessage=Ut,_t=function(){xt.postMessage(null)}}else _t=function(){ft(Ut,0)};function Ct(Lt){bt=Lt,wt||(wt=!0,_t())}function Ft(Lt,Mt){Bt=ft(function(){Lt(et.unstable_now())},Mt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(Lt){Lt.callback=null},et.unstable_continueExecution=function(){lt||at||(lt=!0,Ct(vt))},et.unstable_forceFrameRate=function(Lt){0>Lt||125<Lt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tt=0<Lt?Math.floor(1e3/Lt):5},et.unstable_getCurrentPriorityLevel=function(){return nt},et.unstable_getFirstCallbackNode=function(){return _e(ut)},et.unstable_next=function(Lt){switch(nt){case 1:case 2:case 3:var Mt=3;break;default:Mt=nt}var Rt=nt;nt=Mt;try{return Lt()}finally{nt=Rt}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(Lt,Mt){switch(Lt){case 1:case 2:case 3:case 4:case 5:break;default:Lt=3}var Rt=nt;nt=Lt;try{return Mt()}finally{nt=Rt}},et.unstable_scheduleCallback=function(Lt,Mt,Rt){var Nt=et.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?Nt+Rt:Nt):Rt=Nt,Lt){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=Rt+Gt,Lt={id:ht++,callback:Mt,priorityLevel:Lt,startTime:Rt,expirationTime:Gt,sortIndex:-1},Rt>Nt?(Lt.sortIndex=Rt,_(ct,Lt),_e(ut)===null&&Lt===_e(ct)&&(dt?(pt(Bt),Bt=-1):dt=!0,Ft(yt,Rt-Nt))):(Lt.sortIndex=Gt,_(ut,Lt),lt||at||(lt=!0,Ct(vt))),Lt},et.unstable_shouldYield=Dt,et.unstable_wrapCallback=function(Lt){var Mt=nt;return function(){var Rt=nt;nt=Mt;try{return Lt.apply(this,arguments)}finally{nt=Rt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(et){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+et,_e=1;_e<arguments.length;_e++)_+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+et+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,_){ha(et,_),ha(et+"Capture",_)}function ha(et,_){for(ea[et]=_,et=0;et<_.length;et++)da.add(_[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,_,_e,tt){if(_e!==null&&_e.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return tt?!1:_e!==null?!_e.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,_,_e,tt){if(_===null||typeof _>"u"||pa(et,_,_e,tt))return!0;if(tt)return!1;if(_e!==null)switch(_e.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$2(et,_,_e,tt,rt,it,st){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=tt,this.attributeNamespace=rt,this.mustUseProperty=_e,this.propertyName=et,this.type=_,this.sanitizeURL=it,this.removeEmptyString=st}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$1[et]=new v$2(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var _=et[0];z$1[_]=new v$2(_,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$1[et]=new v$2(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$1[et]=new v$2(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$1[et]=new v$2(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$1[et]=new v$2(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$1[et]=new v$2(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$1[et]=new v$2(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$1[et]=new v$2(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$2(_,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$2(_,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$2(_,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$1[et]=new v$2(et,1,!1,et.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$1[et]=new v$2(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,_,_e,tt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:tt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,_e,rt,tt)&&(_e=null),tt||rt===null?oa(_)&&(_e===null?et.removeAttribute(_):et.setAttribute(_,""+_e)):rt.mustUseProperty?et[rt.propertyName]=_e===null?rt.type===3?!1:"":_e:(_=rt.attributeName,tt=rt.attributeNamespace,_e===null?et.removeAttribute(_):(rt=rt.type,_e=rt===3||rt===4&&_e===!0?"":""+_e,tt?et.setAttributeNS(tt,_,_e):et.setAttribute(_,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$1=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(_e){var _=_e.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+et}var Na=!1;function Oa(et,_){if(!et||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ct){var tt=ct}Reflect.construct(et,[],_)}else{try{_.call()}catch(ct){tt=ct}et.call(_.prototype)}else{try{throw Error()}catch(ct){tt=ct}et()}}catch(ct){if(ct&&tt&&typeof ct.stack=="string"){for(var rt=ct.stack.split(`
`),it=tt.stack.split(`
`),st=rt.length-1,At=it.length-1;1<=st&&0<=At&&rt[st]!==it[At];)At--;for(;1<=st&&0<=At;st--,At--)if(rt[st]!==it[At]){if(st!==1||At!==1)do if(st--,At--,0>At||rt[st]!==it[At]){var ut=`
`+rt[st].replace(" at new "," at ");return et.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",et.displayName)),ut}while(1<=st&&0<=At);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var _=et.render;return et=et.displayName,et||(et=_.displayName||_.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return _=et.displayName||null,_!==null?_:Qa(et.type)||"Memo";case Ha:_=et._payload,et=et._init;try{return Qa(et(_))}catch{}}return null}function Ra(et){var _=et.type;switch(et.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=_.render,et=et.displayName||et.name||"",_.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var _=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(et){var _=Ta(et)?"checked":"value",_e=Object.getOwnPropertyDescriptor(et.constructor.prototype,_),tt=""+et[_];if(!et.hasOwnProperty(_)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var rt=_e.get,it=_e.set;return Object.defineProperty(et,_,{configurable:!0,get:function(){return rt.call(this)},set:function(st){tt=""+st,it.call(this,st)}}),Object.defineProperty(et,_,{enumerable:_e.enumerable}),{getValue:function(){return tt},setValue:function(st){tt=""+st},stopTracking:function(){et._valueTracker=null,delete et[_]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var _=et._valueTracker;if(!_)return!0;var _e=_.getValue(),tt="";return et&&(tt=Ta(et)?et.checked?"true":"false":et.value),et=tt,et!==_e?(_.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,_){var _e=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??et._wrapperState.initialChecked})}function Za(et,_){var _e=_.defaultValue==null?"":_.defaultValue,tt=_.checked!=null?_.checked:_.defaultChecked;_e=Sa(_.value!=null?_.value:_e),et._wrapperState={initialChecked:tt,initialValue:_e,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(et,_){_=_.checked,_!=null&&ta(et,"checked",_,!1)}function bb(et,_){ab(et,_);var _e=Sa(_.value),tt=_.type;if(_e!=null)tt==="number"?(_e===0&&et.value===""||et.value!=_e)&&(et.value=""+_e):et.value!==""+_e&&(et.value=""+_e);else if(tt==="submit"||tt==="reset"){et.removeAttribute("value");return}_.hasOwnProperty("value")?cb(et,_.type,_e):_.hasOwnProperty("defaultValue")&&cb(et,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(et.defaultChecked=!!_.defaultChecked)}function db(et,_,_e){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var tt=_.type;if(!(tt!=="submit"&&tt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+et._wrapperState.initialValue,_e||_===et.value||(et.value=_),et.defaultValue=_}_e=et.name,_e!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,_e!==""&&(et.name=_e)}function cb(et,_,_e){(_!=="number"||Xa(et.ownerDocument)!==et)&&(_e==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+_e&&(et.defaultValue=""+_e))}var eb=Array.isArray;function fb(et,_,_e,tt){if(et=et.options,_){_={};for(var rt=0;rt<_e.length;rt++)_["$"+_e[rt]]=!0;for(_e=0;_e<et.length;_e++)rt=_.hasOwnProperty("$"+et[_e].value),et[_e].selected!==rt&&(et[_e].selected=rt),rt&&tt&&(et[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),_=null,rt=0;rt<et.length;rt++){if(et[rt].value===_e){et[rt].selected=!0,tt&&(et[rt].defaultSelected=!0);return}_!==null||et[rt].disabled||(_=et[rt])}_!==null&&(_.selected=!0)}}function gb(et,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,_){var _e=_.value;if(_e==null){if(_e=_.children,_=_.defaultValue,_e!=null){if(_!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}_=_e}_==null&&(_=""),_e=_}et._wrapperState={initialValue:Sa(_e)}}function ib(et,_){var _e=Sa(_.value),tt=Sa(_.defaultValue);_e!=null&&(_e=""+_e,_e!==et.value&&(et.value=_e),_.defaultValue==null&&et.defaultValue!==_e&&(et.defaultValue=_e)),tt!=null&&(et.defaultValue=""+tt)}function jb(et){var _=et.textContent;_===et._wrapperState.initialValue&&_!==""&&_!==null&&(et.value=_)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,_){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(_):et==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,_e,tt,rt){MSApp.execUnsafeLocalFunction(function(){return et(_,_e,tt,rt)})}:et}(function(et,_){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;_.firstChild;)et.appendChild(_.firstChild)}});function ob(et,_){if(_){var _e=et.firstChild;if(_e&&_e===et.lastChild&&_e.nodeType===3){_e.nodeValue=_;return}}et.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(_){_=_+et.charAt(0).toUpperCase()+et.substring(1),pb[_]=pb[et]})});function rb(et,_,_e){return _==null||typeof _=="boolean"||_===""?"":_e||typeof _!="number"||_===0||pb.hasOwnProperty(et)&&pb[et]?(""+_).trim():_+"px"}function sb(et,_){et=et.style;for(var _e in _)if(_.hasOwnProperty(_e)){var tt=_e.indexOf("--")===0,rt=rb(_e,_[_e],tt);_e==="float"&&(_e="cssFloat"),tt?et.setProperty(_e,rt):et[_e]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,_){if(_){if(tb[et]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$2(137,et));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$2(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$2(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$2(62))}}function vb(et,_){if(et.indexOf("-")===-1)return typeof _.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$2(280));var _=et.stateNode;_&&(_=Db(_),yb(et.stateNode,et.type,_))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,_=Ab;if(Ab=zb=null,Bb(et),_)for(et=0;et<_.length;et++)Bb(_[et])}}function Gb(et,_){return et(_)}function Hb(){}var Ib=!1;function Jb(et,_,_e){if(Ib)return et(_,_e);Ib=!0;try{return Gb(et,_,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,_){var _e=et.stateNode;if(_e===null)return null;var tt=Db(_e);if(tt===null)return null;_e=tt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(et=et.type,tt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!tt;break e;default:et=!1}if(et)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,_,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,_,_e,tt,rt,it,st,At,ut){var ct=Array.prototype.slice.call(arguments,3);try{_.apply(_e,ct)}catch(ht){this.onError(ht)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,_,_e,tt,rt,it,st,At,ut){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,_,_e,tt,rt,it,st,At,ut){if(Tb.apply(this,arguments),Ob){if(Ob){var ct=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=ct)}}function Vb(et){var _=et,_e=et;if(et.alternate)for(;_.return;)_=_.return;else{et=_;do _=et,_.flags&4098&&(_e=_.return),et=_.return;while(et)}return _.tag===3?_e:null}function Wb(et){if(et.tag===13){var _=et.memoizedState;if(_===null&&(et=et.alternate,et!==null&&(_=et.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$2(188))}function Yb(et){var _=et.alternate;if(!_){if(_=Vb(et),_===null)throw Error(p$2(188));return _!==et?null:et}for(var _e=et,tt=_;;){var rt=_e.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(tt=rt.return,tt!==null){_e=tt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===_e)return Xb(rt),et;if(it===tt)return Xb(rt),_;it=it.sibling}throw Error(p$2(188))}if(_e.return!==tt.return)_e=rt,tt=it;else{for(var st=!1,At=rt.child;At;){if(At===_e){st=!0,_e=rt,tt=it;break}if(At===tt){st=!0,tt=rt,_e=it;break}At=At.sibling}if(!st){for(At=it.child;At;){if(At===_e){st=!0,_e=it,tt=rt;break}if(At===tt){st=!0,tt=it,_e=rt;break}At=At.sibling}if(!st)throw Error(p$2(189))}}if(_e.alternate!==tt)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?et:_}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var _=$b(et);if(_!==null)return _;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,_){var _e=et.pendingLanes;if(_e===0)return 0;var tt=0,rt=et.suspendedLanes,it=et.pingedLanes,st=_e&268435455;if(st!==0){var At=st&~rt;At!==0?tt=tc(At):(it&=st,it!==0&&(tt=tc(it)))}else st=_e&~rt,st!==0?tt=tc(st):it!==0&&(tt=tc(it));if(tt===0)return 0;if(_!==0&&_!==tt&&!(_&rt)&&(rt=tt&-tt,it=_&-_,rt>=it||rt===16&&(it&4194240)!==0))return _;if(tt&4&&(tt|=_e&16),_=et.entangledLanes,_!==0)for(et=et.entanglements,_&=tt;0<_;)_e=31-oc(_),rt=1<<_e,tt|=et[_e],_&=~rt;return tt}function vc(et,_){switch(et){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,_){for(var _e=et.suspendedLanes,tt=et.pingedLanes,rt=et.expirationTimes,it=et.pendingLanes;0<it;){var st=31-oc(it),At=1<<st,ut=rt[st];ut===-1?(!(At&_e)||At&tt)&&(rt[st]=vc(At,_)):ut<=_&&(et.expiredLanes|=At),it&=~At}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var _=[],_e=0;31>_e;_e++)_.push(et);return _}function Ac(et,_,_e){et.pendingLanes|=_,_!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,_=31-oc(_),et[_]=_e}function Bc(et,_){var _e=et.pendingLanes&~_;et.pendingLanes=_,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=_,et.mutableReadLanes&=_,et.entangledLanes&=_,_=et.entanglements;var tt=et.eventTimes;for(et=et.expirationTimes;0<_e;){var rt=31-oc(_e),it=1<<rt;_[rt]=0,tt[rt]=-1,et[rt]=-1,_e&=~it}}function Cc(et,_){var _e=et.entangledLanes|=_;for(et=et.entanglements;_e;){var tt=31-oc(_e),rt=1<<tt;rt&_|et[tt]&_&&(et[tt]|=_),_e&=~rt}}var C$1=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,_){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(et,_,_e,tt,rt,it){return et===null||et.nativeEvent!==it?(et={blockedOn:_,domEventName:_e,eventSystemFlags:tt,nativeEvent:it,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),et):(et.eventSystemFlags|=tt,_=et.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),et)}function Uc(et,_,_e,tt,rt){switch(_){case"focusin":return Lc=Tc(Lc,et,_,_e,tt,rt),!0;case"dragenter":return Mc=Tc(Mc,et,_,_e,tt,rt),!0;case"mouseover":return Nc=Tc(Nc,et,_,_e,tt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,et,_,_e,tt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,et,_,_e,tt,rt)),!0}return!1}function Vc(et){var _=Wc(et.target);if(_!==null){var _e=Vb(_);if(_e!==null){if(_=_e.tag,_===13){if(_=Wb(_e),_!==null){et.blockedOn=_,Ic(et.priority,function(){Gc(_e)});return}}else if(_===3&&_e.stateNode.current.memoizedState.isDehydrated){et.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var _=et.targetContainers;0<_.length;){var _e=Yc(et.domEventName,et.eventSystemFlags,_[0],et.nativeEvent);if(_e===null){_e=et.nativeEvent;var tt=new _e.constructor(_e.type,_e);wb=tt,_e.target.dispatchEvent(tt),wb=null}else return _=Cb(_e),_!==null&&Fc(_),et.blockedOn=_e,!1;_.shift()}return!0}function Zc(et,_,_e){Xc(et)&&_e.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,_){et.blockedOn===_&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function _(rt){return ad(rt,et)}if(0<Kc.length){ad(Kc[0],et);for(var _e=1;_e<Kc.length;_e++){var tt=Kc[_e];tt.blockedOn===et&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(_),Pc.forEach(_),_e=0;_e<Qc.length;_e++)tt=Qc[_e],tt.blockedOn===et&&(tt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,_,_e,tt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=1,fd(et,_,_e,tt)}finally{C$1=rt,cd.transition=it}}function gd(et,_,_e,tt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=4,fd(et,_,_e,tt)}finally{C$1=rt,cd.transition=it}}function fd(et,_,_e,tt){if(dd){var rt=Yc(et,_,_e,tt);if(rt===null)hd(et,_,tt,id,_e),Sc(et,tt);else if(Uc(rt,et,_,_e,tt))tt.stopPropagation();else if(Sc(et,tt),_&4&&-1<Rc.indexOf(et)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(et,_,_e,tt),it===null&&hd(et,_,tt,id,_e),it===rt)break;rt=it}rt!==null&&tt.stopPropagation()}else hd(et,_,tt,null,_e)}}var id=null;function Yc(et,_,_e,tt){if(id=null,et=xb(tt),et=Wc(et),et!==null)if(_=Vb(et),_===null)et=null;else if(_e=_.tag,_e===13){if(et=Wb(_),et!==null)return et;et=null}else if(_e===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;et=null}else _!==et&&(et=null);return id=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,_=ld,_e=_.length,tt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(et=0;et<_e&&_[et]===rt[et];et++);var st=_e-et;for(tt=1;tt<=st&&_[_e-tt]===rt[it-tt];tt++);return md=rt.slice(et,1<tt?1-tt:void 0)}function od(et){var _=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&_===13&&(et=13)):et=_,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function _(_e,tt,rt,it,st){this._reactName=_e,this._targetInst=rt,this.type=tt,this.nativeEvent=it,this.target=st,this.currentTarget=null;for(var At in et)et.hasOwnProperty(At)&&(_e=et[At],this[At]=_e?_e(it):it[At]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(et):(et=Od[et])?!!_[et]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(et){if(et.key){var _=Md[et.key]||et.key;if(_!=="Unidentified")return _}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(et,_){switch(et){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie=!1;function je(et,_){switch(et){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee);case"textInput":return et=_.data,et===ee&&fe?null:et;default:return null}}function ke(et,_){if(ie)return et==="compositionend"||!ae&&ge(et,_)?(et=nd(),md=ld=kd=null,ie=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var _=et&&et.nodeName&&et.nodeName.toLowerCase();return _==="input"?!!le[et.type]:_==="textarea"}function ne(et,_,_e,tt){Eb(tt),_=oe(_,"onChange"),0<_.length&&(_e=new td("onChange","change",null,_e,tt),et.push({event:_e,listeners:_}))}var pe=null,qe=null;function re(et){se(et,0)}function te(et){var _=ue(et);if(Wa(_))return et}function ve(et,_){if(et==="change")return _}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(et){if(et.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,et,xb(et)),Jb(re,_)}}function Ce(et,_,_e){et==="focusin"?(Ae(),pe=_,qe=_e,pe.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te(qe)}function Ee(et,_){if(et==="click")return te(_)}function Fe(et,_){if(et==="input"||et==="change")return te(_)}function Ge(et,_){return et===_&&(et!==0||1/et===1/_)||et!==et&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(et,_){if(He(et,_))return!0;if(typeof et!="object"||et===null||typeof _!="object"||_===null)return!1;var _e=Object.keys(et),tt=Object.keys(_);if(_e.length!==tt.length)return!1;for(tt=0;tt<_e.length;tt++){var rt=_e[tt];if(!ja.call(_,rt)||!He(et[rt],_[rt]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,_){var _e=Je(et);et=0;for(var tt;_e;){if(_e.nodeType===3){if(tt=et+_e.textContent.length,et<=_&&tt>=_)return{node:_e,offset:_-et};et=tt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(et,_){return et&&_?et===_?!0:et&&et.nodeType===3?!1:_&&_.nodeType===3?Le(et,_.parentNode):"contains"in et?et.contains(_):et.compareDocumentPosition?!!(et.compareDocumentPosition(_)&16):!1:!1}function Me(){for(var et=window,_=Xa();_ instanceof et.HTMLIFrameElement;){try{var _e=typeof _.contentWindow.location.href=="string"}catch{_e=!1}if(_e)et=_.contentWindow;else break;_=Xa(et.document)}return _}function Ne(et){var _=et&&et.nodeName&&et.nodeName.toLowerCase();return _&&(_==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||_==="textarea"||et.contentEditable==="true")}function Oe(et){var _=Me(),_e=et.focusedElem,tt=et.selectionRange;if(_!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(tt!==null&&Ne(_e)){if(_=tt.start,et=tt.end,et===void 0&&(et=_),"selectionStart"in _e)_e.selectionStart=_,_e.selectionEnd=Math.min(et,_e.value.length);else if(et=(_=_e.ownerDocument||document)&&_.defaultView||window,et.getSelection){et=et.getSelection();var rt=_e.textContent.length,it=Math.min(tt.start,rt);tt=tt.end===void 0?it:Math.min(tt.end,rt),!et.extend&&it>tt&&(rt=tt,tt=it,it=rt),rt=Ke(_e,it);var st=Ke(_e,tt);rt&&st&&(et.rangeCount!==1||et.anchorNode!==rt.node||et.anchorOffset!==rt.offset||et.focusNode!==st.node||et.focusOffset!==st.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),et.removeAllRanges(),it>tt?(et.addRange(_),et.extend(st.node,st.offset)):(_.setEnd(st.node,st.offset),et.addRange(_)))}}for(_=[],et=_e;et=et.parentNode;)et.nodeType===1&&_.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<_.length;_e++)et=_[_e],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(et,_,_e){var tt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_=new td("onSelect","select",null,_,_e),et.push({event:_,listeners:tt}),_.target=Qe)))}function Ve(et,_){var _e={};return _e[et.toLowerCase()]=_.toLowerCase(),_e["Webkit"+et]="webkit"+_,_e["Moz"+et]="moz"+_,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var _=We[et],_e;for(_e in _)if(_.hasOwnProperty(_e)&&_e in Ye)return Xe[et]=_[_e];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,_){df.set(et,_),fa(_,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,_,_e){var tt=et.type||"unknown-event";et.currentTarget=_e,Ub(tt,_,void 0,et),et.currentTarget=null}function se(et,_){_=(_&4)!==0;for(var _e=0;_e<et.length;_e++){var tt=et[_e],rt=tt.event;tt=tt.listeners;e:{var it=void 0;if(_)for(var st=tt.length-1;0<=st;st--){var At=tt[st],ut=At.instance,ct=At.currentTarget;if(At=At.listener,ut!==it&&rt.isPropagationStopped())break e;nf(rt,At,ct),it=ut}else for(st=0;st<tt.length;st++){if(At=tt[st],ut=At.instance,ct=At.currentTarget,At=At.listener,ut!==it&&rt.isPropagationStopped())break e;nf(rt,At,ct),it=ut}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$1(et,_){var _e=_[of];_e===void 0&&(_e=_[of]=new Set);var tt=et+"__bubble";_e.has(tt)||(pf(_,et,2,!1),_e.add(tt))}function qf(et,_,_e){var tt=0;_&&(tt|=4),pf(_e,et,tt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,et),qf(_e,!0,et))});var _=et.nodeType===9?et:et.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(et,_,_e,tt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd}_e=rt.bind(null,_,_e,et),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),tt?rt!==void 0?et.addEventListener(_,_e,{capture:!0,passive:rt}):et.addEventListener(_,_e,!0):rt!==void 0?et.addEventListener(_,_e,{passive:rt}):et.addEventListener(_,_e,!1)}function hd(et,_,_e,tt,rt){var it=tt;if(!(_&1)&&!(_&2)&&tt!==null)e:for(;;){if(tt===null)return;var st=tt.tag;if(st===3||st===4){var At=tt.stateNode.containerInfo;if(At===rt||At.nodeType===8&&At.parentNode===rt)break;if(st===4)for(st=tt.return;st!==null;){var ut=st.tag;if((ut===3||ut===4)&&(ut=st.stateNode.containerInfo,ut===rt||ut.nodeType===8&&ut.parentNode===rt))return;st=st.return}for(;At!==null;){if(st=Wc(At),st===null)return;if(ut=st.tag,ut===5||ut===6){tt=it=st;continue e}At=At.parentNode}}tt=tt.return}Jb(function(){var ct=it,ht=xb(_e),ot=[];e:{var nt=df.get(et);if(nt!==void 0){var at=td,lt=et;switch(et){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":at=Rd;break;case"focusin":lt="focus",at=Fd;break;case"focusout":lt="blur",at=Fd;break;case"beforeblur":case"afterblur":at=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Vd;break;case $e:case af:case bf:at=Hd;break;case cf:at=Xd;break;case"scroll":at=vd;break;case"wheel":at=Zd;break;case"copy":case"cut":case"paste":at=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Td}var dt=(_&4)!==0,ft=!dt&&et==="scroll",pt=dt?nt!==null?nt+"Capture":null:nt;dt=[];for(var gt=ct,mt;gt!==null;){mt=gt;var yt=mt.stateNode;if(mt.tag===5&&yt!==null&&(mt=yt,pt!==null&&(yt=Kb(gt,pt),yt!=null&&dt.push(tf(gt,yt,mt)))),ft)break;gt=gt.return}0<dt.length&&(nt=new at(nt,lt,null,_e,ht),ot.push({event:nt,listeners:dt}))}}if(!(_&7)){e:{if(nt=et==="mouseover"||et==="pointerover",at=et==="mouseout"||et==="pointerout",nt&&_e!==wb&&(lt=_e.relatedTarget||_e.fromElement)&&(Wc(lt)||lt[uf]))break e;if((at||nt)&&(nt=ht.window===ht?ht:(nt=ht.ownerDocument)?nt.defaultView||nt.parentWindow:window,at?(lt=_e.relatedTarget||_e.toElement,at=ct,lt=lt?Wc(lt):null,lt!==null&&(ft=Vb(lt),lt!==ft||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(at=null,lt=ct),at!==lt)){if(dt=Bd,yt="onMouseLeave",pt="onMouseEnter",gt="mouse",(et==="pointerout"||et==="pointerover")&&(dt=Td,yt="onPointerLeave",pt="onPointerEnter",gt="pointer"),ft=at==null?nt:ue(at),mt=lt==null?nt:ue(lt),nt=new dt(yt,gt+"leave",at,_e,ht),nt.target=ft,nt.relatedTarget=mt,yt=null,Wc(ht)===ct&&(dt=new dt(pt,gt+"enter",lt,_e,ht),dt.target=mt,dt.relatedTarget=ft,yt=dt),ft=yt,at&&lt)t:{for(dt=at,pt=lt,gt=0,mt=dt;mt;mt=vf(mt))gt++;for(mt=0,yt=pt;yt;yt=vf(yt))mt++;for(;0<gt-mt;)dt=vf(dt),gt--;for(;0<mt-gt;)pt=vf(pt),mt--;for(;gt--;){if(dt===pt||pt!==null&&dt===pt.alternate)break t;dt=vf(dt),pt=vf(pt)}dt=null}else dt=null;at!==null&&wf(ot,nt,at,dt,!1),lt!==null&&ft!==null&&wf(ot,ft,lt,dt,!0)}}e:{if(nt=ct?ue(ct):window,at=nt.nodeName&&nt.nodeName.toLowerCase(),at==="select"||at==="input"&&nt.type==="file")var vt=ve;else if(me(nt))if(we)vt=Fe;else{vt=De;var wt=Ce}else(at=nt.nodeName)&&at.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(vt=Ee);if(vt&&(vt=vt(et,ct))){ne(ot,vt,_e,ht);break e}wt&&wt(et,nt,ct),et==="focusout"&&(wt=nt._wrapperState)&&wt.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(wt=ct?ue(ct):window,et){case"focusin":(me(wt)||wt.contentEditable==="true")&&(Qe=wt,Re=ct,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ot,_e,ht);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ot,_e,ht)}var bt;if(ae)e:{switch(et){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ie?ge(et,_e)&&(Bt="onCompositionEnd"):et==="keydown"&&_e.keyCode===229&&(Bt="onCompositionStart");Bt&&(de&&_e.locale!=="ko"&&(ie||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ie&&(bt=nd()):(kd=ht,ld="value"in kd?kd.value:kd.textContent,ie=!0)),wt=oe(ct,Bt),0<wt.length&&(Bt=new Ld(Bt,et,null,_e,ht),ot.push({event:Bt,listeners:wt}),bt?Bt.data=bt:(bt=he(_e),bt!==null&&(Bt.data=bt)))),(bt=ce?je(et,_e):ke(et,_e))&&(ct=oe(ct,"onBeforeInput"),0<ct.length&&(ht=new Ld("onBeforeInput","beforeinput",null,_e,ht),ot.push({event:ht,listeners:ct}),ht.data=bt))}se(ot,_)})}function tf(et,_,_e){return{instance:et,listener:_,currentTarget:_e}}function oe(et,_){for(var _e=_+"Capture",tt=[];et!==null;){var rt=et,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(et,_e),it!=null&&tt.unshift(tf(et,it,rt)),it=Kb(et,_),it!=null&&tt.push(tf(et,it,rt))),et=et.return}return tt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,_,_e,tt,rt){for(var it=_._reactName,st=[];_e!==null&&_e!==tt;){var At=_e,ut=At.alternate,ct=At.stateNode;if(ut!==null&&ut===tt)break;At.tag===5&&ct!==null&&(At=ct,rt?(ut=Kb(_e,it),ut!=null&&st.unshift(tf(_e,ut,At))):rt||(ut=Kb(_e,it),ut!=null&&st.push(tf(_e,ut,At)))),_e=_e.return}st.length!==0&&et.push({event:_,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,_,_e){if(_=zf(_),zf(et)!==_&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,_){return et==="textarea"||et==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,_){var _e=_,tt=0;do{var rt=_e.nextSibling;if(et.removeChild(_e),rt&&rt.nodeType===8)if(_e=rt.data,_e==="/$"){if(tt===0){et.removeChild(rt),bd(_);return}tt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tt++;_e=rt}while(_e);bd(_)}function Lf(et){for(;et!=null;et=et.nextSibling){var _=et.nodeType;if(_===1||_===3)break;if(_===8){if(_=et.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var _=0;et;){if(et.nodeType===8){var _e=et.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(_===0)return et;_--}else _e==="/$"&&_++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var _=et[Of];if(_)return _;for(var _e=et.parentNode;_e;){if(_=_e[uf]||_e[Of]){if(_e=_.alternate,_.child!==null||_e!==null&&_e.child!==null)for(et=Mf(et);et!==null;){if(_e=et[Of])return _e;et=Mf(et)}return _}et=_e,_e=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$2(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$1(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(et,_){Tf++,Sf[Tf]=et.current,et.current=_}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,_){var _e=et.type.contextTypes;if(!_e)return Vf;var tt=et.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_)return tt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in _e)rt[it]=_[it];return tt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=_,et.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(et,_,_e){if(H$1.current!==Vf)throw Error(p$2(168));G(H$1,_),G(Wf,_e)}function bg(et,_,_e){var tt=et.stateNode;if(_=_.childContextTypes,typeof tt.getChildContext!="function")return _e;tt=tt.getChildContext();for(var rt in tt)if(!(rt in _))throw Error(p$2(108,Ra(et)||"Unknown",rt));return A$1({},_e,tt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,et),G(Wf,Wf.current),!0}function dg(et,_,_e){var tt=et.stateNode;if(!tt)throw Error(p$2(169));_e?(et=bg(et,_,Xf),tt.__reactInternalMemoizedMergedChildContext=et,E$1(Wf),E$1(H$1),G(H$1,et)):E$1(Wf),G(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,_=C$1;try{var _e=eg;for(C$1=1;et<_e.length;et++){var tt=_e[et];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),rt}finally{C$1=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,_){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=_}function ug(et,_,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var tt=rg;et=sg;var rt=32-oc(tt)-1;tt&=~(1<<rt),_e+=1;var it=32-oc(_)+rt;if(30<it){var st=rt-rt%5;it=(tt&(1<<st)-1).toString(32),tt>>=st,rt-=st,rg=1<<32-oc(_)+rt|_e<<rt|tt,sg=it+et}else rg=1<<it|_e<<rt|tt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(et,_){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=_,_e.return=et,_=et.deletions,_===null?(et.deletions=[_e],et.flags|=16):_.push(_e)}function Cg(et,_){switch(et.tag){case 5:var _e=et.type;return _=_.nodeType!==1||_e.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(et.stateNode=_,xg=et,yg=Lf(_.firstChild),!0):!1;case 6:return _=et.pendingProps===""||_.nodeType!==3?null:_,_!==null?(et.stateNode=_,xg=et,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:_,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=_,_e.return=et,et.child=_e,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$1){var _=yg;if(_){var _e=_;if(!Cg(et,_)){if(Dg(et))throw Error(p$2(418));_=Lf(_e.nextSibling);var tt=xg;_&&Cg(et,_)?Ag(tt,_e):(et.flags=et.flags&-4097|2,I$1=!1,xg=et)}}else{if(Dg(et))throw Error(p$2(418));et.flags=et.flags&-4097|2,I$1=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$1)return Fg(et),I$1=!0,!1;var _;if((_=et.tag!==3)&&!(_=et.tag!==5)&&(_=et.type,_=_!=="head"&&_!=="body"&&!Ef(et.type,et.memoizedProps)),_&&(_=yg)){if(Dg(et))throw Hg(),Error(p$2(418));for(;_;)Ag(et,_),_=Lf(_.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$2(317));e:{for(et=et.nextSibling,_=0;et;){if(et.nodeType===8){var _e=et.data;if(_e==="/$"){if(_===0){yg=Lf(et.nextSibling);break e}_--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||_++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,_){if(et&&et.defaultProps){_=A$1({},_),et=et.defaultProps;for(var _e in et)_[_e]===void 0&&(_[_e]=et[_e]);return _}return _}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(et){var _=Mg.current;E$1(Mg),et._currentValue=_}function Sg(et,_,_e){for(;et!==null;){var tt=et.alternate;if((et.childLanes&_)!==_?(et.childLanes|=_,tt!==null&&(tt.childLanes|=_)):tt!==null&&(tt.childLanes&_)!==_&&(tt.childLanes|=_),et===_e)break;et=et.return}}function Tg(et,_){Ng=et,Pg=Og=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&_&&(Ug=!0),et.firstContext=null)}function Vg(et){var _=et._currentValue;if(Pg!==et)if(et={context:et,memoizedValue:_,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=et,Ng.dependencies={lanes:0,firstContext:et}}else Og=Og.next=et;return _}var Wg=null;function Xg(et){Wg===null?Wg=[et]:Wg.push(et)}function Yg(et,_,_e,tt){var rt=_.interleaved;return rt===null?(_e.next=_e,Xg(_)):(_e.next=rt.next,rt.next=_e),_.interleaved=_e,Zg(et,tt)}function Zg(et,_){et.lanes|=_;var _e=et.alternate;for(_e!==null&&(_e.lanes|=_),_e=et,et=et.return;et!==null;)et.childLanes|=_,_e=et.alternate,_e!==null&&(_e.childLanes|=_),_e=et,et=et.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(et,_){et=et.updateQueue,_.updateQueue===et&&(_.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function ch(et,_){return{eventTime:et,lane:_,tag:0,payload:null,callback:null,next:null}}function dh(et,_,_e){var tt=et.updateQueue;if(tt===null)return null;if(tt=tt.shared,K$1&2){var rt=tt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),tt.pending=_,Zg(et,_e)}return rt=tt.interleaved,rt===null?(_.next=_,Xg(tt)):(_.next=rt.next,rt.next=_),tt.interleaved=_,Zg(et,_e)}function eh(et,_,_e){if(_=_.updateQueue,_!==null&&(_=_.shared,(_e&4194240)!==0)){var tt=_.lanes;tt&=et.pendingLanes,_e|=tt,_.lanes=_e,Cc(et,_e)}}function fh(et,_){var _e=et.updateQueue,tt=et.alternate;if(tt!==null&&(tt=tt.updateQueue,_e===tt)){var rt=null,it=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var st={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};it===null?rt=it=st:it=it.next=st,_e=_e.next}while(_e!==null);it===null?rt=it=_:it=it.next=_}else rt=it=_;_e={baseState:tt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:tt.shared,effects:tt.effects},et.updateQueue=_e;return}et=_e.lastBaseUpdate,et===null?_e.firstBaseUpdate=_:et.next=_,_e.lastBaseUpdate=_}function gh(et,_,_e,tt){var rt=et.updateQueue;$g=!1;var it=rt.firstBaseUpdate,st=rt.lastBaseUpdate,At=rt.shared.pending;if(At!==null){rt.shared.pending=null;var ut=At,ct=ut.next;ut.next=null,st===null?it=ct:st.next=ct,st=ut;var ht=et.alternate;ht!==null&&(ht=ht.updateQueue,At=ht.lastBaseUpdate,At!==st&&(At===null?ht.firstBaseUpdate=ct:At.next=ct,ht.lastBaseUpdate=ut))}if(it!==null){var ot=rt.baseState;st=0,ht=ct=ut=null,At=it;do{var nt=At.lane,at=At.eventTime;if((tt&nt)===nt){ht!==null&&(ht=ht.next={eventTime:at,lane:0,tag:At.tag,payload:At.payload,callback:At.callback,next:null});e:{var lt=et,dt=At;switch(nt=_,at=_e,dt.tag){case 1:if(lt=dt.payload,typeof lt=="function"){ot=lt.call(at,ot,nt);break e}ot=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=dt.payload,nt=typeof lt=="function"?lt.call(at,ot,nt):lt,nt==null)break e;ot=A$1({},ot,nt);break e;case 2:$g=!0}}At.callback!==null&&At.lane!==0&&(et.flags|=64,nt=rt.effects,nt===null?rt.effects=[At]:nt.push(At))}else at={eventTime:at,lane:nt,tag:At.tag,payload:At.payload,callback:At.callback,next:null},ht===null?(ct=ht=at,ut=ot):ht=ht.next=at,st|=nt;if(At=At.next,At===null){if(At=rt.shared.pending,At===null)break;nt=At,At=nt.next,nt.next=null,rt.lastBaseUpdate=nt,rt.shared.pending=null}}while(!0);if(ht===null&&(ut=ot),rt.baseState=ut,rt.firstBaseUpdate=ct,rt.lastBaseUpdate=ht,_=rt.shared.interleaved,_!==null){rt=_;do st|=rt.lane,rt=rt.next;while(rt!==_)}else it===null&&(rt.shared.lanes=0);hh|=st,et.lanes=st,et.memoizedState=ot}}function ih(et,_,_e){if(et=_.effects,_.effects=null,et!==null)for(_=0;_<et.length;_++){var tt=et[_],rt=tt.callback;if(rt!==null){if(tt.callback=null,tt=_e,typeof rt!="function")throw Error(p$2(191,rt));rt.call(tt)}}}var jh=new aa.Component().refs;function kh(et,_,_e,tt){_=et.memoizedState,_e=_e(tt,_),_e=_e==null?_:A$1({},_,_e),et.memoizedState=_e,et.lanes===0&&(et.updateQueue.baseState=_e)}var nh={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,_,_e){et=et._reactInternals;var tt=L$2(),rt=lh(et),it=ch(tt,rt);it.payload=_,_e!=null&&(it.callback=_e),_=dh(et,it,rt),_!==null&&(mh(_,et,rt,tt),eh(_,et,rt))},enqueueReplaceState:function(et,_,_e){et=et._reactInternals;var tt=L$2(),rt=lh(et),it=ch(tt,rt);it.tag=1,it.payload=_,_e!=null&&(it.callback=_e),_=dh(et,it,rt),_!==null&&(mh(_,et,rt,tt),eh(_,et,rt))},enqueueForceUpdate:function(et,_){et=et._reactInternals;var _e=L$2(),tt=lh(et),rt=ch(_e,tt);rt.tag=2,_!=null&&(rt.callback=_),_=dh(et,rt,tt),_!==null&&(mh(_,et,tt,_e),eh(_,et,tt))}};function oh(et,_,_e,tt,rt,it,st){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(tt,it,st):_.prototype&&_.prototype.isPureReactComponent?!Ie(_e,tt)||!Ie(rt,it):!0}function ph(et,_,_e){var tt=!1,rt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(rt=Zf(_)?Xf:H$1.current,tt=_.contextTypes,it=(tt=tt!=null)?Yf(et,rt):Vf),_=new _(_e,it),et.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=nh,et.stateNode=_,_._reactInternals=et,tt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=rt,et.__reactInternalMemoizedMaskedChildContext=it),_}function qh(et,_,_e,tt){et=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(_e,tt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(_e,tt),_.state!==et&&nh.enqueueReplaceState(_,_.state,null)}function rh(et,_,_e,tt){var rt=et.stateNode;rt.props=_e,rt.state=et.memoizedState,rt.refs=jh,ah(et);var it=_.contextType;typeof it=="object"&&it!==null?rt.context=Vg(it):(it=Zf(_)?Xf:H$1.current,rt.context=Yf(et,it)),rt.state=et.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(kh(et,_,it,_e),rt.state=et.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&nh.enqueueReplaceState(rt,rt.state,null),gh(et,_e,rt,tt),rt.state=et.memoizedState),typeof rt.componentDidMount=="function"&&(et.flags|=4194308)}function sh(et,_,_e){if(et=_e.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var tt=_e.stateNode}if(!tt)throw Error(p$2(147,et));var rt=tt,it=""+et;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(st){var At=rt.refs;At===jh&&(At=rt.refs={}),st===null?delete At[it]:At[it]=st},_._stringRef=it,_)}if(typeof et!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,et))}return et}function th(et,_){throw et=Object.prototype.toString.call(_),Error(p$2(31,et==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":et))}function uh(et){var _=et._init;return _(et._payload)}function vh(et){function _(pt,gt){if(et){var mt=pt.deletions;mt===null?(pt.deletions=[gt],pt.flags|=16):mt.push(gt)}}function _e(pt,gt){if(!et)return null;for(;gt!==null;)_(pt,gt),gt=gt.sibling;return null}function tt(pt,gt){for(pt=new Map;gt!==null;)gt.key!==null?pt.set(gt.key,gt):pt.set(gt.index,gt),gt=gt.sibling;return pt}function rt(pt,gt){return pt=wh(pt,gt),pt.index=0,pt.sibling=null,pt}function it(pt,gt,mt){return pt.index=mt,et?(mt=pt.alternate,mt!==null?(mt=mt.index,mt<gt?(pt.flags|=2,gt):mt):(pt.flags|=2,gt)):(pt.flags|=1048576,gt)}function st(pt){return et&&pt.alternate===null&&(pt.flags|=2),pt}function At(pt,gt,mt,yt){return gt===null||gt.tag!==6?(gt=xh(mt,pt.mode,yt),gt.return=pt,gt):(gt=rt(gt,mt),gt.return=pt,gt)}function ut(pt,gt,mt,yt){var vt=mt.type;return vt===ya?ht(pt,gt,mt.props.children,yt,mt.key):gt!==null&&(gt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===gt.type)?(yt=rt(gt,mt.props),yt.ref=sh(pt,gt,mt),yt.return=pt,yt):(yt=yh(mt.type,mt.key,mt.props,null,pt.mode,yt),yt.ref=sh(pt,gt,mt),yt.return=pt,yt)}function ct(pt,gt,mt,yt){return gt===null||gt.tag!==4||gt.stateNode.containerInfo!==mt.containerInfo||gt.stateNode.implementation!==mt.implementation?(gt=zh(mt,pt.mode,yt),gt.return=pt,gt):(gt=rt(gt,mt.children||[]),gt.return=pt,gt)}function ht(pt,gt,mt,yt,vt){return gt===null||gt.tag!==7?(gt=Ah(mt,pt.mode,yt,vt),gt.return=pt,gt):(gt=rt(gt,mt),gt.return=pt,gt)}function ot(pt,gt,mt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return gt=xh(""+gt,pt.mode,mt),gt.return=pt,gt;if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return mt=yh(gt.type,gt.key,gt.props,null,pt.mode,mt),mt.ref=sh(pt,null,gt),mt.return=pt,mt;case wa:return gt=zh(gt,pt.mode,mt),gt.return=pt,gt;case Ha:var yt=gt._init;return ot(pt,yt(gt._payload),mt)}if(eb(gt)||Ka(gt))return gt=Ah(gt,pt.mode,mt,null),gt.return=pt,gt;th(pt,gt)}return null}function nt(pt,gt,mt,yt){var vt=gt!==null?gt.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return vt!==null?null:At(pt,gt,""+mt,yt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return mt.key===vt?ut(pt,gt,mt,yt):null;case wa:return mt.key===vt?ct(pt,gt,mt,yt):null;case Ha:return vt=mt._init,nt(pt,gt,vt(mt._payload),yt)}if(eb(mt)||Ka(mt))return vt!==null?null:ht(pt,gt,mt,yt,null);th(pt,mt)}return null}function at(pt,gt,mt,yt,vt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return pt=pt.get(mt)||null,At(gt,pt,""+yt,vt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return pt=pt.get(yt.key===null?mt:yt.key)||null,ut(gt,pt,yt,vt);case wa:return pt=pt.get(yt.key===null?mt:yt.key)||null,ct(gt,pt,yt,vt);case Ha:var wt=yt._init;return at(pt,gt,mt,wt(yt._payload),vt)}if(eb(yt)||Ka(yt))return pt=pt.get(mt)||null,ht(gt,pt,yt,vt,null);th(gt,yt)}return null}function lt(pt,gt,mt,yt){for(var vt=null,wt=null,bt=gt,Bt=gt=0,Tt=null;bt!==null&&Bt<mt.length;Bt++){bt.index>Bt?(Tt=bt,bt=null):Tt=bt.sibling;var It=nt(pt,bt,mt[Bt],yt);if(It===null){bt===null&&(bt=Tt);break}et&&bt&&It.alternate===null&&_(pt,bt),gt=it(It,gt,Bt),wt===null?vt=It:wt.sibling=It,wt=It,bt=Tt}if(Bt===mt.length)return _e(pt,bt),I$1&&tg(pt,Bt),vt;if(bt===null){for(;Bt<mt.length;Bt++)bt=ot(pt,mt[Bt],yt),bt!==null&&(gt=it(bt,gt,Bt),wt===null?vt=bt:wt.sibling=bt,wt=bt);return I$1&&tg(pt,Bt),vt}for(bt=tt(pt,bt);Bt<mt.length;Bt++)Tt=at(bt,pt,Bt,mt[Bt],yt),Tt!==null&&(et&&Tt.alternate!==null&&bt.delete(Tt.key===null?Bt:Tt.key),gt=it(Tt,gt,Bt),wt===null?vt=Tt:wt.sibling=Tt,wt=Tt);return et&&bt.forEach(function(Dt){return _(pt,Dt)}),I$1&&tg(pt,Bt),vt}function dt(pt,gt,mt,yt){var vt=Ka(mt);if(typeof vt!="function")throw Error(p$2(150));if(mt=vt.call(mt),mt==null)throw Error(p$2(151));for(var wt=vt=null,bt=gt,Bt=gt=0,Tt=null,It=mt.next();bt!==null&&!It.done;Bt++,It=mt.next()){bt.index>Bt?(Tt=bt,bt=null):Tt=bt.sibling;var Dt=nt(pt,bt,It.value,yt);if(Dt===null){bt===null&&(bt=Tt);break}et&&bt&&Dt.alternate===null&&_(pt,bt),gt=it(Dt,gt,Bt),wt===null?vt=Dt:wt.sibling=Dt,wt=Dt,bt=Tt}if(It.done)return _e(pt,bt),I$1&&tg(pt,Bt),vt;if(bt===null){for(;!It.done;Bt++,It=mt.next())It=ot(pt,It.value,yt),It!==null&&(gt=it(It,gt,Bt),wt===null?vt=It:wt.sibling=It,wt=It);return I$1&&tg(pt,Bt),vt}for(bt=tt(pt,bt);!It.done;Bt++,It=mt.next())It=at(bt,pt,Bt,It.value,yt),It!==null&&(et&&It.alternate!==null&&bt.delete(It.key===null?Bt:It.key),gt=it(It,gt,Bt),wt===null?vt=It:wt.sibling=It,wt=It);return et&&bt.forEach(function(Ut){return _(pt,Ut)}),I$1&&tg(pt,Bt),vt}function ft(pt,gt,mt,yt){if(typeof mt=="object"&&mt!==null&&mt.type===ya&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:e:{for(var vt=mt.key,wt=gt;wt!==null;){if(wt.key===vt){if(vt=mt.type,vt===ya){if(wt.tag===7){_e(pt,wt.sibling),gt=rt(wt,mt.props.children),gt.return=pt,pt=gt;break e}}else if(wt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===wt.type){_e(pt,wt.sibling),gt=rt(wt,mt.props),gt.ref=sh(pt,wt,mt),gt.return=pt,pt=gt;break e}_e(pt,wt);break}else _(pt,wt);wt=wt.sibling}mt.type===ya?(gt=Ah(mt.props.children,pt.mode,yt,mt.key),gt.return=pt,pt=gt):(yt=yh(mt.type,mt.key,mt.props,null,pt.mode,yt),yt.ref=sh(pt,gt,mt),yt.return=pt,pt=yt)}return st(pt);case wa:e:{for(wt=mt.key;gt!==null;){if(gt.key===wt)if(gt.tag===4&&gt.stateNode.containerInfo===mt.containerInfo&&gt.stateNode.implementation===mt.implementation){_e(pt,gt.sibling),gt=rt(gt,mt.children||[]),gt.return=pt,pt=gt;break e}else{_e(pt,gt);break}else _(pt,gt);gt=gt.sibling}gt=zh(mt,pt.mode,yt),gt.return=pt,pt=gt}return st(pt);case Ha:return wt=mt._init,ft(pt,gt,wt(mt._payload),yt)}if(eb(mt))return lt(pt,gt,mt,yt);if(Ka(mt))return dt(pt,gt,mt,yt);th(pt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,gt!==null&&gt.tag===6?(_e(pt,gt.sibling),gt=rt(gt,mt),gt.return=pt,pt=gt):(_e(pt,gt),gt=xh(mt,pt.mode,yt),gt.return=pt,pt=gt),st(pt)):_e(pt,gt)}return ft}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(et){if(et===Dh)throw Error(p$2(174));return et}function Ih(et,_){switch(G(Gh,_),G(Fh,et),G(Eh,Dh),et=_.nodeType,et){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:et=et===8?_.parentNode:_,_=et.namespaceURI||null,et=et.tagName,_=lb(_,et)}E$1(Eh),G(Eh,_)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(et){Hh(Gh.current);var _=Hh(Eh.current),_e=lb(_,et.type);_!==_e&&(G(Fh,et),G(Eh,_e))}function Lh(et){Fh.current===et&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(et){for(var _=et;_!==null;){if(_.tag===13){var _e=_.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===et)break;for(;_.sibling===null;){if(_.return===null||_.return===et)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Nh=[];function Oh(){for(var et=0;et<Nh.length;et++)Nh[et]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(et,_){if(_===null)return!1;for(var _e=0;_e<_.length&&_e<et.length;_e++)if(!He(et[_e],_[_e]))return!1;return!0}function Xh(et,_,_e,tt,rt,it){if(Rh=it,N$1=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Ph.current=et===null||et.memoizedState===null?Yh:Zh,et=_e(tt,rt),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$2(301));it+=1,P=O=null,_.updateQueue=null,Ph.current=$h,et=_e(tt,rt)}while(Th)}if(Ph.current=ai,_=O!==null&&O.next!==null,Rh=0,P=O=N$1=null,Sh=!1,_)throw Error(p$2(300));return et}function bi(){var et=Uh!==0;return Uh=0,et}function ci(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N$1.memoizedState=P=et:P=P.next=et,P}function di(){if(O===null){var et=N$1.alternate;et=et!==null?et.memoizedState:null}else et=O.next;var _=P===null?N$1.memoizedState:P.next;if(_!==null)P=_,O=et;else{if(et===null)throw Error(p$2(310));O=et,et={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N$1.memoizedState=P=et:P=P.next=et}return P}function ei(et,_){return typeof _=="function"?_(et):_}function fi(et){var _=di(),_e=_.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=et;var tt=O,rt=tt.baseQueue,it=_e.pending;if(it!==null){if(rt!==null){var st=rt.next;rt.next=it.next,it.next=st}tt.baseQueue=rt=it,_e.pending=null}if(rt!==null){it=rt.next,tt=tt.baseState;var At=st=null,ut=null,ct=it;do{var ht=ct.lane;if((Rh&ht)===ht)ut!==null&&(ut=ut.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),tt=ct.hasEagerState?ct.eagerState:et(tt,ct.action);else{var ot={lane:ht,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};ut===null?(At=ut=ot,st=tt):ut=ut.next=ot,N$1.lanes|=ht,hh|=ht}ct=ct.next}while(ct!==null&&ct!==it);ut===null?st=tt:ut.next=At,He(tt,_.memoizedState)||(Ug=!0),_.memoizedState=tt,_.baseState=st,_.baseQueue=ut,_e.lastRenderedState=tt}if(et=_e.interleaved,et!==null){rt=et;do it=rt.lane,N$1.lanes|=it,hh|=it,rt=rt.next;while(rt!==et)}else rt===null&&(_e.lanes=0);return[_.memoizedState,_e.dispatch]}function gi(et){var _=di(),_e=_.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=et;var tt=_e.dispatch,rt=_e.pending,it=_.memoizedState;if(rt!==null){_e.pending=null;var st=rt=rt.next;do it=et(it,st.action),st=st.next;while(st!==rt);He(it,_.memoizedState)||(Ug=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),_e.lastRenderedState=it}return[it,tt]}function hi(){}function ii(et,_){var _e=N$1,tt=di(),rt=_(),it=!He(tt.memoizedState,rt);if(it&&(tt.memoizedState=rt,Ug=!0),tt=tt.queue,ji(ki.bind(null,_e,tt,et),[et]),tt.getSnapshot!==_||it||P!==null&&P.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tt,rt,_),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni(_e,_,rt)}return rt}function ni(et,_,_e){et.flags|=16384,et={getSnapshot:_,value:_e},_=N$1.updateQueue,_===null?(_={lastEffect:null,stores:null},N$1.updateQueue=_,_.stores=[et]):(_e=_.stores,_e===null?_.stores=[et]:_e.push(et))}function mi(et,_,_e,tt){_.value=_e,_.getSnapshot=tt,oi(_)&&pi(et)}function ki(et,_,_e){return _e(function(){oi(_)&&pi(et)})}function oi(et){var _=et.getSnapshot;et=et.value;try{var _e=_();return!He(et,_e)}catch{return!0}}function pi(et){var _=Zg(et,1);_!==null&&mh(_,et,1,-1)}function qi(et){var _=ci();return typeof et=="function"&&(et=et()),_.memoizedState=_.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:et},_.queue=et,et=et.dispatch=ri.bind(null,N$1,et),[_.memoizedState,et]}function li(et,_,_e,tt){return et={tag:et,create:_,destroy:_e,deps:tt,next:null},_=N$1.updateQueue,_===null?(_={lastEffect:null,stores:null},N$1.updateQueue=_,_.lastEffect=et.next=et):(_e=_.lastEffect,_e===null?_.lastEffect=et.next=et:(tt=_e.next,_e.next=et,et.next=tt,_.lastEffect=et)),et}function si(){return di().memoizedState}function ti(et,_,_e,tt){var rt=ci();N$1.flags|=et,rt.memoizedState=li(1|_,_e,void 0,tt===void 0?null:tt)}function ui(et,_,_e,tt){var rt=di();tt=tt===void 0?null:tt;var it=void 0;if(O!==null){var st=O.memoizedState;if(it=st.destroy,tt!==null&&Wh(tt,st.deps)){rt.memoizedState=li(_,_e,it,tt);return}}N$1.flags|=et,rt.memoizedState=li(1|_,_e,it,tt)}function vi(et,_){return ti(8390656,8,et,_)}function ji(et,_){return ui(2048,8,et,_)}function wi(et,_){return ui(4,2,et,_)}function xi(et,_){return ui(4,4,et,_)}function yi(et,_){if(typeof _=="function")return et=et(),_(et),function(){_(null)};if(_!=null)return et=et(),_.current=et,function(){_.current=null}}function zi(et,_,_e){return _e=_e!=null?_e.concat([et]):null,ui(4,4,yi.bind(null,_,et),_e)}function Ai(){}function Bi(et,_){var _e=di();_=_===void 0?null:_;var tt=_e.memoizedState;return tt!==null&&_!==null&&Wh(_,tt[1])?tt[0]:(_e.memoizedState=[et,_],et)}function Ci(et,_){var _e=di();_=_===void 0?null:_;var tt=_e.memoizedState;return tt!==null&&_!==null&&Wh(_,tt[1])?tt[0]:(et=et(),_e.memoizedState=[et,_],et)}function Di(et,_,_e){return Rh&21?(He(_e,_)||(_e=yc(),N$1.lanes|=_e,hh|=_e,et.baseState=!0),_):(et.baseState&&(et.baseState=!1,Ug=!0),et.memoizedState=_e)}function Ei(et,_){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,et(!0);var tt=Qh.transition;Qh.transition={};try{et(!1),_()}finally{C$1=_e,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(et,_,_e){var tt=lh(et);if(_e={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(et))Ii(_,_e);else if(_e=Yg(et,_,_e,tt),_e!==null){var rt=L$2();mh(_e,et,tt,rt),Ji(_e,_,tt)}}function ri(et,_,_e){var tt=lh(et),rt={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(et))Ii(_,rt);else{var it=et.alternate;if(et.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var st=_.lastRenderedState,At=it(st,_e);if(rt.hasEagerState=!0,rt.eagerState=At,He(At,st)){var ut=_.interleaved;ut===null?(rt.next=rt,Xg(_)):(rt.next=ut.next,ut.next=rt),_.interleaved=rt;return}}catch{}finally{}_e=Yg(et,_,rt,tt),_e!==null&&(rt=L$2(),mh(_e,et,tt,rt),Ji(_e,_,tt))}}function Hi(et){var _=et.alternate;return et===N$1||_!==null&&_===N$1}function Ii(et,_){Th=Sh=!0;var _e=et.pending;_e===null?_.next=_:(_.next=_e.next,_e.next=_),et.pending=_}function Ji(et,_,_e){if(_e&4194240){var tt=_.lanes;tt&=et.pendingLanes,_e|=tt,_.lanes=_e,Cc(et,_e)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(et,_){return ci().memoizedState=[et,_===void 0?null:_],et},useContext:Vg,useEffect:vi,useImperativeHandle:function(et,_,_e){return _e=_e!=null?_e.concat([et]):null,ti(4194308,4,yi.bind(null,_,et),_e)},useLayoutEffect:function(et,_){return ti(4194308,4,et,_)},useInsertionEffect:function(et,_){return ti(4,2,et,_)},useMemo:function(et,_){var _e=ci();return _=_===void 0?null:_,et=et(),_e.memoizedState=[et,_],et},useReducer:function(et,_,_e){var tt=ci();return _=_e!==void 0?_e(_):_,tt.memoizedState=tt.baseState=_,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:_},tt.queue=et,et=et.dispatch=Gi.bind(null,N$1,et),[tt.memoizedState,et]},useRef:function(et){var _=ci();return et={current:et},_.memoizedState=et},useState:qi,useDebugValue:Ai,useDeferredValue:function(et){return ci().memoizedState=et},useTransition:function(){var et=qi(!1),_=et[0];return et=Ei.bind(null,et[1]),ci().memoizedState=et,[_,et]},useMutableSource:function(){},useSyncExternalStore:function(et,_,_e){var tt=N$1,rt=ci();if(I$1){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=_(),R===null)throw Error(p$2(349));Rh&30||ni(tt,_,_e)}rt.memoizedState=_e;var it={value:_e,getSnapshot:_};return rt.queue=it,vi(ki.bind(null,tt,it,et),[et]),tt.flags|=2048,li(9,mi.bind(null,tt,it,_e,_),void 0,null),_e},useId:function(){var et=ci(),_=R.identifierPrefix;if(I$1){var _e=sg,tt=rg;_e=(tt&~(1<<32-oc(tt)-1)).toString(32)+_e,_=":"+_+"R"+_e,_e=Uh++,0<_e&&(_+="H"+_e.toString(32)),_+=":"}else _e=Vh++,_=":"+_+"r"+_e.toString(32)+":";return et.memoizedState=_},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _=di();return Di(_,O.memoizedState,et)},useTransition:function(){var et=fi(ei)[0],_=di().memoizedState;return[et,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _=di();return O===null?_.memoizedState=et:Di(_,O.memoizedState,et)},useTransition:function(){var et=gi(ei)[0],_=di().memoizedState;return[et,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(et,_){try{var _e="",tt=_;do _e+=Pa(tt),tt=tt.return;while(tt);var rt=_e}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:et,source:_,stack:rt,digest:null}}function Li(et,_,_e){return{value:et,source:null,stack:_e??null,digest:_??null}}function Mi(et,_){try{console.error(_.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(et,_,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tt=_.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(et,_)},_e}function Ri(et,_,_e){_e=ch(-1,_e),_e.tag=3;var tt=et.type.getDerivedStateFromError;if(typeof tt=="function"){var rt=_.value;_e.payload=function(){return tt(rt)},_e.callback=function(){Mi(et,_)}}var it=et.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(_e.callback=function(){Mi(et,_),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var st=_.stack;this.componentDidCatch(_.value,{componentStack:st!==null?st:""})}),_e}function Ti(et,_,_e){var tt=et.pingCache;if(tt===null){tt=et.pingCache=new Ni;var rt=new Set;tt.set(_,rt)}else rt=tt.get(_),rt===void 0&&(rt=new Set,tt.set(_,rt));rt.has(_e)||(rt.add(_e),et=Ui.bind(null,et,_,_e),_.then(et,et))}function Vi(et){do{var _;if((_=et.tag===13)&&(_=et.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return et;et=et.return}while(et!==null);return null}function Wi(et,_,_e,tt,rt){return et.mode&1?(et.flags|=65536,et.lanes=rt,et):(et===_?et.flags|=65536:(et.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(_=ch(-1,1),_.tag=2,dh(_e,_,1))),_e.lanes|=1),et)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(et,_,_e,tt){_.child=et===null?Ch(_,null,_e,tt):Bh(_,et.child,_e,tt)}function Zi(et,_,_e,tt,rt){_e=_e.render;var it=_.ref;return Tg(_,rt),tt=Xh(et,_,_e,tt,it,rt),_e=bi(),et!==null&&!Ug?(_.updateQueue=et.updateQueue,_.flags&=-2053,et.lanes&=~rt,$i(et,_,rt)):(I$1&&_e&&vg(_),_.flags|=1,Yi(et,_,tt,rt),_.child)}function aj(et,_,_e,tt,rt){if(et===null){var it=_e.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(_.tag=15,_.type=it,cj(et,_,it,tt,rt)):(et=yh(_e.type,null,tt,_,_.mode,rt),et.ref=_.ref,et.return=_,_.child=et)}if(it=et.child,!(et.lanes&rt)){var st=it.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(st,tt)&&et.ref===_.ref)return $i(et,_,rt)}return _.flags|=1,et=wh(it,tt),et.ref=_.ref,et.return=_,_.child=et}function cj(et,_,_e,tt,rt){if(et!==null){var it=et.memoizedProps;if(Ie(it,tt)&&et.ref===_.ref)if(Ug=!1,_.pendingProps=tt=it,(et.lanes&rt)!==0)et.flags&131072&&(Ug=!0);else return _.lanes=et.lanes,$i(et,_,rt)}return dj(et,_,_e,tt,rt)}function ej(et,_,_e){var tt=_.pendingProps,rt=tt.children,it=et!==null?et.memoizedState:null;if(tt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=_e;else{if(!(_e&1073741824))return et=it!==null?it.baseLanes|_e:_e,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:et,cachePool:null,transitions:null},_.updateQueue=null,G(fj,gj),gj|=et,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=it!==null?it.baseLanes:_e,G(fj,gj),gj|=tt}else it!==null?(tt=it.baseLanes|_e,_.memoizedState=null):tt=_e,G(fj,gj),gj|=tt;return Yi(et,_,rt,_e),_.child}function hj(et,_){var _e=_.ref;(et===null&&_e!==null||et!==null&&et.ref!==_e)&&(_.flags|=512,_.flags|=2097152)}function dj(et,_,_e,tt,rt){var it=Zf(_e)?Xf:H$1.current;return it=Yf(_,it),Tg(_,rt),_e=Xh(et,_,_e,tt,it,rt),tt=bi(),et!==null&&!Ug?(_.updateQueue=et.updateQueue,_.flags&=-2053,et.lanes&=~rt,$i(et,_,rt)):(I$1&&tt&&vg(_),_.flags|=1,Yi(et,_,_e,rt),_.child)}function ij(et,_,_e,tt,rt){if(Zf(_e)){var it=!0;cg(_)}else it=!1;if(Tg(_,rt),_.stateNode===null)jj(et,_),ph(_,_e,tt),rh(_,_e,tt,rt),tt=!0;else if(et===null){var st=_.stateNode,At=_.memoizedProps;st.props=At;var ut=st.context,ct=_e.contextType;typeof ct=="object"&&ct!==null?ct=Vg(ct):(ct=Zf(_e)?Xf:H$1.current,ct=Yf(_,ct));var ht=_e.getDerivedStateFromProps,ot=typeof ht=="function"||typeof st.getSnapshotBeforeUpdate=="function";ot||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(At!==tt||ut!==ct)&&qh(_,st,tt,ct),$g=!1;var nt=_.memoizedState;st.state=nt,gh(_,tt,st,rt),ut=_.memoizedState,At!==tt||nt!==ut||Wf.current||$g?(typeof ht=="function"&&(kh(_,_e,ht,tt),ut=_.memoizedState),(At=$g||oh(_,_e,At,tt,nt,ut,ct))?(ot||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(_.flags|=4194308)):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=tt,_.memoizedState=ut),st.props=tt,st.state=ut,st.context=ct,tt=At):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),tt=!1)}else{st=_.stateNode,bh(et,_),At=_.memoizedProps,ct=_.type===_.elementType?At:Lg(_.type,At),st.props=ct,ot=_.pendingProps,nt=st.context,ut=_e.contextType,typeof ut=="object"&&ut!==null?ut=Vg(ut):(ut=Zf(_e)?Xf:H$1.current,ut=Yf(_,ut));var at=_e.getDerivedStateFromProps;(ht=typeof at=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(At!==ot||nt!==ut)&&qh(_,st,tt,ut),$g=!1,nt=_.memoizedState,st.state=nt,gh(_,tt,st,rt);var lt=_.memoizedState;At!==ot||nt!==lt||Wf.current||$g?(typeof at=="function"&&(kh(_,_e,at,tt),lt=_.memoizedState),(ct=$g||oh(_,_e,ct,tt,nt,lt,ut)||!1)?(ht||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(tt,lt,ut),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(tt,lt,ut)),typeof st.componentDidUpdate=="function"&&(_.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof st.componentDidUpdate!="function"||At===et.memoizedProps&&nt===et.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||At===et.memoizedProps&&nt===et.memoizedState||(_.flags|=1024),_.memoizedProps=tt,_.memoizedState=lt),st.props=tt,st.state=lt,st.context=ut,tt=ct):(typeof st.componentDidUpdate!="function"||At===et.memoizedProps&&nt===et.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||At===et.memoizedProps&&nt===et.memoizedState||(_.flags|=1024),tt=!1)}return kj(et,_,_e,tt,it,rt)}function kj(et,_,_e,tt,rt,it){hj(et,_);var st=(_.flags&128)!==0;if(!tt&&!st)return rt&&dg(_,_e,!1),$i(et,_,it);tt=_.stateNode,Xi.current=_;var At=st&&typeof _e.getDerivedStateFromError!="function"?null:tt.render();return _.flags|=1,et!==null&&st?(_.child=Bh(_,et.child,null,it),_.child=Bh(_,null,At,it)):Yi(et,_,At,it),_.memoizedState=tt.state,rt&&dg(_,_e,!0),_.child}function lj(et){var _=et.stateNode;_.pendingContext?ag(et,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(et,_.context,!1),Ih(et,_.containerInfo)}function mj(et,_,_e,tt,rt){return Ig(),Jg(rt),_.flags|=256,Yi(et,_,_e,tt),_.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(et){return{baseLanes:et,cachePool:null,transitions:null}}function pj(et,_,_e){var tt=_.pendingProps,rt=M$1.current,it=!1,st=(_.flags&128)!==0,At;if((At=st)||(At=et!==null&&et.memoizedState===null?!1:(rt&2)!==0),At?(it=!0,_.flags&=-129):(et===null||et.memoizedState!==null)&&(rt|=1),G(M$1,rt&1),et===null)return Eg(_),et=_.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(_.mode&1?et.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(st=tt.children,et=tt.fallback,it?(tt=_.mode,it=_.child,st={mode:"hidden",children:st},!(tt&1)&&it!==null?(it.childLanes=0,it.pendingProps=st):it=qj(st,tt,0,null),et=Ah(et,tt,_e,null),it.return=_,et.return=_,it.sibling=et,_.child=it,_.child.memoizedState=oj(_e),_.memoizedState=nj,et):rj(_,st));if(rt=et.memoizedState,rt!==null&&(At=rt.dehydrated,At!==null))return sj(et,_,st,tt,At,rt,_e);if(it){it=tt.fallback,st=_.mode,rt=et.child,At=rt.sibling;var ut={mode:"hidden",children:tt.children};return!(st&1)&&_.child!==rt?(tt=_.child,tt.childLanes=0,tt.pendingProps=ut,_.deletions=null):(tt=wh(rt,ut),tt.subtreeFlags=rt.subtreeFlags&14680064),At!==null?it=wh(At,it):(it=Ah(it,st,_e,null),it.flags|=2),it.return=_,tt.return=_,tt.sibling=it,_.child=tt,tt=it,it=_.child,st=et.child.memoizedState,st=st===null?oj(_e):{baseLanes:st.baseLanes|_e,cachePool:null,transitions:st.transitions},it.memoizedState=st,it.childLanes=et.childLanes&~_e,_.memoizedState=nj,tt}return it=et.child,et=it.sibling,tt=wh(it,{mode:"visible",children:tt.children}),!(_.mode&1)&&(tt.lanes=_e),tt.return=_,tt.sibling=null,et!==null&&(_e=_.deletions,_e===null?(_.deletions=[et],_.flags|=16):_e.push(et)),_.child=tt,_.memoizedState=null,tt}function rj(et,_){return _=qj({mode:"visible",children:_},et.mode,0,null),_.return=et,et.child=_}function tj(et,_,_e,tt){return tt!==null&&Jg(tt),Bh(_,et.child,null,_e),et=rj(_,_.pendingProps.children),et.flags|=2,_.memoizedState=null,et}function sj(et,_,_e,tt,rt,it,st){if(_e)return _.flags&256?(_.flags&=-257,tt=Li(Error(p$2(422))),tj(et,_,st,tt)):_.memoizedState!==null?(_.child=et.child,_.flags|=128,null):(it=tt.fallback,rt=_.mode,tt=qj({mode:"visible",children:tt.children},rt,0,null),it=Ah(it,rt,st,null),it.flags|=2,tt.return=_,it.return=_,tt.sibling=it,_.child=tt,_.mode&1&&Bh(_,et.child,null,st),_.child.memoizedState=oj(st),_.memoizedState=nj,it);if(!(_.mode&1))return tj(et,_,st,null);if(rt.data==="$!"){if(tt=rt.nextSibling&&rt.nextSibling.dataset,tt)var At=tt.dgst;return tt=At,it=Error(p$2(419)),tt=Li(it,tt,void 0),tj(et,_,st,tt)}if(At=(st&et.childLanes)!==0,Ug||At){if(tt=R,tt!==null){switch(st&-st){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(tt.suspendedLanes|st)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,Zg(et,rt),mh(tt,et,rt,-1))}return uj(),tt=Li(Error(p$2(421))),tj(et,_,st,tt)}return rt.data==="$?"?(_.flags|=128,_.child=et.child,_=vj.bind(null,et),rt._reactRetry=_,null):(et=it.treeContext,yg=Lf(rt.nextSibling),xg=_,I$1=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=_),_=rj(_,tt.children),_.flags|=4096,_)}function wj(et,_,_e){et.lanes|=_;var tt=et.alternate;tt!==null&&(tt.lanes|=_),Sg(et.return,_,_e)}function xj(et,_,_e,tt,rt){var it=et.memoizedState;it===null?et.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:tt,tail:_e,tailMode:rt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=tt,it.tail=_e,it.tailMode=rt)}function yj(et,_,_e){var tt=_.pendingProps,rt=tt.revealOrder,it=tt.tail;if(Yi(et,_,tt.children,_e),tt=M$1.current,tt&2)tt=tt&1|2,_.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=_.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&wj(et,_e,_);else if(et.tag===19)wj(et,_e,_);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break e;for(;et.sibling===null;){if(et.return===null||et.return===_)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}tt&=1}if(G(M$1,tt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(_e=_.child,rt=null;_e!==null;)et=_e.alternate,et!==null&&Mh(et)===null&&(rt=_e),_e=_e.sibling;_e=rt,_e===null?(rt=_.child,_.child=null):(rt=_e.sibling,_e.sibling=null),xj(_,!1,rt,_e,it);break;case"backwards":for(_e=null,rt=_.child,_.child=null;rt!==null;){if(et=rt.alternate,et!==null&&Mh(et)===null){_.child=rt;break}et=rt.sibling,rt.sibling=_e,_e=rt,rt=et}xj(_,!0,_e,null,it);break;case"together":xj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function jj(et,_){!(_.mode&1)&&et!==null&&(et.alternate=null,_.alternate=null,_.flags|=2)}function $i(et,_,_e){if(et!==null&&(_.dependencies=et.dependencies),hh|=_.lanes,!(_e&_.childLanes))return null;if(et!==null&&_.child!==et.child)throw Error(p$2(153));if(_.child!==null){for(et=_.child,_e=wh(et,et.pendingProps),_.child=_e,_e.return=_;et.sibling!==null;)et=et.sibling,_e=_e.sibling=wh(et,et.pendingProps),_e.return=_;_e.sibling=null}return _.child}function zj(et,_,_e){switch(_.tag){case 3:lj(_),Ig();break;case 5:Kh(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:Ih(_,_.stateNode.containerInfo);break;case 10:var tt=_.type._context,rt=_.memoizedProps.value;G(Mg,tt._currentValue),tt._currentValue=rt;break;case 13:if(tt=_.memoizedState,tt!==null)return tt.dehydrated!==null?(G(M$1,M$1.current&1),_.flags|=128,null):_e&_.child.childLanes?pj(et,_,_e):(G(M$1,M$1.current&1),et=$i(et,_,_e),et!==null?et.sibling:null);G(M$1,M$1.current&1);break;case 19:if(tt=(_e&_.childLanes)!==0,et.flags&128){if(tt)return yj(et,_,_e);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G(M$1,M$1.current),tt)break;return null;case 22:case 23:return _.lanes=0,ej(et,_,_e)}return $i(et,_,_e)}var Aj,Bj,Cj,Dj;Aj=function(et,_){for(var _e=_.child;_e!==null;){if(_e.tag===5||_e.tag===6)et.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(et,_,_e,tt){var rt=et.memoizedProps;if(rt!==tt){et=_.stateNode,Hh(Eh.current);var it=null;switch(_e){case"input":rt=Ya(et,rt),tt=Ya(et,tt),it=[];break;case"select":rt=A$1({},rt,{value:void 0}),tt=A$1({},tt,{value:void 0}),it=[];break;case"textarea":rt=gb(et,rt),tt=gb(et,tt),it=[];break;default:typeof rt.onClick!="function"&&typeof tt.onClick=="function"&&(et.onclick=Bf)}ub(_e,tt);var st;_e=null;for(ct in rt)if(!tt.hasOwnProperty(ct)&&rt.hasOwnProperty(ct)&&rt[ct]!=null)if(ct==="style"){var At=rt[ct];for(st in At)At.hasOwnProperty(st)&&(_e||(_e={}),_e[st]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?it||(it=[]):(it=it||[]).push(ct,null));for(ct in tt){var ut=tt[ct];if(At=rt!=null?rt[ct]:void 0,tt.hasOwnProperty(ct)&&ut!==At&&(ut!=null||At!=null))if(ct==="style")if(At){for(st in At)!At.hasOwnProperty(st)||ut&&ut.hasOwnProperty(st)||(_e||(_e={}),_e[st]="");for(st in ut)ut.hasOwnProperty(st)&&At[st]!==ut[st]&&(_e||(_e={}),_e[st]=ut[st])}else _e||(it||(it=[]),it.push(ct,_e)),_e=ut;else ct==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,At=At?At.__html:void 0,ut!=null&&At!==ut&&(it=it||[]).push(ct,ut)):ct==="children"?typeof ut!="string"&&typeof ut!="number"||(it=it||[]).push(ct,""+ut):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ct)?(ut!=null&&ct==="onScroll"&&D$1("scroll",et),it||At===ut||(it=[])):(it=it||[]).push(ct,ut))}_e&&(it=it||[]).push("style",_e);var ct=it;(_.updateQueue=ct)&&(_.flags|=4)}};Dj=function(et,_,_e,tt){_e!==tt&&(_.flags|=4)};function Ej(et,_){if(!I$1)switch(et.tailMode){case"hidden":_=et.tail;for(var _e=null;_!==null;)_.alternate!==null&&(_e=_),_=_.sibling;_e===null?et.tail=null:_e.sibling=null;break;case"collapsed":_e=et.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?_||et.tail===null?et.tail=null:et.tail.sibling=null:tt.sibling=null}}function S$2(et){var _=et.alternate!==null&&et.alternate.child===et.child,_e=0,tt=0;if(_)for(var rt=et.child;rt!==null;)_e|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags&14680064,tt|=rt.flags&14680064,rt.return=et,rt=rt.sibling;else for(rt=et.child;rt!==null;)_e|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags,tt|=rt.flags,rt.return=et,rt=rt.sibling;return et.subtreeFlags|=tt,et.childLanes=_e,_}function Fj(et,_,_e){var tt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(_),null;case 1:return Zf(_.type)&&$f(),S$2(_),null;case 3:return tt=_.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(et===null||et.child===null)&&(Gg(_)?_.flags|=4:et===null||et.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(et,_),S$2(_),null;case 5:Lh(_);var rt=Hh(Gh.current);if(_e=_.type,et!==null&&_.stateNode!=null)Cj(et,_,_e,tt,rt),et.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!tt){if(_.stateNode===null)throw Error(p$2(166));return S$2(_),null}if(et=Hh(Eh.current),Gg(_)){tt=_.stateNode,_e=_.type;var it=_.memoizedProps;switch(tt[Of]=_,tt[Pf]=it,et=(_.mode&1)!==0,_e){case"dialog":D$1("cancel",tt),D$1("close",tt);break;case"iframe":case"object":case"embed":D$1("load",tt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],tt);break;case"source":D$1("error",tt);break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt);break;case"details":D$1("toggle",tt);break;case"input":Za(tt,it),D$1("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!it.multiple},D$1("invalid",tt);break;case"textarea":hb(tt,it),D$1("invalid",tt)}ub(_e,it),rt=null;for(var st in it)if(it.hasOwnProperty(st)){var At=it[st];st==="children"?typeof At=="string"?tt.textContent!==At&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,At,et),rt=["children",At]):typeof At=="number"&&tt.textContent!==""+At&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,At,et),rt=["children",""+At]):ea.hasOwnProperty(st)&&At!=null&&st==="onScroll"&&D$1("scroll",tt)}switch(_e){case"input":Va(tt),db(tt,it,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(tt.onclick=Bf)}tt=rt,_.updateQueue=tt,tt!==null&&(_.flags|=4)}else{st=rt.nodeType===9?rt:rt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(_e)),et==="http://www.w3.org/1999/xhtml"?_e==="script"?(et=st.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof tt.is=="string"?et=st.createElement(_e,{is:tt.is}):(et=st.createElement(_e),_e==="select"&&(st=et,tt.multiple?st.multiple=!0:tt.size&&(st.size=tt.size))):et=st.createElementNS(et,_e),et[Of]=_,et[Pf]=tt,Aj(et,_,!1,!1),_.stateNode=et;e:{switch(st=vb(_e,tt),_e){case"dialog":D$1("cancel",et),D$1("close",et),rt=tt;break;case"iframe":case"object":case"embed":D$1("load",et),rt=tt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],et);rt=tt;break;case"source":D$1("error",et),rt=tt;break;case"img":case"image":case"link":D$1("error",et),D$1("load",et),rt=tt;break;case"details":D$1("toggle",et),rt=tt;break;case"input":Za(et,tt),rt=Ya(et,tt),D$1("invalid",et);break;case"option":rt=tt;break;case"select":et._wrapperState={wasMultiple:!!tt.multiple},rt=A$1({},tt,{value:void 0}),D$1("invalid",et);break;case"textarea":hb(et,tt),rt=gb(et,tt),D$1("invalid",et);break;default:rt=tt}ub(_e,rt),At=rt;for(it in At)if(At.hasOwnProperty(it)){var ut=At[it];it==="style"?sb(et,ut):it==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,ut!=null&&nb(et,ut)):it==="children"?typeof ut=="string"?(_e!=="textarea"||ut!=="")&&ob(et,ut):typeof ut=="number"&&ob(et,""+ut):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?ut!=null&&it==="onScroll"&&D$1("scroll",et):ut!=null&&ta(et,it,ut,st))}switch(_e){case"input":Va(et),db(et,tt,!1);break;case"textarea":Va(et),jb(et);break;case"option":tt.value!=null&&et.setAttribute("value",""+Sa(tt.value));break;case"select":et.multiple=!!tt.multiple,it=tt.value,it!=null?fb(et,!!tt.multiple,it,!1):tt.defaultValue!=null&&fb(et,!!tt.multiple,tt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(et.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$2(_),null;case 6:if(et&&_.stateNode!=null)Dj(et,_,et.memoizedProps,tt);else{if(typeof tt!="string"&&_.stateNode===null)throw Error(p$2(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(_)){if(tt=_.stateNode,_e=_.memoizedProps,tt[Of]=_,(it=tt.nodeValue!==_e)&&(et=xg,et!==null))switch(et.tag){case 3:Af(tt.nodeValue,_e,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,_e,(et.mode&1)!==0)}it&&(_.flags|=4)}else tt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tt),tt[Of]=_,_.stateNode=tt}return S$2(_),null;case 13:if(E$1(M$1),tt=_.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),tt!==null&&tt.dehydrated!==null){if(et===null){if(!it)throw Error(p$2(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$2(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$2(_),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=_e,_):(tt=tt!==null,tt!==(et!==null&&et.memoizedState!==null)&&tt&&(_.child.flags|=8192,_.mode&1&&(et===null||M$1.current&1?T$2===0&&(T$2=3):uj())),_.updateQueue!==null&&(_.flags|=4),S$2(_),null);case 4:return Jh(),Bj(et,_),et===null&&sf(_.stateNode.containerInfo),S$2(_),null;case 10:return Rg(_.type._context),S$2(_),null;case 17:return Zf(_.type)&&$f(),S$2(_),null;case 19:if(E$1(M$1),it=_.memoizedState,it===null)return S$2(_),null;if(tt=(_.flags&128)!==0,st=it.rendering,st===null)if(tt)Ej(it,!1);else{if(T$2!==0||et!==null&&et.flags&128)for(et=_.child;et!==null;){if(st=Mh(et),st!==null){for(_.flags|=128,Ej(it,!1),tt=st.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),_.subtreeFlags=0,tt=_e,_e=_.child;_e!==null;)it=_e,et=tt,it.flags&=14680066,st=it.alternate,st===null?(it.childLanes=0,it.lanes=et,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=st.childLanes,it.lanes=st.lanes,it.child=st.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=st.memoizedProps,it.memoizedState=st.memoizedState,it.updateQueue=st.updateQueue,it.type=st.type,et=st.dependencies,it.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),_e=_e.sibling;return G(M$1,M$1.current&1|2),_.child}et=et.sibling}it.tail!==null&&B()>Hj&&(_.flags|=128,tt=!0,Ej(it,!1),_.lanes=4194304)}else{if(!tt)if(et=Mh(st),et!==null){if(_.flags|=128,tt=!0,_e=et.updateQueue,_e!==null&&(_.updateQueue=_e,_.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!st.alternate&&!I$1)return S$2(_),null}else 2*B()-it.renderingStartTime>Hj&&_e!==1073741824&&(_.flags|=128,tt=!0,Ej(it,!1),_.lanes=4194304);it.isBackwards?(st.sibling=_.child,_.child=st):(_e=it.last,_e!==null?_e.sibling=st:_.child=st,it.last=st)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B(),_.sibling=null,_e=M$1.current,G(M$1,tt?_e&1|2:_e&1),_):(S$2(_),null);case 22:case 23:return Ij(),tt=_.memoizedState!==null,et!==null&&et.memoizedState!==null!==tt&&(_.flags|=8192),tt&&_.mode&1?gj&1073741824&&(S$2(_),_.subtreeFlags&6&&(_.flags|=8192)):S$2(_),null;case 24:return null;case 25:return null}throw Error(p$2(156,_.tag))}function Jj(et,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),et=_.flags,et&65536?(_.flags=et&-65537|128,_):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),et=_.flags,et&65536&&!(et&128)?(_.flags=et&-65537|128,_):null;case 5:return Lh(_),null;case 13:if(E$1(M$1),et=_.memoizedState,et!==null&&et.dehydrated!==null){if(_.alternate===null)throw Error(p$2(340));Ig()}return et=_.flags,et&65536?(_.flags=et&-65537|128,_):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(_.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(et,_){var _e=et.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tt){W$1(et,_,tt)}else _e.current=null}function Nj(et,_,_e){try{_e()}catch(tt){W$1(et,_,tt)}}var Oj=!1;function Pj(et,_){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var _e={start:et.selectionStart,end:et.selectionEnd};else e:{_e=(_e=et.ownerDocument)&&_e.defaultView||window;var tt=_e.getSelection&&_e.getSelection();if(tt&&tt.rangeCount!==0){_e=tt.anchorNode;var rt=tt.anchorOffset,it=tt.focusNode;tt=tt.focusOffset;try{_e.nodeType,it.nodeType}catch{_e=null;break e}var st=0,At=-1,ut=-1,ct=0,ht=0,ot=et,nt=null;t:for(;;){for(var at;ot!==_e||rt!==0&&ot.nodeType!==3||(At=st+rt),ot!==it||tt!==0&&ot.nodeType!==3||(ut=st+tt),ot.nodeType===3&&(st+=ot.nodeValue.length),(at=ot.firstChild)!==null;)nt=ot,ot=at;for(;;){if(ot===et)break t;if(nt===_e&&++ct===rt&&(At=st),nt===it&&++ht===tt&&(ut=st),(at=ot.nextSibling)!==null)break;ot=nt,nt=ot.parentNode}ot=at}_e=At===-1||ut===-1?null:{start:At,end:ut}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:et,selectionRange:_e},dd=!1,V$2=_;V$2!==null;)if(_=V$2,et=_.child,(_.subtreeFlags&1028)!==0&&et!==null)et.return=_,V$2=et;else for(;V$2!==null;){_=V$2;try{var lt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var dt=lt.memoizedProps,ft=lt.memoizedState,pt=_.stateNode,gt=pt.getSnapshotBeforeUpdate(_.elementType===_.type?dt:Lg(_.type,dt),ft);pt.__reactInternalSnapshotBeforeUpdate=gt}break;case 3:var mt=_.stateNode.containerInfo;mt.nodeType===1?mt.textContent="":mt.nodeType===9&&mt.documentElement&&mt.removeChild(mt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(yt){W$1(_,_.return,yt)}if(et=_.sibling,et!==null){et.return=_.return,V$2=et;break}V$2=_.return}return lt=Oj,Oj=!1,lt}function Qj(et,_,_e){var tt=_.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var rt=tt=tt.next;do{if((rt.tag&et)===et){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Nj(_,_e,it)}rt=rt.next}while(rt!==tt)}}function Rj(et,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var _e=_=_.next;do{if((_e.tag&et)===et){var tt=_e.create;_e.destroy=tt()}_e=_e.next}while(_e!==_)}}function Sj(et){var _=et.ref;if(_!==null){var _e=et.stateNode;switch(et.tag){case 5:et=_e;break;default:et=_e}typeof _=="function"?_(et):_.current=et}}function Tj(et){var _=et.alternate;_!==null&&(et.alternate=null,Tj(_)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(_=et.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Uj(et){return et.tag===5||et.tag===3||et.tag===4}function Vj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Uj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Wj(et,_,_e){var tt=et.tag;if(tt===5||tt===6)et=et.stateNode,_?_e.nodeType===8?_e.parentNode.insertBefore(et,_):_e.insertBefore(et,_):(_e.nodeType===8?(_=_e.parentNode,_.insertBefore(et,_e)):(_=_e,_.appendChild(et)),_e=_e._reactRootContainer,_e!=null||_.onclick!==null||(_.onclick=Bf));else if(tt!==4&&(et=et.child,et!==null))for(Wj(et,_,_e),et=et.sibling;et!==null;)Wj(et,_,_e),et=et.sibling}function Xj(et,_,_e){var tt=et.tag;if(tt===5||tt===6)et=et.stateNode,_?_e.insertBefore(et,_):_e.appendChild(et);else if(tt!==4&&(et=et.child,et!==null))for(Xj(et,_,_e),et=et.sibling;et!==null;)Xj(et,_,_e),et=et.sibling}var X$1=null,Yj=!1;function Zj(et,_,_e){for(_e=_e.child;_e!==null;)ak(et,_,_e),_e=_e.sibling}function ak(et,_,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$2||Mj(_e,_);case 6:var tt=X$1,rt=Yj;X$1=null,Zj(et,_,_e),X$1=tt,Yj=rt,X$1!==null&&(Yj?(et=X$1,_e=_e.stateNode,et.nodeType===8?et.parentNode.removeChild(_e):et.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(et=X$1,_e=_e.stateNode,et.nodeType===8?Kf(et.parentNode,_e):et.nodeType===1&&Kf(et,_e),bd(et)):Kf(X$1,_e.stateNode));break;case 4:tt=X$1,rt=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(et,_,_e),X$1=tt,Yj=rt;break;case 0:case 11:case 14:case 15:if(!U$2&&(tt=_e.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){rt=tt=tt.next;do{var it=rt,st=it.destroy;it=it.tag,st!==void 0&&(it&2||it&4)&&Nj(_e,_,st),rt=rt.next}while(rt!==tt)}Zj(et,_,_e);break;case 1:if(!U$2&&(Mj(_e,_),tt=_e.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=_e.memoizedProps,tt.state=_e.memoizedState,tt.componentWillUnmount()}catch(At){W$1(_e,_,At)}Zj(et,_,_e);break;case 21:Zj(et,_,_e);break;case 22:_e.mode&1?(U$2=(tt=U$2)||_e.memoizedState!==null,Zj(et,_,_e),U$2=tt):Zj(et,_,_e);break;default:Zj(et,_,_e)}}function bk(et){var _=et.updateQueue;if(_!==null){et.updateQueue=null;var _e=et.stateNode;_e===null&&(_e=et.stateNode=new Lj),_.forEach(function(tt){var rt=ck.bind(null,et,tt);_e.has(tt)||(_e.add(tt),tt.then(rt,rt))})}}function dk(et,_){var _e=_.deletions;if(_e!==null)for(var tt=0;tt<_e.length;tt++){var rt=_e[tt];try{var it=et,st=_,At=st;e:for(;At!==null;){switch(At.tag){case 5:X$1=At.stateNode,Yj=!1;break e;case 3:X$1=At.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=At.stateNode.containerInfo,Yj=!0;break e}At=At.return}if(X$1===null)throw Error(p$2(160));ak(it,st,rt),X$1=null,Yj=!1;var ut=rt.alternate;ut!==null&&(ut.return=null),rt.return=null}catch(ct){W$1(rt,_,ct)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ek(_,et),_=_.sibling}function ek(et,_){var _e=et.alternate,tt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(dk(_,et),fk(et),tt&4){try{Qj(3,et,et.return),Rj(3,et)}catch(dt){W$1(et,et.return,dt)}try{Qj(5,et,et.return)}catch(dt){W$1(et,et.return,dt)}}break;case 1:dk(_,et),fk(et),tt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(_,et),fk(et),tt&512&&_e!==null&&Mj(_e,_e.return),et.flags&32){var rt=et.stateNode;try{ob(rt,"")}catch(dt){W$1(et,et.return,dt)}}if(tt&4&&(rt=et.stateNode,rt!=null)){var it=et.memoizedProps,st=_e!==null?_e.memoizedProps:it,At=et.type,ut=et.updateQueue;if(et.updateQueue=null,ut!==null)try{At==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(At,st);var ct=vb(At,it);for(st=0;st<ut.length;st+=2){var ht=ut[st],ot=ut[st+1];ht==="style"?sb(rt,ot):ht==="dangerouslySetInnerHTML"?nb(rt,ot):ht==="children"?ob(rt,ot):ta(rt,ht,ot,ct)}switch(At){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var nt=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var at=it.value;at!=null?fb(rt,!!it.multiple,at,!1):nt!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(dt){W$1(et,et.return,dt)}}break;case 6:if(dk(_,et),fk(et),tt&4){if(et.stateNode===null)throw Error(p$2(162));rt=et.stateNode,it=et.memoizedProps;try{rt.nodeValue=it}catch(dt){W$1(et,et.return,dt)}}break;case 3:if(dk(_,et),fk(et),tt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(dt){W$1(et,et.return,dt)}break;case 4:dk(_,et),fk(et);break;case 13:dk(_,et),fk(et),rt=et.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(gk=B())),tt&4&&bk(et);break;case 22:if(ht=_e!==null&&_e.memoizedState!==null,et.mode&1?(U$2=(ct=U$2)||ht,dk(_,et),U$2=ct):dk(_,et),fk(et),tt&8192){if(ct=et.memoizedState!==null,(et.stateNode.isHidden=ct)&&!ht&&et.mode&1)for(V$2=et,ht=et.child;ht!==null;){for(ot=V$2=ht;V$2!==null;){switch(nt=V$2,at=nt.child,nt.tag){case 0:case 11:case 14:case 15:Qj(4,nt,nt.return);break;case 1:Mj(nt,nt.return);var lt=nt.stateNode;if(typeof lt.componentWillUnmount=="function"){tt=nt,_e=nt.return;try{_=tt,lt.props=_.memoizedProps,lt.state=_.memoizedState,lt.componentWillUnmount()}catch(dt){W$1(tt,_e,dt)}}break;case 5:Mj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){hk(ot);continue}}at!==null?(at.return=nt,V$2=at):hk(ot)}ht=ht.sibling}e:for(ht=null,ot=et;;){if(ot.tag===5){if(ht===null){ht=ot;try{rt=ot.stateNode,ct?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(At=ot.stateNode,ut=ot.memoizedProps.style,st=ut!=null&&ut.hasOwnProperty("display")?ut.display:null,At.style.display=rb("display",st))}catch(dt){W$1(et,et.return,dt)}}}else if(ot.tag===6){if(ht===null)try{ot.stateNode.nodeValue=ct?"":ot.memoizedProps}catch(dt){W$1(et,et.return,dt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===et)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===et)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===et)break e;ht===ot&&(ht=null),ot=ot.return}ht===ot&&(ht=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:dk(_,et),fk(et),tt&4&&bk(et);break;case 21:break;default:dk(_,et),fk(et)}}function fk(et){var _=et.flags;if(_&2){try{e:{for(var _e=et.return;_e!==null;){if(Uj(_e)){var tt=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(tt.tag){case 5:var rt=tt.stateNode;tt.flags&32&&(ob(rt,""),tt.flags&=-33);var it=Vj(et);Xj(et,it,rt);break;case 3:case 4:var st=tt.stateNode.containerInfo,At=Vj(et);Wj(et,At,st);break;default:throw Error(p$2(161))}}catch(ut){W$1(et,et.return,ut)}et.flags&=-3}_&4096&&(et.flags&=-4097)}function ik(et,_,_e){V$2=et,jk(et)}function jk(et,_,_e){for(var tt=(et.mode&1)!==0;V$2!==null;){var rt=V$2,it=rt.child;if(rt.tag===22&&tt){var st=rt.memoizedState!==null||Kj;if(!st){var At=rt.alternate,ut=At!==null&&At.memoizedState!==null||U$2;At=Kj;var ct=U$2;if(Kj=st,(U$2=ut)&&!ct)for(V$2=rt;V$2!==null;)st=V$2,ut=st.child,st.tag===22&&st.memoizedState!==null?kk(rt):ut!==null?(ut.return=st,V$2=ut):kk(rt);for(;it!==null;)V$2=it,jk(it),it=it.sibling;V$2=rt,Kj=At,U$2=ct}lk(et)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V$2=it):lk(et)}}function lk(et){for(;V$2!==null;){var _=V$2;if(_.flags&8772){var _e=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U$2||Rj(5,_);break;case 1:var tt=_.stateNode;if(_.flags&4&&!U$2)if(_e===null)tt.componentDidMount();else{var rt=_.elementType===_.type?_e.memoizedProps:Lg(_.type,_e.memoizedProps);tt.componentDidUpdate(rt,_e.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&ih(_,it,tt);break;case 3:var st=_.updateQueue;if(st!==null){if(_e=null,_.child!==null)switch(_.child.tag){case 5:_e=_.child.stateNode;break;case 1:_e=_.child.stateNode}ih(_,st,_e)}break;case 5:var At=_.stateNode;if(_e===null&&_.flags&4){_e=At;var ut=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":ut.autoFocus&&_e.focus();break;case"img":ut.src&&(_e.src=ut.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var ct=_.alternate;if(ct!==null){var ht=ct.memoizedState;if(ht!==null){var ot=ht.dehydrated;ot!==null&&bd(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||_.flags&512&&Sj(_)}catch(nt){W$1(_,_.return,nt)}}if(_===et){V$2=null;break}if(_e=_.sibling,_e!==null){_e.return=_.return,V$2=_e;break}V$2=_.return}}function hk(et){for(;V$2!==null;){var _=V$2;if(_===et){V$2=null;break}var _e=_.sibling;if(_e!==null){_e.return=_.return,V$2=_e;break}V$2=_.return}}function kk(et){for(;V$2!==null;){var _=V$2;try{switch(_.tag){case 0:case 11:case 15:var _e=_.return;try{Rj(4,_)}catch(ut){W$1(_,_e,ut)}break;case 1:var tt=_.stateNode;if(typeof tt.componentDidMount=="function"){var rt=_.return;try{tt.componentDidMount()}catch(ut){W$1(_,rt,ut)}}var it=_.return;try{Sj(_)}catch(ut){W$1(_,it,ut)}break;case 5:var st=_.return;try{Sj(_)}catch(ut){W$1(_,st,ut)}}}catch(ut){W$1(_,_.return,ut)}if(_===et){V$2=null;break}var At=_.sibling;if(At!==null){At.return=_.return,V$2=At;break}V$2=_.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R=null,Y$1=null,Z$2=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$1&6?B():Bk!==-1?Bk:Bk=B()}function lh(et){return et.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(et=C$1,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function mh(et,_,_e,tt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(et,_e,tt),(!(K$1&2)||et!==R)&&(et===R&&(!(K$1&2)&&(rk|=_e),T$2===4&&Dk(et,Z$2)),Ek(et,tt),_e===1&&K$1===0&&!(_.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(et,_){var _e=et.callbackNode;wc(et,_);var tt=uc(et,et===R?Z$2:0);if(tt===0)_e!==null&&bc(_e),et.callbackNode=null,et.callbackPriority=0;else if(_=tt&-tt,et.callbackPriority!==_){if(_e!=null&&bc(_e),_===1)et.tag===0?ig(Fk.bind(null,et)):hg(Fk.bind(null,et)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(tt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,et))}et.callbackPriority=_,et.callbackNode=_e}}function Hk(et,_){if(Bk=-1,Ck=0,K$1&6)throw Error(p$2(327));var _e=et.callbackNode;if(Ik()&&et.callbackNode!==_e)return null;var tt=uc(et,et===R?Z$2:0);if(tt===0)return null;if(tt&30||tt&et.expiredLanes||_)_=Jk(et,tt);else{_=tt;var rt=K$1;K$1|=2;var it=Kk();(R!==et||Z$2!==_)&&(vk=null,Hj=B()+500,Lk(et,_));do try{Mk();break}catch(At){Nk(et,At)}while(!0);Qg(),nk.current=it,K$1=rt,Y$1!==null?_=0:(R=null,Z$2=0,_=T$2)}if(_!==0){if(_===2&&(rt=xc(et),rt!==0&&(tt=rt,_=Ok(et,rt))),_===1)throw _e=qk,Lk(et,0),Dk(et,tt),Ek(et,B()),_e;if(_===6)Dk(et,tt);else{if(rt=et.current.alternate,!(tt&30)&&!Pk(rt)&&(_=Jk(et,tt),_===2&&(it=xc(et),it!==0&&(tt=it,_=Ok(et,it))),_===1))throw _e=qk,Lk(et,0),Dk(et,tt),Ek(et,B()),_e;switch(et.finishedWork=rt,et.finishedLanes=tt,_){case 0:case 1:throw Error(p$2(345));case 2:Qk(et,uk,vk);break;case 3:if(Dk(et,tt),(tt&130023424)===tt&&(_=gk+500-B(),10<_)){if(uc(et,0)!==0)break;if(rt=et.suspendedLanes,(rt&tt)!==tt){L$2(),et.pingedLanes|=et.suspendedLanes&rt;break}et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),_);break}Qk(et,uk,vk);break;case 4:if(Dk(et,tt),(tt&4194240)===tt)break;for(_=et.eventTimes,rt=-1;0<tt;){var st=31-oc(tt);it=1<<st,st=_[st],st>rt&&(rt=st),tt&=~it}if(tt=rt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),tt);break}Qk(et,uk,vk);break;case 5:Qk(et,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(et,B()),et.callbackNode===_e?Hk.bind(null,et):null}function Ok(et,_){var _e=tk;return et.current.memoizedState.isDehydrated&&(Lk(et,_).flags|=256),et=Jk(et,_),et!==2&&(_=uk,uk=_e,_!==null&&Gj(_)),et}function Gj(et){uk===null?uk=et:uk.push.apply(uk,et)}function Pk(et){for(var _=et;;){if(_.flags&16384){var _e=_.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tt=0;tt<_e.length;tt++){var rt=_e[tt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(_e=_.child,_.subtreeFlags&16384&&_e!==null)_e.return=_,_=_e;else{if(_===et)break;for(;_.sibling===null;){if(_.return===null||_.return===et)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Dk(et,_){for(_&=~sk,_&=~rk,et.suspendedLanes|=_,et.pingedLanes&=~_,et=et.expirationTimes;0<_;){var _e=31-oc(_),tt=1<<_e;et[_e]=-1,_&=~tt}}function Fk(et){if(K$1&6)throw Error(p$2(327));Ik();var _=uc(et,0);if(!(_&1))return Ek(et,B()),null;var _e=Jk(et,_);if(et.tag!==0&&_e===2){var tt=xc(et);tt!==0&&(_=tt,_e=Ok(et,tt))}if(_e===1)throw _e=qk,Lk(et,0),Dk(et,_),Ek(et,B()),_e;if(_e===6)throw Error(p$2(345));return et.finishedWork=et.current.alternate,et.finishedLanes=_,Qk(et,uk,vk),Ek(et,B()),null}function Rk(et,_){var _e=K$1;K$1|=1;try{return et(_)}finally{K$1=_e,K$1===0&&(Hj=B()+500,fg&&jg())}}function Sk(et){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var _=K$1;K$1|=1;var _e=pk.transition,tt=C$1;try{if(pk.transition=null,C$1=1,et)return et()}finally{C$1=tt,pk.transition=_e,K$1=_,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(et,_){et.finishedWork=null,et.finishedLanes=0;var _e=et.timeoutHandle;if(_e!==-1&&(et.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tt=_e;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R=et,Y$1=et=wh(et.current,null),Z$2=gj=_,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_=0;_<Wg.length;_++)if(_e=Wg[_],tt=_e.interleaved,tt!==null){_e.interleaved=null;var rt=tt.next,it=_e.pending;if(it!==null){var st=it.next;it.next=rt,tt.next=st}_e.pending=tt}Wg=null}return et}function Nk(et,_){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var rt=tt.queue;rt!==null&&(rt.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P=O=N$1=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$2=1,qk=_,Y$1=null;break}e:{var it=et,st=_e.return,At=_e,ut=_;if(_=Z$2,At.flags|=32768,ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var ct=ut,ht=At,ot=ht.tag;if(!(ht.mode&1)&&(ot===0||ot===11||ot===15)){var nt=ht.alternate;nt?(ht.updateQueue=nt.updateQueue,ht.memoizedState=nt.memoizedState,ht.lanes=nt.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var at=Vi(st);if(at!==null){at.flags&=-257,Wi(at,st,At,it,_),at.mode&1&&Ti(it,ct,_),_=at,ut=ct;var lt=_.updateQueue;if(lt===null){var dt=new Set;dt.add(ut),_.updateQueue=dt}else lt.add(ut);break e}else{if(!(_&1)){Ti(it,ct,_),uj();break e}ut=Error(p$2(426))}}else if(I$1&&At.mode&1){var ft=Vi(st);if(ft!==null){!(ft.flags&65536)&&(ft.flags|=256),Wi(ft,st,At,it,_),Jg(Ki(ut,At));break e}}it=ut=Ki(ut,At),T$2!==4&&(T$2=2),tk===null?tk=[it]:tk.push(it),it=st;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var pt=Oi(it,ut,_);fh(it,pt);break e;case 1:At=ut;var gt=it.type,mt=it.stateNode;if(!(it.flags&128)&&(typeof gt.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(Si===null||!Si.has(mt)))){it.flags|=65536,_&=-_,it.lanes|=_;var yt=Ri(it,At,_);fh(it,yt);break e}}it=it.return}while(it!==null)}Tk(_e)}catch(vt){_=vt,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(!0)}function Kk(){var et=nk.current;return nk.current=ai,et===null?ai:et}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z$2)}function Jk(et,_){var _e=K$1;K$1|=2;var tt=Kk();(R!==et||Z$2!==_)&&(vk=null,Lk(et,_));do try{Uk();break}catch(rt){Nk(et,rt)}while(!0);if(Qg(),K$1=_e,nk.current=tt,Y$1!==null)throw Error(p$2(261));return R=null,Z$2=0,T$2}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(et){var _=Wk(et.alternate,et,gj);et.memoizedProps=et.pendingProps,_===null?Tk(et):Y$1=_,ok.current=null}function Tk(et){var _=et;do{var _e=_.alternate;if(et=_.return,_.flags&32768){if(_e=Jj(_e,_),_e!==null){_e.flags&=32767,Y$1=_e;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$2=6,Y$1=null;return}}else if(_e=Fj(_e,_,gj),_e!==null){Y$1=_e;return}if(_=_.sibling,_!==null){Y$1=_;return}Y$1=_=et}while(_!==null);T$2===0&&(T$2=5)}function Qk(et,_,_e){var tt=C$1,rt=pk.transition;try{pk.transition=null,C$1=1,Xk(et,_,_e,tt)}finally{pk.transition=rt,C$1=tt}return null}function Xk(et,_,_e,tt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$2(327));_e=et.finishedWork;var rt=et.finishedLanes;if(_e===null)return null;if(et.finishedWork=null,et.finishedLanes=0,_e===et.current)throw Error(p$2(177));et.callbackNode=null,et.callbackPriority=0;var it=_e.lanes|_e.childLanes;if(Bc(et,it),et===R&&(Y$1=R=null,Z$2=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),it=(_e.flags&15990)!==0,_e.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var st=C$1;C$1=1;var At=K$1;K$1|=4,ok.current=null,Pj(et,_e),ek(_e,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=_e,ik(_e),dc(),K$1=At,C$1=st,pk.transition=it}else et.current=_e;if(wk&&(wk=!1,xk=et,yk=rt),it=et.pendingLanes,it===0&&(Si=null),mc(_e.stateNode),Ek(et,B()),_!==null)for(tt=et.onRecoverableError,_e=0;_e<_.length;_e++)rt=_[_e],tt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Pi)throw Pi=!1,et=Qi,Qi=null,et;return yk&1&&et.tag!==0&&Ik(),it=et.pendingLanes,it&1?et===Ak?zk++:(zk=0,Ak=et):zk=0,jg(),null}function Ik(){if(xk!==null){var et=Dc(yk),_=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>et?16:et,xk===null)var tt=!1;else{if(et=xk,xk=null,yk=0,K$1&6)throw Error(p$2(331));var rt=K$1;for(K$1|=4,V$2=et.current;V$2!==null;){var it=V$2,st=it.child;if(V$2.flags&16){var At=it.deletions;if(At!==null){for(var ut=0;ut<At.length;ut++){var ct=At[ut];for(V$2=ct;V$2!==null;){var ht=V$2;switch(ht.tag){case 0:case 11:case 15:Qj(8,ht,it)}var ot=ht.child;if(ot!==null)ot.return=ht,V$2=ot;else for(;V$2!==null;){ht=V$2;var nt=ht.sibling,at=ht.return;if(Tj(ht),ht===ct){V$2=null;break}if(nt!==null){nt.return=at,V$2=nt;break}V$2=at}}}var lt=it.alternate;if(lt!==null){var dt=lt.child;if(dt!==null){lt.child=null;do{var ft=dt.sibling;dt.sibling=null,dt=ft}while(dt!==null)}}V$2=it}}if(it.subtreeFlags&2064&&st!==null)st.return=it,V$2=st;else e:for(;V$2!==null;){if(it=V$2,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var pt=it.sibling;if(pt!==null){pt.return=it.return,V$2=pt;break e}V$2=it.return}}var gt=et.current;for(V$2=gt;V$2!==null;){st=V$2;var mt=st.child;if(st.subtreeFlags&2064&&mt!==null)mt.return=st,V$2=mt;else e:for(st=gt;V$2!==null;){if(At=V$2,At.flags&2048)try{switch(At.tag){case 0:case 11:case 15:Rj(9,At)}}catch(vt){W$1(At,At.return,vt)}if(At===st){V$2=null;break e}var yt=At.sibling;if(yt!==null){yt.return=At.return,V$2=yt;break e}V$2=At.return}}if(K$1=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}tt=!0}return tt}finally{C$1=_e,pk.transition=_}}return!1}function Yk(et,_,_e){_=Ki(_e,_),_=Oi(et,_,1),et=dh(et,_,1),_=L$2(),et!==null&&(Ac(et,1,_),Ek(et,_))}function W$1(et,_,_e){if(et.tag===3)Yk(et,et,_e);else for(;_!==null;){if(_.tag===3){Yk(_,et,_e);break}else if(_.tag===1){var tt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){et=Ki(_e,et),et=Ri(_,et,1),_=dh(_,et,1),et=L$2(),_!==null&&(Ac(_,1,et),Ek(_,et));break}}_=_.return}}function Ui(et,_,_e){var tt=et.pingCache;tt!==null&&tt.delete(_),_=L$2(),et.pingedLanes|=et.suspendedLanes&_e,R===et&&(Z$2&_e)===_e&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B()-gk?Lk(et,0):sk|=_e),Ek(et,_)}function Zk(et,_){_===0&&(et.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var _e=L$2();et=Zg(et,_),et!==null&&(Ac(et,_,_e),Ek(et,_e))}function vj(et){var _=et.memoizedState,_e=0;_!==null&&(_e=_.retryLane),Zk(et,_e)}function ck(et,_){var _e=0;switch(et.tag){case 13:var tt=et.stateNode,rt=et.memoizedState;rt!==null&&(_e=rt.retryLane);break;case 19:tt=et.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(_),Zk(et,_e)}var Wk;Wk=function(et,_,_e){if(et!==null)if(et.memoizedProps!==_.pendingProps||Wf.current)Ug=!0;else{if(!(et.lanes&_e)&&!(_.flags&128))return Ug=!1,zj(et,_,_e);Ug=!!(et.flags&131072)}else Ug=!1,I$1&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var tt=_.type;jj(et,_),et=_.pendingProps;var rt=Yf(_,H$1.current);Tg(_,_e),rt=Xh(null,_,tt,et,rt,_e);var it=bi();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(tt)?(it=!0,cg(_)):it=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,ah(_),rt.updater=nh,_.stateNode=rt,rt._reactInternals=_,rh(_,tt,et,_e),_=kj(null,_,tt,!0,it,_e)):(_.tag=0,I$1&&it&&vg(_),Yi(null,_,rt,_e),_=_.child),_;case 16:tt=_.elementType;e:{switch(jj(et,_),et=_.pendingProps,rt=tt._init,tt=rt(tt._payload),_.type=tt,rt=_.tag=$k(tt),et=Lg(tt,et),rt){case 0:_=dj(null,_,tt,et,_e);break e;case 1:_=ij(null,_,tt,et,_e);break e;case 11:_=Zi(null,_,tt,et,_e);break e;case 14:_=aj(null,_,tt,Lg(tt.type,et),_e);break e}throw Error(p$2(306,tt,""))}return _;case 0:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Lg(tt,rt),dj(et,_,tt,rt,_e);case 1:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Lg(tt,rt),ij(et,_,tt,rt,_e);case 3:e:{if(lj(_),et===null)throw Error(p$2(387));tt=_.pendingProps,it=_.memoizedState,rt=it.element,bh(et,_),gh(_,tt,null,_e);var st=_.memoizedState;if(tt=st.element,it.isDehydrated)if(it={element:tt,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){rt=Ki(Error(p$2(423)),_),_=mj(et,_,tt,_e,rt);break e}else if(tt!==rt){rt=Ki(Error(p$2(424)),_),_=mj(et,_,tt,_e,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I$1=!0,zg=null,_e=Ch(_,null,tt,_e),_.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tt===rt){_=$i(et,_,_e);break e}Yi(et,_,tt,_e)}_=_.child}return _;case 5:return Kh(_),et===null&&Eg(_),tt=_.type,rt=_.pendingProps,it=et!==null?et.memoizedProps:null,st=rt.children,Ef(tt,rt)?st=null:it!==null&&Ef(tt,it)&&(_.flags|=32),hj(et,_),Yi(et,_,st,_e),_.child;case 6:return et===null&&Eg(_),null;case 13:return pj(et,_,_e);case 4:return Ih(_,_.stateNode.containerInfo),tt=_.pendingProps,et===null?_.child=Bh(_,null,tt,_e):Yi(et,_,tt,_e),_.child;case 11:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Lg(tt,rt),Zi(et,_,tt,rt,_e);case 7:return Yi(et,_,_.pendingProps,_e),_.child;case 8:return Yi(et,_,_.pendingProps.children,_e),_.child;case 12:return Yi(et,_,_.pendingProps.children,_e),_.child;case 10:e:{if(tt=_.type._context,rt=_.pendingProps,it=_.memoizedProps,st=rt.value,G(Mg,tt._currentValue),tt._currentValue=st,it!==null)if(He(it.value,st)){if(it.children===rt.children&&!Wf.current){_=$i(et,_,_e);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var At=it.dependencies;if(At!==null){st=it.child;for(var ut=At.firstContext;ut!==null;){if(ut.context===tt){if(it.tag===1){ut=ch(-1,_e&-_e),ut.tag=2;var ct=it.updateQueue;if(ct!==null){ct=ct.shared;var ht=ct.pending;ht===null?ut.next=ut:(ut.next=ht.next,ht.next=ut),ct.pending=ut}}it.lanes|=_e,ut=it.alternate,ut!==null&&(ut.lanes|=_e),Sg(it.return,_e,_),At.lanes|=_e;break}ut=ut.next}}else if(it.tag===10)st=it.type===_.type?null:it.child;else if(it.tag===18){if(st=it.return,st===null)throw Error(p$2(341));st.lanes|=_e,At=st.alternate,At!==null&&(At.lanes|=_e),Sg(st,_e,_),st=it.sibling}else st=it.child;if(st!==null)st.return=it;else for(st=it;st!==null;){if(st===_){st=null;break}if(it=st.sibling,it!==null){it.return=st.return,st=it;break}st=st.return}it=st}Yi(et,_,rt.children,_e),_=_.child}return _;case 9:return rt=_.type,tt=_.pendingProps.children,Tg(_,_e),rt=Vg(rt),tt=tt(rt),_.flags|=1,Yi(et,_,tt,_e),_.child;case 14:return tt=_.type,rt=Lg(tt,_.pendingProps),rt=Lg(tt.type,rt),aj(et,_,tt,rt,_e);case 15:return cj(et,_,_.type,_.pendingProps,_e);case 17:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Lg(tt,rt),jj(et,_),_.tag=1,Zf(tt)?(et=!0,cg(_)):et=!1,Tg(_,_e),ph(_,tt,rt),rh(_,tt,rt,_e),kj(null,_,tt,!0,et,_e);case 19:return yj(et,_,_e);case 22:return ej(et,_,_e)}throw Error(p$2(156,_.tag))};function Gk(et,_){return ac(et,_)}function al(et,_,_e,tt){this.tag=et,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,_,_e,tt){return new al(et,_,_e,tt)}function bj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function $k(et){if(typeof et=="function")return bj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function wh(et,_){var _e=et.alternate;return _e===null?(_e=Bg(et.tag,_,et.key,et.mode),_e.elementType=et.elementType,_e.type=et.type,_e.stateNode=et.stateNode,_e.alternate=et,et.alternate=_e):(_e.pendingProps=_,_e.type=et.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=et.flags&14680064,_e.childLanes=et.childLanes,_e.lanes=et.lanes,_e.child=et.child,_e.memoizedProps=et.memoizedProps,_e.memoizedState=et.memoizedState,_e.updateQueue=et.updateQueue,_=et.dependencies,_e.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},_e.sibling=et.sibling,_e.index=et.index,_e.ref=et.ref,_e}function yh(et,_,_e,tt,rt,it){var st=2;if(tt=et,typeof et=="function")bj(et)&&(st=1);else if(typeof et=="string")st=5;else e:switch(et){case ya:return Ah(_e.children,rt,it,_);case za:st=8,rt|=8;break;case Aa:return et=Bg(12,_e,_,rt|2),et.elementType=Aa,et.lanes=it,et;case Ea:return et=Bg(13,_e,_,rt),et.elementType=Ea,et.lanes=it,et;case Fa:return et=Bg(19,_e,_,rt),et.elementType=Fa,et.lanes=it,et;case Ia:return qj(_e,rt,it,_);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,tt=null;break e}throw Error(p$2(130,et==null?et:typeof et,""))}return _=Bg(st,_e,_,rt),_.elementType=et,_.type=tt,_.lanes=it,_}function Ah(et,_,_e,tt){return et=Bg(7,et,tt,_),et.lanes=_e,et}function qj(et,_,_e,tt){return et=Bg(22,et,tt,_),et.elementType=Ia,et.lanes=_e,et.stateNode={isHidden:!1},et}function xh(et,_,_e){return et=Bg(6,et,null,_),et.lanes=_e,et}function zh(et,_,_e){return _=Bg(4,et.children!==null?et.children:[],et.key,_),_.lanes=_e,_.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},_}function bl(et,_,_e,tt,rt){this.tag=_,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function cl(et,_,_e,tt,rt,it,st,At,ut){return et=new bl(et,_,_e,At,ut),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),et.current=it,it.stateNode=et,it.memoizedState={element:tt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(it),et}function dl(et,_,_e){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:et,containerInfo:_,implementation:_e}}function el(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$2(170));var _=et;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$2(171))}if(et.tag===1){var _e=et.type;if(Zf(_e))return bg(et,_e,_)}return _}function fl(et,_,_e,tt,rt,it,st,At,ut){return et=cl(_e,tt,!0,et,rt,it,st,At,ut),et.context=el(null),_e=et.current,tt=L$2(),rt=lh(_e),it=ch(tt,rt),it.callback=_??null,dh(_e,it,rt),et.current.lanes=rt,Ac(et,rt,tt),Ek(et,tt),et}function gl(et,_,_e,tt){var rt=_.current,it=L$2(),st=lh(rt);return _e=el(_e),_.context===null?_.context=_e:_.pendingContext=_e,_=ch(it,st),_.payload={element:et},tt=tt===void 0?null:tt,tt!==null&&(_.callback=tt),et=dh(rt,_,st),et!==null&&(mh(et,rt,st,it),eh(et,rt,st)),st}function hl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function il(et,_){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var _e=et.retryLane;et.retryLane=_e!==0&&_e<_?_e:_}}function jl(et,_){il(et,_),(et=et.alternate)&&il(et,_)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(et){console.error(et)};function ml(et){this._internalRoot=et}nl.prototype.render=ml.prototype.render=function(et){var _=this._internalRoot;if(_===null)throw Error(p$2(409));gl(et,_,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var _=et.containerInfo;Sk(function(){gl(null,et,null,null)}),_[uf]=null}};function nl(et){this._internalRoot=et}nl.prototype.unstable_scheduleHydration=function(et){if(et){var _=Hc();et={blockedOn:null,target:et,priority:_};for(var _e=0;_e<Qc.length&&_!==0&&_<Qc[_e].priority;_e++);Qc.splice(_e,0,et),_e===0&&Vc(et)}};function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function pl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(et,_,_e,tt,rt){if(rt){if(typeof tt=="function"){var it=tt;tt=function(){var ct=hl(st);it.call(ct)}}var st=fl(_,tt,et,0,null,!1,!1,"",ql);return et._reactRootContainer=st,et[uf]=st.current,sf(et.nodeType===8?et.parentNode:et),Sk(),st}for(;rt=et.lastChild;)et.removeChild(rt);if(typeof tt=="function"){var At=tt;tt=function(){var ct=hl(ut);At.call(ct)}}var ut=cl(et,0,!1,null,null,!1,!1,"",ql);return et._reactRootContainer=ut,et[uf]=ut.current,sf(et.nodeType===8?et.parentNode:et),Sk(function(){gl(_,ut,_e,tt)}),ut}function sl(et,_,_e,tt,rt){var it=_e._reactRootContainer;if(it){var st=it;if(typeof rt=="function"){var At=rt;rt=function(){var ut=hl(st);At.call(ut)}}gl(_,st,et,rt)}else st=rl(_e,_,et,rt,tt);return hl(st)}Ec=function(et){switch(et.tag){case 3:var _=et.stateNode;if(_.current.memoizedState.isDehydrated){var _e=tc(_.pendingLanes);_e!==0&&(Cc(_,_e|1),Ek(_,B()),!(K$1&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(et,1);if(tt!==null){var rt=L$2();mh(tt,et,1,rt)}}),jl(et,1)}};Fc=function(et){if(et.tag===13){var _=Zg(et,134217728);if(_!==null){var _e=L$2();mh(_,et,134217728,_e)}jl(et,134217728)}};Gc=function(et){if(et.tag===13){var _=lh(et),_e=Zg(et,_);if(_e!==null){var tt=L$2();mh(_e,et,_,tt)}jl(et,_)}};Hc=function(){return C$1};Ic=function(et,_){var _e=C$1;try{return C$1=et,_()}finally{C$1=_e}};yb=function(et,_,_e){switch(_){case"input":if(bb(et,_e),_=_e.name,_e.type==="radio"&&_!=null){for(_e=et;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<_e.length;_++){var tt=_e[_];if(tt!==et&&tt.form===et.form){var rt=Db(tt);if(!rt)throw Error(p$2(90));Wa(tt),bb(tt,rt)}}}break;case"textarea":ib(et,_e);break;case"select":_=_e.value,_!=null&&fb(et,!!_e.multiple,_,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(et,_){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_))throw Error(p$2(200));return dl(et,_,null,_e)};reactDom_production_min.createRoot=function(et,_){if(!ol(et))throw Error(p$2(299));var _e=!1,tt="",rt=ll;return _!=null&&(_.unstable_strictMode===!0&&(_e=!0),_.identifierPrefix!==void 0&&(tt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=cl(et,1,!1,null,null,_e,!1,tt,rt),et[uf]=_.current,sf(et.nodeType===8?et.parentNode:et),new ml(_)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var _=et._reactInternals;if(_===void 0)throw typeof et.render=="function"?Error(p$2(188)):(et=Object.keys(et).join(","),Error(p$2(268,et)));return et=Zb(_),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Sk(et)};reactDom_production_min.hydrate=function(et,_,_e){if(!pl(_))throw Error(p$2(200));return sl(null,et,_,!0,_e)};reactDom_production_min.hydrateRoot=function(et,_,_e){if(!ol(et))throw Error(p$2(405));var tt=_e!=null&&_e.hydratedSources||null,rt=!1,it="",st=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(rt=!0),_e.identifierPrefix!==void 0&&(it=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(st=_e.onRecoverableError)),_=fl(_,null,et,1,_e??null,rt,!1,it,st),et[uf]=_.current,sf(et),tt)for(et=0;et<tt.length;et++)_e=tt[et],rt=_e._getVersion,rt=rt(_e._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[_e,rt]:_.mutableSourceEagerHydrationData.push(_e,rt);return new nl(_)};reactDom_production_min.render=function(et,_,_e){if(!pl(_))throw Error(p$2(200));return sl(null,et,_,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(et){if(!pl(et))throw Error(p$2(40));return et._reactRootContainer?(Sk(function(){sl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,_,_e,tt){if(!pl(_e))throw Error(p$2(200));if(et==null||et._reactInternals===void 0)throw Error(p$2(38));return sl(et,_,_e,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;const colorPalette={dark_background:"#20212b",light_background:"#282a36",current_line:"#44475a",selection:"#6272a4",cyan:"#8be9fd",comment:"#50fa7b",orange:"#ffb86c",pink:"#ff79c6",purple:"#bd93f9",foreground_light:"#f1faee",red:"#ff5555"};var ENV=(et=>(et[et.WEBGL_LEGACY=0]="WEBGL_LEGACY",et[et.WEBGL=1]="WEBGL",et[et.WEBGL2=2]="WEBGL2",et))(ENV||{}),RENDERER_TYPE=(et=>(et[et.UNKNOWN=0]="UNKNOWN",et[et.WEBGL=1]="WEBGL",et[et.CANVAS=2]="CANVAS",et))(RENDERER_TYPE||{}),BUFFER_BITS=(et=>(et[et.COLOR=16384]="COLOR",et[et.DEPTH=256]="DEPTH",et[et.STENCIL=1024]="STENCIL",et))(BUFFER_BITS||{}),BLEND_MODES=(et=>(et[et.NORMAL=0]="NORMAL",et[et.ADD=1]="ADD",et[et.MULTIPLY=2]="MULTIPLY",et[et.SCREEN=3]="SCREEN",et[et.OVERLAY=4]="OVERLAY",et[et.DARKEN=5]="DARKEN",et[et.LIGHTEN=6]="LIGHTEN",et[et.COLOR_DODGE=7]="COLOR_DODGE",et[et.COLOR_BURN=8]="COLOR_BURN",et[et.HARD_LIGHT=9]="HARD_LIGHT",et[et.SOFT_LIGHT=10]="SOFT_LIGHT",et[et.DIFFERENCE=11]="DIFFERENCE",et[et.EXCLUSION=12]="EXCLUSION",et[et.HUE=13]="HUE",et[et.SATURATION=14]="SATURATION",et[et.COLOR=15]="COLOR",et[et.LUMINOSITY=16]="LUMINOSITY",et[et.NORMAL_NPM=17]="NORMAL_NPM",et[et.ADD_NPM=18]="ADD_NPM",et[et.SCREEN_NPM=19]="SCREEN_NPM",et[et.NONE=20]="NONE",et[et.SRC_OVER=0]="SRC_OVER",et[et.SRC_IN=21]="SRC_IN",et[et.SRC_OUT=22]="SRC_OUT",et[et.SRC_ATOP=23]="SRC_ATOP",et[et.DST_OVER=24]="DST_OVER",et[et.DST_IN=25]="DST_IN",et[et.DST_OUT=26]="DST_OUT",et[et.DST_ATOP=27]="DST_ATOP",et[et.ERASE=26]="ERASE",et[et.SUBTRACT=28]="SUBTRACT",et[et.XOR=29]="XOR",et))(BLEND_MODES||{}),DRAW_MODES=(et=>(et[et.POINTS=0]="POINTS",et[et.LINES=1]="LINES",et[et.LINE_LOOP=2]="LINE_LOOP",et[et.LINE_STRIP=3]="LINE_STRIP",et[et.TRIANGLES=4]="TRIANGLES",et[et.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",et[et.TRIANGLE_FAN=6]="TRIANGLE_FAN",et))(DRAW_MODES||{}),FORMATS=(et=>(et[et.RGBA=6408]="RGBA",et[et.RGB=6407]="RGB",et[et.RG=33319]="RG",et[et.RED=6403]="RED",et[et.RGBA_INTEGER=36249]="RGBA_INTEGER",et[et.RGB_INTEGER=36248]="RGB_INTEGER",et[et.RG_INTEGER=33320]="RG_INTEGER",et[et.RED_INTEGER=36244]="RED_INTEGER",et[et.ALPHA=6406]="ALPHA",et[et.LUMINANCE=6409]="LUMINANCE",et[et.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",et[et.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",et[et.DEPTH_STENCIL=34041]="DEPTH_STENCIL",et))(FORMATS||{}),TARGETS=(et=>(et[et.TEXTURE_2D=3553]="TEXTURE_2D",et[et.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",et[et.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",et[et.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",et[et.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",et[et.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",et[et.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",et[et.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",et[et.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",et))(TARGETS||{}),TYPES=(et=>(et[et.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",et[et.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",et[et.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",et[et.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",et[et.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",et[et.UNSIGNED_INT=5125]="UNSIGNED_INT",et[et.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",et[et.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",et[et.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",et[et.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",et[et.BYTE=5120]="BYTE",et[et.SHORT=5122]="SHORT",et[et.INT=5124]="INT",et[et.FLOAT=5126]="FLOAT",et[et.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",et[et.HALF_FLOAT=36193]="HALF_FLOAT",et))(TYPES||{}),SAMPLER_TYPES=(et=>(et[et.FLOAT=0]="FLOAT",et[et.INT=1]="INT",et[et.UINT=2]="UINT",et))(SAMPLER_TYPES||{}),SCALE_MODES=(et=>(et[et.NEAREST=0]="NEAREST",et[et.LINEAR=1]="LINEAR",et))(SCALE_MODES||{}),WRAP_MODES=(et=>(et[et.CLAMP=33071]="CLAMP",et[et.REPEAT=10497]="REPEAT",et[et.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",et))(WRAP_MODES||{}),MIPMAP_MODES=(et=>(et[et.OFF=0]="OFF",et[et.POW2=1]="POW2",et[et.ON=2]="ON",et[et.ON_MANUAL=3]="ON_MANUAL",et))(MIPMAP_MODES||{}),ALPHA_MODES=(et=>(et[et.NPM=0]="NPM",et[et.UNPACK=1]="UNPACK",et[et.PMA=2]="PMA",et[et.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",et[et.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",et[et.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",et))(ALPHA_MODES||{}),CLEAR_MODES=(et=>(et[et.NO=0]="NO",et[et.YES=1]="YES",et[et.AUTO=2]="AUTO",et[et.BLEND=0]="BLEND",et[et.CLEAR=1]="CLEAR",et[et.BLIT=2]="BLIT",et))(CLEAR_MODES||{}),GC_MODES=(et=>(et[et.AUTO=0]="AUTO",et[et.MANUAL=1]="MANUAL",et))(GC_MODES||{}),PRECISION=(et=>(et.LOW="lowp",et.MEDIUM="mediump",et.HIGH="highp",et))(PRECISION||{}),MASK_TYPES=(et=>(et[et.NONE=0]="NONE",et[et.SCISSOR=1]="SCISSOR",et[et.STENCIL=2]="STENCIL",et[et.SPRITE=3]="SPRITE",et[et.COLOR=4]="COLOR",et))(MASK_TYPES||{}),MSAA_QUALITY=(et=>(et[et.NONE=0]="NONE",et[et.LOW=2]="LOW",et[et.MEDIUM=4]="MEDIUM",et[et.HIGH=8]="HIGH",et))(MSAA_QUALITY||{}),BUFFER_TYPE=(et=>(et[et.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",et[et.ARRAY_BUFFER=34962]="ARRAY_BUFFER",et[et.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",et))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(et,_)=>{const _e=document.createElement("canvas");return _e.width=et,_e.height=_,_e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(et,_)=>fetch(et,_),parseXML:et=>new DOMParser().parseFromString(et,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(et){return typeof et<"u"&&et.platform==="MacIntel"&&typeof et.maxTouchPoints=="number"&&et.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(et){return function(_){return _.test(et)}}function isMobile$1(et){var _={userAgent:"",platform:"",maxTouchPoints:0};!et&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof et=="string"?_.userAgent=et:et&&et.userAgent&&(_={userAgent:et.userAgent,platform:et.platform,maxTouchPoints:et.maxTouchPoints||0});var _e=_.userAgent,tt=_e.split("[FBAN");typeof tt[1]<"u"&&(_e=tt[0]),tt=_e.split("Twitter"),typeof tt[1]<"u"&&(_e=tt[0]);var rt=createMatch(_e),it={apple:{phone:rt(appleIphone)&&!rt(windowsPhone),ipod:rt(appleIpod),tablet:!rt(appleIphone)&&(rt(appleTablet)||isAppleTabletOnIos13(_))&&!rt(windowsPhone),universal:rt(appleUniversal),device:(rt(appleIphone)||rt(appleIpod)||rt(appleTablet)||rt(appleUniversal)||isAppleTabletOnIos13(_))&&!rt(windowsPhone)},amazon:{phone:rt(amazonPhone),tablet:!rt(amazonPhone)&&rt(amazonTablet),device:rt(amazonPhone)||rt(amazonTablet)},android:{phone:!rt(windowsPhone)&&rt(amazonPhone)||!rt(windowsPhone)&&rt(androidPhone),tablet:!rt(windowsPhone)&&!rt(amazonPhone)&&!rt(androidPhone)&&(rt(amazonTablet)||rt(androidTablet)),device:!rt(windowsPhone)&&(rt(amazonPhone)||rt(amazonTablet)||rt(androidPhone)||rt(androidTablet))||rt(/\bokhttp\b/i)},windows:{phone:rt(windowsPhone),tablet:rt(windowsTablet),device:rt(windowsPhone)||rt(windowsTablet)},other:{blackberry:rt(otherBlackBerry),blackberry10:rt(otherBlackBerry10),opera:rt(otherOpera),firefox:rt(otherFirefox),chrome:rt(otherChrome),device:rt(otherBlackBerry)||rt(otherBlackBerry10)||rt(otherOpera)||rt(otherFirefox)||rt(otherChrome)},any:!1,phone:!1,tablet:!1};return it.any=it.apple.device||it.android.device||it.windows.device||it.other.device,it.phone=it.apple.phone||it.android.phone||it.windows.phone,it.tablet=it.apple.tablet||it.android.tablet||it.windows.tablet,it}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(et){var _=Object.prototype.hasOwnProperty,_e="~";function tt(){}Object.create&&(tt.prototype=Object.create(null),new tt().__proto__||(_e=!1));function rt(ut,ct,ht){this.fn=ut,this.context=ct,this.once=ht||!1}function it(ut,ct,ht,ot,nt){if(typeof ht!="function")throw new TypeError("The listener must be a function");var at=new rt(ht,ot||ut,nt),lt=_e?_e+ct:ct;return ut._events[lt]?ut._events[lt].fn?ut._events[lt]=[ut._events[lt],at]:ut._events[lt].push(at):(ut._events[lt]=at,ut._eventsCount++),ut}function st(ut,ct){--ut._eventsCount===0?ut._events=new tt:delete ut._events[ct]}function At(){this._events=new tt,this._eventsCount=0}At.prototype.eventNames=function(){var ct=[],ht,ot;if(this._eventsCount===0)return ct;for(ot in ht=this._events)_.call(ht,ot)&&ct.push(_e?ot.slice(1):ot);return Object.getOwnPropertySymbols?ct.concat(Object.getOwnPropertySymbols(ht)):ct},At.prototype.listeners=function(ct){var ht=_e?_e+ct:ct,ot=this._events[ht];if(!ot)return[];if(ot.fn)return[ot.fn];for(var nt=0,at=ot.length,lt=new Array(at);nt<at;nt++)lt[nt]=ot[nt].fn;return lt},At.prototype.listenerCount=function(ct){var ht=_e?_e+ct:ct,ot=this._events[ht];return ot?ot.fn?1:ot.length:0},At.prototype.emit=function(ct,ht,ot,nt,at,lt){var dt=_e?_e+ct:ct;if(!this._events[dt])return!1;var ft=this._events[dt],pt=arguments.length,gt,mt;if(ft.fn){switch(ft.once&&this.removeListener(ct,ft.fn,void 0,!0),pt){case 1:return ft.fn.call(ft.context),!0;case 2:return ft.fn.call(ft.context,ht),!0;case 3:return ft.fn.call(ft.context,ht,ot),!0;case 4:return ft.fn.call(ft.context,ht,ot,nt),!0;case 5:return ft.fn.call(ft.context,ht,ot,nt,at),!0;case 6:return ft.fn.call(ft.context,ht,ot,nt,at,lt),!0}for(mt=1,gt=new Array(pt-1);mt<pt;mt++)gt[mt-1]=arguments[mt];ft.fn.apply(ft.context,gt)}else{var yt=ft.length,vt;for(mt=0;mt<yt;mt++)switch(ft[mt].once&&this.removeListener(ct,ft[mt].fn,void 0,!0),pt){case 1:ft[mt].fn.call(ft[mt].context);break;case 2:ft[mt].fn.call(ft[mt].context,ht);break;case 3:ft[mt].fn.call(ft[mt].context,ht,ot);break;case 4:ft[mt].fn.call(ft[mt].context,ht,ot,nt);break;default:if(!gt)for(vt=1,gt=new Array(pt-1);vt<pt;vt++)gt[vt-1]=arguments[vt];ft[mt].fn.apply(ft[mt].context,gt)}}return!0},At.prototype.on=function(ct,ht,ot){return it(this,ct,ht,ot,!1)},At.prototype.once=function(ct,ht,ot){return it(this,ct,ht,ot,!0)},At.prototype.removeListener=function(ct,ht,ot,nt){var at=_e?_e+ct:ct;if(!this._events[at])return this;if(!ht)return st(this,at),this;var lt=this._events[at];if(lt.fn)lt.fn===ht&&(!nt||lt.once)&&(!ot||lt.context===ot)&&st(this,at);else{for(var dt=0,ft=[],pt=lt.length;dt<pt;dt++)(lt[dt].fn!==ht||nt&&!lt[dt].once||ot&&lt[dt].context!==ot)&&ft.push(lt[dt]);ft.length?this._events[at]=ft.length===1?ft[0]:ft:st(this,at)}return this},At.prototype.removeAllListeners=function(ct){var ht;return ct?(ht=_e?_e+ct:ct,this._events[ht]&&st(this,ht)):(this._events=new tt,this._eventsCount=0),this},At.prototype.off=At.prototype.removeListener,At.prototype.addListener=At.prototype.on,At.prefixed=_e,At.EventEmitter=At,et.exports=At})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(et,_,_e){_e=_e||2;var tt=_&&_.length,rt=tt?_[0]*_e:et.length,it=linkedList(et,0,rt,_e,!0),st=[];if(!it||it.next===it.prev)return st;var At,ut,ct,ht,ot,nt,at;if(tt&&(it=eliminateHoles(et,_,it,_e)),et.length>80*_e){At=ct=et[0],ut=ht=et[1];for(var lt=_e;lt<rt;lt+=_e)ot=et[lt],nt=et[lt+1],ot<At&&(At=ot),nt<ut&&(ut=nt),ot>ct&&(ct=ot),nt>ht&&(ht=nt);at=Math.max(ct-At,ht-ut),at=at!==0?32767/at:0}return earcutLinked(it,st,_e,At,ut,at,0),st}function linkedList(et,_,_e,tt,rt){var it,st;if(rt===signedArea(et,_,_e,tt)>0)for(it=_;it<_e;it+=tt)st=insertNode(it,et[it],et[it+1],st);else for(it=_e-tt;it>=_;it-=tt)st=insertNode(it,et[it],et[it+1],st);return st&&equals(st,st.next)&&(removeNode(st),st=st.next),st}function filterPoints(et,_){if(!et)return et;_||(_=et);var _e=et,tt;do if(tt=!1,!_e.steiner&&(equals(_e,_e.next)||area(_e.prev,_e,_e.next)===0)){if(removeNode(_e),_e=_=_e.prev,_e===_e.next)break;tt=!0}else _e=_e.next;while(tt||_e!==_);return _}function earcutLinked(et,_,_e,tt,rt,it,st){if(et){!st&&it&&indexCurve(et,tt,rt,it);for(var At=et,ut,ct;et.prev!==et.next;){if(ut=et.prev,ct=et.next,it?isEarHashed(et,tt,rt,it):isEar(et)){_.push(ut.i/_e|0),_.push(et.i/_e|0),_.push(ct.i/_e|0),removeNode(et),et=ct.next,At=ct.next;continue}if(et=ct,et===At){st?st===1?(et=cureLocalIntersections(filterPoints(et),_,_e),earcutLinked(et,_,_e,tt,rt,it,2)):st===2&&splitEarcut(et,_,_e,tt,rt,it):earcutLinked(filterPoints(et),_,_e,tt,rt,it,1);break}}}}function isEar(et){var _=et.prev,_e=et,tt=et.next;if(area(_,_e,tt)>=0)return!1;for(var rt=_.x,it=_e.x,st=tt.x,At=_.y,ut=_e.y,ct=tt.y,ht=rt<it?rt<st?rt:st:it<st?it:st,ot=At<ut?At<ct?At:ct:ut<ct?ut:ct,nt=rt>it?rt>st?rt:st:it>st?it:st,at=At>ut?At>ct?At:ct:ut>ct?ut:ct,lt=tt.next;lt!==_;){if(lt.x>=ht&&lt.x<=nt&&lt.y>=ot&&lt.y<=at&&pointInTriangle(rt,At,it,ut,st,ct,lt.x,lt.y)&&area(lt.prev,lt,lt.next)>=0)return!1;lt=lt.next}return!0}function isEarHashed(et,_,_e,tt){var rt=et.prev,it=et,st=et.next;if(area(rt,it,st)>=0)return!1;for(var At=rt.x,ut=it.x,ct=st.x,ht=rt.y,ot=it.y,nt=st.y,at=At<ut?At<ct?At:ct:ut<ct?ut:ct,lt=ht<ot?ht<nt?ht:nt:ot<nt?ot:nt,dt=At>ut?At>ct?At:ct:ut>ct?ut:ct,ft=ht>ot?ht>nt?ht:nt:ot>nt?ot:nt,pt=zOrder(at,lt,_,_e,tt),gt=zOrder(dt,ft,_,_e,tt),mt=et.prevZ,yt=et.nextZ;mt&&mt.z>=pt&&yt&&yt.z<=gt;){if(mt.x>=at&&mt.x<=dt&&mt.y>=lt&&mt.y<=ft&&mt!==rt&&mt!==st&&pointInTriangle(At,ht,ut,ot,ct,nt,mt.x,mt.y)&&area(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,yt.x>=at&&yt.x<=dt&&yt.y>=lt&&yt.y<=ft&&yt!==rt&&yt!==st&&pointInTriangle(At,ht,ut,ot,ct,nt,yt.x,yt.y)&&area(yt.prev,yt,yt.next)>=0))return!1;yt=yt.nextZ}for(;mt&&mt.z>=pt;){if(mt.x>=at&&mt.x<=dt&&mt.y>=lt&&mt.y<=ft&&mt!==rt&&mt!==st&&pointInTriangle(At,ht,ut,ot,ct,nt,mt.x,mt.y)&&area(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;yt&&yt.z<=gt;){if(yt.x>=at&&yt.x<=dt&&yt.y>=lt&&yt.y<=ft&&yt!==rt&&yt!==st&&pointInTriangle(At,ht,ut,ot,ct,nt,yt.x,yt.y)&&area(yt.prev,yt,yt.next)>=0)return!1;yt=yt.nextZ}return!0}function cureLocalIntersections(et,_,_e){var tt=et;do{var rt=tt.prev,it=tt.next.next;!equals(rt,it)&&intersects(rt,tt,tt.next,it)&&locallyInside(rt,it)&&locallyInside(it,rt)&&(_.push(rt.i/_e|0),_.push(tt.i/_e|0),_.push(it.i/_e|0),removeNode(tt),removeNode(tt.next),tt=et=it),tt=tt.next}while(tt!==et);return filterPoints(tt)}function splitEarcut(et,_,_e,tt,rt,it){var st=et;do{for(var At=st.next.next;At!==st.prev;){if(st.i!==At.i&&isValidDiagonal(st,At)){var ut=splitPolygon(st,At);st=filterPoints(st,st.next),ut=filterPoints(ut,ut.next),earcutLinked(st,_,_e,tt,rt,it,0),earcutLinked(ut,_,_e,tt,rt,it,0);return}At=At.next}st=st.next}while(st!==et)}function eliminateHoles(et,_,_e,tt){var rt=[],it,st,At,ut,ct;for(it=0,st=_.length;it<st;it++)At=_[it]*tt,ut=it<st-1?_[it+1]*tt:et.length,ct=linkedList(et,At,ut,tt,!1),ct===ct.next&&(ct.steiner=!0),rt.push(getLeftmost(ct));for(rt.sort(compareX),it=0;it<rt.length;it++)_e=eliminateHole(rt[it],_e);return _e}function compareX(et,_){return et.x-_.x}function eliminateHole(et,_){var _e=findHoleBridge(et,_);if(!_e)return _;var tt=splitPolygon(_e,et);return filterPoints(tt,tt.next),filterPoints(_e,_e.next)}function findHoleBridge(et,_){var _e=_,tt=et.x,rt=et.y,it=-1/0,st;do{if(rt<=_e.y&&rt>=_e.next.y&&_e.next.y!==_e.y){var At=_e.x+(rt-_e.y)*(_e.next.x-_e.x)/(_e.next.y-_e.y);if(At<=tt&&At>it&&(it=At,st=_e.x<_e.next.x?_e:_e.next,At===tt))return st}_e=_e.next}while(_e!==_);if(!st)return null;var ut=st,ct=st.x,ht=st.y,ot=1/0,nt;_e=st;do tt>=_e.x&&_e.x>=ct&&tt!==_e.x&&pointInTriangle(rt<ht?tt:it,rt,ct,ht,rt<ht?it:tt,rt,_e.x,_e.y)&&(nt=Math.abs(rt-_e.y)/(tt-_e.x),locallyInside(_e,et)&&(nt<ot||nt===ot&&(_e.x>st.x||_e.x===st.x&&sectorContainsSector(st,_e)))&&(st=_e,ot=nt)),_e=_e.next;while(_e!==ut);return st}function sectorContainsSector(et,_){return area(et.prev,et,_.prev)<0&&area(_.next,et,et.next)<0}function indexCurve(et,_,_e,tt){var rt=et;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,_e,tt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==et);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(et){var _,_e,tt,rt,it,st,At,ut,ct=1;do{for(_e=et,et=null,it=null,st=0;_e;){for(st++,tt=_e,At=0,_=0;_<ct&&(At++,tt=tt.nextZ,!!tt);_++);for(ut=ct;At>0||ut>0&&tt;)At!==0&&(ut===0||!tt||_e.z<=tt.z)?(rt=_e,_e=_e.nextZ,At--):(rt=tt,tt=tt.nextZ,ut--),it?it.nextZ=rt:et=rt,rt.prevZ=it,it=rt;_e=tt}it.nextZ=null,ct*=2}while(st>1);return et}function zOrder(et,_,_e,tt,rt){return et=(et-_e)*rt|0,_=(_-tt)*rt|0,et=(et|et<<8)&16711935,et=(et|et<<4)&252645135,et=(et|et<<2)&858993459,et=(et|et<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,et|_<<1}function getLeftmost(et){var _=et,_e=et;do(_.x<_e.x||_.x===_e.x&&_.y<_e.y)&&(_e=_),_=_.next;while(_!==et);return _e}function pointInTriangle(et,_,_e,tt,rt,it,st,At){return(rt-st)*(_-At)>=(et-st)*(it-At)&&(et-st)*(tt-At)>=(_e-st)*(_-At)&&(_e-st)*(it-At)>=(rt-st)*(tt-At)}function isValidDiagonal(et,_){return et.next.i!==_.i&&et.prev.i!==_.i&&!intersectsPolygon(et,_)&&(locallyInside(et,_)&&locallyInside(_,et)&&middleInside(et,_)&&(area(et.prev,et,_.prev)||area(et,_.prev,_))||equals(et,_)&&area(et.prev,et,et.next)>0&&area(_.prev,_,_.next)>0)}function area(et,_,_e){return(_.y-et.y)*(_e.x-_.x)-(_.x-et.x)*(_e.y-_.y)}function equals(et,_){return et.x===_.x&&et.y===_.y}function intersects(et,_,_e,tt){var rt=sign$1(area(et,_,_e)),it=sign$1(area(et,_,tt)),st=sign$1(area(_e,tt,et)),At=sign$1(area(_e,tt,_));return!!(rt!==it&&st!==At||rt===0&&onSegment(et,_e,_)||it===0&&onSegment(et,tt,_)||st===0&&onSegment(_e,et,tt)||At===0&&onSegment(_e,_,tt))}function onSegment(et,_,_e){return _.x<=Math.max(et.x,_e.x)&&_.x>=Math.min(et.x,_e.x)&&_.y<=Math.max(et.y,_e.y)&&_.y>=Math.min(et.y,_e.y)}function sign$1(et){return et>0?1:et<0?-1:0}function intersectsPolygon(et,_){var _e=et;do{if(_e.i!==et.i&&_e.next.i!==et.i&&_e.i!==_.i&&_e.next.i!==_.i&&intersects(_e,_e.next,et,_))return!0;_e=_e.next}while(_e!==et);return!1}function locallyInside(et,_){return area(et.prev,et,et.next)<0?area(et,_,et.next)>=0&&area(et,et.prev,_)>=0:area(et,_,et.prev)<0||area(et,et.next,_)<0}function middleInside(et,_){var _e=et,tt=!1,rt=(et.x+_.x)/2,it=(et.y+_.y)/2;do _e.y>it!=_e.next.y>it&&_e.next.y!==_e.y&&rt<(_e.next.x-_e.x)*(it-_e.y)/(_e.next.y-_e.y)+_e.x&&(tt=!tt),_e=_e.next;while(_e!==et);return tt}function splitPolygon(et,_){var _e=new Node$1(et.i,et.x,et.y),tt=new Node$1(_.i,_.x,_.y),rt=et.next,it=_.prev;return et.next=_,_.prev=et,_e.next=rt,rt.prev=_e,tt.next=_e,_e.prev=tt,it.next=tt,tt.prev=it,tt}function insertNode(et,_,_e,tt){var rt=new Node$1(et,_,_e);return tt?(rt.next=tt.next,rt.prev=tt,tt.next.prev=rt,tt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(et){et.next.prev=et.prev,et.prev.next=et.next,et.prevZ&&(et.prevZ.nextZ=et.nextZ),et.nextZ&&(et.nextZ.prevZ=et.prevZ)}function Node$1(et,_,_e){this.i=et,this.x=_,this.y=_e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(et,_,_e,tt){var rt=_&&_.length,it=rt?_[0]*_e:et.length,st=Math.abs(signedArea(et,0,it,_e));if(rt)for(var At=0,ut=_.length;At<ut;At++){var ct=_[At]*_e,ht=At<ut-1?_[At+1]*_e:et.length;st-=Math.abs(signedArea(et,ct,ht,_e))}var ot=0;for(At=0;At<tt.length;At+=3){var nt=tt[At]*_e,at=tt[At+1]*_e,lt=tt[At+2]*_e;ot+=Math.abs((et[nt]-et[lt])*(et[at+1]-et[nt+1])-(et[nt]-et[at])*(et[lt+1]-et[nt+1]))}return st===0&&ot===0?0:Math.abs((ot-st)/st)};function signedArea(et,_,_e,tt){for(var rt=0,it=_,st=_e-tt;it<_e;it+=tt)rt+=(et[st]-et[it])*(et[it+1]+et[st+1]),st=it;return rt}earcut.flatten=function(et){for(var _=et[0][0].length,_e={vertices:[],holes:[],dimensions:_},tt=0,rt=0;rt<et.length;rt++){for(var it=0;it<et[rt].length;it++)for(var st=0;st<_;st++)_e.vertices.push(et[rt][it][st]);rt>0&&(tt+=et[rt-1].length,_e.holes.push(tt))}return _e};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(et,_){(function(_e){var tt=_&&!_.nodeType&&_,rt=et&&!et.nodeType&&et,it=typeof commonjsGlobal=="object"&&commonjsGlobal;(it.global===it||it.window===it||it.self===it)&&(_e=it);var st,At=2147483647,ut=36,ct=1,ht=26,ot=38,nt=700,at=72,lt=128,dt="-",ft=/^xn--/,pt=/[^\x20-\x7E]/,gt=/[\x2E\u3002\uFF0E\uFF61]/g,mt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},yt=ut-ct,vt=Math.floor,wt=String.fromCharCode,bt;function Bt(Rt){throw new RangeError(mt[Rt])}function Tt(Rt,Nt){for(var Gt=Rt.length,Wt=[];Gt--;)Wt[Gt]=Nt(Rt[Gt]);return Wt}function It(Rt,Nt){var Gt=Rt.split("@"),Wt="";Gt.length>1&&(Wt=Gt[0]+"@",Rt=Gt[1]),Rt=Rt.replace(gt,".");var Xt=Rt.split("."),Yt=Tt(Xt,Nt).join(".");return Wt+Yt}function Dt(Rt){for(var Nt=[],Gt=0,Wt=Rt.length,Xt,Yt;Gt<Wt;)Xt=Rt.charCodeAt(Gt++),Xt>=55296&&Xt<=56319&&Gt<Wt?(Yt=Rt.charCodeAt(Gt++),(Yt&64512)==56320?Nt.push(((Xt&1023)<<10)+(Yt&1023)+65536):(Nt.push(Xt),Gt--)):Nt.push(Xt);return Nt}function Ut(Rt){return Tt(Rt,function(Nt){var Gt="";return Nt>65535&&(Nt-=65536,Gt+=wt(Nt>>>10&1023|55296),Nt=56320|Nt&1023),Gt+=wt(Nt),Gt}).join("")}function _t(Rt){return Rt-48<10?Rt-22:Rt-65<26?Rt-65:Rt-97<26?Rt-97:ut}function St(Rt,Nt){return Rt+22+75*(Rt<26)-((Nt!=0)<<5)}function xt(Rt,Nt,Gt){var Wt=0;for(Rt=Gt?vt(Rt/nt):Rt>>1,Rt+=vt(Rt/Nt);Rt>yt*ht>>1;Wt+=ut)Rt=vt(Rt/yt);return vt(Wt+(yt+1)*Rt/(Rt+ot))}function Ct(Rt){var Nt=[],Gt=Rt.length,Wt,Xt=0,Yt=lt,Zt=at,er,Ar,hr,dr,ar,ur,or,fr,pr;for(er=Rt.lastIndexOf(dt),er<0&&(er=0),Ar=0;Ar<er;++Ar)Rt.charCodeAt(Ar)>=128&&Bt("not-basic"),Nt.push(Rt.charCodeAt(Ar));for(hr=er>0?er+1:0;hr<Gt;){for(dr=Xt,ar=1,ur=ut;hr>=Gt&&Bt("invalid-input"),or=_t(Rt.charCodeAt(hr++)),(or>=ut||or>vt((At-Xt)/ar))&&Bt("overflow"),Xt+=or*ar,fr=ur<=Zt?ct:ur>=Zt+ht?ht:ur-Zt,!(or<fr);ur+=ut)pr=ut-fr,ar>vt(At/pr)&&Bt("overflow"),ar*=pr;Wt=Nt.length+1,Zt=xt(Xt-dr,Wt,dr==0),vt(Xt/Wt)>At-Yt&&Bt("overflow"),Yt+=vt(Xt/Wt),Xt%=Wt,Nt.splice(Xt++,0,Yt)}return Ut(Nt)}function Ft(Rt){var Nt,Gt,Wt,Xt,Yt,Zt,er,Ar,hr,dr,ar,ur=[],or,fr,pr,yr;for(Rt=Dt(Rt),or=Rt.length,Nt=lt,Gt=0,Yt=at,Zt=0;Zt<or;++Zt)ar=Rt[Zt],ar<128&&ur.push(wt(ar));for(Wt=Xt=ur.length,Xt&&ur.push(dt);Wt<or;){for(er=At,Zt=0;Zt<or;++Zt)ar=Rt[Zt],ar>=Nt&&ar<er&&(er=ar);for(fr=Wt+1,er-Nt>vt((At-Gt)/fr)&&Bt("overflow"),Gt+=(er-Nt)*fr,Nt=er,Zt=0;Zt<or;++Zt)if(ar=Rt[Zt],ar<Nt&&++Gt>At&&Bt("overflow"),ar==Nt){for(Ar=Gt,hr=ut;dr=hr<=Yt?ct:hr>=Yt+ht?ht:hr-Yt,!(Ar<dr);hr+=ut)yr=Ar-dr,pr=ut-dr,ur.push(wt(St(dr+yr%pr,0))),Ar=vt(yr/pr);ur.push(wt(St(Ar,0))),Yt=xt(Gt,fr,Wt==Xt),Gt=0,++Wt}++Gt,++Nt}return ur.join("")}function Lt(Rt){return It(Rt,function(Nt){return ft.test(Nt)?Ct(Nt.slice(4).toLowerCase()):Nt})}function Mt(Rt){return It(Rt,function(Nt){return pt.test(Nt)?"xn--"+Ft(Nt):Nt})}if(st={version:"1.4.1",ucs2:{decode:Dt,encode:Ut},decode:Ct,encode:Ft,toASCII:Mt,toUnicode:Lt},tt&&rt)if(et.exports==tt)rt.exports=st;else for(bt in st)st.hasOwnProperty(bt)&&(tt[bt]=st[bt]);else _e.punycode=st})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},_e=Symbol("test"),tt=Object(_e);if(typeof _e=="string"||Object.prototype.toString.call(_e)!=="[object Symbol]"||Object.prototype.toString.call(tt)!=="[object Symbol]")return!1;var rt=42;_[_e]=rt;for(_e in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var it=Object.getOwnPropertySymbols(_);if(it.length!==1||it[0]!==_e||!Object.prototype.propertyIsEnumerable.call(_,_e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var st=Object.getOwnPropertyDescriptor(_,_e);if(st.value!==rt||st.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$1=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(_,_e){for(var tt=[],rt=0;rt<_.length;rt+=1)tt[rt]=_[rt];for(var it=0;it<_e.length;it+=1)tt[it+_.length]=_e[it];return tt},slicy=function(_,_e){for(var tt=[],rt=_e||0,it=0;rt<_.length;rt+=1,it+=1)tt[it]=_[rt];return tt},joiny=function(et,_){for(var _e="",tt=0;tt<et.length;tt+=1)_e+=et[tt],tt+1<et.length&&(_e+=_);return _e},implementation$1=function(_){var _e=this;if(typeof _e!="function"||toStr$1.apply(_e)!==funcType)throw new TypeError(ERROR_MESSAGE+_e);for(var tt=slicy(arguments,1),rt,it=function(){if(this instanceof rt){var ht=_e.apply(this,concatty(tt,arguments));return Object(ht)===ht?ht:this}return _e.apply(_,concatty(tt,arguments))},st=max(0,_e.length-tt.length),At=[],ut=0;ut<st;ut++)At[ut]="$"+ut;if(rt=Function("binder","return function ("+joiny(At,",")+"){ return binder.apply(this,arguments); }")(it),_e.prototype){var ct=function(){};ct.prototype=_e.prototype,rt.prototype=new ct,ct.prototype=null}return rt},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$3=TypeError,getEvalledConstructor=function(et){try{return $Function('"use strict"; return ('+et+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(et){return et.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(et){var errorProto=getProto(getProto(et));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function et(_){var _e;if(_==="%AsyncFunction%")_e=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")_e=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")_e=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var tt=et("%AsyncGeneratorFunction%");tt&&(_e=tt.prototype)}else if(_==="%AsyncIteratorPrototype%"){var rt=et("%AsyncGenerator%");rt&&getProto&&(_e=getProto(rt.prototype))}return INTRINSICS[_]=_e,_e},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=hasown,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(_){var _e=$strSlice(_,0,1),tt=$strSlice(_,-1);if(_e==="%"&&tt!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&_e!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var rt=[];return $replace$1(_,rePropName,function(it,st,At,ut){rt[rt.length]=At?$replace$1(ut,reEscapeChar,"$1"):st||it}),rt},getBaseIntrinsic=function(_,_e){var tt=_,rt;if(hasOwn$1(LEGACY_ALIASES,tt)&&(rt=LEGACY_ALIASES[tt],tt="%"+rt[0]+"%"),hasOwn$1(INTRINSICS,tt)){var it=INTRINSICS[tt];if(it===needsEval&&(it=doEval(tt)),typeof it>"u"&&!_e)throw new $TypeError$3("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:rt,name:tt,value:it}}throw new $SyntaxError$1("intrinsic "+_+" does not exist!")},getIntrinsic=function(_,_e){if(typeof _!="string"||_.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof _e!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var tt=stringToPath(_),rt=tt.length>0?tt[0]:"",it=getBaseIntrinsic("%"+rt+"%",_e),st=it.name,At=it.value,ut=!1,ct=it.alias;ct&&(rt=ct[0],$spliceApply(tt,$concat$1([0,1],ct)));for(var ht=1,ot=!0;ht<tt.length;ht+=1){var nt=tt[ht],at=$strSlice(nt,0,1),lt=$strSlice(nt,-1);if((at==='"'||at==="'"||at==="`"||lt==='"'||lt==="'"||lt==="`")&&at!==lt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((nt==="constructor"||!ot)&&(ut=!0),rt+="."+nt,st="%"+rt+"%",hasOwn$1(INTRINSICS,st))At=INTRINSICS[st];else if(At!=null){if(!(nt in At)){if(!_e)throw new $TypeError$3("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD$1&&ht+1>=tt.length){var dt=$gOPD$1(At,nt);ot=!!dt,ot&&"get"in dt&&!("originalValue"in dt.get)?At=dt.get:At=At[nt]}else ot=hasOwn$1(At,nt),At=At[nt];ot&&!ut&&(INTRINSICS[st]=At)}}return At},callBind$1={exports:{}},GetIntrinsic$5=getIntrinsic,$defineProperty$1=GetIntrinsic$5("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$4=getIntrinsic,$gOPD=GetIntrinsic$4("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$3=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$3("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$3("%SyntaxError%"),$TypeError$2=GetIntrinsic$3("%TypeError%"),gopd=gopd$1,defineDataProperty=function(_,_e,tt){if(!_||typeof _!="object"&&typeof _!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof _e!="string"&&typeof _e!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var rt=arguments.length>3?arguments[3]:null,it=arguments.length>4?arguments[4]:null,st=arguments.length>5?arguments[5]:null,At=arguments.length>6?arguments[6]:!1,ut=!!gopd&&gopd(_,_e);if($defineProperty)$defineProperty(_,_e,{configurable:st===null&&ut?ut.configurable:!st,enumerable:rt===null&&ut?ut.enumerable:!rt,value:tt,writable:it===null&&ut?ut.writable:!it});else if(At||!rt&&!it&&!st)_[_e]=tt;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=GetIntrinsic$2("%TypeError%"),$floor$1=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function(_,_e){if(typeof _!="function")throw new $TypeError$1("`fn` is not a function");if(typeof _e!="number"||_e<0||_e>4294967295||$floor$1(_e)!==_e)throw new $TypeError$1("`length` must be a positive 32-bit integer");var tt=arguments.length>2&&!!arguments[2],rt=!0,it=!0;if("length"in _&&gOPD){var st=gOPD(_,"length");st&&!st.configurable&&(rt=!1),st&&!st.writable&&(it=!1)}return(rt||it||!tt)&&(hasDescriptors?define(_,"length",_e,!0,!0):define(_,"length",_e)),_};(function(et){var _=functionBind,_e=getIntrinsic,tt=setFunctionLength,rt=_e("%TypeError%"),it=_e("%Function.prototype.apply%"),st=_e("%Function.prototype.call%"),At=_e("%Reflect.apply%",!0)||_.call(st,it),ut=_e("%Object.defineProperty%",!0),ct=_e("%Math.max%");if(ut)try{ut({},"a",{value:1})}catch{ut=null}et.exports=function(nt){if(typeof nt!="function")throw new rt("a function is required");var at=At(_,st,arguments);return tt(at,1+ct(0,nt.length-(arguments.length-1)),!0)};var ht=function(){return At(_,it,arguments)};ut?ut(et.exports,"apply",{value:ht}):et.exports.apply=ht})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(_,_e){var tt=GetIntrinsic$1(_,!!_e);return typeof tt=="function"&&$indexOf(_,".prototype.")>-1?callBind(tt):tt};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(et){return et.__proto__}:null);function addNumericSeparator(et,_){if(et===1/0||et===-1/0||et!==et||et&&et>-1e3&&et<1e3||$test.call(/e/,_))return _;var _e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof et=="number"){var tt=et<0?-$floor(-et):$floor(et);if(tt!==et){var rt=String(tt),it=$slice.call(_,rt.length+1);return $replace.call(rt,_e,"$&_")+"."+$replace.call($replace.call(it,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(_,_e,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function et(_,_e,tt,rt){var it=_e||{};if(has$3(it,"quoteStyle")&&it.quoteStyle!=="single"&&it.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(it,"maxStringLength")&&(typeof it.maxStringLength=="number"?it.maxStringLength<0&&it.maxStringLength!==1/0:it.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var st=has$3(it,"customInspect")?it.customInspect:!0;if(typeof st!="boolean"&&st!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(it,"indent")&&it.indent!==null&&it.indent!=="	"&&!(parseInt(it.indent,10)===it.indent&&it.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(it,"numericSeparator")&&typeof it.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var At=it.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,it);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var ut=String(_);return At?addNumericSeparator(_,ut):ut}if(typeof _=="bigint"){var ct=String(_)+"n";return At?addNumericSeparator(_,ct):ct}var ht=typeof it.depth>"u"?5:it.depth;if(typeof tt>"u"&&(tt=0),tt>=ht&&ht>0&&typeof _=="object")return isArray$3(_)?"[Array]":"[Object]";var ot=getIndent(it,tt);if(typeof rt>"u")rt=[];else if(indexOf(rt,_)>=0)return"[Circular]";function nt(_t,St,xt){if(St&&(rt=$arrSlice.call(rt),rt.push(St)),xt){var Ct={depth:it.depth};return has$3(it,"quoteStyle")&&(Ct.quoteStyle=it.quoteStyle),et(_t,Ct,tt+1,rt)}return et(_t,it,tt+1,rt)}if(typeof _=="function"&&!isRegExp$1(_)){var at=nameOf(_),lt=arrObjKeys(_,nt);return"[Function"+(at?": "+at:" (anonymous)")+"]"+(lt.length>0?" { "+$join.call(lt,", ")+" }":"")}if(isSymbol(_)){var dt=hasShammedSymbols?$replace.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(dt):dt}if(isElement(_)){for(var ft="<"+$toLowerCase.call(String(_.nodeName)),pt=_.attributes||[],gt=0;gt<pt.length;gt++)ft+=" "+pt[gt].name+"="+wrapQuotes(quote(pt[gt].value),"double",it);return ft+=">",_.childNodes&&_.childNodes.length&&(ft+="..."),ft+="</"+$toLowerCase.call(String(_.nodeName))+">",ft}if(isArray$3(_)){if(_.length===0)return"[]";var mt=arrObjKeys(_,nt);return ot&&!singleLineValues(mt)?"["+indentedJoin(mt,ot)+"]":"[ "+$join.call(mt,", ")+" ]"}if(isError(_)){var yt=arrObjKeys(_,nt);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat.call("[cause]: "+nt(_.cause),yt),", ")+" }":yt.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(yt,", ")+" }"}if(typeof _=="object"&&st){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:ht-tt});if(st!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap(_)){var vt=[];return mapForEach&&mapForEach.call(_,function(_t,St){vt.push(nt(St,_,!0)+" => "+nt(_t,_))}),collectionOf("Map",mapSize$1.call(_),vt,ot)}if(isSet(_)){var wt=[];return setForEach&&setForEach.call(_,function(_t){wt.push(nt(_t,_))}),collectionOf("Set",setSize.call(_),wt,ot)}if(isWeakMap(_))return weakCollectionOf("WeakMap");if(isWeakSet(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber(_))return markBoxed(nt(Number(_)));if(isBigInt(_))return markBoxed(nt(bigIntValueOf.call(_)));if(isBoolean(_))return markBoxed(booleanValueOf.call(_));if(isString(_))return markBoxed(nt(String(_)));if(typeof window<"u"&&_===window)return"{ [object Window] }";if(_===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(_)&&!isRegExp$1(_)){var bt=arrObjKeys(_,nt),Bt=gPO?gPO(_)===Object.prototype:_ instanceof Object||_.constructor===Object,Tt=_ instanceof Object?"":"null prototype",It=!Bt&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr(_),8,-1):Tt?"Object":"",Dt=Bt||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",Ut=Dt+(It||Tt?"["+$join.call($concat.call([],It||[],Tt||[]),": ")+"] ":"");return bt.length===0?Ut+"{}":ot?Ut+"{"+indentedJoin(bt,ot)+"}":Ut+"{ "+$join.call(bt,", ")+" }"}return String(_)};function wrapQuotes(et,_,_e){var tt=(_e.quoteStyle||_)==="double"?'"':"'";return tt+et+tt}function quote(et){return $replace.call(String(et),/"/g,"&quot;")}function isArray$3(et){return toStr(et)==="[object Array]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isDate(et){return toStr(et)==="[object Date]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isRegExp$1(et){return toStr(et)==="[object RegExp]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isError(et){return toStr(et)==="[object Error]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isString(et){return toStr(et)==="[object String]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isNumber(et){return toStr(et)==="[object Number]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isBoolean(et){return toStr(et)==="[object Boolean]"&&(!toStringTag||!(typeof et=="object"&&toStringTag in et))}function isSymbol(et){if(hasShammedSymbols)return et&&typeof et=="object"&&et instanceof Symbol;if(typeof et=="symbol")return!0;if(!et||typeof et!="object"||!symToString)return!1;try{return symToString.call(et),!0}catch{}return!1}function isBigInt(et){if(!et||typeof et!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(et),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(et){return et in this};function has$3(et,_){return hasOwn.call(et,_)}function toStr(et){return objectToString.call(et)}function nameOf(et){if(et.name)return et.name;var _=$match.call(functionToString.call(et),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf(et,_){if(et.indexOf)return et.indexOf(_);for(var _e=0,tt=et.length;_e<tt;_e++)if(et[_e]===_)return _e;return-1}function isMap(et){if(!mapSize$1||!et||typeof et!="object")return!1;try{mapSize$1.call(et);try{setSize.call(et)}catch{return!0}return et instanceof Map}catch{}return!1}function isWeakMap(et){if(!weakMapHas||!et||typeof et!="object")return!1;try{weakMapHas.call(et,weakMapHas);try{weakSetHas.call(et,weakSetHas)}catch{return!0}return et instanceof WeakMap}catch{}return!1}function isWeakRef(et){if(!weakRefDeref||!et||typeof et!="object")return!1;try{return weakRefDeref.call(et),!0}catch{}return!1}function isSet(et){if(!setSize||!et||typeof et!="object")return!1;try{setSize.call(et);try{mapSize$1.call(et)}catch{return!0}return et instanceof Set}catch{}return!1}function isWeakSet(et){if(!weakSetHas||!et||typeof et!="object")return!1;try{weakSetHas.call(et,weakSetHas);try{weakMapHas.call(et,weakMapHas)}catch{return!0}return et instanceof WeakSet}catch{}return!1}function isElement(et){return!et||typeof et!="object"?!1:typeof HTMLElement<"u"&&et instanceof HTMLElement?!0:typeof et.nodeName=="string"&&typeof et.getAttribute=="function"}function inspectString(et,_){if(et.length>_.maxStringLength){var _e=et.length-_.maxStringLength,tt="... "+_e+" more character"+(_e>1?"s":"");return inspectString($slice.call(et,0,_.maxStringLength),_)+tt}var rt=$replace.call($replace.call(et,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(rt,"single",_)}function lowbyte(et){var _=et.charCodeAt(0),_e={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return _e?"\\"+_e:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(et){return"Object("+et+")"}function weakCollectionOf(et){return et+" { ? }"}function collectionOf(et,_,_e,tt){var rt=tt?indentedJoin(_e,tt):$join.call(_e,", ");return et+" ("+_+") {"+rt+"}"}function singleLineValues(et){for(var _=0;_<et.length;_++)if(indexOf(et[_],`
`)>=0)return!1;return!0}function getIndent(et,_){var _e;if(et.indent==="	")_e="	";else if(typeof et.indent=="number"&&et.indent>0)_e=$join.call(Array(et.indent+1)," ");else return null;return{base:_e,prev:$join.call(Array(_+1),_e)}}function indentedJoin(et,_){if(et.length===0)return"";var _e=`
`+_.prev+_.base;return _e+$join.call(et,","+_e)+`
`+_.prev}function arrObjKeys(et,_){var _e=isArray$3(et),tt=[];if(_e){tt.length=et.length;for(var rt=0;rt<et.length;rt++)tt[rt]=has$3(et,rt)?_(et[rt],et):""}var it=typeof gOPS=="function"?gOPS(et):[],st;if(hasShammedSymbols){st={};for(var At=0;At<it.length;At++)st["$"+it[At]]=it[At]}for(var ut in et)has$3(et,ut)&&(_e&&String(Number(ut))===ut&&ut<et.length||hasShammedSymbols&&st["$"+ut]instanceof Symbol||($test.call(/[^\w$]/,ut)?tt.push(_(ut,et)+": "+_(et[ut],et)):tt.push(ut+": "+_(et[ut],et))));if(typeof gOPS=="function")for(var ct=0;ct<it.length;ct++)isEnumerable.call(et,it[ct])&&tt.push("["+_(it[ct])+"]: "+_(et[it[ct]],et));return tt}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(et,_){for(var _e=et,tt;(tt=_e.next)!==null;_e=tt)if(tt.key===_)return _e.next=tt.next,tt.next=et.next,et.next=tt,tt},listGet=function(et,_){var _e=listGetNode(et,_);return _e&&_e.value},listSet=function(et,_,_e){var tt=listGetNode(et,_);tt?tt.value=_e:et.next={key:_,next:et.next,value:_e}},listHas=function(et,_){return!!listGetNode(et,_)},sideChannel=function(){var _,_e,tt,rt={assert:function(it){if(!rt.has(it))throw new $TypeError("Side channel does not contain "+inspect(it))},get:function(it){if($WeakMap&&it&&(typeof it=="object"||typeof it=="function")){if(_)return $weakMapGet(_,it)}else if($Map){if(_e)return $mapGet(_e,it)}else if(tt)return listGet(tt,it)},has:function(it){if($WeakMap&&it&&(typeof it=="object"||typeof it=="function")){if(_)return $weakMapHas(_,it)}else if($Map){if(_e)return $mapHas(_e,it)}else if(tt)return listHas(tt,it);return!1},set:function(it,st){$WeakMap&&it&&(typeof it=="object"||typeof it=="function")?(_||(_=new $WeakMap),$weakMapSet(_,it,st)):$Map?(_e||(_e=new $Map),$mapSet(_e,it,st)):(tt||(tt={key:{},next:null}),listSet(tt,it,st))}};return rt},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(et){return replace.call(et,percentTwenties,"+")},RFC3986:function(et){return String(et)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var et=[],_=0;_<256;++_)et.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return et}(),compactQueue=function(_){for(;_.length>1;){var _e=_.pop(),tt=_e.obj[_e.prop];if(isArray$2(tt)){for(var rt=[],it=0;it<tt.length;++it)typeof tt[it]<"u"&&rt.push(tt[it]);_e.obj[_e.prop]=rt}}},arrayToObject=function(_,_e){for(var tt=_e&&_e.plainObjects?Object.create(null):{},rt=0;rt<_.length;++rt)typeof _[rt]<"u"&&(tt[rt]=_[rt]);return tt},merge=function et(_,_e,tt){if(!_e)return _;if(typeof _e!="object"){if(isArray$2(_))_.push(_e);else if(_&&typeof _=="object")(tt&&(tt.plainObjects||tt.allowPrototypes)||!has$2.call(Object.prototype,_e))&&(_[_e]=!0);else return[_,_e];return _}if(!_||typeof _!="object")return[_].concat(_e);var rt=_;return isArray$2(_)&&!isArray$2(_e)&&(rt=arrayToObject(_,tt)),isArray$2(_)&&isArray$2(_e)?(_e.forEach(function(it,st){if(has$2.call(_,st)){var At=_[st];At&&typeof At=="object"&&it&&typeof it=="object"?_[st]=et(At,it,tt):_.push(it)}else _[st]=it}),_):Object.keys(_e).reduce(function(it,st){var At=_e[st];return has$2.call(it,st)?it[st]=et(it[st],At,tt):it[st]=At,it},rt)},assign=function(_,_e){return Object.keys(_e).reduce(function(tt,rt){return tt[rt]=_e[rt],tt},_)},decode$2=function(et,_,_e){var tt=et.replace(/\+/g," ");if(_e==="iso-8859-1")return tt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tt)}catch{return tt}},encode=function(_,_e,tt,rt,it){if(_.length===0)return _;var st=_;if(typeof _=="symbol"?st=Symbol.prototype.toString.call(_):typeof _!="string"&&(st=String(_)),tt==="iso-8859-1")return escape(st).replace(/%u[0-9a-f]{4}/gi,function(ht){return"%26%23"+parseInt(ht.slice(2),16)+"%3B"});for(var At="",ut=0;ut<st.length;++ut){var ct=st.charCodeAt(ut);if(ct===45||ct===46||ct===95||ct===126||ct>=48&&ct<=57||ct>=65&&ct<=90||ct>=97&&ct<=122||it===formats$3.RFC1738&&(ct===40||ct===41)){At+=st.charAt(ut);continue}if(ct<128){At=At+hexTable[ct];continue}if(ct<2048){At=At+(hexTable[192|ct>>6]+hexTable[128|ct&63]);continue}if(ct<55296||ct>=57344){At=At+(hexTable[224|ct>>12]+hexTable[128|ct>>6&63]+hexTable[128|ct&63]);continue}ut+=1,ct=65536+((ct&1023)<<10|st.charCodeAt(ut)&1023),At+=hexTable[240|ct>>18]+hexTable[128|ct>>12&63]+hexTable[128|ct>>6&63]+hexTable[128|ct&63]}return At},compact=function(_){for(var _e=[{obj:{o:_},prop:"o"}],tt=[],rt=0;rt<_e.length;++rt)for(var it=_e[rt],st=it.obj[it.prop],At=Object.keys(st),ut=0;ut<At.length;++ut){var ct=At[ut],ht=st[ct];typeof ht=="object"&&ht!==null&&tt.indexOf(ht)===-1&&(_e.push({obj:st,prop:ct}),tt.push(ht))}return compactQueue(_e),_},isRegExp=function(_){return Object.prototype.toString.call(_)==="[object RegExp]"},isBuffer=function(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},combine=function(_,_e){return[].concat(_,_e)},maybeMap=function(_,_e){if(isArray$2(_)){for(var tt=[],rt=0;rt<_.length;rt+=1)tt.push(_e(_[rt]));return tt}return _e(_)},utils$2={arrayToObject,assign,combine,compact,decode:decode$2,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(_){return _+"[]"},comma:"comma",indices:function(_,_e){return _+"["+_e+"]"},repeat:function(_){return _}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(et,_){push.apply(et,isArray$1(_)?_:[_])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function(_){return toISO.call(_)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},sentinel={},stringify$1=function et(_,_e,tt,rt,it,st,At,ut,ct,ht,ot,nt,at,lt,dt,ft){for(var pt=_,gt=ft,mt=0,yt=!1;(gt=gt.get(sentinel))!==void 0&&!yt;){var vt=gt.get(_);if(mt+=1,typeof vt<"u"){if(vt===mt)throw new RangeError("Cyclic object value");yt=!0}typeof gt.get(sentinel)>"u"&&(mt=0)}if(typeof ut=="function"?pt=ut(_e,pt):pt instanceof Date?pt=ot(pt):tt==="comma"&&isArray$1(pt)&&(pt=utils$1.maybeMap(pt,function(Ct){return Ct instanceof Date?ot(Ct):Ct})),pt===null){if(it)return At&&!lt?At(_e,defaults$1.encoder,dt,"key",nt):_e;pt=""}if(isNonNullishPrimitive(pt)||utils$1.isBuffer(pt)){if(At){var wt=lt?_e:At(_e,defaults$1.encoder,dt,"key",nt);return[at(wt)+"="+at(At(pt,defaults$1.encoder,dt,"value",nt))]}return[at(_e)+"="+at(String(pt))]}var bt=[];if(typeof pt>"u")return bt;var Bt;if(tt==="comma"&&isArray$1(pt))lt&&At&&(pt=utils$1.maybeMap(pt,At)),Bt=[{value:pt.length>0?pt.join(",")||null:void 0}];else if(isArray$1(ut))Bt=ut;else{var Tt=Object.keys(pt);Bt=ct?Tt.sort(ct):Tt}for(var It=rt&&isArray$1(pt)&&pt.length===1?_e+"[]":_e,Dt=0;Dt<Bt.length;++Dt){var Ut=Bt[Dt],_t=typeof Ut=="object"&&typeof Ut.value<"u"?Ut.value:pt[Ut];if(!(st&&_t===null)){var St=isArray$1(pt)?typeof tt=="function"?tt(It,Ut):It:It+(ht?"."+Ut:"["+Ut+"]");ft.set(_,mt);var xt=getSideChannel();xt.set(sentinel,ft),pushToArray(bt,et(_t,St,tt,rt,it,st,tt==="comma"&&lt&&isArray$1(pt)?null:At,ut,ct,ht,ot,nt,at,lt,dt,xt))}}return bt},normalizeStringifyOptions=function(_){if(!_)return defaults$1;if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var _e=_.charset||defaults$1.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var tt=formats$2.default;if(typeof _.format<"u"){if(!has$1.call(formats$2.formatters,_.format))throw new TypeError("Unknown format option provided.");tt=_.format}var rt=formats$2.formatters[tt],it=defaults$1.filter;return(typeof _.filter=="function"||isArray$1(_.filter))&&(it=_.filter),{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof _.allowDots>"u"?defaults$1.allowDots:!!_.allowDots,charset:_e,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof _.delimiter>"u"?defaults$1.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:defaults$1.encode,encoder:typeof _.encoder=="function"?_.encoder:defaults$1.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:it,format:tt,formatter:rt,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:defaults$1.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:defaults$1.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(et,_){var _e=et,tt=normalizeStringifyOptions(_),rt,it;typeof tt.filter=="function"?(it=tt.filter,_e=it("",_e)):isArray$1(tt.filter)&&(it=tt.filter,rt=it);var st=[];if(typeof _e!="object"||_e===null)return"";var At;_&&_.arrayFormat in arrayPrefixGenerators?At=_.arrayFormat:_&&"indices"in _?At=_.indices?"indices":"repeat":At="indices";var ut=arrayPrefixGenerators[At];if(_&&"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ct=ut==="comma"&&_&&_.commaRoundTrip;rt||(rt=Object.keys(_e)),tt.sort&&rt.sort(tt.sort);for(var ht=getSideChannel(),ot=0;ot<rt.length;++ot){var nt=rt[ot];tt.skipNulls&&_e[nt]===null||pushToArray(st,stringify$1(_e[nt],nt,ut,ct,tt.strictNullHandling,tt.skipNulls,tt.encode?tt.encoder:null,tt.filter,tt.sort,tt.allowDots,tt.serializeDate,tt.format,tt.formatter,tt.encodeValuesOnly,tt.charset,ht))}var at=st.join(tt.delimiter),lt=tt.addQueryPrefix===!0?"?":"";return tt.charsetSentinel&&(tt.charset==="iso-8859-1"?lt+="utf8=%26%2310003%3B&":lt+="utf8=%E2%9C%93&"),at.length>0?lt+at:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(et){return et.replace(/&#(\d+);/g,function(_,_e){return String.fromCharCode(parseInt(_e,10))})},parseArrayValue=function(et,_){return et&&typeof et=="string"&&_.comma&&et.indexOf(",")>-1?et.split(","):et},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(_,_e){var tt={__proto__:null},rt=_e.ignoreQueryPrefix?_.replace(/^\?/,""):_,it=_e.parameterLimit===1/0?void 0:_e.parameterLimit,st=rt.split(_e.delimiter,it),At=-1,ut,ct=_e.charset;if(_e.charsetSentinel)for(ut=0;ut<st.length;++ut)st[ut].indexOf("utf8=")===0&&(st[ut]===charsetSentinel?ct="utf-8":st[ut]===isoSentinel&&(ct="iso-8859-1"),At=ut,ut=st.length);for(ut=0;ut<st.length;++ut)if(ut!==At){var ht=st[ut],ot=ht.indexOf("]="),nt=ot===-1?ht.indexOf("="):ot+1,at,lt;nt===-1?(at=_e.decoder(ht,defaults.decoder,ct,"key"),lt=_e.strictNullHandling?null:""):(at=_e.decoder(ht.slice(0,nt),defaults.decoder,ct,"key"),lt=utils.maybeMap(parseArrayValue(ht.slice(nt+1),_e),function(dt){return _e.decoder(dt,defaults.decoder,ct,"value")})),lt&&_e.interpretNumericEntities&&ct==="iso-8859-1"&&(lt=interpretNumericEntities(lt)),ht.indexOf("[]=")>-1&&(lt=isArray(lt)?[lt]:lt),has.call(tt,at)?tt[at]=utils.combine(tt[at],lt):tt[at]=lt}return tt},parseObject=function(et,_,_e,tt){for(var rt=tt?_:parseArrayValue(_,_e),it=et.length-1;it>=0;--it){var st,At=et[it];if(At==="[]"&&_e.parseArrays)st=[].concat(rt);else{st=_e.plainObjects?Object.create(null):{};var ut=At.charAt(0)==="["&&At.charAt(At.length-1)==="]"?At.slice(1,-1):At,ct=parseInt(ut,10);!_e.parseArrays&&ut===""?st={0:rt}:!isNaN(ct)&&At!==ut&&String(ct)===ut&&ct>=0&&_e.parseArrays&&ct<=_e.arrayLimit?(st=[],st[ct]=rt):ut!=="__proto__"&&(st[ut]=rt)}rt=st}return rt},parseKeys=function(_,_e,tt,rt){if(_){var it=tt.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,st=/(\[[^[\]]*])/,At=/(\[[^[\]]*])/g,ut=tt.depth>0&&st.exec(it),ct=ut?it.slice(0,ut.index):it,ht=[];if(ct){if(!tt.plainObjects&&has.call(Object.prototype,ct)&&!tt.allowPrototypes)return;ht.push(ct)}for(var ot=0;tt.depth>0&&(ut=At.exec(it))!==null&&ot<tt.depth;){if(ot+=1,!tt.plainObjects&&has.call(Object.prototype,ut[1].slice(1,-1))&&!tt.allowPrototypes)return;ht.push(ut[1])}return ut&&ht.push("["+it.slice(ut.index)+"]"),parseObject(ht,_e,tt,rt)}},normalizeParseOptions=function(_){if(!_)return defaults;if(_.decoder!==null&&_.decoder!==void 0&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _e=typeof _.charset>"u"?defaults.charset:_.charset;return{allowDots:typeof _.allowDots>"u"?defaults.allowDots:!!_.allowDots,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:defaults.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:defaults.arrayLimit,charset:_e,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:defaults.comma,decoder:typeof _.decoder=="function"?_.decoder:defaults.decoder,delimiter:typeof _.delimiter=="string"||utils.isRegExp(_.delimiter)?_.delimiter:defaults.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:defaults.depth,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:defaults.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:defaults.plainObjects,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults.strictNullHandling}},parse$2=function(et,_){var _e=normalizeParseOptions(_);if(et===""||et===null||typeof et>"u")return _e.plainObjects?Object.create(null):{};for(var tt=typeof et=="string"?parseValues(et,_e):et,rt=_e.plainObjects?Object.create(null):{},it=Object.keys(tt),st=0;st<it.length;++st){var At=it[st],ut=parseKeys(At,tt[At],_e,typeof et=="string");rt=utils.merge(rt,ut,_e)}return _e.allowSparse===!0?rt:utils.compact(rt)},stringify=stringify_1,parse$1=parse$2,formats$1=formats$4,lib={formats:formats$1,parse:parse$1,stringify},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib;function urlParse(et,_,_e){if(et&&typeof et=="object"&&et instanceof Url)return et;var tt=new Url;return tt.parse(et,_,_e),tt}Url.prototype.parse=function(et,_,_e){if(typeof et!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof et);var tt=et.indexOf("?"),rt=tt!==-1&&tt<et.indexOf("#")?"?":"#",it=et.split(rt),st=/\\/g;it[0]=it[0].replace(st,"/"),et=it.join(rt);var At=et;if(At=At.trim(),!_e&&et.split("#").length===1){var ut=simplePathPattern.exec(At);if(ut)return this.path=At,this.href=At,this.pathname=ut[1],ut[2]?(this.search=ut[2],_?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var ct=protocolPattern.exec(At);if(ct){ct=ct[0];var ht=ct.toLowerCase();this.protocol=ht,At=At.substr(ct.length)}if(_e||ct||At.match(/^\/\/[^@/]+@[^@/]+/)){var ot=At.substr(0,2)==="//";ot&&!(ct&&hostlessProtocol[ct])&&(At=At.substr(2),this.slashes=!0)}if(!hostlessProtocol[ct]&&(ot||ct&&!slashedProtocol[ct])){for(var nt=-1,at=0;at<hostEndingChars.length;at++){var lt=At.indexOf(hostEndingChars[at]);lt!==-1&&(nt===-1||lt<nt)&&(nt=lt)}var dt,ft;nt===-1?ft=At.lastIndexOf("@"):ft=At.lastIndexOf("@",nt),ft!==-1&&(dt=At.slice(0,ft),At=At.slice(ft+1),this.auth=decodeURIComponent(dt)),nt=-1;for(var at=0;at<nonHostChars.length;at++){var lt=At.indexOf(nonHostChars[at]);lt!==-1&&(nt===-1||lt<nt)&&(nt=lt)}nt===-1&&(nt=At.length),this.host=At.slice(0,nt),At=At.slice(nt),this.parseHost(),this.hostname=this.hostname||"";var pt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!pt)for(var gt=this.hostname.split(/\./),at=0,mt=gt.length;at<mt;at++){var yt=gt[at];if(yt&&!yt.match(hostnamePartPattern)){for(var vt="",wt=0,bt=yt.length;wt<bt;wt++)yt.charCodeAt(wt)>127?vt+="x":vt+=yt[wt];if(!vt.match(hostnamePartPattern)){var Bt=gt.slice(0,at),Tt=gt.slice(at+1),It=yt.match(hostnamePartStart);It&&(Bt.push(It[1]),Tt.unshift(It[2])),Tt.length&&(At="/"+Tt.join(".")+At),this.hostname=Bt.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),pt||(this.hostname=punycode.toASCII(this.hostname));var Dt=this.port?":"+this.port:"",Ut=this.hostname||"";this.host=Ut+Dt,this.href+=this.host,pt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),At[0]!=="/"&&(At="/"+At))}if(!unsafeProtocol[ht])for(var at=0,mt=autoEscape.length;at<mt;at++){var _t=autoEscape[at];if(At.indexOf(_t)!==-1){var St=encodeURIComponent(_t);St===_t&&(St=escape(_t)),At=At.split(_t).join(St)}}var xt=At.indexOf("#");xt!==-1&&(this.hash=At.substr(xt),At=At.slice(0,xt));var Ct=At.indexOf("?");if(Ct!==-1?(this.search=At.substr(Ct),this.query=At.substr(Ct+1),_&&(this.query=querystring.parse(this.query)),At=At.slice(0,Ct)):_&&(this.search="",this.query={}),At&&(this.pathname=At),slashedProtocol[ht]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Dt=this.pathname||"",Ft=this.search||"";this.path=Dt+Ft}return this.href=this.format(),this};Url.prototype.format=function(){var et=this.auth||"";et&&(et=encodeURIComponent(et),et=et.replace(/%3A/i,":"),et+="@");var _=this.protocol||"",_e=this.pathname||"",tt=this.hash||"",rt=!1,it="";this.host?rt=et+this.host:this.hostname&&(rt=et+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(it=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var st=this.search||it&&"?"+it||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||slashedProtocol[_])&&rt!==!1?(rt="//"+(rt||""),_e&&_e.charAt(0)!=="/"&&(_e="/"+_e)):rt||(rt=""),tt&&tt.charAt(0)!=="#"&&(tt="#"+tt),st&&st.charAt(0)!=="?"&&(st="?"+st),_e=_e.replace(/[?#]/g,function(At){return encodeURIComponent(At)}),st=st.replace("#","%23"),_+rt+_e+st+tt};Url.prototype.resolve=function(et){return this.resolveObject(urlParse(et,!1,!0)).format()};Url.prototype.resolveObject=function(et){if(typeof et=="string"){var _=new Url;_.parse(et,!1,!0),et=_}for(var _e=new Url,tt=Object.keys(this),rt=0;rt<tt.length;rt++){var it=tt[rt];_e[it]=this[it]}if(_e.hash=et.hash,et.href==="")return _e.href=_e.format(),_e;if(et.slashes&&!et.protocol){for(var st=Object.keys(et),At=0;At<st.length;At++){var ut=st[At];ut!=="protocol"&&(_e[ut]=et[ut])}return slashedProtocol[_e.protocol]&&_e.hostname&&!_e.pathname&&(_e.pathname="/",_e.path=_e.pathname),_e.href=_e.format(),_e}if(et.protocol&&et.protocol!==_e.protocol){if(!slashedProtocol[et.protocol]){for(var ct=Object.keys(et),ht=0;ht<ct.length;ht++){var ot=ct[ht];_e[ot]=et[ot]}return _e.href=_e.format(),_e}if(_e.protocol=et.protocol,!et.host&&!hostlessProtocol[et.protocol]){for(var mt=(et.pathname||"").split("/");mt.length&&!(et.host=mt.shift()););et.host||(et.host=""),et.hostname||(et.hostname=""),mt[0]!==""&&mt.unshift(""),mt.length<2&&mt.unshift(""),_e.pathname=mt.join("/")}else _e.pathname=et.pathname;if(_e.search=et.search,_e.query=et.query,_e.host=et.host||"",_e.auth=et.auth,_e.hostname=et.hostname||et.host,_e.port=et.port,_e.pathname||_e.search){var nt=_e.pathname||"",at=_e.search||"";_e.path=nt+at}return _e.slashes=_e.slashes||et.slashes,_e.href=_e.format(),_e}var lt=_e.pathname&&_e.pathname.charAt(0)==="/",dt=et.host||et.pathname&&et.pathname.charAt(0)==="/",ft=dt||lt||_e.host&&et.pathname,pt=ft,gt=_e.pathname&&_e.pathname.split("/")||[],mt=et.pathname&&et.pathname.split("/")||[],yt=_e.protocol&&!slashedProtocol[_e.protocol];if(yt&&(_e.hostname="",_e.port=null,_e.host&&(gt[0]===""?gt[0]=_e.host:gt.unshift(_e.host)),_e.host="",et.protocol&&(et.hostname=null,et.port=null,et.host&&(mt[0]===""?mt[0]=et.host:mt.unshift(et.host)),et.host=null),ft=ft&&(mt[0]===""||gt[0]==="")),dt)_e.host=et.host||et.host===""?et.host:_e.host,_e.hostname=et.hostname||et.hostname===""?et.hostname:_e.hostname,_e.search=et.search,_e.query=et.query,gt=mt;else if(mt.length)gt||(gt=[]),gt.pop(),gt=gt.concat(mt),_e.search=et.search,_e.query=et.query;else if(et.search!=null){if(yt){_e.host=gt.shift(),_e.hostname=_e.host;var vt=_e.host&&_e.host.indexOf("@")>0?_e.host.split("@"):!1;vt&&(_e.auth=vt.shift(),_e.hostname=vt.shift(),_e.host=_e.hostname)}return _e.search=et.search,_e.query=et.query,(_e.pathname!==null||_e.search!==null)&&(_e.path=(_e.pathname?_e.pathname:"")+(_e.search?_e.search:"")),_e.href=_e.format(),_e}if(!gt.length)return _e.pathname=null,_e.search?_e.path="/"+_e.search:_e.path=null,_e.href=_e.format(),_e;for(var wt=gt.slice(-1)[0],bt=(_e.host||et.host||gt.length>1)&&(wt==="."||wt==="..")||wt==="",Bt=0,Tt=gt.length;Tt>=0;Tt--)wt=gt[Tt],wt==="."?gt.splice(Tt,1):wt===".."?(gt.splice(Tt,1),Bt++):Bt&&(gt.splice(Tt,1),Bt--);if(!ft&&!pt)for(;Bt--;Bt)gt.unshift("..");ft&&gt[0]!==""&&(!gt[0]||gt[0].charAt(0)!=="/")&&gt.unshift(""),bt&&gt.join("/").substr(-1)!=="/"&&gt.push("");var It=gt[0]===""||gt[0]&&gt[0].charAt(0)==="/";if(yt){_e.hostname=It?"":gt.length?gt.shift():"",_e.host=_e.hostname;var vt=_e.host&&_e.host.indexOf("@")>0?_e.host.split("@"):!1;vt&&(_e.auth=vt.shift(),_e.hostname=vt.shift(),_e.host=_e.hostname)}return ft=ft||_e.host&&gt.length,ft&&!It&&gt.unshift(""),gt.length>0?_e.pathname=gt.join("/"):(_e.pathname=null,_e.path=null),(_e.pathname!==null||_e.search!==null)&&(_e.path=(_e.pathname?_e.pathname:"")+(_e.search?_e.search:"")),_e.auth=et.auth||_e.auth,_e.slashes=_e.slashes||et.slashes,_e.href=_e.format(),_e};Url.prototype.parseHost=function(){var et=this.host,_=portPattern.exec(et);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),et=et.substr(0,et.length-_.length)),et&&(this.hostname=et)};const warnings={};function deprecation(et,_,_e=3){if(warnings[_])return;let tt=new Error().stack;typeof tt>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${et}`):(tt=tt.split(`
`).splice(_e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${et}`),console.warn(tt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${et}`),console.warn(tt))),warnings[_]=!0}function assertPath(et){if(typeof et!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(et)}`)}function removeUrlParams(et){return et.split("?")[0].split("#")[0]}function escapeRegExp(et){return et.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(et,_,_e){return et.replace(new RegExp(escapeRegExp(_),"g"),_e)}function normalizeStringPosix(et,_){let _e="",tt=0,rt=-1,it=0,st=-1;for(let At=0;At<=et.length;++At){if(At<et.length)st=et.charCodeAt(At);else{if(st===47)break;st=47}if(st===47){if(!(rt===At-1||it===1))if(rt!==At-1&&it===2){if(_e.length<2||tt!==2||_e.charCodeAt(_e.length-1)!==46||_e.charCodeAt(_e.length-2)!==46){if(_e.length>2){const ut=_e.lastIndexOf("/");if(ut!==_e.length-1){ut===-1?(_e="",tt=0):(_e=_e.slice(0,ut),tt=_e.length-1-_e.lastIndexOf("/")),rt=At,it=0;continue}}else if(_e.length===2||_e.length===1){_e="",tt=0,rt=At,it=0;continue}}_&&(_e.length>0?_e+="/..":_e="..",tt=2)}else _e.length>0?_e+=`/${et.slice(rt+1,At)}`:_e=et.slice(rt+1,At),tt=At-rt-1;rt=At,it=0}else st===46&&it!==-1?++it:it=-1}return _e}const path={toPosix(et){return replaceAll(et,"\\","/")},isUrl(et){return/^https?:/.test(this.toPosix(et))},isDataUrl(et){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(et)},isBlobUrl(et){return et.startsWith("blob:")},hasProtocol(et){return/^[^/:]+:/.test(this.toPosix(et))},getProtocol(et){assertPath(et),et=this.toPosix(et);const _=/^file:\/\/\//.exec(et);if(_)return _[0];const _e=/^[^/:]+:\/{0,2}/.exec(et);return _e?_e[0]:""},toAbsolute(et,_,_e){if(assertPath(et),this.isDataUrl(et)||this.isBlobUrl(et))return et;const tt=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),rt=removeUrlParams(this.toPosix(_e??this.rootname(tt)));return et=this.toPosix(et),et.startsWith("/")?path.join(rt,et.slice(1)):this.isAbsolute(et)?et:this.join(tt,et)},normalize(et){if(assertPath(et),et.length===0)return".";if(this.isDataUrl(et)||this.isBlobUrl(et))return et;et=this.toPosix(et);let _="";const _e=et.startsWith("/");this.hasProtocol(et)&&(_=this.rootname(et),et=et.slice(_.length));const tt=et.endsWith("/");return et=normalizeStringPosix(et,!1),et.length>0&&tt&&(et+="/"),_e?`/${et}`:_+et},isAbsolute(et){return assertPath(et),et=this.toPosix(et),this.hasProtocol(et)?!0:et.startsWith("/")},join(...et){if(et.length===0)return".";let _;for(let _e=0;_e<et.length;++_e){const tt=et[_e];if(assertPath(tt),tt.length>0)if(_===void 0)_=tt;else{const rt=et[_e-1]??"";this.extname(rt)?_+=`/../${tt}`:_+=`/${tt}`}}return _===void 0?".":this.normalize(_)},dirname(et){if(assertPath(et),et.length===0)return".";et=this.toPosix(et);let _=et.charCodeAt(0);const _e=_===47;let tt=-1,rt=!0;const it=this.getProtocol(et),st=et;et=et.slice(it.length);for(let At=et.length-1;At>=1;--At)if(_=et.charCodeAt(At),_===47){if(!rt){tt=At;break}}else rt=!1;return tt===-1?_e?"/":this.isUrl(st)?it+et:it:_e&&tt===1?"//":it+et.slice(0,tt)},rootname(et){assertPath(et),et=this.toPosix(et);let _="";if(et.startsWith("/")?_="/":_=this.getProtocol(et),this.isUrl(et)){const _e=et.indexOf("/",_.length);_e!==-1?_=et.slice(0,_e):_=et,_.endsWith("/")||(_+="/")}return _},basename(et,_){assertPath(et),_&&assertPath(_),et=removeUrlParams(this.toPosix(et));let _e=0,tt=-1,rt=!0,it;if(_!==void 0&&_.length>0&&_.length<=et.length){if(_.length===et.length&&_===et)return"";let st=_.length-1,At=-1;for(it=et.length-1;it>=0;--it){const ut=et.charCodeAt(it);if(ut===47){if(!rt){_e=it+1;break}}else At===-1&&(rt=!1,At=it+1),st>=0&&(ut===_.charCodeAt(st)?--st===-1&&(tt=it):(st=-1,tt=At))}return _e===tt?tt=At:tt===-1&&(tt=et.length),et.slice(_e,tt)}for(it=et.length-1;it>=0;--it)if(et.charCodeAt(it)===47){if(!rt){_e=it+1;break}}else tt===-1&&(rt=!1,tt=it+1);return tt===-1?"":et.slice(_e,tt)},extname(et){assertPath(et),et=removeUrlParams(this.toPosix(et));let _=-1,_e=0,tt=-1,rt=!0,it=0;for(let st=et.length-1;st>=0;--st){const At=et.charCodeAt(st);if(At===47){if(!rt){_e=st+1;break}continue}tt===-1&&(rt=!1,tt=st+1),At===46?_===-1?_=st:it!==1&&(it=1):_!==-1&&(it=-1)}return _===-1||tt===-1||it===0||it===1&&_===tt-1&&_===_e+1?"":et.slice(_,tt)},parse(et){assertPath(et);const _={root:"",dir:"",base:"",ext:"",name:""};if(et.length===0)return _;et=removeUrlParams(this.toPosix(et));let _e=et.charCodeAt(0);const tt=this.isAbsolute(et);let rt;_.root=this.rootname(et),tt||this.hasProtocol(et)?rt=1:rt=0;let it=-1,st=0,At=-1,ut=!0,ct=et.length-1,ht=0;for(;ct>=rt;--ct){if(_e=et.charCodeAt(ct),_e===47){if(!ut){st=ct+1;break}continue}At===-1&&(ut=!1,At=ct+1),_e===46?it===-1?it=ct:ht!==1&&(ht=1):it!==-1&&(ht=-1)}return it===-1||At===-1||ht===0||ht===1&&it===At-1&&it===st+1?At!==-1&&(st===0&&tt?_.base=_.name=et.slice(1,At):_.base=_.name=et.slice(st,At)):(st===0&&tt?(_.name=et.slice(1,it),_.base=et.slice(1,At)):(_.name=et.slice(st,it),_.base=et.slice(st,At)),_.ext=et.slice(it,At)),_.dir=this.dirname(et),_},sep:"/",delimiter:":"};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var it;const et=document.createElement("canvas").getContext("webgl");if(!et)return ALPHA_MODES.UNPACK;const _=await new Promise(st=>{const At=document.createElement("video");At.onloadeddata=()=>st(At),At.onerror=()=>st(null),At.autoplay=!1,At.crossOrigin="anonymous",At.preload="auto",At.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",At.load()});if(!_)return ALPHA_MODES.UNPACK;const _e=et.createTexture();et.bindTexture(et.TEXTURE_2D,_e);const tt=et.createFramebuffer();et.bindFramebuffer(et.FRAMEBUFFER,tt),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,_e,0),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),et.pixelStorei(et.UNPACK_COLORSPACE_CONVERSION_WEBGL,et.NONE),et.texImage2D(et.TEXTURE_2D,0,et.RGBA,et.RGBA,et.UNSIGNED_BYTE,_);const rt=new Uint8Array(4);return et.readPixels(0,0,1,1,et.RGBA,et.UNSIGNED_BYTE,rt),et.deleteFramebuffer(tt),et.deleteTexture(_e),(it=et.getExtension("WEBGL_lose_context"))==null||it.loseContext(),rt[0]<=rt[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const et={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const _e=settings.ADAPTER.createCanvas();let tt=_e.getContext("webgl",et)||_e.getContext("experimental-webgl",et);const rt=!!((_=tt==null?void 0:tt.getContextAttributes())!=null&&_.stencil);if(tt){const it=tt.getExtension("WEBGL_lose_context");it&&it.loseContext()}return tt=null,rt}catch{return!1}}()),supported}var r$1={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(et){return typeof et=="string"?et.length>0:typeof et=="number"},n=function(et,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=Math.pow(10,_)),Math.round(_e*et)/_e+0},e$1=function(et,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=1),et>_e?_e:et>_?et:_},u$3=function(et){return(et=isFinite(et)?et%360:0)>0?et:et+360},a$1=function(et){return{r:e$1(et.r,0,255),g:e$1(et.g,0,255),b:e$1(et.b,0,255),a:e$1(et.a)}},o=function(et){return{r:n(et.r),g:n(et.g),b:n(et.b),a:n(et.a,3)}},i$6=/^#([0-9a-f]{3,8})$/i,s$1=function(et){var _=et.toString(16);return _.length<2?"0"+_:_},h$1=function(et){var _=et.r,_e=et.g,tt=et.b,rt=et.a,it=Math.max(_,_e,tt),st=it-Math.min(_,_e,tt),At=st?it===_?(_e-tt)/st:it===_e?2+(tt-_)/st:4+(_-_e)/st:0;return{h:60*(At<0?At+6:At),s:it?st/it*100:0,v:it/255*100,a:rt}},b$1=function(et){var _=et.h,_e=et.s,tt=et.v,rt=et.a;_=_/360*6,_e/=100,tt/=100;var it=Math.floor(_),st=tt*(1-_e),At=tt*(1-(_-it)*_e),ut=tt*(1-(1-_+it)*_e),ct=it%6;return{r:255*[tt,At,st,st,ut,tt][ct],g:255*[ut,tt,tt,At,st,st][ct],b:255*[st,st,ut,tt,tt,At][ct],a:rt}},g$1=function(et){return{h:u$3(et.h),s:e$1(et.s,0,100),l:e$1(et.l,0,100),a:e$1(et.a)}},d$1=function(et){return{h:n(et.h),s:n(et.s),l:n(et.l),a:n(et.a,3)}},f$2=function(et){return b$1((_e=(_=et).s,{h:_.h,s:(_e*=((tt=_.l)<50?tt:100-tt)/100)>0?2*_e/(tt+_e)*100:0,v:tt+_e,a:_.a}));var _,_e,tt},c$2=function(et){return{h:(_=h$1(et)).h,s:(rt=(200-(_e=_.s))*(tt=_.v)/100)>0&&rt<200?_e*tt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,_e,tt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(et){var _=i$6.exec(et);return _?(et=_[1]).length<=4?{r:parseInt(et[0]+et[0],16),g:parseInt(et[1]+et[1],16),b:parseInt(et[2]+et[2],16),a:et.length===4?n(parseInt(et[3]+et[3],16)/255,2):1}:et.length===6||et.length===8?{r:parseInt(et.substr(0,2),16),g:parseInt(et.substr(2,2),16),b:parseInt(et.substr(4,2),16),a:et.length===8?n(parseInt(et.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(et){var _=v$1.exec(et)||m$1.exec(et);return _?_[2]!==_[4]||_[4]!==_[6]?null:a$1({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(et){var _=l.exec(et)||p$1.exec(et);if(!_)return null;var _e,tt,rt=g$1({h:(_e=_[1],tt=_[2],tt===void 0&&(tt="deg"),Number(_e)*(r$1[tt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f$2(rt)},"hsl"]],object:[[function(et){var _=et.r,_e=et.g,tt=et.b,rt=et.a,it=rt===void 0?1:rt;return t(_)&&t(_e)&&t(tt)?a$1({r:Number(_),g:Number(_e),b:Number(tt),a:Number(it)}):null},"rgb"],[function(et){var _=et.h,_e=et.s,tt=et.l,rt=et.a,it=rt===void 0?1:rt;if(!t(_)||!t(_e)||!t(tt))return null;var st=g$1({h:Number(_),s:Number(_e),l:Number(tt),a:Number(it)});return f$2(st)},"hsl"],[function(et){var _=et.h,_e=et.s,tt=et.v,rt=et.a,it=rt===void 0?1:rt;if(!t(_)||!t(_e)||!t(tt))return null;var st=function(At){return{h:u$3(At.h),s:e$1(At.s,0,100),v:e$1(At.v,0,100),a:e$1(At.a)}}({h:Number(_),s:Number(_e),v:Number(tt),a:Number(it)});return b$1(st)},"hsv"]]},N=function(et,_){for(var _e=0;_e<_.length;_e++){var tt=_[_e][0](et);if(tt)return[tt,_[_e][1]]}return[null,void 0]},x$1=function(et){return typeof et=="string"?N(et.trim(),y$1.string):typeof et=="object"&&et!==null?N(et,y$1.object):[null,void 0]},M=function(et,_){var _e=c$2(et);return{h:_e.h,s:e$1(_e.s+100*_,0,100),l:_e.l,a:_e.a}},H=function(et){return(299*et.r+587*et.g+114*et.b)/1e3/255},$$1=function(et,_){var _e=c$2(et);return{h:_e.h,s:_e.s,l:e$1(_e.l+100*_,0,100),a:_e.a}},j=function(){function et(_){this.parsed=x$1(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return et.prototype.isValid=function(){return this.parsed!==null},et.prototype.brightness=function(){return n(H(this.rgba),2)},et.prototype.isDark=function(){return H(this.rgba)<.5},et.prototype.isLight=function(){return H(this.rgba)>=.5},et.prototype.toHex=function(){return _=o(this.rgba),_e=_.r,tt=_.g,rt=_.b,st=(it=_.a)<1?s$1(n(255*it)):"","#"+s$1(_e)+s$1(tt)+s$1(rt)+st;var _,_e,tt,rt,it,st},et.prototype.toRgb=function(){return o(this.rgba)},et.prototype.toRgbString=function(){return _=o(this.rgba),_e=_.r,tt=_.g,rt=_.b,(it=_.a)<1?"rgba("+_e+", "+tt+", "+rt+", "+it+")":"rgb("+_e+", "+tt+", "+rt+")";var _,_e,tt,rt,it},et.prototype.toHsl=function(){return d$1(c$2(this.rgba))},et.prototype.toHslString=function(){return _=d$1(c$2(this.rgba)),_e=_.h,tt=_.s,rt=_.l,(it=_.a)<1?"hsla("+_e+", "+tt+"%, "+rt+"%, "+it+")":"hsl("+_e+", "+tt+"%, "+rt+"%)";var _,_e,tt,rt,it},et.prototype.toHsv=function(){return _=h$1(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},et.prototype.invert=function(){return w$1({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},et.prototype.saturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,_))},et.prototype.desaturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,-_))},et.prototype.grayscale=function(){return w$1(M(this.rgba,-1))},et.prototype.lighten=function(_){return _===void 0&&(_=.1),w$1($$1(this.rgba,_))},et.prototype.darken=function(_){return _===void 0&&(_=.1),w$1($$1(this.rgba,-_))},et.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},et.prototype.alpha=function(_){return typeof _=="number"?w$1({r:(_e=this.rgba).r,g:_e.g,b:_e.b,a:_}):n(this.rgba.a,3);var _e},et.prototype.hue=function(_){var _e=c$2(this.rgba);return typeof _=="number"?w$1({h:_,s:_e.s,l:_e.l,a:_e.a}):n(_e.h)},et.prototype.isEqual=function(_){return this.toHex()===w$1(_).toHex()},et}(),w$1=function(et){return et instanceof j?et:new j(et)},S$1=[],k=function(et){et.forEach(function(_){S$1.indexOf(_)<0&&(_(j,y$1),S$1.push(_))})};function namesPlugin(et,_){var _e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},tt={};for(var rt in _e)tt[_e[rt]]=rt;var it={};et.prototype.toName=function(st){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var At,ut,ct=tt[this.toHex()];if(ct)return ct;if(st!=null&&st.closest){var ht=this.toRgb(),ot=1/0,nt="black";if(!it.length)for(var at in _e)it[at]=new et(_e[at]).toRgb();for(var lt in _e){var dt=(At=ht,ut=it[lt],Math.pow(At.r-ut.r,2)+Math.pow(At.g-ut.g,2)+Math.pow(At.b-ut.b,2));dt<ot&&(ot=dt,nt=lt)}return nt}},_.string.push([function(st){var At=st.toLowerCase(),ut=At==="transparent"?"#0000":_e[At];return ut?new et(ut).toRgb():null},"name"])}k([namesPlugin]);const _Color=class yn{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof yn)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,_e){const tt=typeof _;if(tt!==typeof _e)return!1;if(tt==="number"||tt==="string"||_ instanceof Number)return _===_e;if(Array.isArray(_)&&Array.isArray(_e)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(_e))return _.length!==_e.length?!1:_.every((rt,it)=>rt===_e[it]);if(_!==null&&_e!==null){const rt=Object.keys(_),it=Object.keys(_e);return rt.length!==it.length?!1:rt.every(st=>_[st]===_e[st])}return _===_e}toRgba(){const[_,_e,tt,rt]=this._components;return{r:_,g:_e,b:tt,a:rt}}toRgb(){const[_,_e,tt]=this._components;return{r:_,g:_e,b:tt}}toRgbaString(){const[_,_e,tt]=this.toUint8RgbArray();return`rgba(${_},${_e},${tt},${this.alpha})`}toUint8RgbArray(_){const[_e,tt,rt]=this._components;return _=_??[],_[0]=Math.round(_e*255),_[1]=Math.round(tt*255),_[2]=Math.round(rt*255),_}toRgbArray(_){_=_??[];const[_e,tt,rt]=this._components;return _[0]=_e,_[1]=tt,_[2]=rt,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[_e,tt,rt,it]=yn.temp.setValue(_)._components;return this._components[0]*=_e,this._components[1]*=tt,this._components[2]*=rt,this._components[3]*=it,this.refreshInt(),this._value=null,this}premultiply(_,_e=!0){return _e&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,_e=!0){if(_===1)return(255<<24)+this._int;if(_===0)return _e?0:this._int;let tt=this._int>>16&255,rt=this._int>>8&255,it=this._int&255;return _e&&(tt=tt*_+.5|0,rt=rt*_+.5|0,it=it*_+.5|0),(_*255<<24)+(tt<<16)+(rt<<8)+it}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[_e,tt,rt]=this._components;return this._components[0]=Math.round(_e*_)/_,this._components[1]=Math.round(tt*_)/_,this._components[2]=Math.round(rt*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[_e,tt,rt,it]=this._components;return _[0]=_e,_[1]=tt,_[2]=rt,_[3]=it,_}normalize(_){let _e,tt,rt,it;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const st=_;_e=(st>>16&255)/255,tt=(st>>8&255)/255,rt=(st&255)/255,it=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[_e,tt,rt,it=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[_e,tt,rt,it=255]=_,_e/=255,tt/=255,rt/=255,it/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const At=yn.HEX_PATTERN.exec(_);At&&(_=`#${At[2]}`)}const st=w$1(_);st.isValid()&&({r:_e,g:tt,b:rt,a:it}=st.rgba,_e/=255,tt/=255,rt/=255)}if(_e!==void 0)this._components[0]=_e,this._components[1]=tt,this._components[2]=rt,this._components[3]=it,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,_e,tt]=this._components;this._int=(_*255<<16)+(_e*255<<8)+(tt*255|0)}_clamp(_,_e=0,tt=1){return typeof _=="number"?Math.min(Math.max(_,_e),tt):(_.forEach((rt,it)=>{_[it]=Math.min(Math.max(rt,_e),tt)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2rgb(et,_=[]){return deprecation("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Color.shared.setValue(et).toRgbArray(_)}function hex2string(et){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(et).toHex()}function rgb2hex(et){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(et).toNumber()}function mapPremultipliedBlendModes(){const et=[],_=[];for(let tt=0;tt<32;tt++)et[tt]=tt,_[tt]=tt;et[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,et[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,et[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const _e=[];return _e.push(_),_e.push(et),_e}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(et,_){return premultiplyBlendMode[_?1:0][et]}function createIndicesForQuads(et,_=null){const _e=et*6;if(_=_||new Uint16Array(_e),_.length!==_e)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${_e}`);for(let tt=0,rt=0;tt<_e;tt+=6,rt+=4)_[tt+0]=rt+0,_[tt+1]=rt+1,_[tt+2]=rt+2,_[tt+3]=rt+0,_[tt+4]=rt+2,_[tt+5]=rt+3;return _}function getBufferType(et){if(et.BYTES_PER_ELEMENT===4)return et instanceof Float32Array?"Float32Array":et instanceof Uint32Array?"Uint32Array":"Int32Array";if(et.BYTES_PER_ELEMENT===2){if(et instanceof Uint16Array)return"Uint16Array"}else if(et.BYTES_PER_ELEMENT===1&&et instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(et){return et+=et===0?1:0,--et,et|=et>>>1,et|=et>>>2,et|=et>>>4,et|=et>>>8,et|=et>>>16,et+1}function isPow2(et){return!(et&et-1)&&!!et}function log2(et){let _=(et>65535?1:0)<<4;et>>>=_;let _e=(et>255?1:0)<<3;return et>>>=_e,_|=_e,_e=(et>15?1:0)<<2,et>>>=_e,_|=_e,_e=(et>3?1:0)<<1,et>>>=_e,_|=_e,_|et>>1}function removeItems(et,_,_e){const tt=et.length;let rt;if(_>=tt||_e===0)return;_e=_+_e>tt?tt-_:_e;const it=tt-_e;for(rt=_;rt<it;++rt)et[rt]=et[rt+_e];et.length=it}function sign(et){return et===0?0:et<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(et,_,_e,tt){this.left=et,this.top=_,this.right=_e,this.bottom=tt}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(_,_e,tt){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=tt||settings.RESOLUTION,this.resize(_,_e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,_e){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(_e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(et,_,_e){for(let tt=0,rt=4*_e*_;tt<_;++tt,rt+=4)if(et[rt+3]!==0)return!1;return!0}function checkColumn(et,_,_e,tt,rt){const it=4*_;for(let st=tt,At=tt*it+4*_e;st<=rt;++st,At+=it)if(et[At+3]!==0)return!1;return!0}function getCanvasBoundingBox(et){const{width:_,height:_e}=et,tt=et.getContext("2d",{willReadFrequently:!0});if(tt===null)throw new TypeError("Failed to get canvas 2D context");const rt=tt.getImageData(0,0,_,_e).data;let it=0,st=0,At=_-1,ut=_e-1;for(;st<_e&&checkRow(rt,_,st);)++st;if(st===_e)return BoundingBox.EMPTY;for(;checkRow(rt,_,ut);)--ut;for(;checkColumn(rt,_,it,st,ut);)++it;for(;checkColumn(rt,_,At,st,ut);)--At;return++At,++ut,new BoundingBox(it,st,At,ut)}function trimCanvas(et){const _=getCanvasBoundingBox(et),{width:_e,height:tt}=_;let rt=null;if(!_.isEmpty()){const it=et.getContext("2d");if(it===null)throw new TypeError("Failed to get canvas 2D context");rt=it.getImageData(_.left,_.top,_e,tt)}return{width:_e,height:tt,data:rt}}function determineCrossOrigin(et,_=globalThis.location){if(et.startsWith("data:"))return"";_=_||globalThis.location;const _e=new URL(et,document.baseURI);return _e.hostname!==_.hostname||_e.port!==_.port||_e.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(et,_=1){var tt;const _e=(tt=settings.RETINA_PREFIX)==null?void 0:tt.exec(et);return _e?parseFloat(_e[1]):_}var ExtensionType=(et=>(et.Renderer="renderer",et.Application="application",et.RendererSystem="renderer-webgl-system",et.RendererPlugin="renderer-webgl-plugin",et.CanvasRendererSystem="renderer-canvas-system",et.CanvasRendererPlugin="renderer-canvas-plugin",et.Asset="asset",et.LoadParser="load-parser",et.ResolveParser="resolve-parser",et.CacheParser="cache-parser",et.DetectionParser="detection-parser",et))(ExtensionType||{});const normalizeExtension=et=>{if(typeof et=="function"||typeof et=="object"&&et.extension){if(!et.extension)throw new Error("Extension class must have an extension object");et={...typeof et.extension!="object"?{type:et.extension}:et.extension,ref:et}}if(typeof et=="object")et={...et};else throw new Error("Invalid extension type");return typeof et.type=="string"&&(et.type=[et.type]),et},normalizePriority=(et,_)=>normalizeExtension(et).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...et){return et.map(normalizeExtension).forEach(_=>{_.type.forEach(_e=>{var tt,rt;return(rt=(tt=this._removeHandlers)[_e])==null?void 0:rt.call(tt,_)})}),this},add(...et){return et.map(normalizeExtension).forEach(_=>{_.type.forEach(_e=>{const tt=this._addHandlers,rt=this._queue;tt[_e]?tt[_e](_):(rt[_e]=rt[_e]||[],rt[_e].push(_))})}),this},handle(et,_,_e){const tt=this._addHandlers,rt=this._removeHandlers;if(tt[et]||rt[et])throw new Error(`Extension type ${et} already has a handler`);tt[et]=_,rt[et]=_e;const it=this._queue;return it[et]&&(it[et].forEach(st=>_(st)),delete it[et]),this},handleByMap(et,_){return this.handle(et,_e=>{_[_e.name]=_e.ref},_e=>{delete _[_e.name]})},handleByList(et,_,_e=-1){return this.handle(et,tt=>{_.includes(tt.ref)||(_.push(tt.ref),_.sort((rt,it)=>normalizePriority(it,_e)-normalizePriority(rt,_e)))},tt=>{const rt=_.indexOf(tt.ref);rt!==-1&&_.splice(rt,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(et){let _="";for(let _e=0;_e<et;++_e)_e>0&&(_+=`
else `),_e<et-1&&(_+=`if(test == ${_e}.0){}`);return _}function checkMaxIfStatementsInShader(et,_){if(et===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const _e=_.createShader(_.FRAGMENT_SHADER);for(;;){const tt=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(et));if(_.shaderSource(_e,tt),_.compileShader(_e),!_.getShaderParameter(_e,_.COMPILE_STATUS))et=et/2|0;else break}return et}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(et,_){if(!et)return null;let _e="";if(typeof et=="string"){const tt=/\.(\w{3,4})(?:$|\?|#)/i.exec(et);tt&&(_e=tt[1].toLowerCase())}for(let tt=INSTALLED.length-1;tt>=0;--tt){const rt=INSTALLED[tt];if(rt.test&&rt.test(et,_e))return new rt(et,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,_e,tt,rt,it,st,At,ut){if(arguments.length>8)throw new Error("max arguments reached");const{name:ct,items:ht}=this;this._aliasCount++;for(let ot=0,nt=ht.length;ot<nt;ot++)ht[ot][ct](_,_e,tt,rt,it,st,At,ut);return ht===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const _e=this.items.indexOf(_);return _e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(_e,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,_e=0){this._width=_,this._height=_e,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,_e){(_!==this._width||_e!==this._height)&&(this._width=_,this._height=_e,this.onResize.emit(_,_e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,_e,tt){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,_e){return!1}}class BufferResource extends Resource{constructor(_,_e){const{width:tt,height:rt}=_e||{};if(!tt||!rt)throw new Error("BufferResource width or height invalid");super(tt,rt),this.data=_,this.unpackAlignment=_e.unpackAlignment??4}upload(_,_e,tt){const rt=_.gl;rt.pixelStorei(rt.UNPACK_ALIGNMENT,this.unpackAlignment),rt.pixelStorei(rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.alphaMode===ALPHA_MODES.UNPACK);const it=_e.realWidth,st=_e.realHeight;return tt.width===it&&tt.height===st?rt.texSubImage2D(_e.target,0,0,0,it,st,_e.format,tt.type,this.data):(tt.width=it,tt.height=st,rt.texImage2D(_e.target,0,tt.internalFormat,it,st,0,_e.format,tt.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class zr extends EventEmitter{constructor(_=null,_e=null){super(),_e=Object.assign({},zr.defaultOptions,_e);const{alphaMode:tt,mipmap:rt,anisotropicLevel:it,scaleMode:st,width:At,height:ut,wrapMode:ct,format:ht,type:ot,target:nt,resolution:at,resourceOptions:lt}=_e;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,lt),_.internal=!0),this.resolution=at||settings.RESOLUTION,this.width=Math.round((At||0)*this.resolution)/this.resolution,this.height=Math.round((ut||0)*this.resolution)/this.resolution,this._mipmap=rt,this.anisotropicLevel=it,this._wrapMode=ct,this._scaleMode=st,this.format=ht,this.type=ot,this.target=nt,this.alphaMode=tt,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=At>0&&ut>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,_e){let tt;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,tt=!0),_e!==void 0&&_e!==this.mipmap&&(this.mipmap=_e,tt=!0),tt&&this.dirtyStyleId++,this}setSize(_,_e,tt){return tt=tt||this.resolution,this.setRealSize(_*tt,_e*tt,tt)}setRealSize(_,_e,tt){return this.resolution=tt||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(_e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const _e=this.resolution;return _e===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*_e)/_,this.height=Math.round(this.height*_e)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),zr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,_e,tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let it=null;if(rt)it=_;else{if(!_._pixiId){const At=(_e==null?void 0:_e.pixiIdPrefix)||"pixiid";_._pixiId=`${At}_${uid()}`}it=_._pixiId}let st=BaseTextureCache[it];if(rt&&tt&&!st)throw new Error(`The cacheId "${it}" does not exist in BaseTextureCache.`);return st||(st=new zr(_,_e),st.cacheId=it,zr.addToCache(st,it)),st}static fromBuffer(_,_e,tt,rt){_=_||new Float32Array(_e*tt*4);const it=new BufferResource(_,{width:_e,height:tt,...rt==null?void 0:rt.resourceOptions});let st,At;return _ instanceof Float32Array?(st=FORMATS.RGBA,At=TYPES.FLOAT):_ instanceof Int32Array?(st=FORMATS.RGBA_INTEGER,At=TYPES.INT):_ instanceof Uint32Array?(st=FORMATS.RGBA_INTEGER,At=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(st=FORMATS.RGBA_INTEGER,At=TYPES.SHORT):_ instanceof Uint16Array?(st=FORMATS.RGBA_INTEGER,At=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(st=FORMATS.RGBA,At=TYPES.BYTE):(st=FORMATS.RGBA,At=TYPES.UNSIGNED_BYTE),it.internal=!0,new zr(it,Object.assign({},defaultBufferOptions,{type:At,format:st},rt))}static addToCache(_,_e){_e&&(_.textureCacheIds.includes(_e)||_.textureCacheIds.push(_e),BaseTextureCache[_e]&&BaseTextureCache[_e]!==_&&console.warn(`BaseTexture added to the cache with an id [${_e}] that already had an entry`),BaseTextureCache[_e]=_)}static removeFromCache(_){if(typeof _=="string"){const _e=BaseTextureCache[_];if(_e){const tt=_e.textureCacheIds.indexOf(_);return tt>-1&&_e.textureCacheIds.splice(tt,1),delete BaseTextureCache[_],_e}}else if(_!=null&&_.textureCacheIds){for(let _e=0;_e<_.textureCacheIds.length;++_e)delete BaseTextureCache[_.textureCacheIds[_e]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,_e=!0,tt=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=tt,this.static=_e,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,_e=0,tt=!1,rt=TYPES.FLOAT,it,st,At,ut=1){this.buffer=_,this.size=_e,this.normalized=tt,this.type=rt,this.stride=it,this.start=st,this.instance=At,this.divisor=ut}destroy(){this.buffer=null}static from(_,_e,tt,rt,it){return new Attribute(_,_e,tt,rt,it)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(et,_){let _e=0,tt=0;const rt={};for(let ut=0;ut<et.length;ut++)tt+=_[ut],_e+=et[ut].length;const it=new ArrayBuffer(_e*4);let st=null,At=0;for(let ut=0;ut<et.length;ut++){const ct=_[ut],ht=et[ut],ot=getBufferType(ht);rt[ot]||(rt[ot]=new map$1[ot](it)),st=rt[ot];for(let nt=0;nt<ht.length;nt++){const at=(nt/ct|0)*tt+At,lt=nt%ct;st[at+lt]=ht[nt]}At+=ct}return new Float32Array(it)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],_e={}){this.buffers=_,this.indexBuffer=null,this.attributes=_e,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,_e,tt=0,rt=!1,it,st,At,ut=!1){if(!_e)throw new Error("You must pass a buffer when creating an attribute");_e instanceof Buffer||(_e instanceof Array&&(_e=new Float32Array(_e)),_e=new Buffer(_e));const ct=_.split("|");if(ct.length>1){for(let ot=0;ot<ct.length;ot++)this.addAttribute(ct[ot],_e,tt,rt,it);return this}let ht=this.buffers.indexOf(_e);return ht===-1&&(this.buffers.push(_e),ht=this.buffers.length-1),this.attributes[_]=new Attribute(ht,tt,rt,it,st,At,ut),this.instanced=this.instanced||ut,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],_e=[],tt=new Buffer;let rt;for(rt in this.attributes){const it=this.attributes[rt],st=this.buffers[it.buffer];_.push(st.data),_e.push(it.size*byteSizeMap$1[it.type]/4),it.buffer=0}for(tt.data=interleaveTypedArrays(_,_e),rt=0;rt<this.buffers.length;rt++)this.buffers[rt]!==this.indexBuffer&&this.buffers[rt].destroy();return this.buffers=[tt],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const _e=this.attributes[_];return this.buffers[_e.buffer].data.length/(_e.stride/4||_e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let _e=0;_e<this.buffers.length;_e++)_.buffers[_e]=new Buffer(this.buffers[_e].data.slice(0));for(const _e in this.attributes){const tt=this.attributes[_e];_.attributes[_e]=new Attribute(tt.buffer,tt.size,tt.normalized,tt.type,tt.stride,tt.start,tt.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const _e=new Geometry,tt=[],rt=[],it=[];let st;for(let At=0;At<_.length;At++){st=_[At];for(let ut=0;ut<st.buffers.length;ut++)rt[ut]=rt[ut]||0,rt[ut]+=st.buffers[ut].data.length,it[ut]=0}for(let At=0;At<st.buffers.length;At++)tt[At]=new map[getBufferType(st.buffers[At].data)](rt[At]),_e.buffers[At]=new Buffer(tt[At]);for(let At=0;At<_.length;At++){st=_[At];for(let ut=0;ut<st.buffers.length;ut++)tt[ut].set(st.buffers[ut].data,it[ut]),it[ut]+=st.buffers[ut].data.length}if(_e.attributes=st.attributes,st.indexBuffer){_e.indexBuffer=_e.buffers[st.buffers.indexOf(st.indexBuffer)],_e.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let At=0,ut=0,ct=0,ht=0;for(let ot=0;ot<st.buffers.length;ot++)if(st.buffers[ot]!==st.indexBuffer){ht=ot;break}for(const ot in st.attributes){const nt=st.attributes[ot];(nt.buffer|0)===ht&&(ut+=nt.size*byteSizeMap$1[nt.type]/4)}for(let ot=0;ot<_.length;ot++){const nt=_[ot].indexBuffer.data;for(let at=0;at<nt.length;at++)_e.indexBuffer.data[at+ct]+=At;At+=_[ot].buffers[ht].data.length/ut,ct+=nt.length}}return _e}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(et=>(et[et.POLY=0]="POLY",et[et.RECT=1]="RECT",et[et.CIRC=2]="CIRC",et[et.ELIP=3]="ELIP",et[et.RREC=4]="RREC",et))(SHAPES||{});class Point{constructor(_=0,_e=0){this.x=0,this.y=0,this.x=_,this.y=_e}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,_e=_){return this.x=_,this.y=_e,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(_=0,_e=0,tt=0,rt=0){this.x=Number(_),this.y=Number(_e),this.width=Number(tt),this.height=Number(rt),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,_e){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&_e>=this.y&&_e<this.y+this.height}intersects(_,_e){if(!_e){const Bt=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=Bt)return!1;const Tt=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>Tt}const tt=this.left,rt=this.right,it=this.top,st=this.bottom;if(rt<=tt||st<=it)return!1;const At=tempPoints$1[0].set(_.left,_.top),ut=tempPoints$1[1].set(_.left,_.bottom),ct=tempPoints$1[2].set(_.right,_.top),ht=tempPoints$1[3].set(_.right,_.bottom);if(ct.x<=At.x||ut.y<=At.y)return!1;const ot=Math.sign(_e.a*_e.d-_e.b*_e.c);if(ot===0||(_e.apply(At,At),_e.apply(ut,ut),_e.apply(ct,ct),_e.apply(ht,ht),Math.max(At.x,ut.x,ct.x,ht.x)<=tt||Math.min(At.x,ut.x,ct.x,ht.x)>=rt||Math.max(At.y,ut.y,ct.y,ht.y)<=it||Math.min(At.y,ut.y,ct.y,ht.y)>=st))return!1;const nt=ot*(ut.y-At.y),at=ot*(At.x-ut.x),lt=nt*tt+at*it,dt=nt*rt+at*it,ft=nt*tt+at*st,pt=nt*rt+at*st;if(Math.max(lt,dt,ft,pt)<=nt*At.x+at*At.y||Math.min(lt,dt,ft,pt)>=nt*ht.x+at*ht.y)return!1;const gt=ot*(At.y-ct.y),mt=ot*(ct.x-At.x),yt=gt*tt+mt*it,vt=gt*rt+mt*it,wt=gt*tt+mt*st,bt=gt*rt+mt*st;return!(Math.max(yt,vt,wt,bt)<=gt*At.x+mt*At.y||Math.min(yt,vt,wt,bt)>=gt*ht.x+mt*ht.y)}pad(_=0,_e=_){return this.x-=_,this.y-=_e,this.width+=_*2,this.height+=_e*2,this}fit(_){const _e=Math.max(this.x,_.x),tt=Math.min(this.x+this.width,_.x+_.width),rt=Math.max(this.y,_.y),it=Math.min(this.y+this.height,_.y+_.height);return this.x=_e,this.width=Math.max(tt-_e,0),this.y=rt,this.height=Math.max(it-rt,0),this}ceil(_=1,_e=.001){const tt=Math.ceil((this.x+this.width-_e)*_)/_,rt=Math.ceil((this.y+this.height-_e)*_)/_;return this.x=Math.floor((this.x+_e)*_)/_,this.y=Math.floor((this.y+_e)*_)/_,this.width=tt-this.x,this.height=rt-this.y,this}enlarge(_){const _e=Math.min(this.x,_.x),tt=Math.max(this.x+this.width,_.x+_.width),rt=Math.min(this.y,_.y),it=Math.max(this.y+this.height,_.y+_.height);return this.x=_e,this.width=tt-_e,this.y=rt,this.height=it-rt,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(_=0,_e=0,tt=0){this.x=_,this.y=_e,this.radius=tt,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(_,_e){if(this.radius<=0)return!1;const tt=this.radius*this.radius;let rt=this.x-_,it=this.y-_e;return rt*=rt,it*=it,rt+it<=tt}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,_e=0,tt=0,rt=0){this.x=_,this.y=_e,this.width=tt,this.height=rt,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,_e){if(this.width<=0||this.height<=0)return!1;let tt=(_-this.x)/this.width,rt=(_e-this.y)/this.height;return tt*=tt,rt*=rt,tt+rt<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let _e=Array.isArray(_[0])?_[0]:_;if(typeof _e[0]!="number"){const tt=[];for(let rt=0,it=_e.length;rt<it;rt++)tt.push(_e[rt].x,_e[rt].y);_e=tt}this.points=_e,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),_e=new Polygon(_);return _e.closeStroke=this.closeStroke,_e}contains(_,_e){let tt=!1;const rt=this.points.length/2;for(let it=0,st=rt-1;it<rt;st=it++){const At=this.points[it*2],ut=this.points[it*2+1],ct=this.points[st*2],ht=this.points[st*2+1];ut>_e!=ht>_e&&_<(ct-At)*((_e-ut)/(ht-ut))+At&&(tt=!tt)}return tt}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((et,_)=>`${et}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,_e=0,tt=0,rt=0,it=20){this.x=_,this.y=_e,this.width=tt,this.height=rt,this.radius=it,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,_e){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&_e>=this.y&&_e<=this.y+this.height){const tt=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(_e>=this.y+tt&&_e<=this.y+this.height-tt||_>=this.x+tt&&_<=this.x+this.width-tt)return!0;let rt=_-(this.x+tt),it=_e-(this.y+tt);const st=tt*tt;if(rt*rt+it*it<=st||(rt=_-(this.x+this.width-tt),rt*rt+it*it<=st)||(it=_e-(this.y+this.height-tt),rt*rt+it*it<=st)||(rt=_-(this.x+tt),rt*rt+it*it<=st))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,_e=0,tt=0,rt=1,it=0,st=0){this.array=null,this.a=_,this.b=_e,this.c=tt,this.d=rt,this.tx=it,this.ty=st}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,_e,tt,rt,it,st){return this.a=_,this.b=_e,this.c=tt,this.d=rt,this.tx=it,this.ty=st,this}toArray(_,_e){this.array||(this.array=new Float32Array(9));const tt=_e||this.array;return _?(tt[0]=this.a,tt[1]=this.b,tt[2]=0,tt[3]=this.c,tt[4]=this.d,tt[5]=0,tt[6]=this.tx,tt[7]=this.ty,tt[8]=1):(tt[0]=this.a,tt[1]=this.c,tt[2]=this.tx,tt[3]=this.b,tt[4]=this.d,tt[5]=this.ty,tt[6]=0,tt[7]=0,tt[8]=1),tt}apply(_,_e){_e=_e||new Point;const tt=_.x,rt=_.y;return _e.x=this.a*tt+this.c*rt+this.tx,_e.y=this.b*tt+this.d*rt+this.ty,_e}applyInverse(_,_e){_e=_e||new Point;const tt=1/(this.a*this.d+this.c*-this.b),rt=_.x,it=_.y;return _e.x=this.d*tt*rt+-this.c*tt*it+(this.ty*this.c-this.tx*this.d)*tt,_e.y=this.a*tt*it+-this.b*tt*rt+(-this.ty*this.a+this.tx*this.b)*tt,_e}translate(_,_e){return this.tx+=_,this.ty+=_e,this}scale(_,_e){return this.a*=_,this.d*=_e,this.c*=_,this.b*=_e,this.tx*=_,this.ty*=_e,this}rotate(_){const _e=Math.cos(_),tt=Math.sin(_),rt=this.a,it=this.c,st=this.tx;return this.a=rt*_e-this.b*tt,this.b=rt*tt+this.b*_e,this.c=it*_e-this.d*tt,this.d=it*tt+this.d*_e,this.tx=st*_e-this.ty*tt,this.ty=st*tt+this.ty*_e,this}append(_){const _e=this.a,tt=this.b,rt=this.c,it=this.d;return this.a=_.a*_e+_.b*rt,this.b=_.a*tt+_.b*it,this.c=_.c*_e+_.d*rt,this.d=_.c*tt+_.d*it,this.tx=_.tx*_e+_.ty*rt+this.tx,this.ty=_.tx*tt+_.ty*it+this.ty,this}setTransform(_,_e,tt,rt,it,st,At,ut,ct){return this.a=Math.cos(At+ct)*it,this.b=Math.sin(At+ct)*it,this.c=-Math.sin(At-ut)*st,this.d=Math.cos(At-ut)*st,this.tx=_-(tt*this.a+rt*this.c),this.ty=_e-(tt*this.b+rt*this.d),this}prepend(_){const _e=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const tt=this.a,rt=this.c;this.a=tt*_.a+this.b*_.c,this.b=tt*_.b+this.b*_.d,this.c=rt*_.a+this.d*_.c,this.d=rt*_.b+this.d*_.d}return this.tx=_e*_.a+this.ty*_.c+_.tx,this.ty=_e*_.b+this.ty*_.d+_.ty,this}decompose(_){const _e=this.a,tt=this.b,rt=this.c,it=this.d,st=_.pivot,At=-Math.atan2(-rt,it),ut=Math.atan2(tt,_e),ct=Math.abs(At+ut);return ct<1e-5||Math.abs(PI_2-ct)<1e-5?(_.rotation=ut,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=At,_.skew.y=ut),_.scale.x=Math.sqrt(_e*_e+tt*tt),_.scale.y=Math.sqrt(rt*rt+it*it),_.position.x=this.tx+(st.x*_e+st.y*rt),_.position.y=this.ty+(st.x*tt+st.y*it),_}invert(){const _=this.a,_e=this.b,tt=this.c,rt=this.d,it=this.tx,st=_*rt-_e*tt;return this.a=rt/st,this.b=-_e/st,this.c=-tt/st,this.d=_/st,this.tx=(tt*this.ty-rt*it)/st,this.ty=-(_*this.ty-_e*it)/st,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let et=0;et<16;et++){const _=[];rotationCayley.push(_);for(let _e=0;_e<16;_e++){const tt=signum(ux[et]*ux[_e]+vx[et]*uy[_e]),rt=signum(uy[et]*ux[_e]+vy[et]*uy[_e]),it=signum(ux[et]*vx[_e]+vx[et]*vy[_e]),st=signum(uy[et]*vx[_e]+vy[et]*vy[_e]);for(let At=0;At<16;At++)if(ux[At]===tt&&uy[At]===rt&&vx[At]===it&&vy[At]===st){_.push(At);break}}}for(let et=0;et<16;et++){const _=new Matrix;_.set(ux[et],uy[et],vx[et],vy[et],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:et=>ux[et],uY:et=>uy[et],vX:et=>vx[et],vY:et=>vy[et],inv:et=>et&8?et&15:-et&7,add:(et,_)=>rotationCayley[et][_],sub:(et,_)=>rotationCayley[et][groupD8.inv(_)],rotate180:et=>et^4,isVertical:et=>(et&3)===2,byDirection:(et,_)=>Math.abs(et)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(et)?et>0?groupD8.E:groupD8.W:_>0?et>0?groupD8.SE:groupD8.SW:et>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(et,_,_e=0,tt=0)=>{const rt=rotationMatrices[groupD8.inv(_)];rt.tx=_e,rt.ty=tt,et.append(rt)}};class ObservablePoint{constructor(_,_e,tt=0,rt=0){this._x=tt,this._y=rt,this.cb=_,this.scope=_e}clone(_=this.cb,_e=this.scope){return new ObservablePoint(_,_e,this._x,this._y)}set(_=0,_e=_){return(this._x!==_||this._y!==_e)&&(this._x=_,this._y=_e,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const et=this.localTransform;this._localID!==this._currentLocalID&&(et.a=this._cx*this.scale.x,et.b=this._sx*this.scale.x,et.c=this._cy*this.scale.y,et.d=this._sy*this.scale.y,et.tx=this.position.x-(this.pivot.x*et.a+this.pivot.y*et.c),et.ty=this.position.y-(this.pivot.x*et.b+this.pivot.y*et.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(et){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==et._worldID){const _e=et.worldTransform,tt=this.worldTransform;tt.a=_.a*_e.a+_.b*_e.c,tt.b=_.a*_e.b+_.b*_e.d,tt.c=_.c*_e.a+_.d*_e.c,tt.d=_.c*_e.b+_.d*_e.d,tt.tx=_.tx*_e.a+_.ty*_e.c+_e.tx,tt.ty=_.tx*_e.b+_.ty*_e.d+_e.ty,this._parentID=et._worldID,this._worldID++}}setFromMatrix(et){et.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(et){this._rotation!==et&&(this._rotation=et,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(et,_,_e){const tt=et.createShader(_);return et.shaderSource(tt,_e),et.compileShader(tt),tt}function booleanArray(et){const _=new Array(et);for(let _e=0;_e<_.length;_e++)_[_e]=!1;return _}function defaultValue(et,_){switch(et){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:et=>et.type==="float"&&et.size===1&&!et.isArray,code:et=>`
            if(uv["${et}"] !== ud["${et}"].value)
            {
                ud["${et}"].value = uv["${et}"]
                gl.uniform1f(ud["${et}"].location, uv["${et}"])
            }
            `},{test:(et,_)=>(et.type==="sampler2D"||et.type==="samplerCube"||et.type==="sampler2DArray")&&et.size===1&&!et.isArray&&(_==null||_.castToBaseTexture!==void 0),code:et=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${et}"], t);

            if(ud["${et}"].value !== t)
            {
                ud["${et}"].value = t;
                gl.uniform1i(ud["${et}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(et,_)=>et.type==="mat3"&&et.size===1&&!et.isArray&&_.a!==void 0,code:et=>`
            gl.uniformMatrix3fv(ud["${et}"].location, false, uv["${et}"].toArray(true));
            `,codeUbo:et=>`
                var ${et}_matrix = uv.${et}.toArray(true);

                data[offset] = ${et}_matrix[0];
                data[offset+1] = ${et}_matrix[1];
                data[offset+2] = ${et}_matrix[2];
        
                data[offset + 4] = ${et}_matrix[3];
                data[offset + 5] = ${et}_matrix[4];
                data[offset + 6] = ${et}_matrix[5];
        
                data[offset + 8] = ${et}_matrix[6];
                data[offset + 9] = ${et}_matrix[7];
                data[offset + 10] = ${et}_matrix[8];
            `},{test:(et,_)=>et.type==="vec2"&&et.size===1&&!et.isArray&&_.x!==void 0,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${et}"].location, v.x, v.y);
                }`,codeUbo:et=>`
                v = uv.${et};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:et=>et.type==="vec2"&&et.size===1&&!et.isArray,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${et}"].location, v[0], v[1]);
                }
            `},{test:(et,_)=>et.type==="vec4"&&et.size===1&&!et.isArray&&_.width!==void 0,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${et}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:et=>`
                    v = uv.${et};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(et,_)=>et.type==="vec4"&&et.size===1&&!et.isArray&&_.red!==void 0,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${et}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:et=>`
                    v = uv.${et};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(et,_)=>et.type==="vec3"&&et.size===1&&!et.isArray&&_.red!==void 0,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${et}"].location, v.red, v.green, v.blue)
                }`,codeUbo:et=>`
                    v = uv.${et};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:et=>et.type==="vec4"&&et.size===1&&!et.isArray,code:et=>`
                cv = ud["${et}"].value;
                v = uv["${et}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${et}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(et,_){var tt;const _e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const rt in et.uniforms){const it=_[rt];if(!it){((tt=et.uniforms[rt])==null?void 0:tt.group)===!0&&(et.uniforms[rt].ubo?_e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${rt}, '${rt}');
                    `):_e.push(`
                        renderer.shader.syncUniformGroup(uv.${rt}, syncData);
                    `));continue}const st=et.uniforms[rt];let At=!1;for(let ut=0;ut<uniformParsers.length;ut++)if(uniformParsers[ut].test(it,st)){_e.push(uniformParsers[ut].code(rt,st)),At=!0;break}if(!At){const ut=(it.size===1&&!it.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[it.type].replace("location",`ud["${rt}"].location`);_e.push(`
            cu = ud["${rt}"];
            cv = cu.value;
            v = uv["${rt}"];
            ${ut};`)}}return new Function("ud","uv","renderer","syncData",_e.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const et=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=et.getContext("webgl2",{})),_||(_=et.getContext("webgl",{})||et.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const et=getTestContext();if(et&&et.getShaderPrecisionFormat){const _=et.getShaderPrecisionFormat(et.FRAGMENT_SHADER,et.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(et,_){const _e=et.getShaderSource(_).split(`
`).map((ct,ht)=>`${ht}: ${ct}`),tt=et.getShaderInfoLog(_),rt=tt.split(`
`),it={},st=rt.map(ct=>parseFloat(ct.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(ct=>ct&&!it[ct]?(it[ct]=!0,!0):!1),At=[""];st.forEach(ct=>{_e[ct-1]=`%c${_e[ct-1]}%c`,At.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const ut=_e.join(`
`);At[0]=ut,console.error(tt),console.groupCollapsed("click to view full shader code"),console.warn(...At),console.groupEnd()}function logProgramError(et,_,_e,tt){et.getProgramParameter(_,et.LINK_STATUS)||(et.getShaderParameter(_e,et.COMPILE_STATUS)||logPrettyShaderError(et,_e),et.getShaderParameter(tt,et.COMPILE_STATUS)||logPrettyShaderError(et,tt),console.error("PixiJS Error: Could not initialize shader."),et.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",et.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(et){return GLSL_TO_SIZE[et]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(et,_){if(!GL_TABLE){const _e=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let tt=0;tt<_e.length;++tt){const rt=_e[tt];GL_TABLE[et[rt]]=GL_TO_GLSL_TYPES[rt]}}return GL_TABLE[_]}function setPrecision(et,_,_e){if(et.substring(0,9)!=="precision"){let tt=_;return _===PRECISION.HIGH&&_e!==PRECISION.HIGH&&(tt=PRECISION.MEDIUM),`precision ${tt} float;
${et}`}else if(_e!==PRECISION.HIGH&&et.substring(0,15)==="precision highp")return et.replace("precision highp","precision mediump");return et}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class Wr{constructor(_,_e,tt="pixi-shader",rt={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||Wr.defaultVertexSrc,this.fragmentSrc=_e||Wr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=rt,this.vertexSrc.substring(0,8)!=="#version"&&(tt=tt.replace(/\s+/g,"-"),nameCache[tt]?(nameCache[tt]++,tt+=`-${nameCache[tt]}`):nameCache[tt]=1,this.vertexSrc=`#define SHADER_NAME ${tt}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${tt}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,Wr.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,Wr.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,_e,tt){const rt=_+_e;let it=ProgramCache[rt];return it||(ProgramCache[rt]=it=new Wr(_,_e,tt)),it}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,_e,tt){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!_e,this.ubo=!!tt,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,_e,tt){if(!this.ubo)this.uniforms[_]=new UniformGroup(_e,tt);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,_e,tt){return new UniformGroup(_,_e,tt)}static uboFrom(_,_e){return new UniformGroup(_,_e??!0,!0)}}class Shader{constructor(_,_e){this.uniformBindCount=0,this.program=_,_e?_e instanceof UniformGroup?this.uniformGroup=_e:this.uniformGroup=new UniformGroup(_e):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,_e){if(_e.uniforms[_])return!0;for(const tt in _e.uniforms){const rt=_e.uniforms[tt];if(rt.group===!0&&this.checkUniformExists(_,rt))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,_e,tt){const rt=Program.from(_,_e);return new Shader(rt,tt)}}class BatchShaderGenerator{constructor(_,_e){if(this.vertexSrc=_,this.fragTemplate=_e,this.programCache={},this.defaultGroupCache={},!_e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!_e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const tt=new Int32Array(_);for(let it=0;it<_;it++)tt[it]=it;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:tt},!0);let rt=this.fragTemplate;rt=rt.replace(/%count%/gi,`${_}`),rt=rt.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,rt)}const _e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],_e)}generateSampleSrc(_){let _e="";_e+=`
`,_e+=`
`;for(let tt=0;tt<_;tt++)tt>0&&(_e+=`
else `),tt<_-1&&(_e+=`if(vTextureId < ${tt}.5)`),_e+=`
{`,_e+=`
	color = texture2D(uSamplers[${tt}], vTextureCoord);`,_e+=`
}`;return _e+=`
`,_e+=`
`,_e}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(et){let _=!0;const _e=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const tt=_e.userAgent.match(/OS (\d+)_(\d+)?/);tt&&parseInt(tt[1],10)<11&&(_=!1)}if(isMobile.android.device){const tt=_e.userAgent.match(/Android\s([0-9.]*)/);tt&&parseInt(tt[1],10)<7&&(_=!1)}}return _?et:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class Rr extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=Rr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=Rr.defaultVertexSrc,fragment:_e=Rr.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,_e)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),Rr.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let _e=0;_e<this._packedGeometryPoolSize;_e++)this._packedGeometries[_e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:_e}=Rr,tt=this.size/4,rt=Math.floor(tt/this.maxTextures)+1;for(;_.length<tt;)_.push(new BatchDrawCall);for(;_e.length<rt;)_e.push(new BatchTextureArray);for(let it=0;it<this.maxTextures;it++)this._tempBoundTextures[it]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:_e}=this,tt=Rr._textureArrayPool,rt=this.renderer.batch,it=this._tempBoundTextures,st=this.renderer.textureGC.count;let At=++BaseTexture._globalBatch,ut=0,ct=tt[0],ht=0;rt.copyBoundTextures(it,_e);for(let ot=0;ot<this._bufferSize;++ot){const nt=_[ot];_[ot]=null,nt._batchEnabled!==At&&(ct.count>=_e&&(rt.boundArray(ct,it,At,_e),this.buildDrawCalls(ct,ht,ot),ht=ot,ct=tt[++ut],++At),nt._batchEnabled=At,nt.touched=st,ct.elements[ct.count++]=nt)}ct.count>0&&(rt.boundArray(ct,it,At,_e),this.buildDrawCalls(ct,ht,this._bufferSize),++ut,++At);for(let ot=0;ot<it.length;ot++)it[ot]=null;BaseTexture._globalBatch=At}buildDrawCalls(_,_e,tt){const{_bufferedElements:rt,_attributeBuffer:it,_indexBuffer:st,vertexSize:At}=this,ut=Rr._drawCallPool;let ct=this._dcIndex,ht=this._aIndex,ot=this._iIndex,nt=ut[ct];nt.start=this._iIndex,nt.texArray=_;for(let at=_e;at<tt;++at){const lt=rt[at],dt=lt._texture.baseTexture,ft=premultiplyBlendMode[dt.alphaMode?1:0][lt.blendMode];rt[at]=null,_e<at&&nt.blend!==ft&&(nt.size=ot-nt.start,_e=at,nt=ut[++ct],nt.texArray=_,nt.start=ot),this.packInterleavedGeometry(lt,it,st,ht,ot),ht+=lt.vertexData.length/2*At,ot+=lt.indices.length,nt.blend=ft}_e<tt&&(nt.size=ot-nt.start,++ct),this._dcIndex=ct,this._aIndex=ht,this._iIndex=ot}bindAndClearTexArray(_){const _e=this.renderer.texture;for(let tt=0;tt<_.count;tt++)_e.bind(_.elements[tt],_.ids[tt]),_.elements[tt]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:_e,_indexBuffer:tt}=this;Rr.canUploadSameBuffer?(_[this._flushId]._buffer.update(_e.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(_e.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:_e,state:tt}=this.renderer,rt=Rr._drawCallPool;let it=null;for(let st=0;st<_;st++){const{texArray:At,type:ut,size:ct,start:ht,blend:ot}=rt[st];it!==At&&(it=At,this.bindAndClearTexArray(At)),this.state.blendMode=ot,tt.set(this.state),_e.drawElements(ut,ct,_e.UNSIGNED_SHORT,ht*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Rr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const _e=nextPow2(Math.ceil(_/8)),tt=log2(_e),rt=_e*8;this._aBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._aBuffers[rt];return it||(this._aBuffers[rt]=it=new ViewableBuffer(rt*this.vertexSize*4)),it}getIndexBuffer(_){const _e=nextPow2(Math.ceil(_/12)),tt=log2(_e),rt=_e*12;this._iBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._iBuffers[tt];return it||(this._iBuffers[tt]=it=new Uint16Array(rt)),it}packInterleavedGeometry(_,_e,tt,rt,it){const{uint32View:st,float32View:At}=_e,ut=rt/this.vertexSize,ct=_.uvs,ht=_.indices,ot=_.vertexData,nt=_._texture.baseTexture._batchLocation,at=Math.min(_.worldAlpha,1),lt=Color.shared.setValue(_._tintRGB).toPremultiplied(at,_._texture.baseTexture.alphaMode>0);for(let dt=0;dt<ot.length;dt+=2)At[rt++]=ot[dt],At[rt++]=ot[dt+1],At[rt++]=ct[dt],At[rt++]=ct[dt+1],st[rt++]=lt,At[rt++]=nt;for(let dt=0;dt<ht.length;dt++)tt[it++]=ut+ht[dt]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class an extends Shader{constructor(_,_e,tt){const rt=Program.from(_||an.defaultVertexSrc,_e||an.defaultFragmentSrc);super(rt,tt),this.padding=0,this.resolution=an.defaultResolution,this.multisample=an.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,_e,tt,rt,it){_.applyFilter(this,_e,tt,rt)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:_e,background:tt,backgroundAlpha:rt}=_,it=tt??_e;it!==void 0&&(this.color=it),this.alpha=rt}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,_e){const{boundTextures:tt}=this.renderer.texture;for(let rt=_e-1;rt>=0;--rt)_[rt]=tt[rt]||null,_[rt]&&(_[rt]._batchLocation=rt)}boundArray(_,_e,tt,rt){const{elements:it,ids:st,count:At}=_;let ut=0;for(let ct=0;ct<At;ct++){const ht=it[ct],ot=ht._batchLocation;if(ot>=0&&ot<rt&&_e[ot]===ht){st[ct]=ot;continue}for(;ut<rt;){const nt=_e[ut];if(nt&&nt._batchEnabled===tt&&nt._batchLocation===ut){ut++;continue}st[ct]=ut,ht._batchLocation=ut,_e[ut]=ht;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const _e=this.renderer.background.alpha<1,tt=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:_e,premultipliedAlpha:tt,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const _e=this.renderer.view;_e.addEventListener!==void 0&&(_e.addEventListener("webglcontextlost",this.handleContextLost,!1),_e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const _e=this.createContext(this.renderer.view,_);this.initFromContext(_e)}createContext(_,_e){let tt;if(settings.PREFER_ENV>=ENV.WEBGL2&&(tt=_.getContext("webgl2",_e)),tt)this.webGLVersion=2;else if(this.webGLVersion=1,tt=_.getContext("webgl",_e)||_.getContext("experimental-webgl",_e),!tt)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=tt,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,_e={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,_e,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,_e,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const _e=_.getContextAttributes(),tt="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;tt&&(this.webGLVersion=2),_e&&!_e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const rt=tt||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=rt,rt||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(_,_e){if(this.width=Math.round(_),this.height=Math.round(_e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,_e){return this.colorTextures[_]=_e||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,_e){if(_=Math.round(_),_e=Math.round(_e),!_||!_e)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&_e===this.height)){this.width=_,this.height=_e,this.dirtyId++,this.dirtySize++;for(let tt=0;tt<this.colorTextures.length;tt++){const rt=this.colorTextures[tt],it=rt.resolution;rt.setSize(_/it,_e/it)}if(this.depthTexture){const tt=this.depthTexture.resolution;this.depthTexture.setSize(_/tt,_e/tt)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const _e=arguments[0],tt=arguments[1],rt=arguments[2],it=arguments[3];_={width:_e,height:tt,scaleMode:rt,resolution:it}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,_e){this.framebuffer.resize(_*this.resolution,_e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const _e=_,tt=_e.naturalWidth||_e.videoWidth||_e.width,rt=_e.naturalHeight||_e.videoHeight||_e.height;super(tt,rt),this.source=_,this.noSubImage=!1}static crossOrigin(_,_e,tt){tt===void 0&&!_e.startsWith("data:")?_.crossOrigin=determineCrossOrigin(_e):tt!==!1&&(_.crossOrigin=typeof tt=="string"?tt:"anonymous")}upload(_,_e,tt,rt){const it=_.gl,st=_e.realWidth,At=_e.realHeight;if(rt=rt||this.source,typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement){if(!rt.complete||rt.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&rt instanceof HTMLVideoElement&&rt.readyState<=1)return!1;return it.pixelStorei(it.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&_e.target===it.TEXTURE_2D&&tt.width===st&&tt.height===At?it.texSubImage2D(it.TEXTURE_2D,0,0,0,_e.format,tt.type,rt):(tt.width=st,tt.height=At,it.texImage2D(_e.target,0,tt.internalFormat,_e.format,tt.type,rt)),!0}update(){if(this.destroyed)return;const _=this.source,_e=_.naturalWidth||_.videoWidth||_.width,tt=_.naturalHeight||_.videoHeight||_.height;this.resize(_e,tt),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,_e){if(_e=_e||{},typeof _=="string"){const tt=new Image;BaseImageResource.crossOrigin(tt,_,_e.crossorigin),tt.src=_,_=tt}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(_e.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof _e.alphaMode=="number"?_e.alphaMode:null,this.bitmap=null,this._load=null,_e.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((_e,tt)=>{const rt=this.source;this.url=rt.src;const it=()=>{this.destroyed||(rt.onload=null,rt.onerror=null,this.update(),this._load=null,this.createBitmap?_e(this.process()):_e(this))};rt.complete&&rt.src?it():(rt.onload=it,rt.onerror=st=>{tt(st),this.onError.emit(st)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const _e=globalThis.createImageBitmap,tt=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:tt?"cors":"no-cors"}).then(rt=>rt.blob()).then(rt=>_e(rt,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(rt=>this.destroyed?Promise.reject():(this.bitmap=rt,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,_e,tt){if(typeof this.alphaMode=="number"&&(_e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,_e,tt);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,_e,tt,this.bitmap),!this.preserveBitmap){let rt=!0;const it=_e._glTextures;for(const st in it){const At=it[st];if(At!==tt&&At.dirtyId!==_e.dirtyId){rt=!1;break}}rt&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,_e,tt){const rt=_e.width,it=_e.height;if(tt){const st=_.width/2/rt,At=_.height/2/it,ut=_.x/rt+st,ct=_.y/it+At;tt=groupD8.add(tt,groupD8.NW),this.x0=ut+st*groupD8.uX(tt),this.y0=ct+At*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x1=ut+st*groupD8.uX(tt),this.y1=ct+At*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x2=ut+st*groupD8.uX(tt),this.y2=ct+At*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x3=ut+st*groupD8.uX(tt),this.y3=ct+At*groupD8.uY(tt)}else this.x0=_.x/rt,this.y0=_.y/it,this.x1=(_.x+_.width)/rt,this.y1=_.y/it,this.x2=(_.x+_.width)/rt,this.y2=(_.y+_.height)/it,this.x3=_.x/rt,this.y3=(_.y+_.height)/it;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(et){et.destroy=function(){},et.on=function(){},et.once=function(){},et.emit=function(){}}class Texture extends EventEmitter{constructor(_,_e,tt,rt,it,st,At){if(super(),this.noFrame=!1,_e||(this.noFrame=!0,_e=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=_e,this.trim=rt,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=tt||_e,this._rotate=Number(it||0),it===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=st?new Point(st.x,st.y):new Point(0,0),this.defaultBorders=At,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=_e:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:_e}=this.baseTexture;_e!=null&&_e.url&&TextureCache[_e.url]&&Texture.removeFromCache(_e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var rt;const _=this._frame.clone(),_e=this._frame===this.orig?_:this.orig.clone(),tt=new Texture(this.baseTexture,!this.noFrame&&_,_e,(rt=this.trim)==null?void 0:rt.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(tt._frame=_),tt}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,_e={},tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let it=null;if(rt)it=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const At=(_e==null?void 0:_e.pixiIdPrefix)||"pixiid";_.cacheId=`${At}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}it=_.cacheId}else{if(!_._pixiId){const At=(_e==null?void 0:_e.pixiIdPrefix)||"pixiid";_._pixiId=`${At}_${uid()}`}it=_._pixiId}let st=TextureCache[it];if(rt&&tt&&!st)throw new Error(`The cacheId "${it}" does not exist in TextureCache.`);return!st&&!(_ instanceof BaseTexture)?(_e.resolution||(_e.resolution=getResolutionOfUrl(_)),st=new Texture(new BaseTexture(_,_e)),st.baseTexture.cacheId=it,BaseTexture.addToCache(st.baseTexture,it),Texture.addToCache(st,it)):!st&&_ instanceof BaseTexture&&(st=new Texture(_),Texture.addToCache(st,it)),st}static fromURL(_,_e){const tt=Object.assign({autoLoad:!1},_e==null?void 0:_e.resourceOptions),rt=Texture.from(_,Object.assign({resourceOptions:tt},_e),!1),it=rt.baseTexture.resource;return rt.baseTexture.valid?Promise.resolve(rt):it.load().then(()=>Promise.resolve(rt))}static fromBuffer(_,_e,tt,rt){return new Texture(BaseTexture.fromBuffer(_,_e,tt,rt))}static fromLoader(_,_e,tt,rt){const it=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(_e)},rt)),{resource:st}=it;st instanceof ImageResource&&(st.url=_e);const At=new Texture(it);return tt||(tt=_e),BaseTexture.addToCache(At.baseTexture,tt),Texture.addToCache(At,tt),tt!==_e&&(BaseTexture.addToCache(At.baseTexture,_e),Texture.addToCache(At,_e)),At.baseTexture.valid?Promise.resolve(At):new Promise(ut=>{At.baseTexture.once("loaded",()=>ut(At))})}static addToCache(_,_e){_e&&(_.textureCacheIds.includes(_e)||_.textureCacheIds.push(_e),TextureCache[_e]&&TextureCache[_e]!==_&&console.warn(`Texture added to the cache with an id [${_e}] that already had an entry`),TextureCache[_e]=_)}static removeFromCache(_){if(typeof _=="string"){const _e=TextureCache[_];if(_e){const tt=_e.textureCacheIds.indexOf(_);return tt>-1&&_e.textureCacheIds.splice(tt,1),delete TextureCache[_],_e}}else if(_!=null&&_.textureCacheIds){for(let _e=0;_e<_.textureCacheIds.length;++_e)TextureCache[_.textureCacheIds[_e]]===_&&delete TextureCache[_.textureCacheIds[_e]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:_e,y:tt,width:rt,height:it}=_,st=_e+rt>this.baseTexture.width,At=tt+it>this.baseTexture.height;if(st||At){const ut=st&&At?"and":"or",ct=`X: ${_e} + ${rt} = ${_e+rt} > ${this.baseTexture.width}`,ht=`Y: ${tt} + ${it} = ${tt+it} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${ct} ${ut} ${ht}`)}this.valid=rt&&it&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),_e=_.getContext("2d");_.width=16,_.height=16,_e.fillStyle="white",_e.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,_e){super(_,_e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,_e,tt=!0){const rt=this.baseTexture.resolution,it=Math.round(_*rt)/rt,st=Math.round(_e*rt)/rt;this.valid=it>0&&st>0,this._frame.width=this.orig.width=it,this._frame.height=this.orig.height=st,tt&&this.baseTexture.resize(it,st),this.updateUvs()}setResolution(_){const{baseTexture:_e}=this;_e.resolution!==_&&(_e.setResolution(_),this.resize(_e.width,_e.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,_e,tt=MSAA_QUALITY.NONE){const rt=new BaseRenderTexture(Object.assign({width:_,height:_e,resolution:1,multisample:tt},this.textureOptions));return new RenderTexture(rt)}getOptimalTexture(_,_e,tt=1,rt=MSAA_QUALITY.NONE){let it;_=Math.max(Math.ceil(_*tt-1e-6),1),_e=Math.max(Math.ceil(_e*tt-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||_e!==this._pixelsHeight?(_=nextPow2(_),_e=nextPow2(_e),it=((_&65535)<<16|_e&65535)>>>0,rt>1&&(it+=rt*4294967296)):it=rt>1?-rt:-1,this.texturePool[it]||(this.texturePool[it]=[]);let st=this.texturePool[it].pop();return st||(st=this.createTexture(_,_e,rt)),st.filterPoolKey=it,st.setResolution(tt),st}getFilterTexture(_,_e,tt){const rt=this.getOptimalTexture(_.width,_.height,_e||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnTexture(_){const _e=_.filterPoolKey;_.filterFrame=null,this.texturePool[_e].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const _e in this.texturePool){const tt=this.texturePool[_e];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const _e in this.texturePool){if(!(Number(_e)<0))continue;const tt=this.texturePool[_e];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0);this.texturePool[_e]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,_e){let tt=0,rt=0;return this.uvs[0]=tt,this.uvs[1]=rt,this.uvs[2]=tt+_e.width/_.width,this.uvs[3]=rt,this.uvs[4]=tt+_e.width/_.width,this.uvs[5]=rt+_e.height/_.height,this.uvs[6]=tt,this.uvs[7]=rt+_e.height/_.height,tt=_e.x,rt=_e.y,this.vertices[0]=tt,this.vertices[1]=rt,this.vertices[2]=tt+_e.width,this.vertices[3]=rt,this.vertices[4]=tt+_e.width,this.vertices[5]=rt+_e.height,this.vertices[6]=tt,this.vertices[7]=rt+_e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,_e){const tt=this.renderer,rt=this.defaultFilterStack,it=this.statePool.pop()||new FilterState,st=tt.renderTexture;let At,ut;if(st.current){const ft=st.current;At=ft.resolution,ut=ft.multisample}else At=tt.resolution,ut=tt.multisample;let ct=_e[0].resolution||At,ht=_e[0].multisample??ut,ot=_e[0].padding,nt=_e[0].autoFit,at=_e[0].legacy??!0;for(let ft=1;ft<_e.length;ft++){const pt=_e[ft];ct=Math.min(ct,pt.resolution||At),ht=Math.min(ht,pt.multisample??ut),ot=this.useMaxPadding?Math.max(ot,pt.padding):ot+pt.padding,nt=nt&&pt.autoFit,at=at||(pt.legacy??!0)}rt.length===1&&(this.defaultFilterStack[0].renderTexture=st.current),rt.push(it),it.resolution=ct,it.multisample=ht,it.legacy=at,it.target=_,it.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),it.sourceFrame.pad(ot);const lt=this.tempRect.copyFrom(st.sourceFrame);tt.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(tt.projection.transform).invert(),lt),nt?(it.sourceFrame.fit(lt),(it.sourceFrame.width<=0||it.sourceFrame.height<=0)&&(it.sourceFrame.width=0,it.sourceFrame.height=0)):it.sourceFrame.intersects(lt)||(it.sourceFrame.width=0,it.sourceFrame.height=0),this.roundFrame(it.sourceFrame,st.current?st.current.resolution:tt.resolution,st.sourceFrame,st.destinationFrame,tt.projection.transform),it.renderTexture=this.getOptimalFilterTexture(it.sourceFrame.width,it.sourceFrame.height,ct,ht),it.filters=_e,it.destinationFrame.width=it.renderTexture.width,it.destinationFrame.height=it.renderTexture.height;const dt=this.tempRect;dt.x=0,dt.y=0,dt.width=it.sourceFrame.width,dt.height=it.sourceFrame.height,it.renderTexture.filterFrame=it.sourceFrame,it.bindingSourceFrame.copyFrom(st.sourceFrame),it.bindingDestinationFrame.copyFrom(st.destinationFrame),it.transform=tt.projection.transform,tt.projection.transform=null,st.bind(it.renderTexture,it.sourceFrame,dt),tt.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,_e=_.pop(),tt=_e.filters;this.activeState=_e;const rt=this.globalUniforms.uniforms;rt.outputFrame=_e.sourceFrame,rt.resolution=_e.resolution;const it=rt.inputSize,st=rt.inputPixel,At=rt.inputClamp;if(it[0]=_e.destinationFrame.width,it[1]=_e.destinationFrame.height,it[2]=1/it[0],it[3]=1/it[1],st[0]=Math.round(it[0]*_e.resolution),st[1]=Math.round(it[1]*_e.resolution),st[2]=1/st[0],st[3]=1/st[1],At[0]=.5*st[2],At[1]=.5*st[3],At[2]=_e.sourceFrame.width*it[2]-.5*st[2],At[3]=_e.sourceFrame.height*it[3]-.5*st[3],_e.legacy){const ct=rt.filterArea;ct[0]=_e.destinationFrame.width,ct[1]=_e.destinationFrame.height,ct[2]=_e.sourceFrame.x,ct[3]=_e.sourceFrame.y,rt.filterClamp=rt.inputClamp}this.globalUniforms.update();const ut=_[_.length-1];if(this.renderer.framebuffer.blit(),tt.length===1)tt[0].apply(this,_e.renderTexture,ut.renderTexture,CLEAR_MODES.BLEND,_e),this.returnFilterTexture(_e.renderTexture);else{let ct=_e.renderTexture,ht=this.getOptimalFilterTexture(ct.width,ct.height,_e.resolution);ht.filterFrame=ct.filterFrame;let ot=0;for(ot=0;ot<tt.length-1;++ot){ot===1&&_e.multisample>1&&(ht=this.getOptimalFilterTexture(ct.width,ct.height,_e.resolution),ht.filterFrame=ct.filterFrame),tt[ot].apply(this,ct,ht,CLEAR_MODES.CLEAR,_e);const nt=ct;ct=ht,ht=nt}tt[ot].apply(this,ct,ut.renderTexture,CLEAR_MODES.BLEND,_e),ot>1&&_e.multisample>1&&this.returnFilterTexture(_e.renderTexture),this.returnFilterTexture(ct),this.returnFilterTexture(ht)}_e.clear(),this.statePool.push(_e)}bindAndClear(_,_e=CLEAR_MODES.CLEAR){const{renderTexture:tt,state:rt}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const st=this.tempRect;st.x=0,st.y=0,st.width=_.filterFrame.width,st.height=_.filterFrame.height,tt.bind(_,_.filterFrame,st)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?tt.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const it=rt.stateId&1||this.forceClear;(_e===CLEAR_MODES.CLEAR||_e===CLEAR_MODES.BLIT&&it)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,_e,tt,rt){const it=this.renderer;it.state.set(_.state),this.bindAndClear(tt,rt),_.uniforms.uSampler=_e,_.uniforms.filterGlobals=this.globalUniforms,it.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(_e._frame,_e.filterFrame),it.geometry.bind(this.quadUv),it.geometry.draw(DRAW_MODES.TRIANGLES)):(it.geometry.bind(this.quad),it.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,_e){const{sourceFrame:tt,destinationFrame:rt}=this.activeState,{orig:it}=_e._texture,st=_.set(rt.width,0,0,rt.height,tt.x,tt.y),At=_e.worldTransform.copyTo(Matrix.TEMP_MATRIX);return At.invert(),st.prepend(At),st.scale(1/it.width,1/it.height),st.translate(_e.anchor.x,_e.anchor.y),st}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,_e,tt=1,rt=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,_e,tt,rt)}getFilterTexture(_,_e,tt){if(typeof _=="number"){const it=_;_=_e,_e=it}_=_||this.activeState.renderTexture;const rt=this.texturePool.getOptimalTexture(_.width,_.height,_e||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,_e){const tt=tempPoints[0],rt=tempPoints[1],it=tempPoints[2],st=tempPoints[3];tt.set(_e.left,_e.top),rt.set(_e.left,_e.bottom),it.set(_e.right,_e.top),st.set(_e.right,_e.bottom),_.apply(tt,tt),_.apply(rt,rt),_.apply(it,it),_.apply(st,st);const At=Math.min(tt.x,rt.x,it.x,st.x),ut=Math.min(tt.y,rt.y,it.y,st.y),ct=Math.max(tt.x,rt.x,it.x,st.x),ht=Math.max(tt.y,rt.y,it.y,st.y);_e.x=At,_e.y=ut,_e.width=ct-At,_e.height=ht-ut}roundFrame(_,_e,tt,rt,it){if(!(_.width<=0||_.height<=0||tt.width<=0||tt.height<=0)){if(it){const{a:st,b:At,c:ut,d:ct}=it;if((Math.abs(At)>1e-4||Math.abs(ut)>1e-4)&&(Math.abs(st)>1e-4||Math.abs(ct)>1e-4))return}it=it?tempMatrix$2.copyFrom(it):tempMatrix$2.identity(),it.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.transformAABB(it,_),_.ceil(_e),this.transformAABB(it.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let _e=this.renderer.context.extensions.drawBuffers,tt=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(_e=null,tt=null),_e?_.drawBuffers=rt=>_e.drawBuffersWEBGL(rt):(this.hasMRT=!1,_.drawBuffers=()=>{}),tt||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,_e,tt=0){const{gl:rt}=this;if(_){const it=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,rt.bindFramebuffer(rt.FRAMEBUFFER,it.framebuffer)),it.mipLevel!==tt&&(_.dirtyId++,_.dirtyFormat++,it.mipLevel=tt),it.dirtyId!==_.dirtyId&&(it.dirtyId=_.dirtyId,it.dirtyFormat!==_.dirtyFormat?(it.dirtyFormat=_.dirtyFormat,it.dirtySize=_.dirtySize,this.updateFramebuffer(_,tt)):it.dirtySize!==_.dirtySize&&(it.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let st=0;st<_.colorTextures.length;st++){const At=_.colorTextures[st];this.renderer.texture.unbind(At.parentTextureArray||At)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),_e){const st=_e.width>>tt,At=_e.height>>tt,ut=st/_e.width;this.setViewport(_e.x*ut,_e.y*ut,st,At)}else{const st=_.width>>tt,At=_.height>>tt;this.setViewport(0,0,st,At)}}else this.current&&(this.current=null,rt.bindFramebuffer(rt.FRAMEBUFFER,null)),_e?this.setViewport(_e.x,_e.y,_e.width,_e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,_e,tt,rt){const it=this.viewport;_=Math.round(_),_e=Math.round(_e),tt=Math.round(tt),rt=Math.round(rt),(it.width!==tt||it.height!==rt||it.x!==_||it.y!==_e)&&(it.x=_,it.y=_e,it.width=tt,it.height=rt,this.gl.viewport(_,_e,tt,rt))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,_e,tt,rt,it=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:st}=this;st.clearColor(_,_e,tt,rt),st.clear(it)}initFramebuffer(_){const{gl:_e}=this,tt=new GLFramebuffer(_e.createFramebuffer());return tt.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=tt,this.managedFramebuffers.push(_),_.disposeRunner.add(this),tt}resizeFramebuffer(_){const{gl:_e}=this,tt=_.glFramebuffers[this.CONTEXT_UID];if(tt.stencil){_e.bindRenderbuffer(_e.RENDERBUFFER,tt.stencil);let st;this.renderer.context.webGLVersion===1?st=_e.DEPTH_STENCIL:_.depth&&_.stencil?st=_e.DEPTH24_STENCIL8:_.depth?st=_e.DEPTH_COMPONENT24:st=_e.STENCIL_INDEX8,tt.msaaBuffer?_e.renderbufferStorageMultisample(_e.RENDERBUFFER,tt.multisample,st,_.width,_.height):_e.renderbufferStorage(_e.RENDERBUFFER,st,_.width,_.height)}const rt=_.colorTextures;let it=rt.length;_e.drawBuffers||(it=Math.min(it,1));for(let st=0;st<it;st++){const At=rt[st],ut=At.parentTextureArray||At;this.renderer.texture.bind(ut,0),st===0&&tt.msaaBuffer&&(_e.bindRenderbuffer(_e.RENDERBUFFER,tt.msaaBuffer),_e.renderbufferStorageMultisample(_e.RENDERBUFFER,tt.multisample,ut._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,_e){const{gl:tt}=this,rt=_.glFramebuffers[this.CONTEXT_UID],it=_.colorTextures;let st=it.length;tt.drawBuffers||(st=Math.min(st,1)),rt.multisample>1&&this.canMultisampleFramebuffer(_)?rt.msaaBuffer=rt.msaaBuffer||tt.createRenderbuffer():rt.msaaBuffer&&(tt.deleteRenderbuffer(rt.msaaBuffer),rt.msaaBuffer=null,rt.blitFramebuffer&&(rt.blitFramebuffer.dispose(),rt.blitFramebuffer=null));const At=[];for(let ut=0;ut<st;ut++){const ct=it[ut],ht=ct.parentTextureArray||ct;this.renderer.texture.bind(ht,0),ut===0&&rt.msaaBuffer?(tt.bindRenderbuffer(tt.RENDERBUFFER,rt.msaaBuffer),tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,ht._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.RENDERBUFFER,rt.msaaBuffer)):(tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+ut,ct.target,ht._glTextures[this.CONTEXT_UID].texture,_e),At.push(tt.COLOR_ATTACHMENT0+ut))}if(At.length>1&&tt.drawBuffers(At),_.depthTexture&&this.writeDepthTexture){const ut=_.depthTexture;this.renderer.texture.bind(ut,0),tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,ut._glTextures[this.CONTEXT_UID].texture,_e)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){rt.stencil=rt.stencil||tt.createRenderbuffer();let ut,ct;this.renderer.context.webGLVersion===1?(ut=tt.DEPTH_STENCIL_ATTACHMENT,ct=tt.DEPTH_STENCIL):_.depth&&_.stencil?(ut=tt.DEPTH_STENCIL_ATTACHMENT,ct=tt.DEPTH24_STENCIL8):_.depth?(ut=tt.DEPTH_ATTACHMENT,ct=tt.DEPTH_COMPONENT24):(ut=tt.STENCIL_ATTACHMENT,ct=tt.STENCIL_INDEX8),tt.bindRenderbuffer(tt.RENDERBUFFER,rt.stencil),rt.msaaBuffer?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,ct,_.width,_.height):tt.renderbufferStorage(tt.RENDERBUFFER,ct,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,ut,tt.RENDERBUFFER,rt.stencil)}else rt.stencil&&(tt.deleteRenderbuffer(rt.stencil),rt.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:_e}=this;let tt=MSAA_QUALITY.NONE;if(_<=1||_e===null)return tt;for(let rt=0;rt<_e.length;rt++)if(_e[rt]<=_){tt=_e[rt];break}return tt===1&&(tt=MSAA_QUALITY.NONE),tt}blit(_,_e,tt){const{current:rt,renderer:it,gl:st,CONTEXT_UID:At}=this;if(it.context.webGLVersion!==2||!rt)return;const ut=rt.glFramebuffers[At];if(!ut)return;if(!_){if(!ut.msaaBuffer)return;const ht=rt.colorTextures[0];if(!ht)return;ut.blitFramebuffer||(ut.blitFramebuffer=new Framebuffer(rt.width,rt.height),ut.blitFramebuffer.addColorTexture(0,ht)),_=ut.blitFramebuffer,_.colorTextures[0]!==ht&&(_.colorTextures[0]=ht,_.dirtyId++,_.dirtyFormat++),(_.width!==rt.width||_.height!==rt.height)&&(_.width=rt.width,_.height=rt.height,_.dirtyId++,_.dirtySize++)}_e||(_e=tempRectangle,_e.width=rt.width,_e.height=rt.height),tt||(tt=_e);const ct=_e.width===tt.width&&_e.height===tt.height;this.bind(_),st.bindFramebuffer(st.READ_FRAMEBUFFER,ut.framebuffer),st.blitFramebuffer(_e.left,_e.top,_e.right,_e.bottom,tt.left,tt.top,tt.right,tt.bottom,st.COLOR_BUFFER_BIT,ct?st.NEAREST:st.LINEAR),st.bindFramebuffer(st.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,_e){const tt=_.glFramebuffers[this.CONTEXT_UID],rt=this.gl;if(!tt)return;delete _.glFramebuffers[this.CONTEXT_UID];const it=this.managedFramebuffers.indexOf(_);it>=0&&this.managedFramebuffers.splice(it,1),_.disposeRunner.remove(this),_e||(rt.deleteFramebuffer(tt.framebuffer),tt.msaaBuffer&&rt.deleteRenderbuffer(tt.msaaBuffer),tt.stencil&&rt.deleteRenderbuffer(tt.stencil)),tt.blitFramebuffer&&this.disposeFramebuffer(tt.blitFramebuffer,_e)}disposeAll(_){const _e=this.managedFramebuffers;this.managedFramebuffers=[];for(let tt=0;tt<_e.length;tt++)this.disposeFramebuffer(_e[tt],_)}forceStencil(){const _=this.current;if(!_)return;const _e=_.glFramebuffers[this.CONTEXT_UID];if(!_e||_e.stencil&&_.stencil)return;_.stencil=!0;const tt=_.width,rt=_.height,it=this.gl,st=_e.stencil=it.createRenderbuffer();it.bindRenderbuffer(it.RENDERBUFFER,st);let At,ut;this.renderer.context.webGLVersion===1?(At=it.DEPTH_STENCIL_ATTACHMENT,ut=it.DEPTH_STENCIL):_.depth?(At=it.DEPTH_STENCIL_ATTACHMENT,ut=it.DEPTH24_STENCIL8):(At=it.STENCIL_ATTACHMENT,ut=it.STENCIL_INDEX8),_e.msaaBuffer?it.renderbufferStorageMultisample(it.RENDERBUFFER,_e.multisample,ut,tt,rt):it.renderbufferStorage(it.RENDERBUFFER,ut,tt,rt),it.framebufferRenderbuffer(it.FRAMEBUFFER,At,it.RENDERBUFFER,st)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,_e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,_e.webGLVersion!==2){let tt=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(tt=null),tt?(_.createVertexArray=()=>tt.createVertexArrayOES(),_.bindVertexArray=rt=>tt.bindVertexArrayOES(rt),_.deleteVertexArray=rt=>tt.deleteVertexArrayOES(rt)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(_e.webGLVersion!==2){const tt=_.getExtension("ANGLE_instanced_arrays");tt?(_.vertexAttribDivisor=(rt,it)=>tt.vertexAttribDivisorANGLE(rt,it),_.drawElementsInstanced=(rt,it,st,At,ut)=>tt.drawElementsInstancedANGLE(rt,it,st,At,ut),_.drawArraysInstanced=(rt,it,st,At)=>tt.drawArraysInstancedANGLE(rt,it,st,At)):this.hasInstance=!1}this.canUseUInt32ElementIndex=_e.webGLVersion===2||!!_e.extensions.uint32ElementIndex}bind(_,_e){_e=_e||this.renderer.shader.shader;const{gl:tt}=this;let rt=_.glVertexArrayObjects[this.CONTEXT_UID],it=!1;rt||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=rt={},it=!0);const st=rt[_e.program.id]||this.initGeometryVao(_,_e,it);this._activeGeometry=_,this._activeVao!==st&&(this._activeVao=st,this.hasVao?tt.bindVertexArray(st):this.activateVao(_,_e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,_e=this.renderer.buffer;for(let tt=0;tt<_.buffers.length;tt++){const rt=_.buffers[tt];_e.update(rt)}}checkCompatibility(_,_e){const tt=_.attributes,rt=_e.attributeData;for(const it in rt)if(!tt[it])throw new Error(`shader and geometry incompatible, geometry missing the "${it}" attribute`)}getSignature(_,_e){const tt=_.attributes,rt=_e.attributeData,it=["g",_.id];for(const st in tt)rt[st]&&it.push(st,rt[st].location);return it.join("-")}initGeometryVao(_,_e,tt=!0){const rt=this.gl,it=this.CONTEXT_UID,st=this.renderer.buffer,At=_e.program;At.glPrograms[it]||this.renderer.shader.generateProgram(_e),this.checkCompatibility(_,At);const ut=this.getSignature(_,At),ct=_.glVertexArrayObjects[this.CONTEXT_UID];let ht=ct[ut];if(ht)return ct[At.id]=ht,ht;const ot=_.buffers,nt=_.attributes,at={},lt={};for(const dt in ot)at[dt]=0,lt[dt]=0;for(const dt in nt)!nt[dt].size&&At.attributeData[dt]?nt[dt].size=At.attributeData[dt].size:nt[dt].size||console.warn(`PIXI Geometry attribute '${dt}' size cannot be determined (likely the bound shader does not have the attribute)`),at[nt[dt].buffer]+=nt[dt].size*byteSizeMap[nt[dt].type];for(const dt in nt){const ft=nt[dt],pt=ft.size;ft.stride===void 0&&(at[ft.buffer]===pt*byteSizeMap[ft.type]?ft.stride=0:ft.stride=at[ft.buffer]),ft.start===void 0&&(ft.start=lt[ft.buffer],lt[ft.buffer]+=pt*byteSizeMap[ft.type])}ht=rt.createVertexArray(),rt.bindVertexArray(ht);for(let dt=0;dt<ot.length;dt++){const ft=ot[dt];st.bind(ft),tt&&ft._glBuffers[it].refCount++}return this.activateVao(_,At),ct[At.id]=ht,ct[ut]=ht,rt.bindVertexArray(null),st.unbind(BUFFER_TYPE.ARRAY_BUFFER),ht}disposeGeometry(_,_e){var At;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const tt=_.glVertexArrayObjects[this.CONTEXT_UID],rt=this.gl,it=_.buffers,st=(At=this.renderer)==null?void 0:At.buffer;if(_.disposeRunner.remove(this),!!tt){if(st)for(let ut=0;ut<it.length;ut++){const ct=it[ut]._glBuffers[this.CONTEXT_UID];ct&&(ct.refCount--,ct.refCount===0&&!_e&&st.dispose(it[ut],_e))}if(!_e){for(const ut in tt)if(ut[0]==="g"){const ct=tt[ut];this._activeVao===ct&&this.unbind(),rt.deleteVertexArray(ct)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const _e=Object.keys(this.managedGeometries);for(let tt=0;tt<_e.length;tt++)this.disposeGeometry(this.managedGeometries[_e[tt]],_)}activateVao(_,_e){const tt=this.gl,rt=this.CONTEXT_UID,it=this.renderer.buffer,st=_.buffers,At=_.attributes;_.indexBuffer&&it.bind(_.indexBuffer);let ut=null;for(const ct in At){const ht=At[ct],ot=st[ht.buffer],nt=ot._glBuffers[rt];if(_e.attributeData[ct]){ut!==nt&&(it.bind(ot),ut=nt);const at=_e.attributeData[ct].location;if(tt.enableVertexAttribArray(at),tt.vertexAttribPointer(at,ht.size,ht.type||tt.FLOAT,ht.normalized,ht.stride,ht.start),ht.instance)if(this.hasInstance)tt.vertexAttribDivisor(at,ht.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,_e,tt,rt){const{gl:it}=this,st=this._activeGeometry;if(st.indexBuffer){const At=st.indexBuffer.data.BYTES_PER_ELEMENT,ut=At===2?it.UNSIGNED_SHORT:it.UNSIGNED_INT;At===2||At===4&&this.canUseUInt32ElementIndex?st.instanced?it.drawElementsInstanced(_,_e||st.indexBuffer.data.length,ut,(tt||0)*At,rt||1):it.drawElements(_,_e||st.indexBuffer.data.length,ut,(tt||0)*At):console.warn("unsupported index buffer type: uint32")}else st.instanced?it.drawArraysInstanced(_,tt,_e||st.getSize(),rt||1):it.drawArrays(_,tt,_e||st.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,_e){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof _e>"u"?.5:_e,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,_e){_e===void 0&&(_e=_);const tt=this.mapCoord;for(let rt=0;rt<_.length;rt+=2){const it=_[rt],st=_[rt+1];_e[rt]=it*tt.a+st*tt.c+tt.tx,_e[rt+1]=it*tt.b+st*tt.d+tt.ty}return _e}update(_){const _e=this._texture;if(!_e||!_e.valid||!_&&this._textureID===_e._updateID)return!1;this._textureID=_e._updateID,this._updateID++;const tt=_e._uvs;this.mapCoord.set(tt.x1-tt.x0,tt.y1-tt.y0,tt.x3-tt.x0,tt.y3-tt.y0,tt.x0,tt.y0);const rt=_e.orig,it=_e.trim;it&&(tempMat$1.set(rt.width/it.width,0,0,rt.height/it.height,-it.x/it.width,-it.y/it.height),this.mapCoord.append(tempMat$1));const st=_e.baseTexture,At=this.uClampFrame,ut=this.clampMargin/st.resolution,ct=this.clampOffset;return At[0]=(_e._frame.x+ut+ct)/st.width,At[1]=(_e._frame.y+ut+ct)/st.height,At[2]=(_e._frame.x+_e._frame.width-ut+ct)/st.width,At[3]=(_e._frame.y+_e._frame.height-ut+ct)/st.height,this.uClampOffset[0]=ct/st.realWidth,this.uClampOffset[1]=ct/st.realHeight,this.isSimple=_e._frame.width===st.width&&_e._frame.height===st.height&&_e.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,_e,tt){let rt=null;typeof _!="string"&&_e===void 0&&tt===void 0&&(rt=_,_=void 0,_e=void 0,tt=void 0),super(_||vertex$4,_e||fragment$7,tt),this.maskSprite=rt,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,_e,tt,rt){const it=this._maskSprite,st=it._texture;st.valid&&(st.uvMatrix||(st.uvMatrix=new TextureMatrix(st,0)),st.uvMatrix.update(),this.uniforms.npmAlpha=st.baseTexture.alphaMode?0:1,this.uniforms.mask=st,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,it).prepend(st.uvMatrix.mapCoord),this.uniforms.alpha=it.worldAlpha,this.uniforms.maskClamp=st.uvMatrix.uClampFrame,_.applyFilter(this,_e,tt,rt))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,_e){let tt=_e;if(!tt.isMaskData){const it=this.maskDataPool.pop()||new MaskData;it.pooled=!0,it.maskObject=_e,tt=it}const rt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(tt.copyCountersOrReset(rt),tt._colorMask=rt?rt._colorMask:15,tt.autoDetect&&this.detect(tt),tt._target=_,tt.type!==MASK_TYPES.SPRITE&&this.maskStack.push(tt),tt.enabled)switch(tt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(tt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(tt);break;case MASK_TYPES.SPRITE:tt.copyCountersOrReset(null),this.pushSpriteMask(tt);break;case MASK_TYPES.COLOR:this.pushColorMask(tt);break}tt.type===MASK_TYPES.SPRITE&&this.maskStack.push(tt)}pop(_){const _e=this.maskStack.pop();if(!(!_e||_e._target!==_)){if(_e.enabled)switch(_e.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(_e);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(_e.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(_e);break;case MASK_TYPES.COLOR:this.popColorMask(_e);break}if(_e.reset(),_e.pooled&&this.maskDataPool.push(_e),this.maskStack.length!==0){const tt=this.maskStack[this.maskStack.length-1];tt.type===MASK_TYPES.SPRITE&&tt._filters&&(tt._filters[0].maskSprite=tt.maskObject)}}}detect(_){const _e=_.maskObject;_e?_e.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:_e}=_,tt=_._target;let rt=_._filters;rt||(rt=this.alphaMaskPool[this.alphaMaskIndex],rt||(rt=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),rt[0].resolution=_.resolution,rt[0].multisample=_.multisample,rt[0].maskSprite=_e;const it=tt.filterArea;tt.filterArea=_e.getBounds(!0),this.renderer.filter.push(tt,rt),tt.filterArea=it,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const _e=_._colorMask,tt=_._colorMask=_e&_.colorMask;tt!==_e&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}popColorMask(_){const _e=_._colorMask,tt=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;tt!==_e&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:_e}=this.renderer,tt=this.getStackLength();this.maskStack=_;const rt=this.getStackLength();rt!==tt&&(rt===0?_e.disable(this.glConst):(_e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class vn extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const _e=_._scissorRect,{maskObject:tt}=_,{renderer:rt}=this,it=rt.renderTexture,st=tt.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(st,it.current?it.current.resolution:rt.resolution,it.sourceFrame,it.destinationFrame,rt.projection.transform),_e&&st.fit(_e),_._scissorRectLocal=st}static isMatrixRotated(_){if(!_)return!1;const{a:_e,b:tt,c:rt,d:it}=_;return(Math.abs(tt)>1e-4||Math.abs(rt)>1e-4)&&(Math.abs(_e)>1e-4||Math.abs(it)>1e-4)}testScissor(_){const{maskObject:_e}=_;if(!_e.isFastRect||!_e.isFastRect()||vn.isMatrixRotated(_e.worldTransform)||vn.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const tt=_._scissorRectLocal;return tt.width>0&&tt.height>0}roundFrameToPixels(_,_e,tt,rt,it){vn.isMatrixRotated(it)||(it=it?tempMatrix$1.copyFrom(it):tempMatrix$1.identity(),it.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.renderer.filter.transformAABB(it,_),_.fit(rt),_.x=Math.round(_.x*_e),_.y=Math.round(_.y*_e),_.width=Math.round(_.width*_e),_.height=Math.round(_.height*_e))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:_e}=this.renderer;_._scissorRect||_e.enable(_e.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:_e}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():_e.disable(_e.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let _e;this.renderer.renderTexture.current?_e=_.y:_e=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,_e,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const _e=_.maskObject,{gl:tt}=this.renderer,rt=_._stencilCounter;rt===0&&(this.renderer.framebuffer.forceStencil(),tt.clearStencil(0),tt.clear(tt.STENCIL_BUFFER_BIT),tt.enable(tt.STENCIL_TEST)),_._stencilCounter++;const it=_._colorMask;it!==0&&(_._colorMask=0,tt.colorMask(!1,!1,!1,!1)),tt.stencilFunc(tt.EQUAL,rt,4294967295),tt.stencilOp(tt.KEEP,tt.KEEP,tt.INCR),_e.renderable=!0,_e.render(this.renderer),this.renderer.batch.flush(),_e.renderable=!1,it!==0&&(_._colorMask=it,tt.colorMask((it&1)!==0,(it&2)!==0,(it&4)!==0,(it&8)!==0)),this._useCurrent()}pop(_){const _e=this.renderer.gl;if(this.getStackLength()===0)_e.disable(_e.STENCIL_TEST);else{const tt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,rt=tt?tt._colorMask:15;rt!==0&&(tt._colorMask=0,_e.colorMask(!1,!1,!1,!1)),_e.stencilOp(_e.KEEP,_e.KEEP,_e.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,rt!==0&&(tt._colorMask=rt,_e.colorMask((rt&1)!==0,(rt&2)!==0,(rt&4)!==0,(rt&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const _e in _)this.plugins[_e]=new _[_e](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,_e,tt,rt){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=_e||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,tt,rt),this.transform&&this.projectionMatrix.append(this.transform);const it=this.renderer;it.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,it.globalUniforms.update(),it.shader.shader&&it.shader.syncUniformGroup(it.shader.shader.uniforms.globals)}calculateProjection(_,_e,tt,rt){const it=this.projectionMatrix,st=rt?-1:1;it.identity(),it.a=1/_e.width*2,it.d=st*(1/_e.height*2),it.tx=-1-_e.x*it.a,it.ty=-st-_e.y*it.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,_e){const{region:tt,...rt}=_e||{},it=(tt==null?void 0:tt.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),st=rt.resolution||this.renderer.resolution;it.width=Math.max(it.width,1/st),it.height=Math.max(it.height,1/st),rt.width=it.width,rt.height=it.height,rt.resolution=st,rt.multisample??(rt.multisample=this.renderer.multisample);const At=RenderTexture.create(rt);this._tempMatrix.tx=-it.x,this._tempMatrix.ty=-it.y;const ut=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:At,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=ut,At}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var _e;const _=(_e=this.renderer)==null?void 0:_e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,_e,tt){const rt=this.renderer;this.current=_;let it,st,At;_?(it=_.baseTexture,At=it.resolution,_e||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,_e=tempRect),tt||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=_e.width,tempRect2.height=_e.height,tt=tempRect2),st=it.framebuffer):(At=rt.resolution,_e||(tempRect.width=rt._view.screen.width,tempRect.height=rt._view.screen.height,_e=tempRect),tt||(tt=tempRect,tt.width=_e.width,tt.height=_e.height));const ut=this.viewportFrame;ut.x=tt.x*At,ut.y=tt.y*At,ut.width=tt.width*At,ut.height=tt.height*At,_||(ut.y=rt.view.height-(ut.y+ut.height)),ut.ceil(),this.renderer.framebuffer.bind(st,ut),this.renderer.projection.update(tt,_e,At,!st),_?this.renderer.mask.setMaskStack(it.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(_e),this.destinationFrame.copyFrom(tt)}clear(_,_e){const tt=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,rt=Color.shared.setValue(_||tt);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&rt.premultiply(rt.alpha);const it=this.destinationFrame,st=this.current?this.current.baseTexture:this.renderer._view.screen,At=it.width!==st.width||it.height!==st.height;if(At){let{x:ut,y:ct,width:ht,height:ot}=this.viewportFrame;ut=Math.round(ut),ct=Math.round(ct),ht=Math.round(ht),ot=Math.round(ot),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(ut,ct,ht,ot)}this.renderer.framebuffer.clear(rt.red,rt.green,rt.blue,rt.alpha,_e),At&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(_,_e){this.program=_,this.uniformData=_e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(et,_){const _e={},tt=_.getProgramParameter(et,_.ACTIVE_ATTRIBUTES);for(let rt=0;rt<tt;rt++){const it=_.getActiveAttrib(et,rt);if(it.name.startsWith("gl_"))continue;const st=mapType(_,it.type),At={type:st,name:it.name,size:mapSize(st),location:_.getAttribLocation(et,it.name)};_e[it.name]=At}return _e}function getUniformData(et,_){const _e={},tt=_.getProgramParameter(et,_.ACTIVE_UNIFORMS);for(let rt=0;rt<tt;rt++){const it=_.getActiveUniform(et,rt),st=it.name.replace(/\[.*?\]$/,""),At=!!it.name.match(/\[.*?\]$/),ut=mapType(_,it.type);_e[st]={name:st,index:rt,type:ut,size:it.size,isArray:At,value:defaultValue(ut,it.size)}}return _e}function generateProgram(et,_){var At;const _e=compileShader(et,et.VERTEX_SHADER,_.vertexSrc),tt=compileShader(et,et.FRAGMENT_SHADER,_.fragmentSrc),rt=et.createProgram();et.attachShader(rt,_e),et.attachShader(rt,tt);const it=(At=_.extra)==null?void 0:At.transformFeedbackVaryings;if(it&&(typeof et.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):et.transformFeedbackVaryings(rt,it.names,it.bufferMode==="separate"?et.SEPARATE_ATTRIBS:et.INTERLEAVED_ATTRIBS)),et.linkProgram(rt),et.getProgramParameter(rt,et.LINK_STATUS)||logProgramError(et,rt,_e,tt),_.attributeData=getAttributeData(rt,et),_.uniformData=getUniformData(rt,et),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const ut=Object.keys(_.attributeData);ut.sort((ct,ht)=>ct>ht?1:-1);for(let ct=0;ct<ut.length;ct++)_.attributeData[ut[ct]].location=ct,et.bindAttribLocation(rt,ct,ut[ct]);et.linkProgram(rt)}et.deleteShader(_e),et.deleteShader(tt);const st={};for(const ut in _.uniformData){const ct=_.uniformData[ut];st[ut]={location:et.getUniformLocation(rt,ut),value:defaultValue(ct.type,ct.size)}}return new GLProgram(rt,st)}function uboUpdate(et,_,_e,tt,rt){_e.buffer.update(rt)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(et){const _=et.map(it=>({data:it,offset:0,dataLen:0,dirty:0}));let _e=0,tt=0,rt=0;for(let it=0;it<_.length;it++){const st=_[it];if(_e=GLSL_TO_STD40_SIZE[st.data.type],st.data.size>1&&(_e=Math.max(_e,16)*st.data.size),st.dataLen=_e,tt%_e!==0&&tt<16){const At=tt%_e%16;tt+=At,rt+=At}tt+_e>16?(rt=Math.ceil(rt/16)*16,st.offset=rt,rt+=_e,tt=_e):(st.offset=rt,tt+=_e,rt+=_e)}return rt=Math.ceil(rt/16)*16,{uboElements:_,size:rt}}function getUBOData(et,_){const _e=[];for(const tt in et)_[tt]&&_e.push(_[tt]);return _e.sort((tt,rt)=>tt.index-rt.index),_e}function generateUniformBufferSync(et,_){if(!et.autoManage)return{size:0,syncFunc:uboUpdate};const _e=getUBOData(et.uniforms,_),{uboElements:tt,size:rt}=createUBOElements(_e),it=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let st=0;st<tt.length;st++){const At=tt[st],ut=et.uniforms[At.data.name],ct=At.data.name;let ht=!1;for(let ot=0;ot<uniformParsers.length;ot++){const nt=uniformParsers[ot];if(nt.codeUbo&&nt.test(At.data,ut)){it.push(`offset = ${At.offset/4};`,uniformParsers[ot].codeUbo(At.data.name,ut)),ht=!0;break}}if(!ht)if(At.data.size>1){const ot=mapSize(At.data.type),nt=Math.max(GLSL_TO_STD40_SIZE[At.data.type]/16,1),at=ot/nt,lt=(4-at%4)%4;it.push(`
                cv = ud.${ct}.value;
                v = uv.${ct};
                offset = ${At.offset/4};

                t = 0;

                for(var i=0; i < ${At.data.size*nt}; i++)
                {
                    for(var j = 0; j < ${at}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${lt};
                }

                `)}else{const ot=UBO_TO_SINGLE_SETTERS[At.data.type];it.push(`
                cv = ud.${ct}.value;
                v = uv.${ct};
                offset = ${At.offset/4};
                ${ot};
                `)}}return it.push(`
       renderer.buffer.update(buffer);
    `),{size:rt,syncFunc:new Function("ud","uv","renderer","syncData","buffer",it.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,_e){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const tt=_.program,rt=tt.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==tt&&(this.program=tt,this.gl.useProgram(rt.program)),_e||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),rt}setUniforms(_){const _e=this.shader.program,tt=_e.glPrograms[this.renderer.CONTEXT_UID];_e.syncUniforms(tt.uniformData,_,this.renderer)}syncUniformGroup(_,_e){const tt=this.getGlProgram();(!_.static||_.dirtyId!==tt.uniformDirtyGroups[_.id])&&(tt.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,tt,_e))}syncUniforms(_,_e,tt){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(_e.uniformData,_.uniforms,this.renderer,tt)}createSyncGroups(_){const _e=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[_e]||(this.cache[_e]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[_e],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,_e){const tt=this.getGlProgram();if(!_.static||_.dirtyId!==0||!tt.uniformGroups[_.id]){_.dirtyId=0;const rt=tt.uniformGroups[_.id]||this.createSyncBufferGroup(_,tt,_e);_.buffer.update(),rt(tt.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,tt.uniformBufferBindings[_e])}createSyncBufferGroup(_,_e,tt){const{gl:rt}=this.renderer;this.renderer.buffer.bind(_.buffer);const it=this.gl.getUniformBlockIndex(_e.program,tt);_e.uniformBufferBindings[tt]=this.shader.uniformBindCount,rt.uniformBlockBinding(_e.program,it,this.shader.uniformBindCount),this.shader.uniformBindCount++;const st=this.getSignature(_,this.shader.program.uniformData,"ubo");let At=this._uboCache[st];if(At||(At=this._uboCache[st]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const ut=new Float32Array(At.size/4);_.buffer.update(ut)}return _e.uniformGroups[_.id]=At.syncFunc,_e.uniformGroups[_.id]}getSignature(_,_e,tt){const rt=_.uniforms,it=[`${tt}-`];for(const st in rt)it.push(st),_e[st]&&it.push(_e[st].type);return it.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const _e=this.gl,tt=_.program,rt=generateProgram(_e,tt);return tt.glPrograms[this.renderer.CONTEXT_UID]=rt,rt}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:_e}=this;_e.runners.init.emit(_e.options),_.hello&&console.log(`PixiJS 7.3.2 - ${_e.rendererLogId} - https://pixijs.com`),_e.resize(_e.screen.width,_e.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(et,_=[]){return _[BLEND_MODES.NORMAL]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[et.ONE,et.ONE],_[BLEND_MODES.MULTIPLY]=[et.DST_COLOR,et.ONE_MINUS_SRC_ALPHA,et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[et.ONE,et.ONE_MINUS_SRC_COLOR,et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[et.SRC_ALPHA,et.ONE_MINUS_SRC_ALPHA,et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[et.SRC_ALPHA,et.ONE,et.ONE,et.ONE],_[BLEND_MODES.SCREEN_NPM]=[et.SRC_ALPHA,et.ONE_MINUS_SRC_COLOR,et.ONE,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[et.DST_ALPHA,et.ZERO],_[BLEND_MODES.SRC_OUT]=[et.ONE_MINUS_DST_ALPHA,et.ZERO],_[BLEND_MODES.SRC_ATOP]=[et.DST_ALPHA,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[et.ONE_MINUS_DST_ALPHA,et.ONE],_[BLEND_MODES.DST_IN]=[et.ZERO,et.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[et.ZERO,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[et.ONE_MINUS_DST_ALPHA,et.SRC_ALPHA],_[BLEND_MODES.XOR]=[et.ONE_MINUS_DST_ALPHA,et.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[et.ONE,et.ONE,et.ONE,et.ONE,et.FUNC_REVERSE_SUBTRACT,et.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class Pn{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let _e=this.stateId^_.data,tt=0;for(;_e;)_e&1&&this.map[tt].call(this,!!(_.data&1<<tt)),_e=_e>>1,tt++;this.stateId=_.data}for(let _e=0;_e<this.checks.length;_e++)this.checks[_e](this,_)}forceState(_){_=_||this.defaultState;for(let _e=0;_e<this.map.length;_e++)this.map[_e].call(this,!!(_.data&1<<_e));for(let _e=0;_e<this.checks.length;_e++)this.checks[_e](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(Pn.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(Pn.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const _e=this.blendModes[_],tt=this.gl;_e.length===2?tt.blendFunc(_e[0],_e[1]):tt.blendFuncSeparate(_e[0],_e[1],_e[2],_e[3]),_e.length===6?(this._blendEq=!0,tt.blendEquationSeparate(_e[4],_e[5])):this._blendEq&&(this._blendEq=!1,tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD))}setPolygonOffset(_,_e){this.gl.polygonOffset(_,_e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,_e){const tt=this.checks.indexOf(_);_e&&tt===-1?this.checks.push(_):!_e&&tt!==-1&&this.checks.splice(tt,1)}static checkBlendMode(_,_e){_.setBlendMode(_e.blendMode)}static checkPolygonOffset(_,_e){_.setPolygonOffset(1,_e.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const _e=(_.priority??[]).filter(rt=>_.systems[rt]),tt=[..._e,...Object.keys(_.systems).filter(rt=>!_e.includes(rt))];for(const rt of tt)this.addSystem(_.systems[rt],rt)}addRunners(..._){_.forEach(_e=>{this.runners[_e]=new Runner(_e)})}addSystem(_,_e){const tt=new _(this);if(this[_e])throw new Error(`Whoops! The name "${_e}" is already in use`);this[_e]=tt,this._systemsHash[_e]=tt;for(const rt in this.runners)this.runners[rt].add(tt);return this}emitWithCustomOptions(_,_e){const tt=Object.keys(this._systemsHash);_.items.forEach(rt=>{const it=tt.find(st=>this._systemsHash[st]===rt);rt[_.name](_e[it])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class wn{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=wn.defaultMaxIdle,this.checkCountMax=wn.defaultCheckCountMax,this.mode=wn.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,_e=_.managedTextures;let tt=!1;for(let rt=0;rt<_e.length;rt++){const it=_e[rt];it.resource&&this.count-it.touched>this.maxIdle&&(_.destroyTexture(it,!0),_e[rt]=null,tt=!0)}if(tt){let rt=0;for(let it=0;it<_e.length;it++)_e[it]!==null&&(_e[rt++]=_e[it]);_e.length=rt}}unload(_){const _e=this.renderer.texture,tt=_._texture;tt&&!tt.framebuffer&&_e.destroyTexture(tt);for(let rt=_.children.length-1;rt>=0;rt--)this.unload(_.children[rt])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(et){let _;return"WebGL2RenderingContext"in globalThis&&et instanceof globalThis.WebGL2RenderingContext?_={[et.RGB]:SAMPLER_TYPES.FLOAT,[et.RGBA]:SAMPLER_TYPES.FLOAT,[et.ALPHA]:SAMPLER_TYPES.FLOAT,[et.LUMINANCE]:SAMPLER_TYPES.FLOAT,[et.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[et.R8]:SAMPLER_TYPES.FLOAT,[et.R8_SNORM]:SAMPLER_TYPES.FLOAT,[et.RG8]:SAMPLER_TYPES.FLOAT,[et.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[et.RGB8]:SAMPLER_TYPES.FLOAT,[et.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[et.RGB565]:SAMPLER_TYPES.FLOAT,[et.RGBA4]:SAMPLER_TYPES.FLOAT,[et.RGB5_A1]:SAMPLER_TYPES.FLOAT,[et.RGBA8]:SAMPLER_TYPES.FLOAT,[et.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[et.RGB10_A2]:SAMPLER_TYPES.FLOAT,[et.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[et.SRGB8]:SAMPLER_TYPES.FLOAT,[et.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[et.R16F]:SAMPLER_TYPES.FLOAT,[et.RG16F]:SAMPLER_TYPES.FLOAT,[et.RGB16F]:SAMPLER_TYPES.FLOAT,[et.RGBA16F]:SAMPLER_TYPES.FLOAT,[et.R32F]:SAMPLER_TYPES.FLOAT,[et.RG32F]:SAMPLER_TYPES.FLOAT,[et.RGB32F]:SAMPLER_TYPES.FLOAT,[et.RGBA32F]:SAMPLER_TYPES.FLOAT,[et.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[et.RGB9_E5]:SAMPLER_TYPES.FLOAT,[et.R8I]:SAMPLER_TYPES.INT,[et.R8UI]:SAMPLER_TYPES.UINT,[et.R16I]:SAMPLER_TYPES.INT,[et.R16UI]:SAMPLER_TYPES.UINT,[et.R32I]:SAMPLER_TYPES.INT,[et.R32UI]:SAMPLER_TYPES.UINT,[et.RG8I]:SAMPLER_TYPES.INT,[et.RG8UI]:SAMPLER_TYPES.UINT,[et.RG16I]:SAMPLER_TYPES.INT,[et.RG16UI]:SAMPLER_TYPES.UINT,[et.RG32I]:SAMPLER_TYPES.INT,[et.RG32UI]:SAMPLER_TYPES.UINT,[et.RGB8I]:SAMPLER_TYPES.INT,[et.RGB8UI]:SAMPLER_TYPES.UINT,[et.RGB16I]:SAMPLER_TYPES.INT,[et.RGB16UI]:SAMPLER_TYPES.UINT,[et.RGB32I]:SAMPLER_TYPES.INT,[et.RGB32UI]:SAMPLER_TYPES.UINT,[et.RGBA8I]:SAMPLER_TYPES.INT,[et.RGBA8UI]:SAMPLER_TYPES.UINT,[et.RGBA16I]:SAMPLER_TYPES.INT,[et.RGBA16UI]:SAMPLER_TYPES.UINT,[et.RGBA32I]:SAMPLER_TYPES.INT,[et.RGBA32UI]:SAMPLER_TYPES.UINT,[et.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[et.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[et.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[et.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[et.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[et.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[et.RGB]:SAMPLER_TYPES.FLOAT,[et.RGBA]:SAMPLER_TYPES.FLOAT,[et.ALPHA]:SAMPLER_TYPES.FLOAT,[et.LUMINANCE]:SAMPLER_TYPES.FLOAT,[et.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[et.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(et){let _;return"WebGL2RenderingContext"in globalThis&&et instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:et.RGBA8,[FORMATS.RGB]:et.RGB8,[FORMATS.RG]:et.RG8,[FORMATS.RED]:et.R8,[FORMATS.RGBA_INTEGER]:et.RGBA8UI,[FORMATS.RGB_INTEGER]:et.RGB8UI,[FORMATS.RG_INTEGER]:et.RG8UI,[FORMATS.RED_INTEGER]:et.R8UI,[FORMATS.ALPHA]:et.ALPHA,[FORMATS.LUMINANCE]:et.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:et.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:et.RGBA8_SNORM,[FORMATS.RGB]:et.RGB8_SNORM,[FORMATS.RG]:et.RG8_SNORM,[FORMATS.RED]:et.R8_SNORM,[FORMATS.RGBA_INTEGER]:et.RGBA8I,[FORMATS.RGB_INTEGER]:et.RGB8I,[FORMATS.RG_INTEGER]:et.RG8I,[FORMATS.RED_INTEGER]:et.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:et.RGBA16UI,[FORMATS.RGB_INTEGER]:et.RGB16UI,[FORMATS.RG_INTEGER]:et.RG16UI,[FORMATS.RED_INTEGER]:et.R16UI,[FORMATS.DEPTH_COMPONENT]:et.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:et.RGBA16I,[FORMATS.RGB_INTEGER]:et.RGB16I,[FORMATS.RG_INTEGER]:et.RG16I,[FORMATS.RED_INTEGER]:et.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:et.RGBA32UI,[FORMATS.RGB_INTEGER]:et.RGB32UI,[FORMATS.RG_INTEGER]:et.RG32UI,[FORMATS.RED_INTEGER]:et.R32UI,[FORMATS.DEPTH_COMPONENT]:et.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:et.RGBA32I,[FORMATS.RGB_INTEGER]:et.RGB32I,[FORMATS.RG_INTEGER]:et.RG32I,[FORMATS.RED_INTEGER]:et.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:et.RGBA32F,[FORMATS.RGB]:et.RGB32F,[FORMATS.RG]:et.RG32F,[FORMATS.RED]:et.R32F,[FORMATS.DEPTH_COMPONENT]:et.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:et.RGBA16F,[FORMATS.RGB]:et.RGB16F,[FORMATS.RG]:et.RG16F,[FORMATS.RED]:et.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:et.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:et.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:et.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:et.RGB10_A2,[FORMATS.RGBA_INTEGER]:et.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:et.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:et.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:et.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:et.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:et.RGBA,[FORMATS.RGB]:et.RGB,[FORMATS.ALPHA]:et.ALPHA,[FORMATS.LUMINANCE]:et.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:et.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:et.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:et.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:et.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const _e=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=_e;for(let rt=0;rt<_e;rt++)this.boundTextures[rt]=null;this.emptyTextures={};const tt=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,tt.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=tt,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let rt=0;rt<6;rt++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let rt=0;rt<this.boundTextures.length;rt++)this.bind(null,rt)}bind(_,_e=0){const{gl:tt}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const rt=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[_e]!==_&&(this.currentLocation!==_e&&(this.currentLocation=_e,tt.activeTexture(tt.TEXTURE0+_e)),tt.bindTexture(_.target,rt.texture)),rt.dirtyId!==_.dirtyId?(this.currentLocation!==_e&&(this.currentLocation=_e,tt.activeTexture(tt.TEXTURE0+_e)),this.updateTexture(_)):rt.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[_e]=_}else this.currentLocation!==_e&&(this.currentLocation=_e,tt.activeTexture(tt.TEXTURE0+_e)),tt.bindTexture(tt.TEXTURE_2D,this.emptyTextures[tt.TEXTURE_2D].texture),this.boundTextures[_e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:_e,boundTextures:tt}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let rt=0;rt<tt.length;rt++)tt[rt]===this.unknownTexture&&this.bind(null,rt)}for(let rt=0;rt<tt.length;rt++)tt[rt]===_&&(this.currentLocation!==rt&&(_e.activeTexture(_e.TEXTURE0+rt),this.currentLocation=rt),_e.bindTexture(_.target,this.emptyTextures[_.target].texture),tt[rt]=null)}ensureSamplerType(_){const{boundTextures:_e,hasIntegerTextures:tt,CONTEXT_UID:rt}=this;if(tt)for(let it=_-1;it>=0;--it){const st=_e[it];st&&st._glTextures[rt].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(st)}}initTexture(_){const _e=new GLTexture(this.gl.createTexture());return _e.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=_e,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),_e}initTextureType(_,_e){var tt;_e.internalFormat=((tt=this.internalFormats[_.type])==null?void 0:tt[_.format])??_.format,_e.samplerType=this.samplerTypes[_e.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?_e.type=this.gl.HALF_FLOAT:_e.type=_.type}updateTexture(_){var rt;const _e=_._glTextures[this.CONTEXT_UID];if(!_e)return;const tt=this.renderer;if(this.initTextureType(_,_e),(rt=_.resource)==null?void 0:rt.upload(tt,_,_e))_e.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const it=_.realWidth,st=_.realHeight,At=tt.gl;(_e.width!==it||_e.height!==st||_e.dirtyId<0)&&(_e.width=it,_e.height=st,At.texImage2D(_.target,0,_e.internalFormat,it,st,0,_.format,_e.type,null))}_.dirtyStyleId!==_e.dirtyStyleId&&this.updateTextureStyle(_),_e.dirtyId=_.dirtyId}destroyTexture(_,_e){const{gl:tt}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),tt.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!_e)){const rt=this.managedTextures.indexOf(_);rt!==-1&&removeItems(this.managedTextures,rt,1)}}updateTextureStyle(_){var tt;const _e=_._glTextures[this.CONTEXT_UID];_e&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?_e.mipmap=!1:_e.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?_e.wrapMode=WRAP_MODES.CLAMP:_e.wrapMode=_.wrapMode,(tt=_.resource)!=null&&tt.style(this.renderer,_,_e)||this.setStyle(_,_e),_e.dirtyStyleId=_.dirtyStyleId)}setStyle(_,_e){const tt=this.gl;if(_e.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&tt.generateMipmap(_.target),tt.texParameteri(_.target,tt.TEXTURE_WRAP_S,_e.wrapMode),tt.texParameteri(_.target,tt.TEXTURE_WRAP_T,_e.wrapMode),_e.mipmap){tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR_MIPMAP_LINEAR:tt.NEAREST_MIPMAP_NEAREST);const rt=this.renderer.context.extensions.anisotropicFiltering;if(rt&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const it=Math.min(_.anisotropicLevel,tt.getParameter(rt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));tt.texParameterf(_.target,rt.TEXTURE_MAX_ANISOTROPY_EXT,it)}}else tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST);tt.texParameteri(_.target,tt.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:_e,CONTEXT_UID:tt}=this,rt=_._glTransformFeedbacks[tt]||this.createGLTransformFeedback(_);_e.bindTransformFeedback(_e.TRANSFORM_FEEDBACK,rt)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,_e){const{gl:tt,renderer:rt}=this;_e&&rt.shader.bind(_e),tt.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:_e,renderer:tt,CONTEXT_UID:rt}=this,it=_e.createTransformFeedback();_._glTransformFeedbacks[rt]=it,_e.bindTransformFeedback(_e.TRANSFORM_FEEDBACK,it);for(let st=0;st<_.buffers.length;st++){const At=_.buffers[st];At&&(tt.buffer.update(At),At._glBuffers[rt].refCount++,_e.bindBufferBase(_e.TRANSFORM_FEEDBACK_BUFFER,st,At._glBuffers[rt].buffer||null))}return _e.bindTransformFeedback(_e.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),it}disposeTransformFeedback(_,_e){const tt=_._glTransformFeedbacks[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this);const it=this.renderer.buffer;if(it)for(let st=0;st<_.buffers.length;st++){const At=_.buffers[st];if(!At)continue;const ut=At._glBuffers[this.CONTEXT_UID];ut&&(ut.refCount--,ut.refCount===0&&!_e&&it.dispose(At,_e))}tt&&(_e||rt.deleteTransformFeedback(tt),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,_e){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(_e*this.resolution);const tt=this.element.width/this.resolution,rt=this.element.height/this.resolution;this.screen.width=tt,this.screen.height=rt,this.autoDensity&&(this.element.style.width=`${tt}px`,this.element.style.height=`${rt}px`),this.renderer.emit("resize",tt,rt),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var _e;_&&((_e=this.element.parentNode)==null||_e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(et){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=et}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(et){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=et}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(et){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=et}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(et){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=et}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(et){Filter.defaultResolution=et}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(et){Filter.defaultMultisample=et}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(et){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=et}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(et){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=et}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(et){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=et}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(et){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=et}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(et){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=et}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(et){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=et}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(et){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=et}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(et){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=et}}});var UPDATE_PRIORITY=(et=>(et[et.INTERACTION=50]="INTERACTION",et[et.HIGH=25]="HIGH",et[et.NORMAL=0]="NORMAL",et[et.LOW=-25]="LOW",et[et.UTILITY=-50]="UTILITY",et))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,_e=null,tt=0,rt=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=_e,this.priority=tt,this.once=rt}match(_,_e=null){return this.fn===_&&this.context===_e}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const _e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),_e}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const _e=this.next;return this.next=_?null:_e,this.previous=null,_e}}const _Ticker=class Or{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Or.targetFPMS,this.elapsedMS=1/Or.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,_e,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,_e,tt))}addOnce(_,_e,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,_e,tt,!0))}_addListener(_){let _e=this._head.next,tt=this._head;if(!_e)_.connect(tt);else{for(;_e;){if(_.priority>_e.priority){_.connect(tt);break}tt=_e,_e=_e.next}_.previous||_.connect(tt)}return this._startIfPossible(),this}remove(_,_e){let tt=this._head.next;for(;tt;)tt.match(_,_e)?tt=tt.destroy():tt=tt.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,_e=this._head;for(;_e=_e.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let _e;if(_>this.lastTime){if(_e=this.elapsedMS=_-this.lastTime,_e>this._maxElapsedMS&&(_e=this._maxElapsedMS),_e*=this.speed,this._minElapsedMS){const it=_-this._lastFrame|0;if(it<this._minElapsedMS)return;this._lastFrame=_-it%this._minElapsedMS}this.deltaMS=_e,this.deltaTime=this.deltaMS*Or.targetFPMS;const tt=this._head;let rt=tt.next;for(;rt;)rt=rt.emit(this.deltaTime);tt.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const _e=Math.min(this.maxFPS,_),tt=Math.min(Math.max(0,_e)/1e3,Or.targetFPMS);this._maxElapsedMS=1/tt}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const _e=Math.max(this.minFPS,_);this._minElapsedMS=1/(_e/1e3)}}static get shared(){if(!Or._shared){const _=Or._shared=new Or;_.autoStart=!0,_._protected=!0}return Or._shared}static get system(){if(!Or._system){const _=Or._system=new Or;_.autoStart=!0,_._protected=!0}return Or._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(et){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=et}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(_e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=_e,_e&&_e.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(et){for(const _ of renderers)if(_.test(et))return new _(et);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let _e;if(this.renderer.context.webGLVersion===1){const tt=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),_e=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,tt)}else{const tt=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),_e=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,tt)}_e>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:_e>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:_e>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:_e,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);_e.bindBuffer(_.type,rt.buffer)}unbind(_){const{gl:_e}=this;_e.bindBuffer(_,null)}bindBufferBase(_,_e){const{gl:tt,CONTEXT_UID:rt}=this;if(this.boundBufferBases[_e]!==_){const it=_._glBuffers[rt]||this.createGLBuffer(_);this.boundBufferBases[_e]=_,tt.bindBufferBase(tt.UNIFORM_BUFFER,_e,it.buffer)}}bindBufferRange(_,_e,tt){const{gl:rt,CONTEXT_UID:it}=this;tt=tt||0;const st=_._glBuffers[it]||this.createGLBuffer(_);rt.bindBufferRange(rt.UNIFORM_BUFFER,_e||0,st.buffer,tt*256,256)}update(_){const{gl:_e,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);if(_._updateID!==rt.updateID)if(rt.updateID=_._updateID,_e.bindBuffer(_.type,rt.buffer),rt.byteLength>=_.data.byteLength)_e.bufferSubData(_.type,0,_.data);else{const it=_.static?_e.STATIC_DRAW:_e.DYNAMIC_DRAW;rt.byteLength=_.data.byteLength,_e.bufferData(_.type,_.data,it)}}dispose(_,_e){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const tt=_._glBuffers[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this),tt&&(_e||rt.deleteBuffer(tt.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const _e=Object.keys(this.managedBuffers);for(let tt=0;tt<_e.length;tt++)this.dispose(this.managedBuffers[_e[tt]],_)}createGLBuffer(_){const{CONTEXT_UID:_e,gl:tt}=this;return _._glBuffers[_e]=new GLBuffer(tt.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[_e]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,_e){const tt=this.renderer;let rt,it,st,At;if(_e&&(rt=_e.renderTexture,it=_e.clear,st=_e.transform,At=_e.skipUpdateTransform),this.renderingToScreen=!rt,tt.runners.prerender.emit(),tt.emit("prerender"),tt.projection.transform=st,!tt.context.isLost){if(rt||(this.lastObjectRendered=_),!At){const ut=_.enableTempParent();_.updateTransform(),_.disableTempParent(ut)}tt.renderTexture.bind(rt),tt.batch.currentRenderer.start(),(it??tt.background.clearBeforeRender)&&tt.renderTexture.clear(),_.render(tt),tt.batch.currentRenderer.flush(),rt&&(_e.blit&&tt.framebuffer.blit(),rt.baseTexture.update()),tt.runners.postrender.emit(),tt.projection.transform=null,tt.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class On extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const _e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:On.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(_e),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=On.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,_e){this.objectRenderer.render(_,_e)}resize(_,_e){this._view.resizeView(_,_e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,_e){return this.textureGenerator.generateTexture(_,_e)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer$1=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer$1.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer$1.__systems);extensions$1.add(Renderer$1);class AbstractMultiResource extends Resource{constructor(_,_e){const{width:tt,height:rt}=_e||{};super(tt,rt),this.items=[],this.itemDirtyIds=[];for(let it=0;it<_;it++){const st=new BaseTexture;this.items.push(st),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,_e){for(let tt=0;tt<this.length;tt++)_[tt]&&(_[tt].castToBaseTexture?this.addBaseTextureAt(_[tt].castToBaseTexture(),tt):_[tt]instanceof Resource?this.addResourceAt(_[tt],tt):this.addResourceAt(autoDetectResource(_[tt],_e),tt))}dispose(){for(let _=0,_e=this.length;_<_e;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,_e){if(!this.items[_e])throw new Error(`Index ${_e} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[_e].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let _e=0;_e<this.length;_e++)this.items[_e].parentTextureArray=_,this.items[_e].on("update",_.update,_)}unbind(_){super.unbind(_);for(let _e=0;_e<this.length;_e++)this.items[_e].parentTextureArray=null,this.items[_e].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(_e=>_e.resource).filter(_e=>_e).map(_e=>_e.load());return this._load=Promise.all(_).then(()=>{const{realWidth:_e,realHeight:tt}=this.items[0];return this.resize(_e,tt),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,_e){const{width:tt,height:rt}=_e||{};let it,st;Array.isArray(_)?(it=_,st=_.length):st=_,super(st,{width:tt,height:rt}),it&&this.initFromArray(it,_e)}addBaseTextureAt(_,_e){if(_.resource)this.addResourceAt(_.resource,_e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,_e,tt){const{length:rt,itemDirtyIds:it,items:st}=this,{gl:At}=_;tt.dirtyId<0&&At.texImage3D(At.TEXTURE_2D_ARRAY,0,tt.internalFormat,this._width,this._height,rt,0,_e.format,tt.type,null);for(let ut=0;ut<rt;ut++){const ct=st[ut];it[ut]<ct.dirtyId&&(it[ut]=ct.dirtyId,ct.valid&&At.texSubImage3D(At.TEXTURE_2D_ARRAY,0,0,0,ut,ct.resource.width,ct.resource.height,1,_e.format,tt.type,ct.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:_e}=globalThis;return _e&&_ instanceof _e?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class An extends AbstractMultiResource{constructor(_,_e){const{width:tt,height:rt,autoLoad:it,linkBaseTexture:st}=_e||{};if(_&&_.length!==An.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:tt,height:rt});for(let At=0;At<An.SIDES;At++)this.items[At].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+At;this.linkBaseTexture=st!==!1,_&&this.initFromArray(_,_e),it!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,_e,tt){if(tt===void 0&&(tt=this.linkBaseTexture),!this.items[_e])throw new Error(`Index ${_e} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,_e);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+_e,_.parentTextureArray=this.baseTexture,this.items[_e]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[_e]=_,this}upload(_,_e,tt){const rt=this.itemDirtyIds;for(let it=0;it<An.SIDES;it++){const st=this.items[it];(rt[it]<st.dirtyId||tt.dirtyId<_e.dirtyId)&&(st.valid&&st.resource?(st.resource.upload(_,st,tt),rt[it]=st.dirtyId):rt[it]<-1&&(_.gl.texImage2D(st.target,0,tt.internalFormat,_e.realWidth,_e.realHeight,0,_e.format,tt.type,null),rt[it]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===An.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,_e){_e=_e||{};let tt,rt,it;typeof _=="string"?(tt=ImageBitmapResource.EMPTY,rt=_,it=!0):(tt=_,rt=null,it=!1),super(tt),this.url=rt,this.crossOrigin=_e.crossOrigin??!0,this.alphaMode=typeof _e.alphaMode=="number"?_e.alphaMode:null,this.ownsImageBitmap=_e.ownsImageBitmap??it,this._load=null,_e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,_e)=>{if(this.url===null){_(this);return}try{const tt=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const rt=await tt.blob();if(this.destroyed)return;const it=await createImageBitmap(rt,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){it.close();return}this.source=it,this.update(),_(this)}catch(tt){if(this.destroyed)return;_e(tt),this.onError.emit(tt)}}),this._load)}upload(_,_e,tt){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(_e.alphaMode=this.alphaMode),super.upload(_,_e,tt)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class bn extends BaseImageResource{constructor(_,_e){_e=_e||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=_e.scale||1,this._overrideWidth=_e.width,this._overrideHeight=_e.height,this._resolve=null,this._crossorigin=_e.crossorigin,this._load=null,_e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},bn.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=_e=>{this._resolve&&(_.onerror=null,this.onError.emit(_e))},_.onload=()=>{if(!this._resolve)return;const _e=_.width,tt=_.height;if(!_e||!tt)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let rt=_e*this.scale,it=tt*this.scale;(this._overrideWidth||this._overrideHeight)&&(rt=this._overrideWidth||this._overrideHeight/tt*_e,it=this._overrideHeight||this._overrideWidth/_e*tt),rt=Math.round(rt),it=Math.round(it);const st=this.source;st.width=rt,st.height=it,st._pixiId=`canvas_${uid()}`,st.getContext("2d").drawImage(_,0,0,_e,tt,0,0,rt,it),this._resolve(),this._resolve=null}}static getSize(_){const _e=bn.SVG_SIZE.exec(_),tt={};return _e&&(tt[_e[1]]=Math.round(parseFloat(_e[3])),tt[_e[5]]=Math.round(parseFloat(_e[7]))),tt}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,_e){return _e==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&bn.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;const _VideoResource=class Un extends BaseImageResource{constructor(_,_e){if(_e=_e||{},!(_ instanceof HTMLVideoElement)){const tt=document.createElement("video");_e.autoLoad!==!1&&tt.setAttribute("preload","auto"),_e.playsinline!==!1&&(tt.setAttribute("webkit-playsinline",""),tt.setAttribute("playsinline","")),_e.muted===!0&&(tt.setAttribute("muted",""),tt.muted=!0),_e.loop===!0&&tt.setAttribute("loop",""),_e.autoPlay!==!1&&tt.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const rt=_[0].src||_[0];BaseImageResource.crossOrigin(tt,rt,_e.crossorigin);for(let it=0;it<_.length;++it){const st=document.createElement("source");let{src:At,mime:ut}=_[it];if(At=At||_[it],At.startsWith("data:"))ut=At.slice(5,At.indexOf(";"));else if(!At.startsWith("blob:")){const ct=At.split("?").shift().toLowerCase(),ht=ct.slice(ct.lastIndexOf(".")+1);ut=ut||Un.MIME_TYPES[ht]||`video/${ht}`}st.src=At,ut&&(st.type=ut),tt.appendChild(st)}_=tt}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=_e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=_e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),_e.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const _e=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-_e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((_e,tt)=>{this.valid?_e(this):(this._resolve=_e,this._reject=tt,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const _e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!_e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,_e){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||Un.TYPES.includes(_e)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);let Bounds$1=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,_e){const{a:tt,b:rt,c:it,d:st,tx:At,ty:ut}=_,ct=tt*_e.x+it*_e.y+At,ht=rt*_e.x+st*_e.y+ut;this.minX=Math.min(this.minX,ct),this.maxX=Math.max(this.maxX,ct),this.minY=Math.min(this.minY,ht),this.maxY=Math.max(this.maxY,ht)}addQuad(_){let _e=this.minX,tt=this.minY,rt=this.maxX,it=this.maxY,st=_[0],At=_[1];_e=st<_e?st:_e,tt=At<tt?At:tt,rt=st>rt?st:rt,it=At>it?At:it,st=_[2],At=_[3],_e=st<_e?st:_e,tt=At<tt?At:tt,rt=st>rt?st:rt,it=At>it?At:it,st=_[4],At=_[5],_e=st<_e?st:_e,tt=At<tt?At:tt,rt=st>rt?st:rt,it=At>it?At:it,st=_[6],At=_[7],_e=st<_e?st:_e,tt=At<tt?At:tt,rt=st>rt?st:rt,it=At>it?At:it,this.minX=_e,this.minY=tt,this.maxX=rt,this.maxY=it}addFrame(_,_e,tt,rt,it){this.addFrameMatrix(_.worldTransform,_e,tt,rt,it)}addFrameMatrix(_,_e,tt,rt,it){const st=_.a,At=_.b,ut=_.c,ct=_.d,ht=_.tx,ot=_.ty;let nt=this.minX,at=this.minY,lt=this.maxX,dt=this.maxY,ft=st*_e+ut*tt+ht,pt=At*_e+ct*tt+ot;nt=ft<nt?ft:nt,at=pt<at?pt:at,lt=ft>lt?ft:lt,dt=pt>dt?pt:dt,ft=st*rt+ut*tt+ht,pt=At*rt+ct*tt+ot,nt=ft<nt?ft:nt,at=pt<at?pt:at,lt=ft>lt?ft:lt,dt=pt>dt?pt:dt,ft=st*_e+ut*it+ht,pt=At*_e+ct*it+ot,nt=ft<nt?ft:nt,at=pt<at?pt:at,lt=ft>lt?ft:lt,dt=pt>dt?pt:dt,ft=st*rt+ut*it+ht,pt=At*rt+ct*it+ot,nt=ft<nt?ft:nt,at=pt<at?pt:at,lt=ft>lt?ft:lt,dt=pt>dt?pt:dt,this.minX=nt,this.minY=at,this.maxX=lt,this.maxY=dt}addVertexData(_,_e,tt){let rt=this.minX,it=this.minY,st=this.maxX,At=this.maxY;for(let ut=_e;ut<tt;ut+=2){const ct=_[ut],ht=_[ut+1];rt=ct<rt?ct:rt,it=ht<it?ht:it,st=ct>st?ct:st,At=ht>At?ht:At}this.minX=rt,this.minY=it,this.maxX=st,this.maxY=At}addVertices(_,_e,tt,rt){this.addVerticesMatrix(_.worldTransform,_e,tt,rt)}addVerticesMatrix(_,_e,tt,rt,it=0,st=it){const At=_.a,ut=_.b,ct=_.c,ht=_.d,ot=_.tx,nt=_.ty;let at=this.minX,lt=this.minY,dt=this.maxX,ft=this.maxY;for(let pt=tt;pt<rt;pt+=2){const gt=_e[pt],mt=_e[pt+1],yt=At*gt+ct*mt+ot,vt=ht*mt+ut*gt+nt;at=Math.min(at,yt-it),dt=Math.max(dt,yt+it),lt=Math.min(lt,vt-st),ft=Math.max(ft,vt+st)}this.minX=at,this.minY=lt,this.maxX=dt,this.maxY=ft}addBounds(_){const _e=this.minX,tt=this.minY,rt=this.maxX,it=this.maxY;this.minX=_.minX<_e?_.minX:_e,this.minY=_.minY<tt?_.minY:tt,this.maxX=_.maxX>rt?_.maxX:rt,this.maxY=_.maxY>it?_.maxY:it}addBoundsMask(_,_e){const tt=_.minX>_e.minX?_.minX:_e.minX,rt=_.minY>_e.minY?_.minY:_e.minY,it=_.maxX<_e.maxX?_.maxX:_e.maxX,st=_.maxY<_e.maxY?_.maxY:_e.maxY;if(tt<=it&&rt<=st){const At=this.minX,ut=this.minY,ct=this.maxX,ht=this.maxY;this.minX=tt<At?tt:At,this.minY=rt<ut?rt:ut,this.maxX=it>ct?it:ct,this.maxY=st>ht?st:ht}}addBoundsMatrix(_,_e){this.addFrameMatrix(_e,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,_e){const tt=_.minX>_e.x?_.minX:_e.x,rt=_.minY>_e.y?_.minY:_e.y,it=_.maxX<_e.x+_e.width?_.maxX:_e.x+_e.width,st=_.maxY<_e.y+_e.height?_.maxY:_e.y+_e.height;if(tt<=it&&rt<=st){const At=this.minX,ut=this.minY,ct=this.maxX,ht=this.maxY;this.minX=tt<At?tt:At,this.minY=rt<ut?rt:ut,this.maxX=it>ct?it:ct,this.maxY=st>ht?st:ht}}pad(_=0,_e=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=_e,this.maxY+=_e)}addFramePad(_,_e,tt,rt,it,st){_-=it,_e-=st,tt+=it,rt+=st,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>tt?this.maxX:tt,this.minY=this.minY<_e?this.minY:_e,this.maxY=this.maxY>rt?this.maxY:rt}};class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds$1,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const _e=Object.keys(_);for(let tt=0;tt<_e.length;++tt){const rt=_e[tt];Object.defineProperty(DisplayObject.prototype,rt,Object.getOwnPropertyDescriptor(_,rt))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,_e){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),_e||(this._boundsRect||(this._boundsRect=new Rectangle),_e=this._boundsRect),this._bounds.getRectangle(_e)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$1);const _e=this.transform,tt=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(tt==null?void 0:tt.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const rt=this._bounds,it=this._boundsID;this._bounds=this._localBounds;const st=this.getBounds(!1,_);return this.parent=tt,this.transform=_e,this._bounds=rt,this._bounds.updateID+=this._boundsID-it,st}toGlobal(_,_e,tt=!1){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,_e)}toLocal(_,_e,tt,rt){return _e&&(_=_e.toGlobal(_,tt,rt)),rt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,tt)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,_e=0,tt=1,rt=1,it=0,st=0,At=0,ut=0,ct=0){return this.position.x=_,this.position.y=_e,this.scale.x=tt||1,this.scale.y=rt||1,this.rotation=it,this.skew.x=st,this.skew.y=At,this.pivot.x=ut,this.pivot.y=ct,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex=_,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const _e=this._mask.isMaskData?this._mask.maskObject:this._mask;_e&&(_e._maskRefCount--,_e._maskRefCount===0&&(_e.renderable=!0,_e.isMask=!1))}if(this._mask=_,this._mask){const _e=this._mask.isMaskData?this._mask.maskObject:this._mask;_e&&(_e._maskRefCount===0&&(_e.renderable=!1,_e.isMask=!0),_e._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(et,_){return et.zIndex===_.zIndex?et._lastSortedIndex-_._lastSortedIndex:et.zIndex-_.zIndex}const _Container=class Rn extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=Rn.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let _e=0;_e<_.length;_e++)this.addChild(_[_e]);else{const _e=_[0];_e.parent&&_e.parent.removeChild(_e),_e.parent=this,this.sortDirty=!0,_e.transform._parentID=-1,this.children.push(_e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",_e,this,this.children.length-1),_e.emit("added",this)}return _[0]}addChildAt(_,_e){if(_e<0||_e>this.children.length)throw new Error(`${_}addChildAt: The index ${_e} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(_e,0,_),this._boundsID++,this.onChildrenChange(_e),_.emit("added",this),this.emit("childAdded",_,this,_e),_}swapChildren(_,_e){if(_===_e)return;const tt=this.getChildIndex(_),rt=this.getChildIndex(_e);this.children[tt]=_e,this.children[rt]=_,this.onChildrenChange(tt<rt?tt:rt)}getChildIndex(_){const _e=this.children.indexOf(_);if(_e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return _e}setChildIndex(_,_e){if(_e<0||_e>=this.children.length)throw new Error(`The index ${_e} supplied is out of bounds ${this.children.length}`);const tt=this.getChildIndex(_);removeItems(this.children,tt,1),this.children.splice(_e,0,_),this.onChildrenChange(_e)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let _e=0;_e<_.length;_e++)this.removeChild(_[_e]);else{const _e=_[0],tt=this.children.indexOf(_e);if(tt===-1)return null;_e.parent=null,_e.transform._parentID=-1,removeItems(this.children,tt,1),this._boundsID++,this.onChildrenChange(tt),_e.emit("removed",this),this.emit("childRemoved",_e,this,tt)}return _[0]}removeChildAt(_){const _e=this.getChildAt(_);return _e.parent=null,_e.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),_e.emit("removed",this),this.emit("childRemoved",_e,this,_),_e}removeChildren(_=0,_e=this.children.length){const tt=_,rt=_e,it=rt-tt;let st;if(it>0&&it<=rt){st=this.children.splice(tt,it);for(let At=0;At<st.length;++At)st[At].parent=null,st[At].transform&&(st[At].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let At=0;At<st.length;++At)st[At].emit("removed",this),this.emit("childRemoved",st[At],this,At);return st}else if(it===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let _e=0,tt=this.children.length;_e<tt;++_e){const rt=this.children[_e];rt._lastSortedIndex=_e,!_&&rt.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,_e=this.children.length;_<_e;++_){const tt=this.children[_];tt.visible&&tt.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const _e=this.children[_];if(!(!_e.visible||!_e.renderable))if(_e.calculateBounds(),_e._mask){const tt=_e._mask.isMaskData?_e._mask.maskObject:_e._mask;tt?(tt.calculateBounds(),this._bounds.addBoundsMask(_e._bounds,tt._bounds)):this._bounds.addBounds(_e._bounds)}else _e.filterArea?this._bounds.addBoundsArea(_e._bounds,_e.filterArea):this._bounds.addBounds(_e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,_e=!1){const tt=super.getLocalBounds(_);if(!_e)for(let rt=0,it=this.children.length;rt<it;++rt){const st=this.children[rt];st.visible&&st.updateTransform()}return tt}_calculateBounds(){}_renderWithCulling(_){const _e=_.renderTexture.sourceFrame;if(!(_e.width>0&&_e.height>0))return;let tt,rt;this.cullArea?(tt=this.cullArea,rt=this.worldTransform):this._render!==Rn.prototype._render&&(tt=this.getBounds(!0));const it=_.projection.transform;if(it&&(rt?(rt=tempMatrix.copyFrom(rt),rt.prepend(it)):rt=it),tt&&_e.intersects(tt,rt))this._render(_);else if(this.cullArea)return;for(let st=0,At=this.children.length;st<At;++st){const ut=this.children[st],ct=ut.cullable;ut.cullable=ct||!this.cullArea,ut.render(_),ut.cullable=ct}}render(_){var _e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(_e=this.filters)!=null&&_e.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let tt=0,rt=this.children.length;tt<rt;++tt)this.children[tt].render(_)}}renderAdvanced(_){var it,st,At;const _e=this.filters,tt=this._mask;if(_e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let ut=0;ut<_e.length;ut++)_e[ut].enabled&&this._enabledFilters.push(_e[ut])}const rt=_e&&((it=this._enabledFilters)==null?void 0:it.length)||tt&&(!tt.isMaskData||tt.enabled&&(tt.autoDetect||tt.type!==MASK_TYPES.NONE));if(rt&&_.batch.flush(),_e&&((st=this._enabledFilters)!=null&&st.length)&&_.filter.push(this,this._enabledFilters),tt&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let ut=0,ct=this.children.length;ut<ct;++ut)this.children[ut].render(_)}rt&&_.batch.flush(),tt&&_.mask.pop(this),_e&&((At=this._enabledFilters)!=null&&At.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const _e=typeof _=="boolean"?_:_==null?void 0:_.children,tt=this.removeChildren(0,this.children.length);if(_e)for(let rt=0;rt<tt.length;++rt)tt[rt].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const _e=this.getLocalBounds().width;_e!==0?this.scale.x=_/_e:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const _e=this.getLocalBounds().height;_e!==0?this.scale.y=_/_e:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(et){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=et}}});const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const _e=this.transform.worldTransform,tt=_e.a,rt=_e.b,it=_e.c,st=_e.d,At=_e.tx,ut=_e.ty,ct=this.vertexData,ht=_.trim,ot=_.orig,nt=this._anchor;let at=0,lt=0,dt=0,ft=0;if(ht?(lt=ht.x-nt._x*ot.width,at=lt+ht.width,ft=ht.y-nt._y*ot.height,dt=ft+ht.height):(lt=-nt._x*ot.width,at=lt+ot.width,ft=-nt._y*ot.height,dt=ft+ot.height),ct[0]=tt*lt+it*ft+At,ct[1]=st*ft+rt*lt+ut,ct[2]=tt*at+it*ft+At,ct[3]=st*ft+rt*at+ut,ct[4]=tt*at+it*dt+At,ct[5]=st*dt+rt*at+ut,ct[6]=tt*lt+it*dt+At,ct[7]=st*dt+rt*lt+ut,this._roundPixels){const pt=settings.RESOLUTION;for(let gt=0;gt<ct.length;++gt)ct[gt]=Math.round(ct[gt]*pt)/pt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,_e=this.vertexTrimmedData,tt=_.orig,rt=this._anchor,it=this.transform.worldTransform,st=it.a,At=it.b,ut=it.c,ct=it.d,ht=it.tx,ot=it.ty,nt=-rt._x*tt.width,at=nt+tt.width,lt=-rt._y*tt.height,dt=lt+tt.height;if(_e[0]=st*nt+ut*lt+ht,_e[1]=ct*lt+At*nt+ot,_e[2]=st*at+ut*lt+ht,_e[3]=ct*lt+At*at+ot,_e[4]=st*at+ut*dt+ht,_e[5]=ct*dt+At*at+ot,_e[6]=st*nt+ut*dt+ht,_e[7]=ct*dt+At*nt+ot,this._roundPixels){const ft=settings.RESOLUTION;for(let pt=0;pt<_e.length;++pt)_e[pt]=Math.round(_e[pt]*ft)/ft}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,_e=this._texture.orig;!_||_.width===_e.width&&_.height===_e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds$1),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$1);const _e=this._texture.orig.width,tt=this._texture.orig.height,rt=-_e*this.anchor.x;let it=0;return tempPoint$1.x>=rt&&tempPoint$1.x<rt+_e&&(it=-tt*this.anchor.y,tempPoint$1.y>=it&&tempPoint$1.y<it+tt)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const _e=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!_e)}this._texture=null}static from(_,_e){const tt=_ instanceof Texture?_:Texture.from(_,_e);return new Sprite(tt)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const _e=sign(this.scale.x)||1;this.scale.x=_e*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const _e=sign(this.scale.y)||1;this.scale.y=_e*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(et){et!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=et,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(et){et!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=et,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(et){if(this._cacheAsBitmap===et)return;this._cacheAsBitmap=et;let _;et?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(et){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(et),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(et))};DisplayObject.prototype._initCachedDisplayObject=function(et){var nt,at;if((nt=this._cacheData)!=null&&nt.sprite)return;const _=this.alpha;this.alpha=1,et.batch.flush();const _e=this.getLocalBounds(new Rectangle,!0);if((at=this.filters)!=null&&at.length){const lt=this.filters[0].padding;_e.pad(lt)}const tt=this.cacheAsBitmapResolution||et.resolution;_e.ceil(tt),_e.width=Math.max(_e.width,1/tt),_e.height=Math.max(_e.height,1/tt);const rt=et.renderTexture.current,it=et.renderTexture.sourceFrame.clone(),st=et.renderTexture.destinationFrame.clone(),At=et.projection.transform,ut=RenderTexture.create({width:_e.width,height:_e.height,resolution:tt,multisample:this.cacheAsBitmapMultisample??et.multisample}),ct=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=ct,BaseTexture.addToCache(ut.baseTexture,ct),Texture.addToCache(ut,ct);const ht=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-_e.x,-_e.y);this.render=this._cacheData.originalRender,et.render(this,{renderTexture:ut,clear:!0,transform:ht,skipUpdateTransform:!1}),et.framebuffer.blit(),et.projection.transform=At,et.renderTexture.bind(rt,it,st),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const ot=new Sprite(ut);ot.transform.worldTransform=this.transform.worldTransform,ot.anchor.x=-(_e.x/_e.width),ot.anchor.y=-(_e.y/_e.height),ot.alpha=_,ot._bounds=this._bounds,this._cacheData.sprite=ot,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ot.containsPoint.bind(ot)};DisplayObject.prototype._renderCachedCanvas=function(et){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(et),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(et))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(et){var ht;if((ht=this._cacheData)!=null&&ht.sprite)return;const _=this.getLocalBounds(new Rectangle,!0),_e=this.alpha;this.alpha=1;const tt=et.canvasContext.activeContext,rt=et._projTransform,it=this.cacheAsBitmapResolution||et.resolution;_.ceil(it),_.width=Math.max(_.width,1/it),_.height=Math.max(_.height,1/it);const st=RenderTexture.create({width:_.width,height:_.height,resolution:it}),At=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=At,BaseTexture.addToCache(st.baseTexture,At),Texture.addToCache(st,At);const ut=_tempMatrix;this.transform.localTransform.copyTo(ut),ut.invert(),ut.tx-=_.x,ut.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,et.render(this,{renderTexture:st,clear:!0,transform:ut,skipUpdateTransform:!1}),et.canvasContext.activeContext=tt,et._projTransform=rt,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_e;const ct=new Sprite(st);ct.transform.worldTransform=this.transform.worldTransform,ct.anchor.x=-(_.x/_.width),ct.anchor.y=-(_.y/_.height),ct.alpha=_e,ct._bounds=this._bounds,this._cacheData.sprite=ct,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=et._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ct.containsPoint.bind(ct)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(et){this.cacheAsBitmap=!1,this.destroy(et)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(et,_){for(let _e=0,tt=this.children.length;_e<tt;_e++)if(this.children[_e].name===et)return this.children[_e];if(_)for(let _e=0,tt=this.children.length;_e<tt;_e++){const rt=this.children[_e];if(!rt.getChildByName)continue;const it=rt.getChildByName(et,!0);if(it)return it}return null};DisplayObject.prototype.getGlobalPosition=function(et=new Point,_=!1){return this.parent?this.parent.toGlobal(this.position,et,_):(et.x=this.position.x,et.y=this.position.y),et};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(et){const _=GAUSSIAN_VALUES[et],_e=_.length;let tt=fragTemplate,rt="";const it="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let st;for(let At=0;At<et;At++){let ut=it.replace("%index%",At.toString());st=At,At>=_e&&(st=et-At-1),ut=ut.replace("%value%",_[st].toString()),rt+=ut,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",et.toString()),tt}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(et,_){const _e=Math.ceil(et/2);let tt=vertTemplate,rt="",it;_?it="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":it="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let st=0;st<et;st++){let At=it.replace("%index%",st.toString());At=At.replace("%sampleIndex%",`${st-(_e-1)}.0`),rt+=At,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",et.toString()),tt}class BlurFilterPass extends Filter{constructor(_,_e=8,tt=4,rt=Filter.defaultResolution,it=5){const st=generateBlurVertSource(it,_),At=generateBlurFragSource(it);super(st,At),this.horizontal=_,this.resolution=rt,this._quality=0,this.quality=tt,this.blur=_e}apply(_,_e,tt,rt){if(tt?this.horizontal?this.uniforms.strength=1/tt.width*(tt.width/_e.width):this.uniforms.strength=1/tt.height*(tt.height/_e.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/_e.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/_e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,_e,tt,rt);else{const it=_.getFilterTexture(),st=_.renderer;let At=_e,ut=it;this.state.blend=!1,_.applyFilter(this,At,ut,CLEAR_MODES.CLEAR);for(let ct=1;ct<this.passes-1;ct++){_.bindAndClear(At,CLEAR_MODES.BLIT),this.uniforms.uSampler=ut;const ht=ut;ut=At,At=ht,st.shader.bind(this),st.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,ut,tt,rt),_.returnFilterTexture(it)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,_e=4,tt=Filter.defaultResolution,rt=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,_e,tt,rt),this.blurYFilter=new BlurFilterPass(!1,_,_e,tt,rt),this.resolution=tt,this.quality=_e,this.blur=_,this.repeatEdgePixels=!1}apply(_,_e,tt,rt){const it=Math.abs(this.blurXFilter.strength),st=Math.abs(this.blurYFilter.strength);if(it&&st){const At=_.getFilterTexture();this.blurXFilter.apply(_,_e,At,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,At,tt,rt),_.returnFilterTexture(At)}else st?this.blurYFilter.apply(_,_e,tt,rt):this.blurXFilter.apply(_,_e,tt,rt)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,_e=!1){let tt=_;_e&&(this._multiply(tt,this.uniforms.m,_),tt=this._colorMatrix(tt)),this.uniforms.m=tt}_multiply(_,_e,tt){return _[0]=_e[0]*tt[0]+_e[1]*tt[5]+_e[2]*tt[10]+_e[3]*tt[15],_[1]=_e[0]*tt[1]+_e[1]*tt[6]+_e[2]*tt[11]+_e[3]*tt[16],_[2]=_e[0]*tt[2]+_e[1]*tt[7]+_e[2]*tt[12]+_e[3]*tt[17],_[3]=_e[0]*tt[3]+_e[1]*tt[8]+_e[2]*tt[13]+_e[3]*tt[18],_[4]=_e[0]*tt[4]+_e[1]*tt[9]+_e[2]*tt[14]+_e[3]*tt[19]+_e[4],_[5]=_e[5]*tt[0]+_e[6]*tt[5]+_e[7]*tt[10]+_e[8]*tt[15],_[6]=_e[5]*tt[1]+_e[6]*tt[6]+_e[7]*tt[11]+_e[8]*tt[16],_[7]=_e[5]*tt[2]+_e[6]*tt[7]+_e[7]*tt[12]+_e[8]*tt[17],_[8]=_e[5]*tt[3]+_e[6]*tt[8]+_e[7]*tt[13]+_e[8]*tt[18],_[9]=_e[5]*tt[4]+_e[6]*tt[9]+_e[7]*tt[14]+_e[8]*tt[19]+_e[9],_[10]=_e[10]*tt[0]+_e[11]*tt[5]+_e[12]*tt[10]+_e[13]*tt[15],_[11]=_e[10]*tt[1]+_e[11]*tt[6]+_e[12]*tt[11]+_e[13]*tt[16],_[12]=_e[10]*tt[2]+_e[11]*tt[7]+_e[12]*tt[12]+_e[13]*tt[17],_[13]=_e[10]*tt[3]+_e[11]*tt[8]+_e[12]*tt[13]+_e[13]*tt[18],_[14]=_e[10]*tt[4]+_e[11]*tt[9]+_e[12]*tt[14]+_e[13]*tt[19]+_e[14],_[15]=_e[15]*tt[0]+_e[16]*tt[5]+_e[17]*tt[10]+_e[18]*tt[15],_[16]=_e[15]*tt[1]+_e[16]*tt[6]+_e[17]*tt[11]+_e[18]*tt[16],_[17]=_e[15]*tt[2]+_e[16]*tt[7]+_e[17]*tt[12]+_e[18]*tt[17],_[18]=_e[15]*tt[3]+_e[16]*tt[8]+_e[17]*tt[13]+_e[18]*tt[18],_[19]=_e[15]*tt[4]+_e[16]*tt[9]+_e[17]*tt[14]+_e[18]*tt[19]+_e[19],_}_colorMatrix(_){const _e=new Float32Array(_);return _e[4]/=255,_e[9]/=255,_e[14]/=255,_e[19]/=255,_e}brightness(_,_e){const tt=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(tt,_e)}tint(_,_e){const[tt,rt,it]=Color.shared.setValue(_).toArray(),st=[tt,0,0,0,0,0,rt,0,0,0,0,0,it,0,0,0,0,0,1,0];this._loadMatrix(st,_e)}greyscale(_,_e){const tt=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(tt,_e)}blackAndWhite(_){const _e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(_e,_)}hue(_,_e){_=(_||0)/180*Math.PI;const tt=Math.cos(_),rt=Math.sin(_),it=Math.sqrt,st=1/3,At=it(st),ut=tt+(1-tt)*st,ct=st*(1-tt)-At*rt,ht=st*(1-tt)+At*rt,ot=st*(1-tt)+At*rt,nt=tt+st*(1-tt),at=st*(1-tt)-At*rt,lt=st*(1-tt)-At*rt,dt=st*(1-tt)+At*rt,ft=tt+st*(1-tt),pt=[ut,ct,ht,0,0,ot,nt,at,0,0,lt,dt,ft,0,0,0,0,0,1,0];this._loadMatrix(pt,_e)}contrast(_,_e){const tt=(_||0)+1,rt=-.5*(tt-1),it=[tt,0,0,0,rt,0,tt,0,0,rt,0,0,tt,0,rt,0,0,0,1,0];this._loadMatrix(it,_e)}saturate(_=0,_e){const tt=_*2/3+1,rt=(tt-1)*-.5,it=[tt,rt,rt,0,0,rt,tt,rt,0,0,rt,rt,tt,0,0,0,0,0,1,0];this._loadMatrix(it,_e)}desaturate(){this.saturate(-1)}negative(_){const _e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(_e,_)}sepia(_){const _e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(_e,_)}technicolor(_){const _e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(_e,_)}polaroid(_){const _e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(_e,_)}toBGR(_){const _e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(_e,_)}kodachrome(_){const _e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(_e,_)}browni(_){const _e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(_e,_)}vintage(_){const _e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(_e,_)}colorTone(_,_e,tt,rt,it){_=_||.2,_e=_e||.15,tt=tt||16770432,rt=rt||3375104;const st=Color.shared,[At,ut,ct]=st.setValue(tt).toArray(),[ht,ot,nt]=st.setValue(rt).toArray(),at=[.3,.59,.11,0,0,At,ut,ct,_,0,ht,ot,nt,_e,0,At-ht,ut-ot,ct-nt,0,0];this._loadMatrix(at,it)}night(_,_e){_=_||.1;const tt=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(tt,_e)}predator(_,_e){const tt=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(tt,_e)}lsd(_){const _e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(_e,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,_e){const tt=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:tt,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=tt,_e==null&&(_e=20),this.scale=new Point(_e,_e)}apply(_,_e,tt,rt){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const it=this.maskSprite.worldTransform,st=Math.sqrt(it.a*it.a+it.b*it.b),At=Math.sqrt(it.c*it.c+it.d*it.d);st!==0&&At!==0&&(this.uniforms.rotation[0]=it.a/st,this.uniforms.rotation[1]=it.b/st,this.uniforms.rotation[2]=it.c/At,this.uniforms.rotation[3]=it.d/At),_.applyFilter(this,_e,tt,rt)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,_e=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=_e}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([et,_])=>{Object.defineProperty(filters,et,{get(){return deprecation("7.1.0",`filters.${et} has moved to ${et}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,_e,tt){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,_e,tt,rt,it){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,_e,tt){return _.worldTransform.applyInverse(tt||this.global,_e)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,_e,tt,rt,it,st,At,ut,ct,ht,ot,nt,at,lt,dt){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,_e){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:_e,priority:0}),this.mappingTable[_].sort((tt,rt)=>tt.priority-rt.priority)}dispatchEvent(_,_e){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,_e),this.dispatch.emit(_e||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const _e=this.mappingTable[_.type];if(_e)for(let tt=0,rt=_e.length;tt<rt;tt++)_e[tt].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,_e){EventsTicker.pauseUpdate=!0;const tt=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",rt=this[tt](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,_e),this.hitTestFn,this.hitPruneFn);return rt&&rt[0]}propagate(_,_e){if(!_.target)return;const tt=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let rt=0,it=tt.length-1;rt<it;rt++)if(_.currentTarget=tt[rt],this.notifyTarget(_,_e),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,_e),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let rt=tt.length-2;rt>=0;rt--)if(_.currentTarget=tt[rt],this.notifyTarget(_,_e),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,_e,tt=this._allInteractiveElements){if(tt.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const rt=Array.isArray(_e)?_e:[_e];for(let it=tt.length-1;it>=0;it--)rt.forEach(st=>{_.currentTarget=tt[it],this.notifyTarget(_,st)})}propagationPath(_){const _e=[_];for(let tt=0;tt<PROPAGATION_LIMIT&&_!==this.rootTarget;tt++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");_e.push(_.parent),_=_.parent}return _e.reverse(),_e}hitTestMoveRecursive(_,_e,tt,rt,it,st=!1){let At=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||_e==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const ht=_.children;for(let ot=ht.length-1;ot>=0;ot--){const nt=ht[ot],at=this.hitTestMoveRecursive(nt,this._isInteractive(_e)?_e:nt.eventMode,tt,rt,it,st||it(_,tt));if(at){if(at.length>0&&!at[at.length-1].parent)continue;const lt=_.isInteractive();(at.length>0||lt)&&(lt&&this._allInteractiveElements.push(_),at.push(_)),this._hitElements.length===0&&(this._hitElements=at),At=!0}}}const ut=this._isInteractive(_e),ct=_.isInteractive();return ut&&ct&&this._allInteractiveElements.push(_),st||this._hitElements.length>0?null:At?this._hitElements:ut&&!it(_,tt)&&rt(_,tt)?ct?[_]:[]:null}hitTestRecursive(_,_e,tt,rt,it){if(this._interactivePrune(_)||it(_,tt))return null;if((_.eventMode==="dynamic"||_e==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const ut=_.children;for(let ct=ut.length-1;ct>=0;ct--){const ht=ut[ct],ot=this.hitTestRecursive(ht,this._isInteractive(_e)?_e:ht.eventMode,tt,rt,it);if(ot){if(ot.length>0&&!ot[ot.length-1].parent)continue;const nt=_.isInteractive();return(ot.length>0||nt)&&ot.push(_),ot}}}const st=this._isInteractive(_e),At=_.isInteractive();return st&&rt(_,tt)?At?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,_e){var tt;if(_.hitArea&&(_.worldTransform.applyInverse(_e,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const rt=_._mask.isMaskData?_._mask.maskObject:_._mask;if(rt&&!((tt=rt.containsPoint)!=null&&tt.call(rt,_e)))return!0}return!1}hitTestFn(_,_e){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(_e):!1}notifyTarget(_,_e){var it,st;_e=_e??_.type;const tt=`on${_e}`;(st=(it=_.currentTarget)[tt])==null||st.call(it,_);const rt=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${_e}capture`:_e;this.notifyListeners(_,rt),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,_e)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const _e=this.createPointerEvent(_);if(this.dispatchEvent(_e,"pointerdown"),_e.pointerType==="touch")this.dispatchEvent(_e,"touchstart");else if(_e.pointerType==="mouse"||_e.pointerType==="pen"){const rt=_e.button===2;this.dispatchEvent(_e,rt?"rightdown":"mousedown")}const tt=this.trackingData(_.pointerId);tt.pressTargetsByButton[_.button]=_e.composedPath(),this.freeEvent(_e)}mapPointerMove(_){var ut,ct;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const _e=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const tt=_e.pointerType==="mouse"||_e.pointerType==="pen",rt=this.trackingData(_.pointerId),it=this.findMountedTarget(rt.overTargets);if(((ut=rt.overTargets)==null?void 0:ut.length)>0&&it!==_e.target){const ht=_.type==="mousemove"?"mouseout":"pointerout",ot=this.createPointerEvent(_,ht,it);if(this.dispatchEvent(ot,"pointerout"),tt&&this.dispatchEvent(ot,"mouseout"),!_e.composedPath().includes(it)){const nt=this.createPointerEvent(_,"pointerleave",it);for(nt.eventPhase=nt.AT_TARGET;nt.target&&!_e.composedPath().includes(nt.target);)nt.currentTarget=nt.target,this.notifyTarget(nt),tt&&this.notifyTarget(nt,"mouseleave"),nt.target=nt.target.parent;this.freeEvent(nt)}this.freeEvent(ot)}if(it!==_e.target){const ht=_.type==="mousemove"?"mouseover":"pointerover",ot=this.clonePointerEvent(_e,ht);this.dispatchEvent(ot,"pointerover"),tt&&this.dispatchEvent(ot,"mouseover");let nt=it==null?void 0:it.parent;for(;nt&&nt!==this.rootTarget.parent&&nt!==_e.target;)nt=nt.parent;if(!nt||nt===this.rootTarget.parent){const at=this.clonePointerEvent(_e,"pointerenter");for(at.eventPhase=at.AT_TARGET;at.target&&at.target!==it&&at.target!==this.rootTarget.parent;)at.currentTarget=at.target,this.notifyTarget(at),tt&&this.notifyTarget(at,"mouseenter"),at.target=at.target.parent;this.freeEvent(at)}this.freeEvent(ot)}const st=[],At=this.enableGlobalMoveEvents??!0;this.moveOnAll?st.push("pointermove"):this.dispatchEvent(_e,"pointermove"),At&&st.push("globalpointermove"),_e.pointerType==="touch"&&(this.moveOnAll?st.splice(1,0,"touchmove"):this.dispatchEvent(_e,"touchmove"),At&&st.push("globaltouchmove")),tt&&(this.moveOnAll?st.splice(1,0,"mousemove"):this.dispatchEvent(_e,"mousemove"),At&&st.push("globalmousemove"),this.cursor=(ct=_e.target)==null?void 0:ct.cursor),st.length>0&&this.all(_e,st),this._allInteractiveElements.length=0,this._hitElements.length=0,rt.overTargets=_e.composedPath(),this.freeEvent(_e)}mapPointerOver(_){var st;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const _e=this.trackingData(_.pointerId),tt=this.createPointerEvent(_),rt=tt.pointerType==="mouse"||tt.pointerType==="pen";this.dispatchEvent(tt,"pointerover"),rt&&this.dispatchEvent(tt,"mouseover"),tt.pointerType==="mouse"&&(this.cursor=(st=tt.target)==null?void 0:st.cursor);const it=this.clonePointerEvent(tt,"pointerenter");for(it.eventPhase=it.AT_TARGET;it.target&&it.target!==this.rootTarget.parent;)it.currentTarget=it.target,this.notifyTarget(it),rt&&this.notifyTarget(it,"mouseenter"),it.target=it.target.parent;_e.overTargets=tt.composedPath(),this.freeEvent(tt),this.freeEvent(it)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const _e=this.trackingData(_.pointerId);if(_e.overTargets){const tt=_.pointerType==="mouse"||_.pointerType==="pen",rt=this.findMountedTarget(_e.overTargets),it=this.createPointerEvent(_,"pointerout",rt);this.dispatchEvent(it),tt&&this.dispatchEvent(it,"mouseout");const st=this.createPointerEvent(_,"pointerleave",rt);for(st.eventPhase=st.AT_TARGET;st.target&&st.target!==this.rootTarget.parent;)st.currentTarget=st.target,this.notifyTarget(st),tt&&this.notifyTarget(st,"mouseleave"),st.target=st.target.parent;_e.overTargets=null,this.freeEvent(it),this.freeEvent(st)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const _e=performance.now(),tt=this.createPointerEvent(_);if(this.dispatchEvent(tt,"pointerup"),tt.pointerType==="touch")this.dispatchEvent(tt,"touchend");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const At=tt.button===2;this.dispatchEvent(tt,At?"rightup":"mouseup")}const rt=this.trackingData(_.pointerId),it=this.findMountedTarget(rt.pressTargetsByButton[_.button]);let st=it;if(it&&!tt.composedPath().includes(it)){let At=it;for(;At&&!tt.composedPath().includes(At);){if(tt.currentTarget=At,this.notifyTarget(tt,"pointerupoutside"),tt.pointerType==="touch")this.notifyTarget(tt,"touchendoutside");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const ut=tt.button===2;this.notifyTarget(tt,ut?"rightupoutside":"mouseupoutside")}At=At.parent}delete rt.pressTargetsByButton[_.button],st=At}if(st){const At=this.clonePointerEvent(tt,"click");At.target=st,At.path=null,rt.clicksByButton[_.button]||(rt.clicksByButton[_.button]={clickCount:0,target:At.target,timeStamp:_e});const ut=rt.clicksByButton[_.button];if(ut.target===At.target&&_e-ut.timeStamp<200?++ut.clickCount:ut.clickCount=1,ut.target=At.target,ut.timeStamp=_e,At.detail=ut.clickCount,At.pointerType==="mouse"){const ct=At.button===2;this.dispatchEvent(At,ct?"rightclick":"click")}else At.pointerType==="touch"&&this.dispatchEvent(At,"tap");this.dispatchEvent(At,"pointertap"),this.freeEvent(At)}this.freeEvent(tt)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const _e=this.trackingData(_.pointerId),tt=this.findMountedTarget(_e.pressTargetsByButton[_.button]),rt=this.createPointerEvent(_);if(tt){let it=tt;for(;it;)rt.currentTarget=it,this.notifyTarget(rt,"pointerupoutside"),rt.pointerType==="touch"?this.notifyTarget(rt,"touchendoutside"):(rt.pointerType==="mouse"||rt.pointerType==="pen")&&this.notifyTarget(rt,rt.button===2?"rightupoutside":"mouseupoutside"),it=it.parent;delete _e.pressTargetsByButton[_.button]}this.freeEvent(rt)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const _e=this.createWheelEvent(_);this.dispatchEvent(_e),this.freeEvent(_e)}findMountedTarget(_){if(!_)return null;let _e=_[0];for(let tt=1;tt<_.length&&_[tt].parent===_e;tt++)_e=_[tt];return _e}createPointerEvent(_,_e,tt){const rt=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,rt),this.copyMouseData(_,rt),this.copyData(_,rt),rt.nativeEvent=_.nativeEvent,rt.originalEvent=_,rt.target=tt??this.hitTest(rt.global.x,rt.global.y)??this._hitElements[0],typeof _e=="string"&&(rt.type=_e),rt}createWheelEvent(_){const _e=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,_e),this.copyMouseData(_,_e),this.copyData(_,_e),_e.nativeEvent=_.nativeEvent,_e.originalEvent=_,_e.target=this.hitTest(_e.global.x,_e.global.y),_e}clonePointerEvent(_,_e){const tt=this.allocateEvent(FederatedPointerEvent);return tt.nativeEvent=_.nativeEvent,tt.originalEvent=_.originalEvent,this.copyPointerData(_,tt),this.copyMouseData(_,tt),this.copyData(_,tt),tt.target=_.target,tt.path=_.composedPath().slice(),tt.type=_e??tt.type,tt}copyWheelData(_,_e){_e.deltaMode=_.deltaMode,_e.deltaX=_.deltaX,_e.deltaY=_.deltaY,_e.deltaZ=_.deltaZ}copyPointerData(_,_e){_ instanceof FederatedPointerEvent&&_e instanceof FederatedPointerEvent&&(_e.pointerId=_.pointerId,_e.width=_.width,_e.height=_.height,_e.isPrimary=_.isPrimary,_e.pointerType=_.pointerType,_e.pressure=_.pressure,_e.tangentialPressure=_.tangentialPressure,_e.tiltX=_.tiltX,_e.tiltY=_.tiltY,_e.twist=_.twist)}copyMouseData(_,_e){_ instanceof FederatedMouseEvent&&_e instanceof FederatedMouseEvent&&(_e.altKey=_.altKey,_e.button=_.button,_e.buttons=_.buttons,_e.client.copyFrom(_.client),_e.ctrlKey=_.ctrlKey,_e.metaKey=_.metaKey,_e.movement.copyFrom(_.movement),_e.screen.copyFrom(_.screen),_e.shiftKey=_.shiftKey,_e.global.copyFrom(_.global))}copyData(_,_e){_e.isTrusted=_.isTrusted,_e.srcElement=_.srcElement,_e.timeStamp=performance.now(),_e.type=_.type,_e.detail=_.detail,_e.view=_.view,_e.which=_.which,_e.layer.copyFrom(_.layer),_e.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const _e=this.eventPool.get(_).pop()||new _(this);return _e.eventPhase=_e.NONE,_e.currentTarget=null,_e.path=null,_e.target=null,_e}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const _e=_.constructor;this.eventPool.has(_e)||this.eventPool.set(_e,[]),this.eventPool.get(_e).push(_)}notifyListeners(_,_e){const tt=_.currentTarget._events[_e];if(tt&&_.currentTarget.isInteractive())if("fn"in tt)tt.once&&_.currentTarget.removeListener(_e,tt.fn,void 0,!0),tt.fn.call(tt.context,_);else for(let rt=0,it=tt.length;rt<it&&!_.propagationImmediatelyStopped;rt++)tt[rt].once&&_.currentTarget.removeListener(_e,tt[rt].fn,void 0,!0),tt[rt].fn.call(tt[rt].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class Dn{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Dn.defaultEventFeatures},{set:(_e,tt,rt)=>(tt==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=rt),_e[tt]=rt,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:_e,resolution:tt}=this.renderer;this.setTargetElement(_e),this.resolution=tt,Dn._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let _e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(_e=!1),this.currentCursor===_)return;this.currentCursor=_;const tt=this.cursorStyles[_];if(tt)switch(typeof tt){case"string":_e&&(this.domElement.style.cursor=tt);break;case"function":tt(_);break;case"object":_e&&Object.assign(this.domElement.style,tt);break}else _e&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const _e=this.normalizeToPointerData(_);this.autoPreventDefault&&_e[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let tt=0,rt=_e.length;tt<rt;tt++){const it=_e[tt],st=this.bootstrapEvent(this.rootPointerEvent,it);this.rootBoundary.mapEvent(st)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const _e=this.normalizeToPointerData(_);for(let tt=0,rt=_e.length;tt<rt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,_e[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let _e=_.target;_.composedPath&&_.composedPath().length>0&&(_e=_.composedPath()[0]);const tt=_e!==this.domElement?"outside":"",rt=this.normalizeToPointerData(_);for(let it=0,st=rt.length;it<st;it++){const At=this.bootstrapEvent(this.rootPointerEvent,rt[it]);At.type+=tt,this.rootBoundary.mapEvent(At)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const _e=this.normalizeToPointerData(_);for(let tt=0,rt=_e.length;tt<rt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,_e[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const _e=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(_e)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,_e,tt){const rt=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},it=1/this.resolution;_.x=(_e-rt.left)*(this.domElement.width/rt.width)*it,_.y=(tt-rt.top)*(this.domElement.height/rt.height)*it}normalizeToPointerData(_){const _e=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let tt=0,rt=_.changedTouches.length;tt<rt;tt++){const it=_.changedTouches[tt];typeof it.button>"u"&&(it.button=0),typeof it.buttons>"u"&&(it.buttons=1),typeof it.isPrimary>"u"&&(it.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof it.width>"u"&&(it.width=it.radiusX||1),typeof it.height>"u"&&(it.height=it.radiusY||1),typeof it.tiltX>"u"&&(it.tiltX=0),typeof it.tiltY>"u"&&(it.tiltY=0),typeof it.pointerType>"u"&&(it.pointerType="touch"),typeof it.pointerId>"u"&&(it.pointerId=it.identifier||0),typeof it.pressure>"u"&&(it.pressure=it.force||.5),typeof it.twist>"u"&&(it.twist=0),typeof it.tangentialPressure>"u"&&(it.tangentialPressure=0),typeof it.layerX>"u"&&(it.layerX=it.offsetX=it.clientX),typeof it.layerY>"u"&&(it.layerY=it.offsetY=it.clientY),it.isNormalized=!0,it.type=_.type,_e.push(it)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const tt=_;typeof tt.isPrimary>"u"&&(tt.isPrimary=!0),typeof tt.width>"u"&&(tt.width=1),typeof tt.height>"u"&&(tt.height=1),typeof tt.tiltX>"u"&&(tt.tiltX=0),typeof tt.tiltY>"u"&&(tt.tiltY=0),typeof tt.pointerType>"u"&&(tt.pointerType="mouse"),typeof tt.pointerId>"u"&&(tt.pointerId=MOUSE_POINTER_ID),typeof tt.pressure>"u"&&(tt.pressure=.5),typeof tt.twist>"u"&&(tt.twist=0),typeof tt.tangentialPressure>"u"&&(tt.tangentialPressure=0),tt.isNormalized=!0,_e.push(tt)}else _e.push(_);return _e}normalizeWheelEvent(_){const _e=this.rootWheelEvent;return this.transferMouseData(_e,_),_e.deltaX=_.deltaX,_e.deltaY=_.deltaY,_e.deltaZ=_.deltaZ,_e.deltaMode=_.deltaMode,this.mapPositionToPoint(_e.screen,_.clientX,_.clientY),_e.global.copyFrom(_e.screen),_e.offset.copyFrom(_e.screen),_e.nativeEvent=_,_e.type=_.type,_e}bootstrapEvent(_,_e){return _.originalEvent=null,_.nativeEvent=_e,_.pointerId=_e.pointerId,_.width=_e.width,_.height=_e.height,_.isPrimary=_e.isPrimary,_.pointerType=_e.pointerType,_.pressure=_e.pressure,_.tangentialPressure=_e.tangentialPressure,_.tiltX=_e.tiltX,_.tiltY=_e.tiltY,_.twist=_e.twist,this.transferMouseData(_,_e),this.mapPositionToPoint(_.screen,_e.clientX,_e.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=_e.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,_e){_.isTrusted=_e.isTrusted,_.srcElement=_e.srcElement,_.timeStamp=performance.now(),_.type=_e.type,_.altKey=_e.altKey,_.button=_e.button,_.buttons=_e.buttons,_.client.x=_e.clientX,_.client.y=_e.clientY,_.ctrlKey=_e.ctrlKey,_.metaKey=_e.metaKey,_.movement.x=_e.movementX,_.movement.y=_e.movementY,_.page.x=_e.pageX,_.page.y=_e.pageY,_.relatedTarget=null,_.shiftKey=_e.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(et){return et==="dynamic"||et==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(et){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=et,this.eventMode=et?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(et){this._internalInteractive=convertEventModeToInteractiveMode(et),this._internalEventMode=et},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(et,_,_e){const tt=typeof _e=="boolean"&&_e||typeof _e=="object"&&_e.capture,rt=typeof _=="function"?void 0:_;et=tt?`${et}capture`:et,_=typeof _=="function"?_:_.handleEvent,this.on(et,_,rt)},removeEventListener(et,_,_e){const tt=typeof _e=="boolean"&&_e||typeof _e=="object"&&_e.capture,rt=typeof _=="function"?void 0:_;et=tt?`${et}capture`:et,_=typeof _=="function"?_:_.handleEvent,this.off(et,_,rt)},dispatchEvent(et){if(!(et instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return et.defaultPrevented=!1,et.path=null,et.target=this,et.manager.dispatchEvent(et),!et.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const _e=document.createElement("div");_e.style.width=`${DIV_TOUCH_SIZE}px`,_e.style.height=`${DIV_TOUCH_SIZE}px`,_e.style.position="absolute",_e.style.top=`${DIV_TOUCH_POS_X}px`,_e.style.left=`${DIV_TOUCH_POS_Y}px`,_e.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=_e,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const _e=_.children;if(_e)for(let tt=0;tt<_e.length;tt++)this.updateAccessibleObjects(_e[tt])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:_e,y:tt,width:rt,height:it}=this.renderer.view.getBoundingClientRect(),{width:st,height:At,resolution:ut}=this.renderer,ct=rt/st*ut,ht=it/At*ut;let ot=this.div;ot.style.left=`${_e}px`,ot.style.top=`${tt}px`,ot.style.width=`${st}px`,ot.style.height=`${At}px`;for(let nt=0;nt<this.children.length;nt++){const at=this.children[nt];if(at.renderId!==this.renderId)at._accessibleActive=!1,removeItems(this.children,nt,1),this.div.removeChild(at._accessibleDiv),this.pool.push(at._accessibleDiv),at._accessibleDiv=null,nt--;else{ot=at._accessibleDiv;let lt=at.hitArea;const dt=at.worldTransform;at.hitArea?(ot.style.left=`${(dt.tx+lt.x*dt.a)*ct}px`,ot.style.top=`${(dt.ty+lt.y*dt.d)*ht}px`,ot.style.width=`${lt.width*dt.a*ct}px`,ot.style.height=`${lt.height*dt.d*ht}px`):(lt=at.getBounds(),this.capHitArea(lt),ot.style.left=`${lt.x*ct}px`,ot.style.top=`${lt.y*ht}px`,ot.style.width=`${lt.width*ct}px`,ot.style.height=`${lt.height*ht}px`,ot.title!==at.accessibleTitle&&at.accessibleTitle!==null&&(ot.title=at.accessibleTitle),ot.getAttribute("aria-label")!==at.accessibleHint&&at.accessibleHint!==null&&ot.setAttribute("aria-label",at.accessibleHint)),(at.accessibleTitle!==ot.title||at.tabIndex!==ot.tabIndex)&&(ot.title=at.accessibleTitle,ot.tabIndex=at.tabIndex,this.debug&&this.updateDebugHTML(ot))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:_e,height:tt}=this.renderer;_.x+_.width>_e&&(_.width=_e-_.x),_.y+_.height>tt&&(_.height=tt-_.y)}addChild(_){let _e=this.pool.pop();_e||(_e=document.createElement("button"),_e.style.width=`${DIV_TOUCH_SIZE}px`,_e.style.height=`${DIV_TOUCH_SIZE}px`,_e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",_e.style.position="absolute",_e.style.zIndex=DIV_TOUCH_ZINDEX.toString(),_e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?_e.setAttribute("aria-live","off"):_e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?_e.setAttribute("aria-relevant","additions"):_e.setAttribute("aria-relevant","text"),_e.addEventListener("click",this._onClick.bind(this)),_e.addEventListener("focus",this._onFocus.bind(this)),_e.addEventListener("focusout",this._onFocusOut.bind(this))),_e.style.pointerEvents=_.accessiblePointerEvents,_e.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?_e.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(_e.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&_e.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(_e),_._accessibleActive=!0,_._accessibleDiv=_e,_e.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,_e){const{displayObject:tt}=_.target,rt=this.renderer.events.rootBoundary,it=Object.assign(new FederatedEvent(rt),{target:tt});rt.rootTarget=this.renderer.lastObjectRendered,_e.forEach(st=>rt.dispatchEvent(it,st))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class Ln{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),Ln._plugins.forEach(_e=>{_e.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,_e){const tt=Ln._plugins.slice(0);tt.reverse(),tt.forEach(rt=>{rt.destroy.call(this)}),this.stage.destroy(_e),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(_e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=_e,_e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let _e,tt;if(this._resizeTo===globalThis.window)_e=globalThis.innerWidth,tt=globalThis.innerHeight;else{const{clientWidth:rt,clientHeight:it}=this._resizeTo;_e=rt,tt=it}this.renderer.resize(_e,tt),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,et=>{const _=et.ref;Object.entries(assetKeyMap).filter(([_e])=>!!_[_e]).forEach(([_e,tt])=>extensions$1.add(Object.assign(_[_e],{extension:_[_e].extension??tt})))},et=>{const _=et.ref;Object.keys(assetKeyMap).filter(_e=>!!_[_e]).forEach(_e=>extensions$1.remove(_[_e]))});class BackgroundLoader{constructor(_,_e=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=_e}add(_){_.forEach(_e=>{this._assetList.push(_e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],_e=Math.min(this._assetList.length,this._maxConcurrent);for(let tt=0;tt<_e;tt++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(et,_){if(Array.isArray(_)){for(const _e of _)if(et.startsWith(`data:${_e}`))return!0;return!1}return et.startsWith(`data:${_}`)}function checkExtension(et,_){const _e=et.split("?")[0],tt=path.extname(_e).toLowerCase();return Array.isArray(_)?_.includes(tt):tt===_}const convertToList=(et,_,_e=!1)=>(Array.isArray(et)||(et=[et]),_?et.map(tt=>typeof tt=="string"||_e?_(tt):tt):et),copySearchParams=(et,_)=>{const _e=_.split("?")[1];return _e&&(et+=`?${_e}`),et};function processX(et,_,_e,tt,rt){const it=_[_e];for(let st=0;st<it.length;st++){const At=it[st];_e<_.length-1?processX(et.replace(tt[_e],At),_,_e+1,tt,rt):rt.push(et.replace(tt[_e],At))}}function createStringVariations(et){const _=/\{(.*?)\}/g,_e=et.match(_),tt=[];if(_e){const rt=[];_e.forEach(it=>{const st=it.substring(1,it.length-1).split(",");rt.push(st)}),processX(et,rt,0,_e,tt)}else tt.push(et);return tt}const isSingleItem=et=>!Array.isArray(et);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const _e=this._cache.get(_);return _e||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),_e}set(_,_e){const tt=convertToList(_);let rt;for(let At=0;At<this.parsers.length;At++){const ut=this.parsers[At];if(ut.test(_e)){rt=ut.getCacheableAssets(tt,_e);break}}rt||(rt={},tt.forEach(At=>{rt[At]=_e}));const it=Object.keys(rt),st={cacheKeys:it,keys:tt};if(tt.forEach(At=>{this._cacheMap.set(At,st)}),it.forEach(At=>{this._cache.has(At)&&this._cache.get(At)!==_e&&console.warn("[Cache] already has key:",At),this._cache.set(At,rt[At])}),_e instanceof Texture){const At=_e;tt.forEach(ut=>{At.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(At.baseTexture,ut),Texture.addToCache(At,ut)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const _e=this._cacheMap.get(_);_e.cacheKeys.forEach(tt=>{this._cache.delete(tt)}),_e.keys.forEach(tt=>{this._cacheMap.delete(tt)})}get parsers(){return this._parsers}}const Cache$1=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,_e,tt)=>(this._parsersValidated=!1,_[_e]=tt,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,_e){const tt={promise:null,parser:null};return tt.promise=(async()=>{var st,At;let rt=null,it=null;if(_e.loadParser&&(it=this._parserHash[_e.loadParser],it||console.warn(`[Assets] specified load parser "${_e.loadParser}" not found while loading ${_}`)),!it){for(let ut=0;ut<this.parsers.length;ut++){const ct=this.parsers[ut];if(ct.load&&((st=ct.test)!=null&&st.call(ct,_,_e,this))){it=ct;break}}if(!it)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}rt=await it.load(_,_e,this),tt.parser=it;for(let ut=0;ut<this.parsers.length;ut++){const ct=this.parsers[ut];ct.parse&&ct.parse&&await((At=ct.testParse)==null?void 0:At.call(ct,rt,_e,this))&&(rt=await ct.parse(rt,_e,this)||rt,tt.parser=ct)}return rt})(),tt}async load(_,_e){this._parsersValidated||this._validateParsers();let tt=0;const rt={},it=isSingleItem(_),st=convertToList(_,ct=>({alias:[ct],src:ct})),At=st.length,ut=st.map(async ct=>{const ht=path.toAbsolute(ct.src);if(!rt[ct.src])try{this.promiseCache[ht]||(this.promiseCache[ht]=this._getLoadPromiseAndParser(ht,ct)),rt[ct.src]=await this.promiseCache[ht].promise,_e&&_e(++tt/At)}catch(ot){throw delete this.promiseCache[ht],delete rt[ct.src],new Error(`[Loader.load] Failed to load ${ht}.
${ot}`)}});return await Promise.all(ut),it?rt[st[0].src]:rt}async unload(_){const _e=convertToList(_,tt=>({alias:[tt],src:tt})).map(async tt=>{var st,At;const rt=path.toAbsolute(tt.src),it=this.promiseCache[rt];if(it){const ut=await it.promise;delete this.promiseCache[rt],(At=(st=it.parser)==null?void 0:st.unload)==null||At.call(st,ut,tt,this)}});await Promise.all(_e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,_e)=>(_[_e.name]&&console.warn(`[Assets] loadParser name conflict "${_e.name}"`),{..._,[_e.name]:_e}),{})}}var LoaderParserPriority=(et=>(et[et.Low=0]="Low",et[et.Normal=1]="Normal",et[et.High=2]="High",et))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(et){return checkDataUrl(et,validJSONMIME)||checkExtension(et,validJSONExtension)},async load(et){return await(await settings.ADAPTER.fetch(et)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(et){return checkDataUrl(et,validTXTMIME)||checkExtension(et,validTXTExtension)},async load(et){return await(await settings.ADAPTER.fetch(et)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(et){const _=path.extname(et),_e=path.basename(et,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(it=>it.charAt(0).toUpperCase()+it.slice(1));let tt=_e.length>0;for(const it of _e)if(!it.match(CSS_IDENT_TOKEN_REGEX)){tt=!1;break}let rt=_e.join(" ");return tt||(rt=`"${rt.replace(/[\\"]/g,"\\$&")}"`),rt}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(et){return validURICharactersRegex.test(et)?et:encodeURI(et)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(et){return checkDataUrl(et,validFontMIMEs)||checkExtension(et,validFontExtensions)},async load(et,_){var tt,rt,it;const _e=settings.ADAPTER.getFontFaceSet();if(_e){const st=[],At=((tt=_.data)==null?void 0:tt.family)??getFontFamilyName(et),ut=((it=(rt=_.data)==null?void 0:rt.weights)==null?void 0:it.filter(ht=>validWeights.includes(ht)))??["normal"],ct=_.data??{};for(let ht=0;ht<ut.length;ht++){const ot=ut[ht],nt=new FontFace(At,`url(${encodeURIWhenNeeded(et)})`,{...ct,weight:ot});await nt.load(),_e.add(nt),st.push(nt)}return st.length===1?st[0]:st}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(et){(Array.isArray(et)?et:[et]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$1.add(loadWebFont);let UUID=0,MAX_WORKERS;const WHITE_PNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",checkImageBitmapCode={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${WHITE_PNG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},workerCode={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let workerURL;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const _e=URL.createObjectURL(new Blob([checkImageBitmapCode.code],{type:"application/javascript"})),tt=new Worker(_e);tt.addEventListener("message",rt=>{tt.terminate(),URL.revokeObjectURL(_e),_(rt.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(workerURL||(workerURL=URL.createObjectURL(new Blob([workerCode.code],{type:"application/javascript"}))),this._createdWorkers++,_=new Worker(workerURL),_.addEventListener("message",_e=>{this.complete(_e.data),this.returnWorker(_e.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,_e){await this._initWorkers();const tt=new Promise((rt,it)=>{this.queue.push({id:_,arguments:_e,resolve:rt,reject:it})});return this.next(),tt}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const _e=this.queue.pop(),tt=_e.id;this.resolveHash[UUID]={resolve:_e.resolve,reject:_e.reject},_.postMessage({data:_e.arguments,uuid:UUID++,id:tt})}}const WorkerManager=new WorkerManagerClass;function createTexture(et,_,_e){et.resource.internal=!0;const tt=new Texture(et),rt=()=>{delete _.promiseCache[_e],Cache$1.has(_e)&&Cache$1.remove(_e)};return tt.baseTexture.once("destroyed",()=>{_e in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),rt())}),tt.once("destroyed",()=>{et.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),rt())}),tt}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(et){const _=await settings.ADAPTER.fetch(et);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${et}: ${_.status} ${_.statusText}`);const _e=await _.blob();return await createImageBitmap(_e)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(et){return checkDataUrl(et,validImageMIMEs)||checkExtension(et,validImageExtensions)},async load(et,_,_e){var At;const tt=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let rt;tt?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?rt=await WorkerManager.loadImageBitmap(et):rt=await loadImageBitmap(et):rt=await new Promise((ut,ct)=>{const ht=new Image;ht.crossOrigin=this.config.crossOrigin,ht.src=et,ht.complete?ut(ht):(ht.onload=()=>ut(ht),ht.onerror=ot=>ct(ot))});const it={..._.data};it.resolution??(it.resolution=getResolutionOfUrl(et)),tt&&((At=it.resourceOptions)==null?void 0:At.ownsImageBitmap)===void 0&&(it.resourceOptions={...it.resourceOptions},it.resourceOptions.ownsImageBitmap=!0);const st=new BaseTexture(rt,it);return st.resource.src=et,createTexture(st,_e,et)},unload(et){et.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(et){return checkDataUrl(et,validSVGMIME)||checkExtension(et,validSVGExtension)},async testParse(et){return SVGResource.test(et)},async parse(et,_,_e){var it;const tt=new SVGResource(et,(it=_==null?void 0:_.data)==null?void 0:it.resourceOptions);await tt.load();const rt=new BaseTexture(tt,{resolution:getResolutionOfUrl(et),..._==null?void 0:_.data});return rt.resource.src=_.src,createTexture(rt,_e,_.src)},async load(et,_){return(await settings.ADAPTER.fetch(et)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0},test(et){return checkDataUrl(et,validVideoMIMEs)||checkExtension(et,validVideoExtensions)},async load(et,_,_e){var st;let tt;const rt=await(await settings.ADAPTER.fetch(et)).blob(),it=URL.createObjectURL(rt);try{const At={autoPlay:this.config.defaultAutoPlay,...(st=_==null?void 0:_.data)==null?void 0:st.resourceOptions},ut=new VideoResource(it,At);await ut.load();const ct=new BaseTexture(ut,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(et),..._==null?void 0:_.data});ct.resource.src=et,tt=createTexture(ct,_e,et),tt.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(it)})}catch(At){throw URL.revokeObjectURL(it),At}return tt},unload(et){et.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,_e)=>`${_}${this._bundleIdConnector}${_e}`,extractAssetIdFromBundle:(_,_e)=>_e.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(_e=>{this._preferredOrder.push(_e),_e.priority||(_e.priority=Object.keys(_e.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const _e=_;this._defaultSearchParams=Object.keys(_e).map(tt=>`${encodeURIComponent(tt)}=${encodeURIComponent(_e[tt])}`).join("&")}}getAlias(_){const{alias:_e,name:tt,src:rt,srcs:it}=_;return convertToList(_e||tt||rt||it,st=>typeof st=="string"?st:Array.isArray(st)?st.map(At=>(At==null?void 0:At.src)??(At==null?void 0:At.srcs)??At):st!=null&&st.src||st!=null&&st.srcs?st.src??st.srcs:st,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(_e=>{this.addBundle(_e.name,_e.assets)})}addBundle(_,_e){const tt=[];Array.isArray(_e)?_e.forEach(rt=>{const it=rt.src??rt.srcs,st=rt.alias??rt.name;let At;if(typeof st=="string"){const ut=this._createBundleAssetId(_,st);tt.push(ut),At=[st,ut]}else{const ut=st.map(ct=>this._createBundleAssetId(_,ct));tt.push(...ut),At=[...st,...ut]}this.add({...rt,alias:At,src:it})}):Object.keys(_e).forEach(rt=>{const it=[rt,this._createBundleAssetId(_,rt)];if(typeof _e[rt]=="string")this.add({alias:it,src:_e[rt]});else if(Array.isArray(_e[rt]))this.add({alias:it,src:_e[rt]});else{const st=_e[rt],At=st.src??st.srcs;this.add({...st,alias:it,src:Array.isArray(At)?At:[At]})}tt.push(...it)}),this._bundles[_]=tt}add(_,_e,tt,rt,it){const st=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),st.push({alias:_,src:_e,data:tt,format:rt,loadParser:it})):Array.isArray(_)?st.push(..._):st.push(_);let At;At=ut=>{this.hasKey(ut)&&console.warn(`[Resolver] already has key: ${ut} overwriting`)},convertToList(st).forEach(ut=>{const{src:ct,srcs:ht}=ut;let{data:ot,format:nt,loadParser:at}=ut;const lt=convertToList(ct||ht).map(pt=>typeof pt=="string"?createStringVariations(pt):Array.isArray(pt)?pt:[pt]),dt=this.getAlias(ut);Array.isArray(dt)?dt.forEach(At):At(dt);const ft=[];lt.forEach(pt=>{pt.forEach(gt=>{let mt={};if(typeof gt!="object"){mt.src=gt;for(let yt=0;yt<this._parsers.length;yt++){const vt=this._parsers[yt];if(vt.test(gt)){mt=vt.parse(gt);break}}}else ot=gt.data??ot,nt=gt.format??nt,at=gt.loadParser??at,mt={...mt,...gt};if(!dt)throw new Error(`[Resolver] alias is undefined for this asset: ${mt.src}`);mt=this.buildResolvedAsset(mt,{aliases:dt,data:ot,format:nt,loadParser:at}),ft.push(mt)})}),dt.forEach(pt=>{this._assetMap[pt]=ft})})}resolveBundle(_){const _e=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{const it=this._bundles[rt];if(it){const st=this.resolve(it),At={};for(const ut in st){const ct=st[ut];At[this._extractAssetIdFromBundle(rt,ut)]=ct}tt[rt]=At}}),_e?tt[_[0]]:tt}resolveUrl(_){const _e=this.resolve(_);if(typeof _!="string"){const tt={};for(const rt in _e)tt[rt]=_e[rt].src;return tt}return _e.src}resolve(_){const _e=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{if(!this._resolverHash[rt])if(this._assetMap[rt]){let it=this._assetMap[rt];const st=it[0],At=this._getPreferredOrder(it);At==null||At.priority.forEach(ut=>{At.params[ut].forEach(ct=>{const ht=it.filter(ot=>ot[ut]?ot[ut]===ct:!1);ht.length&&(it=ht)})}),this._resolverHash[rt]=it[0]??st}else this._resolverHash[rt]=this.buildResolvedAsset({alias:[rt],src:rt},{});tt[rt]=this._resolverHash[rt]}),_e?tt[_[0]]:tt}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let _e=0;_e<_.length;_e++){const tt=_[0],rt=this._preferredOrder.find(it=>it.params.format.includes(tt.format));if(rt)return rt}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const _e=/\?/.test(_)?"&":"?";return`${_}${_e}${this._defaultSearchParams}`}buildResolvedAsset(_,_e){const{aliases:tt,data:rt,loadParser:it,format:st}=_e;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=tt??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...rt||{},..._.data},_.loadParser=it??_.loadParser,_.format=st??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache$1,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var it,st;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let At=_.manifest;typeof At=="string"&&(At=await this.load(At)),this.resolver.addManifest(At)}const _e=((it=_.texturePreference)==null?void 0:it.resolution)??1,tt=typeof _e=="number"?[_e]:_e,rt=await this._detectFormats({preferredFormats:(st=_.texturePreference)==null?void 0:st.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:rt,resolution:tt}}),_.preferences&&this.setPreferences(_.preferences)}add(_,_e,tt,rt,it){this.resolver.add(_,_e,tt,rt,it)}async load(_,_e){this._initialized||await this.init();const tt=isSingleItem(_),rt=convertToList(_).map(At=>{if(typeof At!="string"){const ut=this.resolver.getAlias(At);return ut.some(ct=>!this.resolver.hasKey(ct))&&this.add(At),Array.isArray(ut)?ut[0]:ut}return this.resolver.hasKey(At)||this.add({alias:At,src:At}),At}),it=this.resolver.resolve(rt),st=await this._mapLoadToResolve(it,_e);return tt?st[rt[0]]:st}addBundle(_,_e){this.resolver.addBundle(_,_e)}async loadBundle(_,_e){this._initialized||await this.init();let tt=!1;typeof _=="string"&&(tt=!0,_=[_]);const rt=this.resolver.resolveBundle(_),it={},st=Object.keys(rt);let At=0,ut=0;const ct=()=>{_e==null||_e(++At/ut)},ht=st.map(ot=>{const nt=rt[ot];return ut+=Object.keys(nt).length,this._mapLoadToResolve(nt,ct).then(at=>{it[ot]=at})});return await Promise.all(ht),tt?it[_[0]]:it}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const _e=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(_e))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const _e=this.resolver.resolveBundle(_);Object.values(_e).forEach(tt=>{this._backgroundLoader.add(Object.values(tt))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache$1.get(_);const _e={};for(let tt=0;tt<_.length;tt++)_e[tt]=Cache$1.get(_[tt]);return _e}async _mapLoadToResolve(_,_e){const tt=Object.values(_),rt=Object.keys(_);this._backgroundLoader.active=!1;const it=await this.loader.load(tt,_e);this._backgroundLoader.active=!0;const st={};return tt.forEach((At,ut)=>{const ct=it[At.src],ht=[At.src];At.alias&&ht.push(...At.alias),st[rt[ut]]=ct,Cache$1.set(ht,ct)}),st}async unload(_){this._initialized||await this.init();const _e=convertToList(_).map(rt=>typeof rt!="string"?rt.src:rt),tt=this.resolver.resolve(_e);await this._unloadFromResolved(tt)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const _e=this.resolver.resolveBundle(_),tt=Object.keys(_e).map(rt=>this._unloadFromResolved(_e[rt]));await Promise.all(tt)}async _unloadFromResolved(_){const _e=Object.values(_);_e.forEach(tt=>{Cache$1.remove(tt.src)}),await this.loader.unload(_e)}async _detectFormats(_){let _e=[];_.preferredFormats&&(_e=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const tt of _.detections)_.skipDetections||await tt.test()?_e=await tt.add(_e):_.skipDetections||(_e=await tt.remove(_e));return _e=_e.filter((tt,rt)=>_e.indexOf(tt)===rt),_e}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(_e=>{_e.config&&Object.keys(_e.config).filter(tt=>tt in _).forEach(tt=>{_e.config[tt]=_[tt]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:et=>Array.isArray(et)&&et.every(_=>_ instanceof Texture),getCacheableAssets:(et,_)=>{const _e={};return et.forEach(tt=>{_.forEach((rt,it)=>{_e[tt+(it===0?"":it+1)]=rt})}),_e}};extensions$1.add(cacheTextureArray);async function testImageFormat(et){if("Image"in globalThis)return new Promise(_=>{const _e=new Image;_e.onload=()=>{_(!0)},_e.onerror=()=>{_(!1)},_e.src=et});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(et)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async et=>[...et,"avif"],remove:async et=>et.filter(_=>_!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async et=>[...et,"webp"],remove:async et=>et.filter(_=>_!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async et=>[...et,...imageFormats],remove:async et=>et.filter(_=>!imageFormats.includes(_))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(et){return inWorker?!1:document.createElement("video").canPlayType(et)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async et=>[...et,"webm"],remove:async et=>et.filter(_=>_!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async et=>[...et,"mp4","m4v"],remove:async et=>et.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async et=>[...et,"ogv"],remove:async et=>et.filter(_=>_!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:et=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(et))==null?void 0:_[1])??"1"),format:path.extname(et).slice(1),src:et}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(et=>(et[et.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",et[et.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",et[et.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",et[et.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",et[et.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",et[et.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",et[et.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",et[et.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",et[et.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",et[et.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",et[et.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",et[et.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",et[et.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",et[et.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",et[et.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",et[et.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",et[et.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",et[et.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",et[et.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",et[et.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",et[et.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",et[et.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",et[et.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",et[et.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",et[et.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",et[et.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",et[et.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",et))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const et=settings.ADAPTER.createCanvas().getContext("webgl");return et?(storedGl=et,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async et=>{extensions||getCompressedTextureExtensions();const _=[];for(const _e in extensions)extensions[_e]&&_.push(_e);return[..._,...et]},remove:async et=>(extensions||getCompressedTextureExtensions(),et.filter(_=>!(_ in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,_e={width:1,height:1,autoLoad:!0}){let tt,rt;typeof _=="string"?(tt=_,rt=new Uint8Array):(tt=null,rt=_),super(rt,_e),this.origin=tt,this.buffer=rt?new ViewableBuffer(rt):null,this._load=null,this.loaded=!1,this.origin!==null&&_e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,_e){super(_,_e),this.format=_e.format,this.levels=_e.levels||1,this._width=_e.width,this._height=_e.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(_e.levelBuffers||this.buffer)&&(this._levelBuffers=_e.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,_e,tt){const rt=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;rt.pixelStorei(rt.UNPACK_ALIGNMENT,4);for(let it=0,st=this.levels;it<st;it++){const{levelID:At,levelWidth:ut,levelHeight:ct,levelBuffer:ht}=this._levelBuffers[it];rt.compressedTexImage2D(rt.TEXTURE_2D,At,this.format,ut,ct,0,ht)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_>=36196)return"etc1";if(_>=35986&&_<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(_,_e,tt,rt,it,st,At){const ut=new Array(tt);let ct=_.byteOffset,ht=st,ot=At,nt=ht+rt-1&~(rt-1),at=ot+it-1&~(it-1),lt=nt*at*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[_e];for(let dt=0;dt<tt;dt++)ut[dt]={levelID:dt,levelWidth:tt>1?ht:nt,levelHeight:tt>1?ot:at,levelBuffer:new Uint8Array(_.buffer,ct,lt)},ct+=lt,ht=ht>>1||1,ot=ot>>1||1,nt=ht+rt-1&~(rt-1),at=ot+it-1&~(it-1),lt=nt*at*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[_e];return ut}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function parseDDS(et){const _=new Uint32Array(et);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const _e=new Uint32Array(et,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),tt=_e[DDS_FIELDS.HEIGHT],rt=_e[DDS_FIELDS.WIDTH],it=_e[DDS_FIELDS.MIPMAP_COUNT],st=new Uint32Array(et,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),At=st[PF_FLAGS];if(At&DDPF_FOURCC){const ut=st[DDS_PF_FIELDS.FOURCC];if(ut!==FOURCC_DX10){const gt=FOURCC_TO_FORMAT[ut],mt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,yt=new Uint8Array(et,mt);return[new CompressedTextureResource(yt,{format:gt,width:rt,height:tt,levels:it})]}const ct=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,ht=new Uint32Array(_.buffer,ct,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),ot=ht[DDS_DX10_FIELDS.DXGI_FORMAT],nt=ht[DDS_DX10_FIELDS.RESOURCE_DIMENSION],at=ht[DDS_DX10_FIELDS.MISC_FLAG],lt=ht[DDS_DX10_FIELDS.ARRAY_SIZE],dt=DXGI_TO_FORMAT[ot];if(dt===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${ot}`);if(at===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(nt===6)throw new Error("DDSParser does not supported 3D texture data");const ft=new Array,pt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(lt===1)ft.push(new Uint8Array(et,pt));else{const gt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[dt];let mt=0,yt=rt,vt=tt;for(let bt=0;bt<it;bt++){const Bt=Math.max(1,yt+3&-4),Tt=Math.max(1,vt+3&-4),It=Bt*Tt*gt;mt+=It,yt=yt>>>1,vt=vt>>>1}let wt=pt;for(let bt=0;bt<lt;bt++)ft.push(new Uint8Array(et,wt,mt)),wt+=mt}return ft.map(gt=>new CompressedTextureResource(gt,{format:dt,width:rt,height:tt,levels:it}))}throw At&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):At&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):At&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):At&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(et,_,_e=!1){const tt=new DataView(_);if(!validate(et,tt))return null;const rt=tt.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,it=tt.getUint32(KTX_FIELDS.GL_TYPE,rt),st=tt.getUint32(KTX_FIELDS.GL_FORMAT,rt),At=tt.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,rt),ut=tt.getUint32(KTX_FIELDS.PIXEL_WIDTH,rt),ct=tt.getUint32(KTX_FIELDS.PIXEL_HEIGHT,rt)||1,ht=tt.getUint32(KTX_FIELDS.PIXEL_DEPTH,rt)||1,ot=tt.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,rt)||1,nt=tt.getUint32(KTX_FIELDS.NUMBER_OF_FACES,rt),at=tt.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,rt),lt=tt.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,rt);if(ct===0||ht!==1)throw new Error("Only 2D textures are supported");if(nt!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(ot!==1)throw new Error("WebGL does not support array textures");const dt=4,ft=4,pt=ut+3&-4,gt=ct+3&-4,mt=new Array(ot);let yt=ut*ct;it===0&&(yt=pt*gt);let vt;if(it!==0?TYPES_TO_BYTES_PER_COMPONENT[it]?vt=TYPES_TO_BYTES_PER_COMPONENT[it]*FORMATS_TO_COMPONENTS[st]:vt=TYPES_TO_BYTES_PER_PIXEL[it]:vt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[At],vt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const wt=_e?parseKvData(tt,lt,rt):null;let bt=yt*vt,Bt=ut,Tt=ct,It=pt,Dt=gt,Ut=FILE_HEADER_SIZE+lt;for(let _t=0;_t<at;_t++){const St=tt.getUint32(Ut,rt);let xt=Ut+4;for(let Ct=0;Ct<ot;Ct++){let Ft=mt[Ct];Ft||(Ft=mt[Ct]=new Array(at)),Ft[_t]={levelID:_t,levelWidth:at>1||it!==0?Bt:It,levelHeight:at>1||it!==0?Tt:Dt,levelBuffer:new Uint8Array(_,xt,bt)},xt+=bt}Ut+=St+4,Ut=Ut%4!==0?Ut+4-Ut%4:Ut,Bt=Bt>>1||1,Tt=Tt>>1||1,It=Bt+dt-1&~(dt-1),Dt=Tt+ft-1&~(ft-1),bt=It*Dt*vt}return it!==0?{uncompressed:mt.map(_t=>{let St=_t[0].levelBuffer,xt=!1;return it===TYPES.FLOAT?St=new Float32Array(_t[0].levelBuffer.buffer,_t[0].levelBuffer.byteOffset,_t[0].levelBuffer.byteLength/4):it===TYPES.UNSIGNED_INT?(xt=!0,St=new Uint32Array(_t[0].levelBuffer.buffer,_t[0].levelBuffer.byteOffset,_t[0].levelBuffer.byteLength/4)):it===TYPES.INT&&(xt=!0,St=new Int32Array(_t[0].levelBuffer.buffer,_t[0].levelBuffer.byteOffset,_t[0].levelBuffer.byteLength/4)),{resource:new BufferResource(St,{width:_t[0].levelWidth,height:_t[0].levelHeight}),type:it,format:xt?convertFormatToInteger(st):st}}),kvData:wt}:{compressed:mt.map(_t=>new CompressedTextureResource(null,{format:At,width:ut,height:ct,levels:at,levelBuffers:_t})),kvData:wt}}function validate(et,_){for(let _e=0;_e<FILE_IDENTIFIER.length;_e++)if(_.getUint8(_e)!==FILE_IDENTIFIER[_e])return console.error(`${et} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(et){switch(et){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return et}}function parseKvData(et,_,_e){const tt=new Map;let rt=0;for(;rt<_;){const it=et.getUint32(FILE_HEADER_SIZE+rt,_e),st=FILE_HEADER_SIZE+rt+4,At=3-(it+3)%4;if(it===0||it>_-rt){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let ut=0;for(;ut<it&&et.getUint8(st+ut)!==0;ut++);if(ut===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const ct=new TextDecoder().decode(new Uint8Array(et.buffer,st,ut)),ht=new DataView(et.buffer,st+ut+1,it-ut-1);tt.set(ct,ht),rt+=4+it+At}return tt}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(et){return checkExtension(et,".dds")},async load(et,_,_e){const tt=await(await settings.ADAPTER.fetch(et)).arrayBuffer(),rt=parseDDS(tt).map(it=>{const st=new BaseTexture(it,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(et),..._.data});return createTexture(st,_e,et)});return rt.length===1?rt[0]:rt},unload(et){Array.isArray(et)?et.forEach(_=>_.destroy(!0)):et.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(et){return checkExtension(et,".ktx")},async load(et,_,_e){const tt=await(await settings.ADAPTER.fetch(et)).arrayBuffer(),{compressed:rt,uncompressed:it,kvData:st}=parseKTX(et,tt),At=rt??it,ut={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(et),..._.data},ct=At.map(ht=>{At===it&&Object.assign(ut,{type:ht.type,format:ht.format});const ot=ht.resource??ht,nt=new BaseTexture(ot,ut);return nt.ktxKeyValueData=st,createTexture(nt,_e,et)});return ct.length===1?ct[0]:ct},unload(et){Array.isArray(et)?et.forEach(_=>_.destroy(!0)):et.destroy(!0)}};extensions$1.add(loadKTX);const resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:et=>{const _=path.extname(et).slice(1);return["basis","ktx","dds"].includes(_)},parse:et=>{var _e,tt;const _=path.extname(et).slice(1);if(_==="ktx"){const rt=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(rt.some(it=>et.endsWith(it)))return{resolution:parseFloat(((_e=settings.RETINA_PREFIX.exec(et))==null?void 0:_e[1])??"1"),format:rt.find(it=>et.endsWith(it)),src:et}}return{resolution:parseFloat(((tt=settings.RETINA_PREFIX.exec(et))==null?void 0:tt[1])??"1"),format:_,src:et}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class ln{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var _e;const _=(_e=this.renderer)==null?void 0:_e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,_e,tt,rt){const it=new Image;return it.src=await this.base64(_,_e,tt,rt),it}async base64(_,_e,tt,rt){const it=this.canvas(_,rt);if(it.toBlob!==void 0)return new Promise((st,At)=>{it.toBlob(ut=>{if(!ut){At(new Error("ICanvas.toBlob failed!"));return}const ct=new FileReader;ct.onload=()=>st(ct.result),ct.onerror=At,ct.readAsDataURL(ut)},_e,tt)});if(it.toDataURL!==void 0)return it.toDataURL(_e,tt);if(it.convertToBlob!==void 0){const st=await it.convertToBlob({type:_e,quality:tt});return new Promise((At,ut)=>{const ct=new FileReader;ct.onload=()=>At(ct.result),ct.onerror=ut,ct.readAsDataURL(st)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,_e){const{pixels:tt,width:rt,height:it,flipY:st,premultipliedAlpha:At}=this._rawPixels(_,_e);st&&ln._flipY(tt,rt,it),At&&ln._unpremultiplyAlpha(tt);const ut=new CanvasRenderTarget(rt,it,1),ct=new ImageData(new Uint8ClampedArray(tt.buffer),rt,it);return ut.context.putImageData(ct,0,0),ut.canvas}pixels(_,_e){const{pixels:tt,width:rt,height:it,flipY:st,premultipliedAlpha:At}=this._rawPixels(_,_e);return st&&ln._flipY(tt,rt,it),At&&ln._unpremultiplyAlpha(tt),tt}_rawPixels(_,_e){const tt=this.renderer;if(!tt)throw new Error("The Extract has already been destroyed");let rt,it=!1,st=!1,At,ut=!1;_&&(_ instanceof RenderTexture?At=_:(At=tt.generateTexture(_,{region:_e,resolution:tt.resolution,multisample:tt.multisample}),ut=!0,_e&&(TEMP_RECT.width=_e.width,TEMP_RECT.height=_e.height,_e=TEMP_RECT)));const ct=tt.gl;if(At){if(rt=At.baseTexture.resolution,_e=_e??At.frame,it=!1,st=At.baseTexture.alphaMode>0&&At.baseTexture.format===FORMATS.RGBA,!ut){tt.renderTexture.bind(At);const at=At.framebuffer.glFramebuffers[tt.CONTEXT_UID];at.blitFramebuffer&&tt.framebuffer.bind(at.blitFramebuffer)}}else rt=tt.resolution,_e||(_e=TEMP_RECT,_e.width=tt.width/rt,_e.height=tt.height/rt),it=!0,st=this._rendererPremultipliedAlpha,tt.renderTexture.bind();const ht=Math.max(Math.round(_e.width*rt),1),ot=Math.max(Math.round(_e.height*rt),1),nt=new Uint8Array(BYTES_PER_PIXEL*ht*ot);return ct.readPixels(Math.round(_e.x*rt),Math.round(_e.y*rt),ht,ot,ct.RGBA,ct.UNSIGNED_BYTE,nt),ut&&(At==null||At.destroy(!0)),{pixels:nt,width:ht,height:ot,flipY:it,premultipliedAlpha:st}}destroy(){this.renderer=null}static _flipY(_,_e,tt){const rt=_e<<2,it=tt>>1,st=new Uint8Array(rt);for(let At=0;At<it;At++){const ut=At*rt,ct=(tt-At-1)*rt;st.set(_.subarray(ut,ut+rt)),_.copyWithin(ut,ct,ct+rt),_.set(st,ct)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const _e=_.length;for(let tt=0;tt<_e;tt+=4){const rt=_[tt+3];if(rt!==0){const it=255.001/rt;_[tt]=_[tt]*it+.5,_[tt+1]=_[tt+1]*it+.5,_[tt+2]=_[tt+2]*it+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(et){const _=et.points;let _e,tt,rt,it,st,At;if(et.type===SHAPES.CIRC){const lt=et.shape;_e=lt.x,tt=lt.y,st=At=lt.radius,rt=it=0}else if(et.type===SHAPES.ELIP){const lt=et.shape;_e=lt.x,tt=lt.y,st=lt.width,At=lt.height,rt=it=0}else{const lt=et.shape,dt=lt.width/2,ft=lt.height/2;_e=lt.x+dt,tt=lt.y+ft,st=At=Math.max(0,Math.min(lt.radius,Math.min(dt,ft))),rt=dt-st,it=ft-At}if(!(st>=0&&At>=0&&rt>=0&&it>=0)){_.length=0;return}const ut=Math.ceil(2.3*Math.sqrt(st+At)),ct=ut*8+(rt?4:0)+(it?4:0);if(_.length=ct,ct===0)return;if(ut===0){_.length=8,_[0]=_[6]=_e+rt,_[1]=_[3]=tt+it,_[2]=_[4]=_e-rt,_[5]=_[7]=tt-it;return}let ht=0,ot=ut*4+(rt?2:0)+2,nt=ot,at=ct;{const lt=rt+st,dt=it,ft=_e+lt,pt=_e-lt,gt=tt+dt;if(_[ht++]=ft,_[ht++]=gt,_[--ot]=gt,_[--ot]=pt,it){const mt=tt-dt;_[nt++]=pt,_[nt++]=mt,_[--at]=mt,_[--at]=ft}}for(let lt=1;lt<ut;lt++){const dt=Math.PI/2*(lt/ut),ft=rt+Math.cos(dt)*st,pt=it+Math.sin(dt)*At,gt=_e+ft,mt=_e-ft,yt=tt+pt,vt=tt-pt;_[ht++]=gt,_[ht++]=yt,_[--ot]=yt,_[--ot]=mt,_[nt++]=mt,_[nt++]=vt,_[--at]=vt,_[--at]=gt}{const lt=rt,dt=it+At,ft=_e+lt,pt=_e-lt,gt=tt+dt,mt=tt-dt;_[ht++]=ft,_[ht++]=gt,_[--at]=mt,_[--at]=ft,rt&&(_[ht++]=pt,_[ht++]=gt,_[--at]=mt,_[--at]=pt)}},triangulate(et,_){const _e=et.points,tt=_.points,rt=_.indices;if(_e.length===0)return;let it=tt.length/2;const st=it;let At,ut;if(et.type!==SHAPES.RREC){const ht=et.shape;At=ht.x,ut=ht.y}else{const ht=et.shape;At=ht.x+ht.width/2,ut=ht.y+ht.height/2}const ct=et.matrix;tt.push(et.matrix?ct.a*At+ct.c*ut+ct.tx:At,et.matrix?ct.b*At+ct.d*ut+ct.ty:ut),it++,tt.push(_e[0],_e[1]);for(let ht=2;ht<_e.length;ht+=2)tt.push(_e[ht],_e[ht+1]),rt.push(it++,st,it);rt.push(st+1,st,it)}};function fixOrientation(et,_=!1){const _e=et.length;if(_e<6)return;let tt=0;for(let rt=0,it=et[_e-2],st=et[_e-1];rt<_e;rt+=2){const At=et[rt],ut=et[rt+1];tt+=(At-it)*(ut+st),it=At,st=ut}if(!_&&tt>0||_&&tt<=0){const rt=_e/2;for(let it=rt+rt%2;it<_e;it+=2){const st=_e-it-2,At=_e-it-1,ut=it,ct=it+1;[et[st],et[ut]]=[et[ut],et[st]],[et[At],et[ct]]=[et[ct],et[At]]}}}const buildPoly={build(et){et.points=et.shape.points.slice()},triangulate(et,_){let _e=et.points;const tt=et.holes,rt=_.points,it=_.indices;if(_e.length>=6){fixOrientation(_e,!1);const st=[];for(let ct=0;ct<tt.length;ct++){const ht=tt[ct];fixOrientation(ht.points,!0),st.push(_e.length/2),_e=_e.concat(ht.points)}const At=earcut$1(_e,st,2);if(!At)return;const ut=rt.length/2;for(let ct=0;ct<At.length;ct+=3)it.push(At[ct]+ut),it.push(At[ct+1]+ut),it.push(At[ct+2]+ut);for(let ct=0;ct<_e.length;ct++)rt.push(_e[ct])}}},buildRectangle={build(et){const _=et.shape,_e=_.x,tt=_.y,rt=_.width,it=_.height,st=et.points;st.length=0,rt>=0&&it>=0&&st.push(_e,tt,_e+rt,tt,_e+rt,tt+it,_e,tt+it)},triangulate(et,_){const _e=et.points,tt=_.points;if(_e.length===0)return;const rt=tt.length/2;tt.push(_e[0],_e[1],_e[2],_e[3],_e[6],_e[7],_e[4],_e[5]),_.indices.push(rt,rt+1,rt+2,rt+1,rt+2,rt+3)}},buildRoundedRectangle={build(et){buildCircle.build(et)},triangulate(et,_){buildCircle.triangulate(et,_)}};var LINE_JOIN=(et=>(et.MITER="miter",et.BEVEL="bevel",et.ROUND="round",et))(LINE_JOIN||{}),LINE_CAP=(et=>(et.BUTT="butt",et.ROUND="round",et.SQUARE="square",et))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(et,_=20){if(!this.adaptive||!et||isNaN(et))return _;let _e=Math.ceil(et/this.maxLength);return _e<this.minSegments?_e=this.minSegments:_e>this.maxSegments&&(_e=this.maxSegments),_e}};class ArcUtils{static curveTo(_,_e,tt,rt,it,st){const At=st[st.length-2],ut=st[st.length-1]-_e,ct=At-_,ht=rt-_e,ot=tt-_,nt=Math.abs(ut*ot-ct*ht);if(nt<1e-8||it===0)return(st[st.length-2]!==_||st[st.length-1]!==_e)&&st.push(_,_e),null;const at=ut*ut+ct*ct,lt=ht*ht+ot*ot,dt=ut*ht+ct*ot,ft=it*Math.sqrt(at)/nt,pt=it*Math.sqrt(lt)/nt,gt=ft*dt/at,mt=pt*dt/lt,yt=ft*ot+pt*ct,vt=ft*ht+pt*ut,wt=ct*(pt+gt),bt=ut*(pt+gt),Bt=ot*(ft+mt),Tt=ht*(ft+mt),It=Math.atan2(bt-vt,wt-yt),Dt=Math.atan2(Tt-vt,Bt-yt);return{cx:yt+_,cy:vt+_e,radius:it,startAngle:It,endAngle:Dt,anticlockwise:ct*ht>ot*ut}}static arc(_,_e,tt,rt,it,st,At,ut,ct){const ht=At-st,ot=curves._segmentsCount(Math.abs(ht)*it,Math.ceil(Math.abs(ht)/PI_2)*40),nt=ht/(ot*2),at=nt*2,lt=Math.cos(nt),dt=Math.sin(nt),ft=ot-1,pt=ft%1/ft;for(let gt=0;gt<=ft;++gt){const mt=gt+pt*gt,yt=nt+st+at*mt,vt=Math.cos(yt),wt=-Math.sin(yt);ct.push((lt*vt+dt*wt)*it+tt,(lt*-wt+dt*vt)*it+rt)}}}class BatchPart{constructor(){this.reset()}begin(_,_e,tt){this.reset(),this.style=_,this.start=_e,this.attribStart=tt}end(_,_e){this.attribSize=_e-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,_e,tt,rt,it,st,At,ut){let ct=0,ht=0,ot=0,nt=0,at=0,lt=0,dt=0,ft=0,pt=0,gt=0,mt=0,yt=_,vt=_e;for(let wt=1;wt<=10;++wt)ht=wt/10,ot=ht*ht,nt=ot*ht,at=1-ht,lt=at*at,dt=lt*at,ft=dt*_+3*lt*ht*tt+3*at*ot*it+nt*At,pt=dt*_e+3*lt*ht*rt+3*at*ot*st+nt*ut,gt=yt-ft,mt=vt-pt,yt=ft,vt=pt,ct+=Math.sqrt(gt*gt+mt*mt);return ct}static curveTo(_,_e,tt,rt,it,st,At){const ut=At[At.length-2],ct=At[At.length-1];At.length-=2;const ht=curves._segmentsCount(BezierUtils.curveLength(ut,ct,_,_e,tt,rt,it,st));let ot=0,nt=0,at=0,lt=0,dt=0;At.push(ut,ct);for(let ft=1,pt=0;ft<=ht;++ft)pt=ft/ht,ot=1-pt,nt=ot*ot,at=nt*ot,lt=pt*pt,dt=lt*pt,At.push(at*ut+3*nt*pt*_+3*ot*lt*tt+dt*it,at*ct+3*nt*pt*_e+3*ot*lt*rt+dt*st)}}function square(et,_,_e,tt,rt,it,st,At){const ut=et-_e*rt,ct=_-tt*rt,ht=et+_e*it,ot=_+tt*it;let nt,at;st?(nt=tt,at=-_e):(nt=-tt,at=_e);const lt=ut+nt,dt=ct+at,ft=ht+nt,pt=ot+at;return At.push(lt,dt,ft,pt),2}function round(et,_,_e,tt,rt,it,st,At){const ut=_e-et,ct=tt-_;let ht=Math.atan2(ut,ct),ot=Math.atan2(rt-et,it-_);At&&ht<ot?ht+=Math.PI*2:!At&&ht>ot&&(ot+=Math.PI*2);let nt=ht;const at=ot-ht,lt=Math.abs(at),dt=Math.sqrt(ut*ut+ct*ct),ft=(15*lt*Math.sqrt(dt)/Math.PI>>0)+1,pt=at/ft;if(nt+=pt,At){st.push(et,_,_e,tt);for(let gt=1,mt=nt;gt<ft;gt++,mt+=pt)st.push(et,_,et+Math.sin(mt)*dt,_+Math.cos(mt)*dt);st.push(et,_,rt,it)}else{st.push(_e,tt,et,_);for(let gt=1,mt=nt;gt<ft;gt++,mt+=pt)st.push(et+Math.sin(mt)*dt,_+Math.cos(mt)*dt,et,_);st.push(rt,it,et,_)}return ft*2}function buildNonNativeLine(et,_){const _e=et.shape;let tt=et.points||_e.points.slice();const rt=_.closePointEps;if(tt.length===0)return;const it=et.lineStyle,st=new Point(tt[0],tt[1]),At=new Point(tt[tt.length-2],tt[tt.length-1]),ut=_e.type!==SHAPES.POLY||_e.closeStroke,ct=Math.abs(st.x-At.x)<rt&&Math.abs(st.y-At.y)<rt;if(ut){tt=tt.slice(),ct&&(tt.pop(),tt.pop(),At.set(tt[tt.length-2],tt[tt.length-1]));const Ft=(st.x+At.x)*.5,Lt=(At.y+st.y)*.5;tt.unshift(Ft,Lt),tt.push(Ft,Lt)}const ht=_.points,ot=tt.length/2;let nt=tt.length;const at=ht.length/2,lt=it.width/2,dt=lt*lt,ft=it.miterLimit*it.miterLimit;let pt=tt[0],gt=tt[1],mt=tt[2],yt=tt[3],vt=0,wt=0,bt=-(gt-yt),Bt=pt-mt,Tt=0,It=0,Dt=Math.sqrt(bt*bt+Bt*Bt);bt/=Dt,Bt/=Dt,bt*=lt,Bt*=lt;const Ut=it.alignment,_t=(1-Ut)*2,St=Ut*2;ut||(it.cap===LINE_CAP.ROUND?nt+=round(pt-bt*(_t-St)*.5,gt-Bt*(_t-St)*.5,pt-bt*_t,gt-Bt*_t,pt+bt*St,gt+Bt*St,ht,!0)+2:it.cap===LINE_CAP.SQUARE&&(nt+=square(pt,gt,bt,Bt,_t,St,!0,ht))),ht.push(pt-bt*_t,gt-Bt*_t,pt+bt*St,gt+Bt*St);for(let Ft=1;Ft<ot-1;++Ft){pt=tt[(Ft-1)*2],gt=tt[(Ft-1)*2+1],mt=tt[Ft*2],yt=tt[Ft*2+1],vt=tt[(Ft+1)*2],wt=tt[(Ft+1)*2+1],bt=-(gt-yt),Bt=pt-mt,Dt=Math.sqrt(bt*bt+Bt*Bt),bt/=Dt,Bt/=Dt,bt*=lt,Bt*=lt,Tt=-(yt-wt),It=mt-vt,Dt=Math.sqrt(Tt*Tt+It*It),Tt/=Dt,It/=Dt,Tt*=lt,It*=lt;const Lt=mt-pt,Mt=gt-yt,Rt=mt-vt,Nt=wt-yt,Gt=Lt*Rt+Mt*Nt,Wt=Mt*Rt-Nt*Lt,Xt=Wt<0;if(Math.abs(Wt)<.001*Math.abs(Gt)){ht.push(mt-bt*_t,yt-Bt*_t,mt+bt*St,yt+Bt*St),Gt>=0&&(it.join===LINE_JOIN.ROUND?nt+=round(mt,yt,mt-bt*_t,yt-Bt*_t,mt-Tt*_t,yt-It*_t,ht,!1)+4:nt+=2,ht.push(mt-Tt*St,yt-It*St,mt+Tt*_t,yt+It*_t));continue}const Yt=(-bt+pt)*(-Bt+yt)-(-bt+mt)*(-Bt+gt),Zt=(-Tt+vt)*(-It+yt)-(-Tt+mt)*(-It+wt),er=(Lt*Zt-Rt*Yt)/Wt,Ar=(Nt*Yt-Mt*Zt)/Wt,hr=(er-mt)*(er-mt)+(Ar-yt)*(Ar-yt),dr=mt+(er-mt)*_t,ar=yt+(Ar-yt)*_t,ur=mt-(er-mt)*St,or=yt-(Ar-yt)*St,fr=Math.min(Lt*Lt+Mt*Mt,Rt*Rt+Nt*Nt),pr=Xt?_t:St,yr=fr+pr*pr*dt,Tr=hr<=yr;let Br=it.join;if(Br===LINE_JOIN.MITER&&hr/dt>ft&&(Br=LINE_JOIN.BEVEL),Tr)switch(Br){case LINE_JOIN.MITER:{ht.push(dr,ar,ur,or);break}case LINE_JOIN.BEVEL:{Xt?ht.push(dr,ar,mt+bt*St,yt+Bt*St,dr,ar,mt+Tt*St,yt+It*St):ht.push(mt-bt*_t,yt-Bt*_t,ur,or,mt-Tt*_t,yt-It*_t,ur,or),nt+=2;break}case LINE_JOIN.ROUND:{Xt?(ht.push(dr,ar,mt+bt*St,yt+Bt*St),nt+=round(mt,yt,mt+bt*St,yt+Bt*St,mt+Tt*St,yt+It*St,ht,!0)+4,ht.push(dr,ar,mt+Tt*St,yt+It*St)):(ht.push(mt-bt*_t,yt-Bt*_t,ur,or),nt+=round(mt,yt,mt-bt*_t,yt-Bt*_t,mt-Tt*_t,yt-It*_t,ht,!1)+4,ht.push(mt-Tt*_t,yt-It*_t,ur,or));break}}else{switch(ht.push(mt-bt*_t,yt-Bt*_t,mt+bt*St,yt+Bt*St),Br){case LINE_JOIN.MITER:{Xt?ht.push(ur,or,ur,or):ht.push(dr,ar,dr,ar),nt+=2;break}case LINE_JOIN.ROUND:{Xt?nt+=round(mt,yt,mt+bt*St,yt+Bt*St,mt+Tt*St,yt+It*St,ht,!0)+2:nt+=round(mt,yt,mt-bt*_t,yt-Bt*_t,mt-Tt*_t,yt-It*_t,ht,!1)+2;break}}ht.push(mt-Tt*_t,yt-It*_t,mt+Tt*St,yt+It*St),nt+=2}}pt=tt[(ot-2)*2],gt=tt[(ot-2)*2+1],mt=tt[(ot-1)*2],yt=tt[(ot-1)*2+1],bt=-(gt-yt),Bt=pt-mt,Dt=Math.sqrt(bt*bt+Bt*Bt),bt/=Dt,Bt/=Dt,bt*=lt,Bt*=lt,ht.push(mt-bt*_t,yt-Bt*_t,mt+bt*St,yt+Bt*St),ut||(it.cap===LINE_CAP.ROUND?nt+=round(mt-bt*(_t-St)*.5,yt-Bt*(_t-St)*.5,mt-bt*_t,yt-Bt*_t,mt+bt*St,yt+Bt*St,ht,!1)+2:it.cap===LINE_CAP.SQUARE&&(nt+=square(mt,yt,bt,Bt,_t,St,!1,ht)));const xt=_.indices,Ct=curves.epsilon*curves.epsilon;for(let Ft=at;Ft<nt+at-2;++Ft)pt=ht[Ft*2],gt=ht[Ft*2+1],mt=ht[(Ft+1)*2],yt=ht[(Ft+1)*2+1],vt=ht[(Ft+2)*2],wt=ht[(Ft+2)*2+1],!(Math.abs(pt*(yt-wt)+mt*(wt-gt)+vt*(gt-yt))<Ct)&&xt.push(Ft,Ft+1,Ft+2)}function buildNativeLine(et,_){let _e=0;const tt=et.shape,rt=et.points||tt.points,it=tt.type!==SHAPES.POLY||tt.closeStroke;if(rt.length===0)return;const st=_.points,At=_.indices,ut=rt.length/2,ct=st.length/2;let ht=ct;for(st.push(rt[0],rt[1]),_e=1;_e<ut;_e++)st.push(rt[_e*2],rt[_e*2+1]),At.push(ht,ht+1),ht++;it&&At.push(ht,ct)}function buildLine(et,_){et.lineStyle.native?buildNativeLine(et,_):buildNonNativeLine(et,_)}class QuadraticUtils{static curveLength(_,_e,tt,rt,it,st){const At=_-2*tt+it,ut=_e-2*rt+st,ct=2*tt-2*_,ht=2*rt-2*_e,ot=4*(At*At+ut*ut),nt=4*(At*ct+ut*ht),at=ct*ct+ht*ht,lt=2*Math.sqrt(ot+nt+at),dt=Math.sqrt(ot),ft=2*ot*dt,pt=2*Math.sqrt(at),gt=nt/dt;return(ft*lt+dt*nt*(lt-pt)+(4*at*ot-nt*nt)*Math.log((2*dt+gt+lt)/(gt+pt)))/(4*ft)}static curveTo(_,_e,tt,rt,it){const st=it[it.length-2],At=it[it.length-1],ut=curves._segmentsCount(QuadraticUtils.curveLength(st,At,_,_e,tt,rt));let ct=0,ht=0;for(let ot=1;ot<=ut;++ot){const nt=ot/ut;ct=st+(_-st)*nt,ht=At+(_e-At)*nt,it.push(ct+(_+(tt-_)*nt-ct)*nt,ht+(_e+(rt-_e)*nt-ht)*nt)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,_e=null,tt=null,rt=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=tt,this.fillStyle=_e,this.matrix=rt,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class cs extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds$1,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const _e=this.batches[_];_e.reset(),BATCH_POOL.push(_e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,_e=null,tt=null,rt=null){const it=new GraphicsData(_,_e,tt,rt);return this.graphicsData.push(it),this.dirty++,this}drawHole(_,_e=null){if(!this.graphicsData.length)return null;const tt=new GraphicsData(_,null,null,_e),rt=this.graphicsData[this.graphicsData.length-1];return tt.lineStyle=rt.lineStyle,rt.holes.push(tt),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const _e=this.graphicsData;for(let tt=0;tt<_e.length;++tt){const rt=_e[tt];if(rt.fillStyle.visible&&rt.shape&&(rt.matrix?rt.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),rt.shape.contains(tmpPoint.x,tmpPoint.y))){let it=!1;if(rt.holes){for(let st=0;st<rt.holes.length;st++)if(rt.holes[st].shape.contains(tmpPoint.x,tmpPoint.y)){it=!0;break}}if(!it)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,_e=this.graphicsData;let tt=null,rt=null;this.batches.length>0&&(tt=this.batches[this.batches.length-1],rt=tt.style);for(let ut=this.shapeIndex;ut<_e.length;ut++){this.shapeIndex++;const ct=_e[ut],ht=ct.fillStyle,ot=ct.lineStyle;FILL_COMMANDS[ct.type].build(ct),ct.matrix&&this.transformPoints(ct.points,ct.matrix),(ht.visible||ot.visible)&&this.processHoles(ct.holes);for(let nt=0;nt<2;nt++){const at=nt===0?ht:ot;if(!at.visible)continue;const lt=at.texture.baseTexture,dt=this.indices.length,ft=this.points.length/2;lt.wrapMode=WRAP_MODES.REPEAT,nt===0?this.processFill(ct):this.processLine(ct);const pt=this.points.length/2-ft;pt!==0&&(tt&&!this._compareStyles(rt,at)&&(tt.end(dt,ft),tt=null),tt||(tt=BATCH_POOL.pop()||new BatchPart,tt.begin(at,dt,ft),this.batches.push(tt),rt=at),this.addUvs(this.points,_,at.texture,ft,pt,at.matrix))}}const it=this.indices.length,st=this.points.length/2;if(tt&&tt.end(it,st),this.batches.length===0){this.batchable=!0;return}const At=st>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&At===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=At?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,_e){return!(!_||!_e||_.texture.baseTexture!==_e.texture.baseTexture||_.color+_.alpha!==_e.color+_e.alpha||!!_.native!=!!_e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,_e=this.graphicsData.length;_<_e;_++){const tt=this.graphicsData[_],rt=tt.fillStyle,it=tt.lineStyle;if(rt&&!rt.texture.baseTexture.valid||it&&!it.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let _e=0,tt=_.length;_e<tt;_e++){const rt=_[_e];for(let it=0;it<rt.size;it++){const st=rt.start+it;this.indicesUint16[st]=this.indicesUint16[st]-rt.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let _e=0;_e<_.length;_e++)if(_[_e].style.native)return!1;return this.points.length<cs.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let ot=0;ot<this.drawCalls.length;ot++)this.drawCalls[ot].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[ot]);this.drawCalls.length=0;const _e=this.colors,tt=this.textureIds;let rt=DRAW_CALL_POOL.pop();rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),rt.texArray.count=0,rt.start=0,rt.size=0,rt.type=DRAW_MODES.TRIANGLES;let it=0,st=null,At=0,ut=!1,ct=DRAW_MODES.TRIANGLES,ht=0;this.drawCalls.push(rt);for(let ot=0;ot<this.batches.length;ot++){const nt=this.batches[ot],at=8,lt=nt.style,dt=lt.texture.baseTexture;ut!==!!lt.native&&(ut=!!lt.native,ct=ut?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,st=null,it=at,_++),st!==dt&&(st=dt,dt._batchEnabled!==_&&(it===at&&(_++,it=0,rt.size>0&&(rt=DRAW_CALL_POOL.pop(),rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),this.drawCalls.push(rt)),rt.start=ht,rt.size=0,rt.texArray.count=0,rt.type=ct),dt.touched=1,dt._batchEnabled=_,dt._batchLocation=it,dt.wrapMode=WRAP_MODES.REPEAT,rt.texArray.elements[rt.texArray.count++]=dt,it++)),rt.size+=nt.size,ht+=nt.size,At=dt._batchLocation,this.addColors(_e,lt.color,lt.alpha,nt.attribSize,nt.attribStart),this.addTextureIds(tt,At,nt.attribSize,nt.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,_e=this.uvs,tt=this.colors,rt=this.textureIds,it=new ArrayBuffer(_.length*3*4),st=new Float32Array(it),At=new Uint32Array(it);let ut=0;for(let ct=0;ct<_.length/2;ct++)st[ut++]=_[ct*2],st[ut++]=_[ct*2+1],st[ut++]=_e[ct*2],st[ut++]=_e[ct*2+1],At[ut++]=tt[ct],st[ut++]=rt[ct];this._buffer.update(it),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let _e=0;_e<_.holes.length;_e++)buildLine(_.holes[_e],this)}processHoles(_){for(let _e=0;_e<_.length;_e++){const tt=_[_e];FILL_COMMANDS[tt.type].build(tt),tt.matrix&&this.transformPoints(tt.points,tt.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,_e){for(let tt=0;tt<_.length/2;tt++){const rt=_[tt*2],it=_[tt*2+1];_[tt*2]=_e.a*rt+_e.c*it+_e.tx,_[tt*2+1]=_e.b*rt+_e.d*it+_e.ty}}addColors(_,_e,tt,rt,it=0){const st=Color.shared.setValue(_e).toLittleEndianNumber(),At=Color.shared.setValue(st).toPremultiplied(tt);_.length=Math.max(_.length,it+rt);for(let ut=0;ut<rt;ut++)_[it+ut]=At}addTextureIds(_,_e,tt,rt=0){_.length=Math.max(_.length,rt+tt);for(let it=0;it<tt;it++)_[rt+it]=_e}addUvs(_,_e,tt,rt,it,st=null){let At=0;const ut=_e.length,ct=tt.frame;for(;At<it;){let ot=_[(rt+At)*2],nt=_[(rt+At)*2+1];if(st){const at=st.a*ot+st.c*nt+st.tx;nt=st.b*ot+st.d*nt+st.ty,ot=at}At++,_e.push(ot/ct.width,nt/ct.height)}const ht=tt.baseTexture;(ct.width<ht.width||ct.height<ht.height)&&this.adjustUvs(_e,tt,ut,it)}adjustUvs(_,_e,tt,rt){const it=_e.baseTexture,st=1e-6,At=tt+rt*2,ut=_e.frame,ct=ut.width/it.width,ht=ut.height/it.height;let ot=ut.x/ut.width,nt=ut.y/ut.height,at=Math.floor(_[tt]+st),lt=Math.floor(_[tt+1]+st);for(let dt=tt+2;dt<At;dt+=2)at=Math.min(at,Math.floor(_[dt]+st)),lt=Math.min(lt,Math.floor(_[dt+1]+st));ot-=at,nt-=lt;for(let dt=tt;dt<At;dt+=2)_[dt]=(_[dt]+ot)*ct,_[dt+1]=(_[dt+1]+nt)*ht}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class Bn extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Bn(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,_e=0,tt,rt=.5,it=!1){return typeof _=="number"&&(_={width:_,color:_e,alpha:tt,alignment:rt,native:it}),this.lineTextureStyle(_)}lineTextureStyle(_){const _e={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(_e,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.width>0&&_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:tt},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,_e=this.currentPath.points.length;_e>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[_e-2],_[_e-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,_e){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=_e,this}lineTo(_,_e){this.currentPath||this.moveTo(0,0);const tt=this.currentPath.points,rt=tt[tt.length-2],it=tt[tt.length-1];return(rt!==_||it!==_e)&&tt.push(_,_e),this}_initCurve(_=0,_e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,_e]):this.moveTo(_,_e)}quadraticCurveTo(_,_e,tt,rt){this._initCurve();const it=this.currentPath.points;return it.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,_e,tt,rt,it),this}bezierCurveTo(_,_e,tt,rt,it,st){return this._initCurve(),BezierUtils.curveTo(_,_e,tt,rt,it,st,this.currentPath.points),this}arcTo(_,_e,tt,rt,it){this._initCurve(_,_e);const st=this.currentPath.points,At=ArcUtils.curveTo(_,_e,tt,rt,it,st);if(At){const{cx:ut,cy:ct,radius:ht,startAngle:ot,endAngle:nt,anticlockwise:at}=At;this.arc(ut,ct,ht,ot,nt,at)}return this}arc(_,_e,tt,rt,it,st=!1){if(rt===it)return this;if(!st&&it<=rt?it+=PI_2:st&&rt<=it&&(rt+=PI_2),it-rt===0)return this;const At=_+Math.cos(rt)*tt,ut=_e+Math.sin(rt)*tt,ct=this._geometry.closePointEps;let ht=this.currentPath?this.currentPath.points:null;if(ht){const ot=Math.abs(ht[ht.length-2]-At),nt=Math.abs(ht[ht.length-1]-ut);ot<ct&&nt<ct||ht.push(At,ut)}else this.moveTo(At,ut),ht=this.currentPath.points;return ArcUtils.arc(At,ut,_,_e,tt,rt,it,st,ht),this}beginFill(_=0,_e){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:_e})}normalizeColor(_){const _e=Color.shared.setValue(_.color??0);_.color=_e.toNumber(),_.alpha??(_.alpha=_e.alpha)}beginTextureFill(_){const _e={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(_e,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:tt},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,_e,tt,rt){return this.drawShape(new Rectangle(_,_e,tt,rt))}drawRoundedRect(_,_e,tt,rt,it){return this.drawShape(new RoundedRectangle(_,_e,tt,rt,it))}drawCircle(_,_e,tt){return this.drawShape(new Circle(_,_e,tt))}drawEllipse(_,_e,tt,rt){return this.drawShape(new Ellipse(_,_e,tt,rt))}drawPolygon(..._){let _e,tt=!0;const rt=_[0];rt.points?(tt=rt.closeStroke,_e=rt.points):Array.isArray(_[0])?_e=_[0]:_e=_;const it=new Polygon(_e);return it.closeStroke=tt,this.drawShape(it),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const _e=this._geometry;_e.updateBatches(),_e.batchable?(this.batchDirty!==_e.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,_e=this.blendMode,tt=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=tt,this.vertexData=new Float32Array(_.points);for(let rt=0;rt<tt;rt++){const it=_.batches[rt],st=it.style.color,At=new Float32Array(this.vertexData.buffer,it.attribStart*4*2,it.attribSize*2),ut=new Float32Array(_.uvsFloat32.buffer,it.attribStart*4*2,it.attribSize*2),ct=new Uint16Array(_.indicesUint16.buffer,it.start*2,it.size),ht={vertexData:At,blendMode:_e,indices:ct,uvs:ut,_batchRGB:Color.shared.setValue(st).toRgbArray(),_tintRGB:st,_texture:it.style.texture,alpha:it.style.alpha,worldAlpha:1};this.batches[rt]=ht}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let _e=0,tt=this.batches.length;_e<tt;_e++){const rt=this.batches[_e];rt.worldAlpha=this.worldAlpha*rt.alpha,_.plugins[this.pluginName].render(rt)}}}_renderDirect(_){const _e=this._resolveDirectShader(_),tt=this._geometry,rt=this.worldAlpha,it=_e.uniforms,st=tt.drawCalls;it.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(rt).toArray(it.tint),_.shader.bind(_e),_.geometry.bind(tt,_e),_.state.set(this.state);for(let At=0,ut=st.length;At<ut;At++)this._renderDrawCallDirect(_,tt.drawCalls[At])}_renderDrawCallDirect(_,_e){const{texArray:tt,type:rt,size:it,start:st}=_e,At=tt.count;for(let ut=0;ut<At;ut++)_.texture.bind(tt.elements[ut],ut);_.geometry.draw(rt,it,st)}_resolveDirectShader(_){let _e=this.shader;const tt=this.pluginName;if(!_e){if(!DEFAULT_SHADERS[tt]){const{maxTextures:rt}=_.plugins[tt],it=new Int32Array(rt);for(let ut=0;ut<rt;ut++)it[ut]=ut;const st={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:it},!0)},At=_.plugins[tt]._shader.program;DEFAULT_SHADERS[tt]=new Shader(At,st)}_e=DEFAULT_SHADERS[tt]}return _e}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:_e,minY:tt,maxX:rt,maxY:it}=_.bounds;this._bounds.addFrame(this.transform,_e,tt,rt,it)}containsPoint(_){return this.worldTransform.applyInverse(_,Bn._TEMP_POINT),this._geometry.containsPoint(Bn._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const _e=this.batches[_];_e._tintRGB=Color.shared.setValue(this._tintColor).multiply(_e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const _e=this.transform.worldTransform,tt=_e.a,rt=_e.b,it=_e.c,st=_e.d,At=_e.tx,ut=_e.ty,ct=this._geometry.points,ht=this.vertexData;let ot=0;for(let nt=0;nt<ct.length;nt+=2){const at=ct[nt],lt=ct[nt+1];ht[ot++]=tt*at+it*lt+At,ht[ot++]=st*lt+rt*at+ut}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,_e){this.uvBuffer=_,this.uvMatrix=_e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const _e=this.uvBuffer.data;(!this.data||this.data.length!==_e.length)&&(this.data=new Float32Array(_e.length)),this.uvMatrix.multiplyUvs(_e,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class hs extends Container{constructor(_,_e,tt,rt=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=_e,this.state=tt||State.for2d(),this.drawMode=rt,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const _e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&_e.length<hs.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const _e=this.shader;_e.alpha=this.worldAlpha,_e.update&&_e.update(),_.batch.flush(),_e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(_e),_.state.set(this.state),_.geometry.bind(this.geometry,_e),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const _e=this.geometry,tt=this.shader;tt.uvMatrix&&(tt.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=_e.indexBuffer.data,this._tintRGB=tt._tintRGB,this._texture=tt.texture;const rt=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[rt]),_.plugins[rt].render(this)}calculateVertices(){const _=this.geometry.buffers[0],_e=_.data,tt=_._updateID;if(tt===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==_e.length&&(this.vertexData=new Float32Array(_e.length));const rt=this.transform.worldTransform,it=rt.a,st=rt.b,At=rt.c,ut=rt.d,ct=rt.tx,ht=rt.ty,ot=this.vertexData;for(let nt=0;nt<ot.length/2;nt++){const at=_e[nt*2],lt=_e[nt*2+1];ot[nt*2]=it*at+At*lt+ct,ot[nt*2+1]=st*at+ut*lt+ht}if(this._roundPixels){const nt=settings.RESOLUTION;for(let at=0;at<ot.length;++at)ot[at]=Math.round(ot[at]*nt)/nt}this.vertexDirty=tt}calculateUvs(){const _=this.geometry.buffers[1],_e=this.shader;_e.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,_e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint);const _e=this.geometry.getBuffer("aVertexPosition").data,tt=tempPolygon.points,rt=this.geometry.getIndex().data,it=rt.length,st=this.drawMode===4?3:1;for(let At=0;At+2<it;At+=st){const ut=rt[At]*2,ct=rt[At+1]*2,ht=rt[At+2]*2;if(tt[0]=_e[ut],tt[1]=_e[ut+1],tt[2]=_e[ct],tt[3]=_e[ct+1],tt[4]=_e[ht],tt[5]=_e[ht+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,_e,tt){super();const rt=new Buffer(_),it=new Buffer(_e,!0),st=new Buffer(tt,!0,!0);this.addAttribute("aVertexPosition",rt,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",it,2,!1,TYPES.FLOAT).addIndex(st),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,_e){const tt={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};_e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},_e),_e.uniforms&&Object.assign(tt,_e.uniforms),super(_e.program||Program.from(vertex$1,fragment$1),tt),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=_e.program===void 0,this.pluginName=_e.pluginName,this._tintColor=new Color(_e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=_e.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,_e,tt){this.geometry=new Geometry,this.indexBuffer=null,this.size=tt,this.dynamicProperties=[],this.staticProperties=[];for(let rt=0;rt<_.length;++rt){let it=_[rt];it={attributeName:it.attributeName,size:it.size,uploadFunction:it.uploadFunction,type:it.type||TYPES.FLOAT,offset:it.offset},_e[rt]?this.dynamicProperties.push(it):this.staticProperties.push(it)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let _e=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let st=0;st<this.dynamicProperties.length;++st){const At=this.dynamicProperties[st];At.offset=_e,_e+=At.size,this.dynamicStride+=At.size}const tt=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(tt),this.dynamicDataUint32=new Uint32Array(tt),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let rt=0;this.staticStride=0;for(let st=0;st<this.staticProperties.length;++st){const At=this.staticProperties[st];At.offset=rt,rt+=At.size,this.staticStride+=At.size}const it=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(it),this.staticDataUint32=new Uint32Array(it),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let st=0;st<this.dynamicProperties.length;++st){const At=this.dynamicProperties[st];_.addAttribute(At.attributeName,this.dynamicBuffer,0,At.type===TYPES.UNSIGNED_BYTE,At.type,this.dynamicStride*4,At.offset*4)}for(let st=0;st<this.staticProperties.length;++st){const At=this.staticProperties[st];_.addAttribute(At.attributeName,this.staticBuffer,0,At.type===TYPES.UNSIGNED_BYTE,At.type,this.staticStride*4,At.offset*4)}}uploadDynamic(_,_e,tt){for(let rt=0;rt<this.dynamicProperties.length;rt++){const it=this.dynamicProperties[rt];it.uploadFunction(_,_e,tt,it.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,it.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,_e,tt){for(let rt=0;rt<this.staticProperties.length;rt++){const it=this.staticProperties[rt];it.uploadFunction(_,_e,tt,it.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,it.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const _e=_.children,tt=_._maxSize,rt=_._batchSize,it=this.renderer;let st=_e.length;if(st===0)return;st>tt&&!_.autoResize&&(st=tt);let At=_._buffers;At||(At=_._buffers=this.generateBuffers(_));const ut=_e[0]._texture.baseTexture,ct=ut.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,ct),it.state.set(this.state);const ht=it.gl,ot=_.worldTransform.copyTo(this.tempMatrix);ot.prepend(it.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=ot.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,ct).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=ut,this.renderer.shader.bind(this.shader);let nt=!1;for(let at=0,lt=0;at<st;at+=rt,lt+=1){let dt=st-at;dt>rt&&(dt=rt),lt>=At.length&&At.push(this._generateOneMoreBuffer(_));const ft=At[lt];ft.uploadDynamic(_e,at,dt);const pt=_._bufferUpdateIDs[lt]||0;nt=nt||ft._updateID<pt,nt&&(ft._updateID=_._updateID,ft.uploadStatic(_e,at,dt)),it.geometry.bind(ft.geometry),ht.drawElements(ht.TRIANGLES,dt*6,ht.UNSIGNED_SHORT,0)}}generateBuffers(_){const _e=[],tt=_._maxSize,rt=_._batchSize,it=_._properties;for(let st=0;st<tt;st+=rt)_e.push(new ParticleBuffer(this.properties,it,rt));return _e}_generateOneMoreBuffer(_){const _e=_._batchSize,tt=_._properties;return new ParticleBuffer(this.properties,tt,_e)}uploadVertices(_,_e,tt,rt,it,st){let At=0,ut=0,ct=0,ht=0;for(let ot=0;ot<tt;++ot){const nt=_[_e+ot],at=nt._texture,lt=nt.scale.x,dt=nt.scale.y,ft=at.trim,pt=at.orig;ft?(ut=ft.x-nt.anchor.x*pt.width,At=ut+ft.width,ht=ft.y-nt.anchor.y*pt.height,ct=ht+ft.height):(At=pt.width*(1-nt.anchor.x),ut=pt.width*-nt.anchor.x,ct=pt.height*(1-nt.anchor.y),ht=pt.height*-nt.anchor.y),rt[st]=ut*lt,rt[st+1]=ht*dt,rt[st+it]=At*lt,rt[st+it+1]=ht*dt,rt[st+it*2]=At*lt,rt[st+it*2+1]=ct*dt,rt[st+it*3]=ut*lt,rt[st+it*3+1]=ct*dt,st+=it*4}}uploadPosition(_,_e,tt,rt,it,st){for(let At=0;At<tt;At++){const ut=_[_e+At].position;rt[st]=ut.x,rt[st+1]=ut.y,rt[st+it]=ut.x,rt[st+it+1]=ut.y,rt[st+it*2]=ut.x,rt[st+it*2+1]=ut.y,rt[st+it*3]=ut.x,rt[st+it*3+1]=ut.y,st+=it*4}}uploadRotation(_,_e,tt,rt,it,st){for(let At=0;At<tt;At++){const ut=_[_e+At].rotation;rt[st]=ut,rt[st+it]=ut,rt[st+it*2]=ut,rt[st+it*3]=ut,st+=it*4}}uploadUvs(_,_e,tt,rt,it,st){for(let At=0;At<tt;++At){const ut=_[_e+At]._texture._uvs;ut?(rt[st]=ut.x0,rt[st+1]=ut.y0,rt[st+it]=ut.x1,rt[st+it+1]=ut.y1,rt[st+it*2]=ut.x2,rt[st+it*2+1]=ut.y2,rt[st+it*3]=ut.x3,rt[st+it*3+1]=ut.y3,st+=it*4):(rt[st]=0,rt[st+1]=0,rt[st+it]=0,rt[st+it+1]=0,rt[st+it*2]=0,rt[st+it*2+1]=0,rt[st+it*3]=0,rt[st+it*3+1]=0,st+=it*4)}}uploadTint(_,_e,tt,rt,it,st){for(let At=0;At<tt;++At){const ut=_[_e+At],ct=Color.shared.setValue(ut._tintRGB).toPremultiplied(ut.alpha,ut.texture.baseTexture.alphaMode>0);rt[st]=ct,rt[st+it]=ct,rt[st+it*2]=ct,rt[st+it*3]=ct,st+=it*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(et=>(et[et.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",et[et.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",et))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class tr{static get experimentalLetterSpacingSupported(){let _=tr._experimentalLetterSpacingSupported;if(_!==void 0){const _e=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=tr._experimentalLetterSpacingSupported="letterSpacing"in _e||"textLetterSpacing"in _e}return _}constructor(_,_e,tt,rt,it,st,At,ut,ct){this.text=_,this.style=_e,this.width=tt,this.height=rt,this.lines=it,this.lineWidths=st,this.lineHeight=At,this.maxLineWidth=ut,this.fontProperties=ct}static measureText(_,_e,tt,rt=tr._canvas){tt=tt??_e.wordWrap;const it=_e.toFontString(),st=tr.measureFont(it);st.fontSize===0&&(st.fontSize=_e.fontSize,st.ascent=_e.fontSize);const At=rt.getContext("2d",contextSettings);At.font=it;const ut=(tt?tr.wordWrap(_,_e,rt):_).split(/(?:\r\n|\r|\n)/),ct=new Array(ut.length);let ht=0;for(let lt=0;lt<ut.length;lt++){const dt=tr._measureText(ut[lt],_e.letterSpacing,At);ct[lt]=dt,ht=Math.max(ht,dt)}let ot=ht+_e.strokeThickness;_e.dropShadow&&(ot+=_e.dropShadowDistance);const nt=_e.lineHeight||st.fontSize+_e.strokeThickness;let at=Math.max(nt,st.fontSize+_e.strokeThickness*2)+_e.leading+(ut.length-1)*(nt+_e.leading);return _e.dropShadow&&(at+=_e.dropShadowDistance),new tr(_,_e,ot,at,ut,ct,nt+_e.leading,ht,st)}static _measureText(_,_e,tt){let rt=!1;tr.experimentalLetterSpacingSupported&&(tr.experimentalLetterSpacing?(tt.letterSpacing=`${_e}px`,tt.textLetterSpacing=`${_e}px`,rt=!0):(tt.letterSpacing="0px",tt.textLetterSpacing="0px"));let it=tt.measureText(_).width;return it>0&&(rt?it-=_e:it+=(tr.graphemeSegmenter(_).length-1)*_e),it}static wordWrap(_,_e,tt=tr._canvas){const rt=tt.getContext("2d",contextSettings);let it=0,st="",At="";const ut=Object.create(null),{letterSpacing:ct,whiteSpace:ht}=_e,ot=tr.collapseSpaces(ht),nt=tr.collapseNewlines(ht);let at=!ot;const lt=_e.wordWrapWidth+ct,dt=tr.tokenize(_);for(let ft=0;ft<dt.length;ft++){let pt=dt[ft];if(tr.isNewline(pt)){if(!nt){At+=tr.addLine(st),at=!ot,st="",it=0;continue}pt=" "}if(ot){const mt=tr.isBreakingSpace(pt),yt=tr.isBreakingSpace(st[st.length-1]);if(mt&&yt)continue}const gt=tr.getFromCache(pt,ct,ut,rt);if(gt>lt)if(st!==""&&(At+=tr.addLine(st),st="",it=0),tr.canBreakWords(pt,_e.breakWords)){const mt=tr.wordWrapSplit(pt);for(let yt=0;yt<mt.length;yt++){let vt=mt[yt],wt=vt,bt=1;for(;mt[yt+bt];){const Tt=mt[yt+bt];if(!tr.canBreakChars(wt,Tt,pt,yt,_e.breakWords))vt+=Tt;else break;wt=Tt,bt++}yt+=bt-1;const Bt=tr.getFromCache(vt,ct,ut,rt);Bt+it>lt&&(At+=tr.addLine(st),at=!1,st="",it=0),st+=vt,it+=Bt}}else{st.length>0&&(At+=tr.addLine(st),st="",it=0);const mt=ft===dt.length-1;At+=tr.addLine(pt,!mt),at=!1,st="",it=0}else gt+it>lt&&(at=!1,At+=tr.addLine(st),st="",it=0),(st.length>0||!tr.isBreakingSpace(pt)||at)&&(st+=pt,it+=gt)}return At+=tr.addLine(st,!1),At}static addLine(_,_e=!0){return _=tr.trimRight(_),_=_e?`${_}
`:_,_}static getFromCache(_,_e,tt,rt){let it=tt[_];return typeof it!="number"&&(it=tr._measureText(_,_e,rt)+_e,tt[_]=it),it}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let _e=_.length-1;_e>=0;_e--){const tt=_[_e];if(!tr.isBreakingSpace(tt))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:tr._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,_e){return typeof _!="string"?!1:tr._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const _e=[];let tt="";if(typeof _!="string")return _e;for(let rt=0;rt<_.length;rt++){const it=_[rt],st=_[rt+1];if(tr.isBreakingSpace(it,st)||tr.isNewline(it)){tt!==""&&(_e.push(tt),tt=""),_e.push(it);continue}tt+=it}return tt!==""&&_e.push(tt),_e}static canBreakWords(_,_e){return _e}static canBreakChars(_,_e,tt,rt,it){return!0}static wordWrapSplit(_){return tr.graphemeSegmenter(_)}static measureFont(_){if(tr._fonts[_])return tr._fonts[_];const _e={ascent:0,descent:0,fontSize:0},tt=tr._canvas,rt=tr._context;rt.font=_;const it=tr.METRICS_STRING+tr.BASELINE_SYMBOL,st=Math.ceil(rt.measureText(it).width);let At=Math.ceil(rt.measureText(tr.BASELINE_SYMBOL).width);const ut=Math.ceil(tr.HEIGHT_MULTIPLIER*At);if(At=At*tr.BASELINE_MULTIPLIER|0,st===0||ut===0)return tr._fonts[_]=_e,_e;tt.width=st,tt.height=ut,rt.fillStyle="#f00",rt.fillRect(0,0,st,ut),rt.font=_,rt.textBaseline="alphabetic",rt.fillStyle="#000",rt.fillText(it,0,At);const ct=rt.getImageData(0,0,st,ut).data,ht=ct.length,ot=st*4;let nt=0,at=0,lt=!1;for(nt=0;nt<At;++nt){for(let dt=0;dt<ot;dt+=4)if(ct[at+dt]!==255){lt=!0;break}if(!lt)at+=ot;else break}for(_e.ascent=At-nt,at=ht-ot,lt=!1,nt=ut;nt>At;--nt){for(let dt=0;dt<ot;dt+=4)if(ct[at+dt]!==255){lt=!0;break}if(!lt)at-=ot;else break}return _e.descent=nt-At,_e.fontSize=_e.ascent+_e.descent,tr._fonts[_]=_e,_e}static clearMetrics(_=""){_?delete tr._fonts[_]:tr._fonts={}}static get _canvas(){var _;if(!tr.__canvas){let _e;try{const tt=new OffscreenCanvas(0,0);if((_=tt.getContext("2d",contextSettings))!=null&&_.measureText)return tr.__canvas=tt,tt;_e=settings.ADAPTER.createCanvas()}catch{_e=settings.ADAPTER.createCanvas()}_e.width=_e.height=10,tr.__canvas=_e}return tr.__canvas}static get _context(){return tr.__context||(tr.__context=tr._canvas.getContext("2d",contextSettings)),tr.__context}};_TextMetrics.METRICS_STRING="|ÉqÅ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const et=new Intl.Segmenter;return _=>[...et.segment(_)].map(_e=>_e.segment)}return et=>[...et]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class un{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,un.defaultStyle),new un(_)}reset(){deepCopyProperties(this,un.defaultStyle,un.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const _e=getColor(_);this._dropShadowColor!==_e&&(this._dropShadowColor=_e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const _e=getColor(_);this._fill!==_e&&(this._fill=_e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const _e=getColor(_);this._stroke!==_e&&(this._stroke=_e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let _e=this.fontFamily;Array.isArray(this.fontFamily)||(_e=this.fontFamily.split(","));for(let tt=_e.length-1;tt>=0;tt--){let rt=_e[tt].trim();!/([\"\'])[^\'\"]+\1/.test(rt)&&!genericFontFamilies.includes(rt)&&(rt=`"${rt}"`),_e[tt]=rt}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${_e.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(et){const _=Color.shared,_e=tt=>{const rt=_.setValue(tt);return rt.alpha===1?rt.toHex():rt.toRgbaString()};return Array.isArray(et)?et.map(_e):_e(et)}function areArraysEqual(et,_){if(!Array.isArray(et)||!Array.isArray(_)||et.length!==_.length)return!1;for(let _e=0;_e<et.length;++_e)if(et[_e]!==_[_e])return!1;return!0}function deepCopyProperties(et,_,_e){for(const tt in _e)Array.isArray(_[tt])?et[tt]=_[tt].slice():et[tt]=_[tt]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class Mn extends Sprite{constructor(_,_e,tt){let rt=!1;tt||(tt=settings.ADAPTER.createCanvas(),rt=!0),tt.width=3,tt.height=3;const it=Texture.from(tt);it.orig=new Rectangle,it.trim=new Rectangle,super(it),this._ownCanvas=rt,this.canvas=tt,this.context=tt.getContext("2d",{willReadFrequently:!0}),this._resolution=Mn.defaultResolution??settings.RESOLUTION,this._autoResolution=Mn.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=_e,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const _e=this._style;if(this.localStyleID!==_e.styleID&&(this.dirty=!0,this.localStyleID=_e.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const tt=this.context,rt=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),it=rt.width,st=rt.height,At=rt.lines,ut=rt.lineHeight,ct=rt.lineWidths,ht=rt.maxLineWidth,ot=rt.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,it)+_e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,st)+_e.padding*2)*this._resolution),tt.scale(this._resolution,this._resolution),tt.clearRect(0,0,this.canvas.width,this.canvas.height),tt.font=this._font,tt.lineWidth=_e.strokeThickness,tt.textBaseline=_e.textBaseline,tt.lineJoin=_e.lineJoin,tt.miterLimit=_e.miterLimit;let nt,at;const lt=_e.dropShadow?2:1;for(let dt=0;dt<lt;++dt){const ft=_e.dropShadow&&dt===0,pt=ft?Math.ceil(Math.max(1,st)+_e.padding*2):0,gt=pt*this._resolution;if(ft){tt.fillStyle="black",tt.strokeStyle="black";const yt=_e.dropShadowColor,vt=_e.dropShadowBlur*this._resolution,wt=_e.dropShadowDistance*this._resolution;tt.shadowColor=Color.shared.setValue(yt).setAlpha(_e.dropShadowAlpha).toRgbaString(),tt.shadowBlur=vt,tt.shadowOffsetX=Math.cos(_e.dropShadowAngle)*wt,tt.shadowOffsetY=Math.sin(_e.dropShadowAngle)*wt+gt}else tt.fillStyle=this._generateFillStyle(_e,At,rt),tt.strokeStyle=_e.stroke,tt.shadowColor="black",tt.shadowBlur=0,tt.shadowOffsetX=0,tt.shadowOffsetY=0;let mt=(ut-ot.fontSize)/2;ut-ot.fontSize<0&&(mt=0);for(let yt=0;yt<At.length;yt++)nt=_e.strokeThickness/2,at=_e.strokeThickness/2+yt*ut+ot.ascent+mt,_e.align==="right"?nt+=ht-ct[yt]:_e.align==="center"&&(nt+=(ht-ct[yt])/2),_e.stroke&&_e.strokeThickness&&this.drawLetterSpacing(At[yt],nt+_e.padding,at+_e.padding-pt,!0),_e.fill&&this.drawLetterSpacing(At[yt],nt+_e.padding,at+_e.padding-pt)}this.updateTexture()}drawLetterSpacing(_,_e,tt,rt=!1){const it=this._style.letterSpacing;let st=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${it}px`,this.context.textLetterSpacing=`${it}px`,st=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),it===0||st){rt?this.context.strokeText(_,_e,tt):this.context.fillText(_,_e,tt);return}let At=_e;const ut=TextMetrics.graphemeSegmenter(_);let ct=this.context.measureText(_).width,ht=0;for(let ot=0;ot<ut.length;++ot){const nt=ut[ot];rt?this.context.strokeText(nt,At,tt):this.context.fillText(nt,At,tt);let at="";for(let lt=ot+1;lt<ut.length;++lt)at+=ut[lt];ht=this.context.measureText(at).width,At+=ct-ht+it,ct=ht}}updateTexture(){const _=this.canvas;if(this._style.trim){const st=trimCanvas(_);st.data&&(_.width=st.width,_.height=st.height,this.context.putImageData(st.data,0,0))}const _e=this._texture,tt=this._style,rt=tt.trim?0:tt.padding,it=_e.baseTexture;_e.trim.width=_e._frame.width=_.width/this._resolution,_e.trim.height=_e._frame.height=_.height/this._resolution,_e.trim.x=-rt,_e.trim.y=-rt,_e.orig.width=_e._frame.width-rt*2,_e.orig.height=_e._frame.height-rt*2,this._onTextureUpdate(),it.setRealSize(_.width,_.height,this._resolution),_e.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,_e){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,_e)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,_e,tt){const rt=_.fill;if(Array.isArray(rt)){if(rt.length===1)return rt[0]}else return rt;let it;const st=_.dropShadow?_.dropShadowDistance:0,At=_.padding||0,ut=this.canvas.width/this._resolution-st-At*2,ct=this.canvas.height/this._resolution-st-At*2,ht=rt.slice(),ot=_.fillGradientStops.slice();if(!ot.length){const nt=ht.length+1;for(let at=1;at<nt;++at)ot.push(at/nt)}if(ht.unshift(rt[0]),ot.unshift(0),ht.push(rt[rt.length-1]),ot.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){it=this.context.createLinearGradient(ut/2,At,ut/2,ct+At);const nt=tt.fontProperties.fontSize+_.strokeThickness;for(let at=0;at<_e.length;at++){const lt=tt.lineHeight*(at-1)+nt,dt=tt.lineHeight*at;let ft=dt;at>0&&lt>dt&&(ft=(dt+lt)/2);const pt=dt+nt,gt=tt.lineHeight*(at+1);let mt=pt;at+1<_e.length&&gt<pt&&(mt=(pt+gt)/2);const yt=(mt-ft)/ct;for(let vt=0;vt<ht.length;vt++){let wt=0;typeof ot[vt]=="number"?wt=ot[vt]:wt=vt/ht.length;let bt=Math.min(1,Math.max(0,ft/ct+wt*yt));bt=Number(bt.toFixed(5)),it.addColorStop(bt,ht[vt])}}}else{it=this.context.createLinearGradient(At,ct/2,ut+At,ct/2);const nt=ht.length+1;let at=1;for(let lt=0;lt<ht.length;lt++){let dt;typeof ot[lt]=="number"?dt=ot[lt]:dt=at/nt,it.addColorStop(dt,ht[lt]),at++}}return it}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const _e=sign(this.scale.x)||1;this.scale.x=_e*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const _e=sign(this.scale.y)||1;this.scale.y=_e*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(et,_){var tt;let _e=!1;if((tt=et==null?void 0:et._textures)!=null&&tt.length){for(let rt=0;rt<et._textures.length;rt++)if(et._textures[rt]instanceof Texture){const it=et._textures[rt].baseTexture;_.includes(it)||(_.push(it),_e=!0)}}return _e}function findBaseTexture(et,_){if(et.baseTexture instanceof BaseTexture){const _e=et.baseTexture;return _.includes(_e)||_.push(_e),!0}return!1}function findTexture(et,_){if(et._texture&&et._texture instanceof Texture){const _e=et._texture.baseTexture;return _.includes(_e)||_.push(_e),!0}return!1}function drawText(et,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(et,_){if(_ instanceof TextStyle){const _e=_.toFontString();return TextMetrics.measureFont(_e),!0}return!1}function findText(et,_){if(et instanceof Text){_.includes(et.style)||_.push(et.style),_.includes(et)||_.push(et);const _e=et._texture.baseTexture;return _.includes(_e)||_.push(_e),!0}return!1}function findTextStyle(et,_){return et instanceof TextStyle?(_.includes(et)||_.push(et),!0):!1}const _BasePrepare=class ds{constructor(_){this.limiter=new CountLimiter(ds.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(_e=>{_&&this.add(_),this.queue.length?(this.completes.push(_e),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):_e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let _e=!1;if(_&&!_._destroyed){for(let tt=0,rt=this.uploadHooks.length;tt<rt;tt++)if(this.uploadHooks[tt](this.uploadHookHelper,_)){this.queue.shift(),_e=!0;break}}_e||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let _e=0,tt=_.length;_e<tt;_e++)_[_e]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let _e=0,tt=this.addHooks.length;_e<tt&&!this.addHooks[_e](_,this.queue);_e++);if(_ instanceof Container)for(let _e=_.children.length-1;_e>=0;_e--)this.add(_.children[_e]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(et){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=et}}});function uploadBaseTextures(et,_){return _ instanceof BaseTexture?(_._glTextures[et.CONTEXT_UID]||et.texture.bind(_),!0):!1}function uploadGraphics(et,_){if(!(_ instanceof Graphics))return!1;const{geometry:_e}=_;_.finishPoly(),_e.updateBatches();const{batches:tt}=_e;for(let rt=0;rt<tt.length;rt++){const{texture:it}=tt[rt].style;it&&uploadBaseTextures(et,it.baseTexture)}return _e.batchable||et.geometry.bind(_e,_._resolveDirectShader(et)),!0}function findGraphics(et,_){return et instanceof Graphics?(_.push(et),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,_e={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,_e),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,_e):Shader.from(gl1VertexSrc,gl1FragmentSrc,_e)}render(_){const _e=this.renderer,tt=this.quad;let rt=tt.vertices;rt[0]=rt[6]=_._width*-_.anchor.x,rt[1]=rt[3]=_._height*-_.anchor.y,rt[2]=rt[4]=_._width*(1-_.anchor.x),rt[5]=rt[7]=_._height*(1-_.anchor.y);const it=_.uvRespectAnchor?_.anchor.x:0,st=_.uvRespectAnchor?_.anchor.y:0;rt=tt.uvs,rt[0]=rt[6]=-it,rt[1]=rt[3]=-st,rt[2]=rt[4]=1-it,rt[5]=rt[7]=1-st,tt.invalidate();const At=_._texture,ut=At.baseTexture,ct=ut.alphaMode>0,ht=_.tileTransform.localTransform,ot=_.uvMatrix;let nt=ut.isPowerOfTwo&&At.frame.width===ut.width&&At.frame.height===ut.height;nt&&(ut._glTextures[_e.CONTEXT_UID]?nt=ut.wrapMode!==WRAP_MODES.CLAMP:ut.wrapMode===WRAP_MODES.CLAMP&&(ut.wrapMode=WRAP_MODES.REPEAT));const at=nt?this.simpleShader:this.shader,lt=At.width,dt=At.height,ft=_._width,pt=_._height;tempMat.set(ht.a*lt/ft,ht.b*lt/pt,ht.c*dt/ft,ht.d*dt/pt,ht.tx/ft,ht.ty/pt),tempMat.invert(),nt?tempMat.prepend(ot.mapCoord):(at.uniforms.uMapCoord=ot.mapCoord.toArray(!0),at.uniforms.uClampFrame=ot.uClampFrame,at.uniforms.uClampOffset=ot.uClampOffset),at.uniforms.uTransform=tempMat.toArray(!0),at.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,ct).toArray(at.uniforms.uColor),at.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),at.uniforms.uSampler=At,_e.shader.bind(at),_e.geometry.bind(tt),this.state.blendMode=correctBlendMode(_.blendMode,ct),_e.state.set(this.state),_e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class cn{constructor(_,_e,tt=null){this.linkedSheets=[],this._texture=_ instanceof Texture?_:null,this.baseTexture=_ instanceof BaseTexture?_:this._texture.baseTexture,this.textures={},this.animations={},this.data=_e;const rt=this.baseTexture.resource;this.resolution=this._updateResolution(tt||(rt?rt.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:_e}=this.data.meta;let tt=getResolutionOfUrl(_,null);return tt===null&&(tt=parseFloat(_e??"1")),tt!==1&&this.baseTexture.setResolution(tt),tt}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=cn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let _e=_;const tt=cn.BATCH_SIZE;for(;_e-_<tt&&_e<this._frameKeys.length;){const rt=this._frameKeys[_e],it=this._frames[rt],st=it.frame;if(st){let At=null,ut=null;const ct=it.trimmed!==!1&&it.sourceSize?it.sourceSize:it.frame,ht=new Rectangle(0,0,Math.floor(ct.w)/this.resolution,Math.floor(ct.h)/this.resolution);it.rotated?At=new Rectangle(Math.floor(st.x)/this.resolution,Math.floor(st.y)/this.resolution,Math.floor(st.h)/this.resolution,Math.floor(st.w)/this.resolution):At=new Rectangle(Math.floor(st.x)/this.resolution,Math.floor(st.y)/this.resolution,Math.floor(st.w)/this.resolution,Math.floor(st.h)/this.resolution),it.trimmed!==!1&&it.spriteSourceSize&&(ut=new Rectangle(Math.floor(it.spriteSourceSize.x)/this.resolution,Math.floor(it.spriteSourceSize.y)/this.resolution,Math.floor(st.w)/this.resolution,Math.floor(st.h)/this.resolution)),this.textures[rt]=new Texture(this.baseTexture,At,ht,ut,it.rotated?2:0,it.anchor,it.borders),Texture.addToCache(this.textures[rt],rt.toString())}_e++}}_processAnimations(){const _=this.data.animations||{};for(const _e in _){this.animations[_e]=[];for(let tt=0;tt<_[_e].length;tt++){const rt=_[_e][tt];this.animations[_e].push(this.textures[rt])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*cn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*cn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var _e;for(const tt in this.textures)this.textures[tt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((_e=this._texture)==null||_e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp"];function getCacheableAssets(et,_,_e){const tt={};if(et.forEach(rt=>{tt[rt]=_}),Object.keys(_.textures).forEach(rt=>{tt[rt]=_.textures[rt]}),!_e){const rt=path.dirname(et[0]);_.linkedSheets.forEach((it,st)=>{const At=getCacheableAssets([`${rt}/${_.data.meta.related_multi_packs[st]}`],it,!0);Object.assign(tt,At)})}return tt}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:et=>et instanceof Spritesheet,getCacheableAssets:(et,_)=>getCacheableAssets(et,_,!1)},resolver:{test:et=>{const _=et.split("?")[0].split("."),_e=_.pop(),tt=_.pop();return _e==="json"&&validImages.includes(tt)},parse:et=>{var _e;const _=et.split(".");return{resolution:parseFloat(((_e=settings.RETINA_PREFIX.exec(et))==null?void 0:_e[1])??"1"),format:_[_.length-2],src:et}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(et,_){return path.extname(_.src).toLowerCase()===".json"&&!!et.frames},async parse(et,_,_e){var ut,ct;let tt=path.dirname(_.src);tt&&tt.lastIndexOf("/")!==tt.length-1&&(tt+="/");let rt=tt+et.meta.image;rt=copySearchParams(rt,_.src);const it=(await _e.load([rt]))[rt],st=new Spritesheet(it.baseTexture,et,_.src);await st.parse();const At=(ut=et==null?void 0:et.meta)==null?void 0:ut.related_multi_packs;if(Array.isArray(At)){const ht=[];for(const nt of At){if(typeof nt!="string")continue;let at=tt+nt;(ct=_.data)!=null&&ct.ignoreMultiPack||(at=copySearchParams(at,_.src),ht.push(_e.load({src:at,data:{ignoreMultiPack:!0}})))}const ot=await Promise.all(ht);st.linkedSheets=ot,ot.forEach(nt=>{nt.linkedSheets=[st].concat(st.linkedSheets.filter(at=>at!==nt))})}return st},unload(et){et.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const _e=_.match(/^[a-z]+\s+.+$/gm),tt={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const it in _e){const st=_e[it].match(/^[a-z]+/gm)[0],At=_e[it].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),ut={};for(const ct in At){const ht=At[ct].split("="),ot=ht[0],nt=ht[1].replace(/"/gm,""),at=parseFloat(nt),lt=isNaN(at)?nt:at;ut[ot]=lt}tt[st].push(ut)}const rt=new BitmapFontData;return tt.info.forEach(it=>rt.info.push({face:it.face,size:parseInt(it.size,10)})),tt.common.forEach(it=>rt.common.push({lineHeight:parseInt(it.lineHeight,10)})),tt.page.forEach(it=>rt.page.push({id:parseInt(it.id,10),file:it.file})),tt.char.forEach(it=>rt.char.push({id:parseInt(it.id,10),page:parseInt(it.page,10),x:parseInt(it.x,10),y:parseInt(it.y,10),width:parseInt(it.width,10),height:parseInt(it.height,10),xoffset:parseInt(it.xoffset,10),yoffset:parseInt(it.yoffset,10),xadvance:parseInt(it.xadvance,10)})),tt.kerning.forEach(it=>rt.kerning.push({first:parseInt(it.first,10),second:parseInt(it.second,10),amount:parseInt(it.amount,10)})),tt.distanceField.forEach(it=>rt.distanceField.push({distanceRange:parseInt(it.distanceRange,10),fieldType:it.fieldType})),rt}}class XMLFormat{static test(_){const _e=_;return typeof _!="string"&&"getElementsByTagName"in _&&_e.getElementsByTagName("page").length&&_e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const _e=new BitmapFontData,tt=_.getElementsByTagName("info"),rt=_.getElementsByTagName("common"),it=_.getElementsByTagName("page"),st=_.getElementsByTagName("char"),At=_.getElementsByTagName("kerning"),ut=_.getElementsByTagName("distanceField");for(let ct=0;ct<tt.length;ct++)_e.info.push({face:tt[ct].getAttribute("face"),size:parseInt(tt[ct].getAttribute("size"),10)});for(let ct=0;ct<rt.length;ct++)_e.common.push({lineHeight:parseInt(rt[ct].getAttribute("lineHeight"),10)});for(let ct=0;ct<it.length;ct++)_e.page.push({id:parseInt(it[ct].getAttribute("id"),10)||0,file:it[ct].getAttribute("file")});for(let ct=0;ct<st.length;ct++){const ht=st[ct];_e.char.push({id:parseInt(ht.getAttribute("id"),10),page:parseInt(ht.getAttribute("page"),10)||0,x:parseInt(ht.getAttribute("x"),10),y:parseInt(ht.getAttribute("y"),10),width:parseInt(ht.getAttribute("width"),10),height:parseInt(ht.getAttribute("height"),10),xoffset:parseInt(ht.getAttribute("xoffset"),10),yoffset:parseInt(ht.getAttribute("yoffset"),10),xadvance:parseInt(ht.getAttribute("xadvance"),10)})}for(let ct=0;ct<At.length;ct++)_e.kerning.push({first:parseInt(At[ct].getAttribute("first"),10),second:parseInt(At[ct].getAttribute("second"),10),amount:parseInt(At[ct].getAttribute("amount"),10)});for(let ct=0;ct<ut.length;ct++)_e.distanceField.push({fieldType:ut[ct].getAttribute("fieldType"),distanceRange:parseInt(ut[ct].getAttribute("distanceRange"),10)});return _e}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(et){for(let _=0;_<formats.length;_++)if(formats[_].test(et))return formats[_];return null}function generateFillStyle(et,_,_e,tt,rt,it){const st=_e.fill;if(Array.isArray(st)){if(st.length===1)return st[0]}else return st;let At;const ut=_e.dropShadow?_e.dropShadowDistance:0,ct=_e.padding||0,ht=et.width/tt-ut-ct*2,ot=et.height/tt-ut-ct*2,nt=st.slice(),at=_e.fillGradientStops.slice();if(!at.length){const lt=nt.length+1;for(let dt=1;dt<lt;++dt)at.push(dt/lt)}if(nt.unshift(st[0]),at.unshift(0),nt.push(st[st.length-1]),at.push(1),_e.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){At=_.createLinearGradient(ht/2,ct,ht/2,ot+ct);let lt=0;const dt=(it.fontProperties.fontSize+_e.strokeThickness)/ot;for(let ft=0;ft<rt.length;ft++){const pt=it.lineHeight*ft;for(let gt=0;gt<nt.length;gt++){let mt=0;typeof at[gt]=="number"?mt=at[gt]:mt=gt/nt.length;const yt=pt/ot+mt*dt;let vt=Math.max(lt,yt);vt=Math.min(vt,1),At.addColorStop(vt,nt[gt]),lt=vt}}}else{At=_.createLinearGradient(ct,ot/2,ht+ct,ot/2);const lt=nt.length+1;let dt=1;for(let ft=0;ft<nt.length;ft++){let pt;typeof at[ft]=="number"?pt=at[ft]:pt=dt/lt,At.addColorStop(pt,nt[ft]),dt++}}return At}function drawGlyph(et,_,_e,tt,rt,it,st){const At=_e.text,ut=_e.fontProperties;_.translate(tt,rt),_.scale(it,it);const ct=st.strokeThickness/2,ht=-(st.strokeThickness/2);if(_.font=st.toFontString(),_.lineWidth=st.strokeThickness,_.textBaseline=st.textBaseline,_.lineJoin=st.lineJoin,_.miterLimit=st.miterLimit,_.fillStyle=generateFillStyle(et,_,st,it,[At],_e),_.strokeStyle=st.stroke,st.dropShadow){const ot=st.dropShadowColor,nt=st.dropShadowBlur*it,at=st.dropShadowDistance*it;_.shadowColor=Color.shared.setValue(ot).setAlpha(st.dropShadowAlpha).toRgbaString(),_.shadowBlur=nt,_.shadowOffsetX=Math.cos(st.dropShadowAngle)*at,_.shadowOffsetY=Math.sin(st.dropShadowAngle)*at}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;st.stroke&&st.strokeThickness&&_.strokeText(At,ct,ht+_e.lineHeight-ut.descent),st.fill&&_.fillText(At,ct,ht+_e.lineHeight-ut.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(et){return et.codePointAt?et.codePointAt(0):et.charCodeAt(0)}function splitTextToCharacters(et){return Array.from?Array.from(et):et.split("")}function resolveCharacters(et){typeof et=="string"&&(et=[et]);const _=[];for(let _e=0,tt=et.length;_e<tt;_e++){const rt=et[_e];if(Array.isArray(rt)){if(rt.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${rt.length}.`);const it=rt[0].charCodeAt(0),st=rt[1].charCodeAt(0);if(st<it)throw new Error("[BitmapFont]: Invalid character range.");for(let At=it,ut=st;At<=ut;At++)_.push(String.fromCharCode(At))}else _.push(...splitTextToCharacters(rt))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class Mr{constructor(_,_e,tt){var ht;const[rt]=_.info,[it]=_.common,[st]=_.page,[At]=_.distanceField,ut=getResolutionOfUrl(st.file),ct={};this._ownsTextures=tt,this.font=rt.face,this.size=rt.size,this.lineHeight=it.lineHeight/ut,this.chars={},this.pageTextures=ct;for(let ot=0;ot<_.page.length;ot++){const{id:nt,file:at}=_.page[ot];ct[nt]=_e instanceof Array?_e[ot]:_e[at],At!=null&&At.fieldType&&At.fieldType!=="none"&&(ct[nt].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,ct[nt].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let ot=0;ot<_.char.length;ot++){const{id:nt,page:at}=_.char[ot];let{x:lt,y:dt,width:ft,height:pt,xoffset:gt,yoffset:mt,xadvance:yt}=_.char[ot];lt/=ut,dt/=ut,ft/=ut,pt/=ut,gt/=ut,mt/=ut,yt/=ut;const vt=new Rectangle(lt+ct[at].frame.x/ut,dt+ct[at].frame.y/ut,ft,pt);this.chars[nt]={xOffset:gt,yOffset:mt,xAdvance:yt,kerning:{},texture:new Texture(ct[at].baseTexture,vt),page:at}}for(let ot=0;ot<_.kerning.length;ot++){let{first:nt,second:at,amount:lt}=_.kerning[ot];nt/=ut,at/=ut,lt/=ut,this.chars[at]&&(this.chars[at].kerning[nt]=lt)}this.distanceFieldRange=At==null?void 0:At.distanceRange,this.distanceFieldType=((ht=At==null?void 0:At.fieldType)==null?void 0:ht.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,_e,tt){let rt;if(_ instanceof BitmapFontData)rt=_;else{const st=autoDetectFormat(_);if(!st)throw new Error("Unrecognized data format for font.");rt=st.parse(_)}_e instanceof Texture&&(_e=[_e]);const it=new Mr(rt,_e,tt);return Mr.available[it.font]=it,it}static uninstall(_){const _e=Mr.available[_];if(!_e)throw new Error(`No font found named '${_}'`);_e.destroy(),delete Mr.available[_]}static from(_,_e,tt){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:rt,padding:it,resolution:st,textureWidth:At,textureHeight:ut,...ct}=Object.assign({},Mr.defaultOptions,tt),ht=resolveCharacters(rt),ot=_e instanceof TextStyle?_e:new TextStyle(_e),nt=At,at=new BitmapFontData;at.info[0]={face:ot.fontFamily,size:ot.fontSize},at.common[0]={lineHeight:ot.fontSize};let lt=0,dt=0,ft,pt,gt,mt=0;const yt=[];for(let wt=0;wt<ht.length;wt++){ft||(ft=settings.ADAPTER.createCanvas(),ft.width=At,ft.height=ut,pt=ft.getContext("2d"),gt=new BaseTexture(ft,{resolution:st,...ct}),yt.push(new Texture(gt)),at.page.push({id:yt.length-1,file:""}));const bt=ht[wt],Bt=TextMetrics.measureText(bt,ot,!1,ft),Tt=Bt.width,It=Math.ceil(Bt.height),Dt=Math.ceil((ot.fontStyle==="italic"?2:1)*Tt);if(dt>=ut-It*st){if(dt===0)throw new Error(`[BitmapFont] textureHeight ${ut}px is too small (fontFamily: '${ot.fontFamily}', fontSize: ${ot.fontSize}px, char: '${bt}')`);--wt,ft=null,pt=null,gt=null,dt=0,lt=0,mt=0;continue}if(mt=Math.max(It+Bt.fontProperties.descent,mt),Dt*st+lt>=nt){if(lt===0)throw new Error(`[BitmapFont] textureWidth ${At}px is too small (fontFamily: '${ot.fontFamily}', fontSize: ${ot.fontSize}px, char: '${bt}')`);--wt,dt+=mt*st,dt=Math.ceil(dt),lt=0,mt=0;continue}drawGlyph(ft,pt,Bt,lt,dt,st,ot);const Ut=extractCharCode(Bt.text);at.char.push({id:Ut,page:yt.length-1,x:lt/st,y:dt/st,width:Dt,height:It,xoffset:0,yoffset:0,xadvance:Tt-(ot.dropShadow?ot.dropShadowDistance:0)-(ot.stroke?ot.strokeThickness:0)}),lt+=(Dt+2*it)*st,lt=Math.ceil(lt)}if(!(tt!=null&&tt.skipKerning))for(let wt=0,bt=ht.length;wt<bt;wt++){const Bt=ht[wt];for(let Tt=0;Tt<bt;Tt++){const It=ht[Tt],Dt=pt.measureText(Bt).width,Ut=pt.measureText(It).width,_t=pt.measureText(Bt+It).width-(Dt+Ut);_t&&at.kerning.push({first:extractCharCode(Bt),second:extractCharCode(It),amount:_t})}}const vt=new Mr(at,yt,!0);return Mr.available[_]!==void 0&&Mr.uninstall(_),Mr.available[_]=vt,vt}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class fs extends Container{constructor(_,_e={}){super();const{align:tt,tint:rt,maxWidth:it,letterSpacing:st,fontName:At,fontSize:ut}=Object.assign({},fs.styleDefaults,_e);if(!BitmapFont.available[At])throw new Error(`Missing BitmapFont "${At}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=tt,this._tintColor=new Color(rt),this._font=void 0,this._fontName=At,this._fontSize=ut,this.text=_,this._maxWidth=it,this._maxLineHeight=0,this._letterSpacing=st,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Dt;const _=BitmapFont.available[this._fontName],_e=this.fontSize,tt=_e/_.size,rt=new Point,it=[],st=[],At=[],ut=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",ct=splitTextToCharacters(ut),ht=this._maxWidth*_.size/_e,ot=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let nt=null,at=0,lt=0,dt=0,ft=-1,pt=0,gt=0,mt=0,yt=0;for(let Ut=0;Ut<ct.length;Ut++){const _t=ct[Ut],St=extractCharCode(_t);if(/(?:\s)/.test(_t)&&(ft=Ut,pt=at,yt++),_t==="\r"||_t===`
`){st.push(at),At.push(-1),lt=Math.max(lt,at),++dt,++gt,rt.x=0,rt.y+=_.lineHeight,nt=null,yt=0;continue}const xt=_.chars[St];if(!xt)continue;nt&&xt.kerning[nt]&&(rt.x+=xt.kerning[nt]);const Ct=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};Ct.texture=xt.texture,Ct.line=dt,Ct.charCode=St,Ct.position.x=Math.round(rt.x+xt.xOffset+this._letterSpacing/2),Ct.position.y=Math.round(rt.y+xt.yOffset),Ct.prevSpaces=yt,it.push(Ct),at=Ct.position.x+Math.max(xt.xAdvance-xt.xOffset,xt.texture.orig.width),rt.x+=xt.xAdvance+this._letterSpacing,mt=Math.max(mt,xt.yOffset+xt.texture.height),nt=St,ft!==-1&&ht>0&&rt.x>ht&&(++gt,removeItems(it,1+ft-gt,1+Ut-ft),Ut=ft,ft=-1,st.push(pt),At.push(it.length>0?it[it.length-1].prevSpaces:0),lt=Math.max(lt,pt),dt++,rt.x=0,rt.y+=_.lineHeight,nt=null,yt=0)}const vt=ct[ct.length-1];vt!=="\r"&&vt!==`
`&&(/(?:\s)/.test(vt)&&(at=pt),st.push(at),lt=Math.max(lt,at),At.push(-1));const wt=[];for(let Ut=0;Ut<=dt;Ut++){let _t=0;this._align==="right"?_t=lt-st[Ut]:this._align==="center"?_t=(lt-st[Ut])/2:this._align==="justify"&&(_t=At[Ut]<0?0:(lt-st[Ut])/At[Ut]),wt.push(_t)}const bt=it.length,Bt={},Tt=[],It=this._activePagesMeshData;ot.push(...It);for(let Ut=0;Ut<bt;Ut++){const _t=it[Ut].texture,St=_t.baseTexture.uid;if(!Bt[St]){let xt=ot.pop();if(!xt){const Ft=new MeshGeometry;let Lt,Mt;_.distanceFieldType==="none"?(Lt=new MeshMaterial(Texture.EMPTY),Mt=BLEND_MODES.NORMAL):(Lt=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Mt=BLEND_MODES.NORMAL_NPM);const Rt=new Mesh(Ft,Lt);Rt.blendMode=Mt,xt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Rt,vertices:null,uvs:null,indices:null}}xt.index=0,xt.indexCount=0,xt.vertexCount=0,xt.uvsCount=0,xt.total=0;const{_textureCache:Ct}=this;Ct[St]=Ct[St]||new Texture(_t.baseTexture),xt.mesh.texture=Ct[St],xt.mesh.tint=this._tintColor.value,Tt.push(xt),Bt[St]=xt}Bt[St].total++}for(let Ut=0;Ut<It.length;Ut++)Tt.includes(It[Ut])||this.removeChild(It[Ut].mesh);for(let Ut=0;Ut<Tt.length;Ut++)Tt[Ut].mesh.parent!==this&&this.addChild(Tt[Ut].mesh);this._activePagesMeshData=Tt;for(const Ut in Bt){const _t=Bt[Ut],St=_t.total;if(!(((Dt=_t.indices)==null?void 0:Dt.length)>6*St)||_t.vertices.length<Mesh.BATCHABLE_SIZE*2)_t.vertices=new Float32Array(4*2*St),_t.uvs=new Float32Array(4*2*St),_t.indices=new Uint16Array(6*St);else{const xt=_t.total,Ct=_t.vertices;for(let Ft=xt*4*2;Ft<Ct.length;Ft++)Ct[Ft]=0}_t.mesh.size=6*St}for(let Ut=0;Ut<bt;Ut++){const _t=it[Ut];let St=_t.position.x+wt[_t.line]*(this._align==="justify"?_t.prevSpaces:1);this._roundPixels&&(St=Math.round(St));const xt=St*tt,Ct=_t.position.y*tt,Ft=_t.texture,Lt=Bt[Ft.baseTexture.uid],Mt=Ft.frame,Rt=Ft._uvs,Nt=Lt.index++;Lt.indices[Nt*6+0]=0+Nt*4,Lt.indices[Nt*6+1]=1+Nt*4,Lt.indices[Nt*6+2]=2+Nt*4,Lt.indices[Nt*6+3]=0+Nt*4,Lt.indices[Nt*6+4]=2+Nt*4,Lt.indices[Nt*6+5]=3+Nt*4,Lt.vertices[Nt*8+0]=xt,Lt.vertices[Nt*8+1]=Ct,Lt.vertices[Nt*8+2]=xt+Mt.width*tt,Lt.vertices[Nt*8+3]=Ct,Lt.vertices[Nt*8+4]=xt+Mt.width*tt,Lt.vertices[Nt*8+5]=Ct+Mt.height*tt,Lt.vertices[Nt*8+6]=xt,Lt.vertices[Nt*8+7]=Ct+Mt.height*tt,Lt.uvs[Nt*8+0]=Rt.x0,Lt.uvs[Nt*8+1]=Rt.y0,Lt.uvs[Nt*8+2]=Rt.x1,Lt.uvs[Nt*8+3]=Rt.y1,Lt.uvs[Nt*8+4]=Rt.x2,Lt.uvs[Nt*8+5]=Rt.y2,Lt.uvs[Nt*8+6]=Rt.x3,Lt.uvs[Nt*8+7]=Rt.y3}this._textWidth=lt*tt,this._textHeight=(rt.y+_.lineHeight)*tt;for(const Ut in Bt){const _t=Bt[Ut];if(this.anchor.x!==0||this.anchor.y!==0){let Ft=0;const Lt=this._textWidth*this.anchor.x,Mt=this._textHeight*this.anchor.y;for(let Rt=0;Rt<_t.total;Rt++)_t.vertices[Ft++]-=Lt,_t.vertices[Ft++]-=Mt,_t.vertices[Ft++]-=Lt,_t.vertices[Ft++]-=Mt,_t.vertices[Ft++]-=Lt,_t.vertices[Ft++]-=Mt,_t.vertices[Ft++]-=Lt,_t.vertices[Ft++]-=Mt}this._maxLineHeight=mt*tt;const St=_t.mesh.geometry.getBuffer("aVertexPosition"),xt=_t.mesh.geometry.getBuffer("aTextureCoord"),Ct=_t.mesh.geometry.getIndex();St.data=_t.vertices,xt.data=_t.uvs,Ct.data=_t.indices,St.update(),xt.update(),Ct.update()}for(let Ut=0;Ut<it.length;Ut++)charRenderDataPool.push(it[Ut]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:_e,distanceFieldType:tt,size:rt}=BitmapFont.available[this._fontName];if(tt!=="none"){const{a:it,b:st,c:At,d:ut}=this.worldTransform,ct=Math.sqrt(it*it+st*st),ht=Math.sqrt(At*At+ut*ut),ot=(Math.abs(ct)+Math.abs(ht))/2,nt=this.fontSize/rt,at=_._view.resolution;for(const lt of this._activePagesMeshData)lt.mesh.shader.uniforms.uFWidth=ot*_e*nt*at}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let _e=0;_e<this._activePagesMeshData.length;_e++)this._activePagesMeshData[_e].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:_e}=this,tt=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;tt.push(...this._activePagesMeshData);for(const rt of this._activePagesMeshData)this.removeChild(rt.mesh);this._activePagesMeshData=[],tt.filter(rt=>_e[rt.mesh.texture.baseTexture.uid]).forEach(rt=>{rt.mesh.texture=Texture.EMPTY});for(const rt in _e)_e[rt].destroy(),delete _e[rt];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(et){return validExtensions.includes(path.extname(et).toLowerCase())},async testParse(et){return TextFormat.test(et)||XMLStringFormat.test(et)},async parse(et,_,_e){const tt=TextFormat.test(et)?TextFormat.parse(et):XMLStringFormat.parse(et),{src:rt}=_,{page:it}=tt,st=[];for(let ct=0;ct<it.length;++ct){const ht=it[ct].file;let ot=path.join(path.dirname(rt),ht);ot=copySearchParams(ot,rt),st.push(ot)}const At=await _e.load(st),ut=st.map(ct=>At[ct]);return BitmapFont.install(tt,ut,!0)},async load(et,_){return(await settings.ADAPTER.fetch(et)).text()},unload(et){et.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class Xr extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new Xr(Object.keys(Xr.defaultOptions).reduce((_e,tt)=>({..._e,[tt]:_[tt]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete Xr.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,_e={}){const{availableFonts:tt}=Xr;if(tt[_]){const rt=tt[_];return this._fonts.push(rt),rt.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(rt=>rt.blob()).then(async rt=>new Promise((it,st)=>{const At=URL.createObjectURL(rt),ut=new FileReader;ut.onload=()=>it([At,ut.result]),ut.onerror=st,ut.readAsDataURL(rt)})).then(async([rt,it])=>{const st=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:rt,dataSrc:it,refs:1,originalUrl:_,fontFace:null},_e);tt[_]=st,this._fonts.push(st),this.styleID++;const At=new FontFace(st.family,`url(${st.src})`,{weight:st.weight,style:st.style,display:st.display});st.fontFace=At,await At.load(),document.fonts.add(At),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const _e=_.filter(tt=>!this._overrides.includes(tt));_e.length>0&&(this._overrides.push(..._e),this.styleID++)}removeOverride(..._){const _e=_.filter(tt=>this._overrides.includes(tt));_e.length>0&&(this._overrides=this._overrides.filter(tt=>!_e.includes(tt)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,_e)=>`${_}
            @font-face {
                font-family: "${_e.family}";
                src: url('${_e.dataSrc}');
                font-weight: ${_e.weight};
                font-style: ${_e.style};
                font-display: ${_e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const _e=this.dropShadowAlpha,tt=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),rt=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&_e<1&&(_+=(_e*255|0).toString(16).padStart(2,"0"));const it=`${tt}px ${rt}px`;return this.dropShadowBlur>0?`text-shadow: ${it} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${it} ${_}`}reset(){Object.assign(this,Xr.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(_e=>setTimeout(_e,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class Yr extends Sprite{constructor(_="",_e={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const tt=new Image,rt=Texture.from(tt,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});rt.orig=new Rectangle,rt.trim=new Rectangle,this.texture=rt;const it="http://www.w3.org/2000/svg",st="http://www.w3.org/1999/xhtml",At=document.createElementNS(it,"svg"),ut=document.createElementNS(it,"foreignObject"),ct=document.createElementNS(st,"div"),ht=document.createElementNS(st,"style");ut.setAttribute("width","10000"),ut.setAttribute("height","10000"),ut.style.overflow="hidden",At.appendChild(ut),this.maxWidth=Yr.defaultMaxWidth,this.maxHeight=Yr.defaultMaxHeight,this._domElement=ct,this._styleElement=ht,this._svgRoot=At,this._foreignObject=ut,this._foreignObject.appendChild(ht),this._foreignObject.appendChild(ct),this._image=tt,this._loadImage=new Image,this._autoResolution=Yr.defaultAutoResolution,this._resolution=Yr.defaultResolution??settings.RESOLUTION,this.text=_,this.style=_e}measureText(_){var ht,ot;const{text:_e,style:tt,resolution:rt}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:_e,style:tt.toCSS(rt)}),this._styleElement.textContent=tt.toGlobalCSS(),document.body.appendChild(this._svgRoot);const it=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:st,height:At}=it;(st>this.maxWidth||At>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const ut=Math.min(this.maxWidth,Math.ceil(st)),ct=Math.min(this.maxHeight,Math.ceil(At));return this._svgRoot.setAttribute("width",ut.toString()),this._svgRoot.setAttribute("height",ct.toString()),_e!==this._text&&(this._domElement.innerHTML=this._text),tt!==this._style&&(Object.assign(this._domElement,{style:(ht=this._style)==null?void 0:ht.toCSS(rt)}),this._styleElement.textContent=(ot=this._style)==null?void 0:ot.toGlobalCSS()),{width:ut+tt.padding*2,height:ct+tt.padding*2}}async updateText(_=!0){const{style:_e,_image:tt,_loadImage:rt}=this;if(this.localStyleID!==_e.styleID&&(this.dirty=!0,this.localStyleID=_e.styleID),!this.dirty&&_)return;const{width:it,height:st}=this.measureText();tt.width=rt.width=Math.ceil(Math.max(1,it)),tt.height=rt.height=Math.ceil(Math.max(1,st)),this._updateID++;const At=this._updateID;await new Promise(ut=>{rt.onload=async()=>{if(At<this._updateID){ut();return}await _e.onBeforeDraw(),tt.src=rt.src,rt.onload=null,rt.src="",this.updateTexture(),ut()};const ct=new XMLSerializer().serializeToString(this._svgRoot);rt.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(ct)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:_e,_image:tt,resolution:rt}=this,{padding:it}=_,{baseTexture:st}=_e;_e.trim.width=_e._frame.width=tt.width/rt,_e.trim.height=_e._frame.height=tt.height/rt,_e.trim.x=-it,_e.trim.y=-it,_e.orig.width=_e._frame.width-it*2,_e.orig.height=_e._frame.height-it*2,this._onTextureUpdate(),st.setRealSize(tt.width,tt.height,rt),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var tt,rt,it,st,At;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},Yr.defaultDestroyOptions,_),super.destroy(_);const _e=null;this.ownsStyle&&((tt=this._style)==null||tt.cleanFonts()),this._style=_e,(rt=this._svgRoot)==null||rt.remove(),this._svgRoot=_e,(it=this._domElement)==null||it.remove(),this._domElement=_e,(st=this._foreignObject)==null||st.remove(),this._foreignObject=_e,(At=this._styleElement)==null||At.remove(),this._styleElement=_e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=_e,this._image.src="",this._image=_e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const _e=sign(this.scale.x)||1;this.scale.x=_e*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const _e=sign(this.scale.y)||1;this.scale.y=_e*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;const createInitialObjects=async(et,_)=>{const _e=await Promise.all([Assets.load("/assets/logo.png"),Assets.load("/assets/dingboardmascot.png"),Assets.load("/assets/anyasutskever.png")]),tt=[];return tt.push(_.createItem(Math.min(et.width/4),Math.min(et.height/4),_e[1],1,0)),tt.push(_.createItem(Math.min(et.width/3)+100,Math.min(et.height/3)+10,_e[0],.35,0)),tt.push(_.createItem(Math.min(et.width/3)-100,Math.min(et.height/3)+100,_e[2],1,0)),tt[0].scale.set(.3),tt},rotateItemAround=({item:et,rotateAround:_,deltaRadians:_e,initialItemPosition:tt})=>{const rt=et.parent.toLocal(_);let it=tt.x-rt.x,st=tt.y-rt.y;const At=it*Math.cos(_e)-st*Math.sin(_e),ut=it*Math.sin(_e)+st*Math.cos(_e);et.x=At+rt.x,et.y=ut+rt.y,et.rotation=_e},getSelectedItemBounds=et=>{let _=1/0,_e=1/0,tt=-1/0,rt=-1/0;return et.forEach(it=>{const st=it.getNonTransparentBounds();_=Math.min(_,st.x),_e=Math.min(_e,st.y),tt=Math.max(tt,st.x+st.width),rt=Math.max(rt,st.y+st.height)}),{x:_,y:_e,width:tt-_,height:rt-_e}},getSelectedItemBoundsAsRect=et=>{let _=1/0,_e=1/0,tt=-1/0,rt=-1/0;return et.forEach(it=>{const st=it.getNonTransparentBounds();_=Math.min(_,st.x),_e=Math.min(_e,st.y),tt=Math.max(tt,st.x+st.width),rt=Math.max(rt,st.y+st.height)}),new Rectangle(_,_e,tt-_,rt-_e)},positionIsInSelectedItemsBounds=({position:et,selectedItems:_,leeway:_e=0})=>{const tt=getSelectedItemBounds(_);return et.x>=tt.x-_e&&et.x<=tt.x+tt.width+_e&&et.y>=tt.y-_e&&et.y<=tt.y+tt.height+_e},getItemsRelativeCenterPositions=(et,_)=>{const _e=getSelectedItemBounds(et),tt=_e.x+_e.width/2,rt=_e.y+_e.height/2,it=[];return et.forEach(st=>{const At=st.getBounds(),ut=_.toLocal({x:At.x,y:At.y}),ct=ut.x,ht=ut.y;it.push({x:ct-tt,y:ht-rt})}),it};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let et=0;et<256;++et)byteToHex.push((et+256).toString(16).slice(1));function unsafeStringify(et,_=0){return byteToHex[et[_+0]]+byteToHex[et[_+1]]+byteToHex[et[_+2]]+byteToHex[et[_+3]]+"-"+byteToHex[et[_+4]]+byteToHex[et[_+5]]+"-"+byteToHex[et[_+6]]+byteToHex[et[_+7]]+"-"+byteToHex[et[_+8]]+byteToHex[et[_+9]]+"-"+byteToHex[et[_+10]]+byteToHex[et[_+11]]+byteToHex[et[_+12]]+byteToHex[et[_+13]]+byteToHex[et[_+14]]+byteToHex[et[_+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(et,_,_e){if(native.randomUUID&&!_&&!et)return native.randomUUID();et=et||{};const tt=et.random||(et.rng||rng)();if(tt[6]=tt[6]&15|64,tt[8]=tt[8]&63|128,_){_e=_e||0;for(let rt=0;rt<16;++rt)_[_e+rt]=tt[rt];return _}return unsafeStringify(tt)}const createSpriteMaskFilter=()=>new SpriteMaskFilter(void 0,`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= 1.0 - (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`),createBitmaskTexture=(et,_,_e)=>{let tt=RenderTexture.create({width:et,height:_}),rt=new Sprite(tt),it=createSpriteMaskFilter();it.maskSprite=rt;let st=null,At="",ut=null;const ct=new Graphics,ht=new Graphics,ot=({x:lt,y:dt,radius:ft,id:pt})=>{ut!==ft&&(ct.clear(),ct.beginFill(16777215),ct.drawCircle(0,0,ft),ct.endFill(),ut=ft),ct.position.set(lt,dt),_e.render(ct,{renderTexture:tt,clear:!1}),At!==pt?(At=pt,ct.position.set(lt,dt),_e.render(ct,{renderTexture:tt,clear:!1}),st=new Point(lt,dt)):(ht.clear().lineStyle({width:ft*2,color:16777215}).moveTo(st.x,st.y).lineTo(lt,dt),_e.render(ht,{renderTexture:tt,clear:!1}),st.set(lt,dt))};let nt=new Sprite;function at(lt,dt){const ft=lt.dims[3],pt=Math.floor(lt.data.length/ft),gt=lt.data,mt=16777215,yt=new Uint8Array(ft*pt*4);for(let bt=0;bt<gt.length;bt++)if(dt?gt[bt]<0:gt[bt]>0){let Tt=bt%ft,Dt=(Math.floor(bt/ft)*ft+Tt)*4;yt[Dt]=mt>>16&255,yt[Dt+1]=mt>>8&255,yt[Dt+2]=mt&255,yt[Dt+3]=255}const vt=BaseTexture.fromBuffer(yt,ft,pt),wt=new Texture(vt);nt.texture=wt,_e.render(nt,{renderTexture:tt,clear:!1})}return{draw:ot,maskSprite:rt,filter:it,maskWithSamOutput:at}},createSegmentationTexture=(et,_,_e)=>{let tt=RenderTexture.create({width:et,height:_}),rt=new Sprite(tt);return rt.eventMode="none",{segmentationSprite:rt,updateMask:At=>{const ut=At.data,ct=16742854,ht=new Uint8Array(et*_*4);for(let at=0;at<ut.length;at++)if(ut[at]>0){let lt=at%et,ft=(Math.floor(at/et)*et+lt)*4;ht[ft]=ct>>16&255,ht[ft+1]=ct>>8&255,ht[ft+2]=ct&255,ht[ft+3]=76}const ot=BaseTexture.fromBuffer(ht,et,_),nt=new Texture(ot);rt.texture=nt,_e.render(rt,{renderTexture:tt,clear:!0})},clear:()=>{const At=new Uint8Array(et*_*4),ut=BaseTexture.fromBuffer(At,et,_);rt.texture=new Texture(ut),_e.render(rt,{renderTexture:tt,clear:!0})}}},changeContainsPointFunctionToRespectTransparency=(et,_)=>(_.containsPoint=function(_e){const tt={x:0,y:0};this.worldTransform.applyInverse(_e,tt);const rt=et.texture.orig.width,it=et.texture.orig.height;if(tt.x<0||tt.x>=rt||tt.y<0||tt.y>=it)return!1;const st=et.texture,ut=et.texture.baseTexture.resolution;let ct=Math.round((tt.x+st.frame.x)*ut),ht=Math.round((tt.y+st.frame.y)*ut);return et.renderedHitmap[ht]&&et.renderedHitmap[ht][ct]===1},et);class ImageItem extends Container{constructor(_e,tt,rt){super();Ir(this,"display");Ir(this,"texture");Ir(this,"rendererRef");Ir(this,"filters");Ir(this,"log");Ir(this,"blend_mode");Ir(this,"segmentationRef");Ir(this,"bitMaskTextureRef");Ir(this,"ding");Ir(this,"renderedHitmapOffsets");Ir(this,"renderedHitmap");Ir(this,"lastSegment");Ir(this,"type","image");Ir(this,"rasterEngine");this.texture=_e,this.rasterEngine=rt,this.rendererRef=tt,this.filters=[],this.log={eraseAt:[],mask:[]};let it=new Sprite(this.texture);this.addChild(it),this.display=it,this.blend_mode=BLEND_MODES.NORMAL,this.eventMode="static",this.cursor="pointer",this.segmentationRef=createSegmentationTexture(this.texture.width,this.texture.height,tt),this.addChild(this.segmentationRef.segmentationSprite),this.ding={id:generateID(),type:"item"},this.bitMaskTextureRef=createBitmaskTexture(this.texture.width,this.texture.height,tt),this.filters.push(this.bitMaskTextureRef.filter),this.addChild(this.bitMaskTextureRef.maskSprite),this.createHitmap(),changeContainsPointFunctionToRespectTransparency(this,it)}updateHitmapWithPixels(_e,tt,rt){let it=new Array(tt),st=rt,At=0,ut=tt,ct=0;for(let ht=0;ht<tt;ht++){it[ht]=new Array(rt);for(let ot=0;ot<rt;ot++){let nt=ht*rt+ot,at=_e[nt*4+3];it[ht][ot]=at>=255?1:0,at>0&&(ot<st&&(st=ot),ot>At&&(At=ot),ht<ut&&(ut=ht),ht>ct&&(ct=ht))}}return{hitmap:it,offsets:{minX:st,minY:ut,maxX:At+1,maxY:ct+1}}}async createHitmap(){const _e=await this.rendererRef.extract.pixels(this),tt=this.texture.baseTexture,rt=tt.realHeight,it=tt.realWidth;let{hitmap:st,offsets:At}=this.updateHitmapWithPixels(_e,rt,it);this.renderedHitmapOffsets=At,this.renderedHitmap=st}async updateHitmap(){const{pixels:_e,width:tt,height:rt}=await this.rasterEngine.renderItemPixels(this);let{hitmap:it,offsets:st}=this.updateHitmapWithPixels(_e,rt,tt);this.renderedHitmapOffsets=st,this.renderedHitmap=it}getNonTransparentBounds(){if(!this.renderedHitmapOffsets)return this.getBounds();const{minX:_e,minY:tt,maxX:rt,maxY:it}=this.renderedHitmapOffsets,At=[new Point(_e,tt),new Point(rt,tt),new Point(_e,it),new Point(rt,it)].map(ct=>this.toGlobal(ct));return new Rectangle(Math.min(...At.map(ct=>ct.x)),Math.min(...At.map(ct=>ct.y)),Math.max(...At.map(ct=>ct.x))-Math.min(...At.map(ct=>ct.x)),Math.max(...At.map(ct=>ct.y))-Math.min(...At.map(ct=>ct.y)))}eraseAt({x:_e,y:tt,radius:rt,id:it}){this.log.eraseAt.push({x:_e,y:tt,radius:rt,id:it}),this.bitMaskTextureRef.draw({x:_e,y:tt,radius:rt,id:it})}getRealDims(){const _e=this.texture.baseTexture.realWidth,tt=this.texture.baseTexture.realHeight;return{width:_e,height:tt}}updateSniper(_e){if(!_e){this.lastSegment=void 0,this.segmentationRef.clear();return}this.lastSegment=_e,this.segmentationRef.updateMask(_e)}eraseWithSegment(_e,tt=!1){this.log.mask.push({mask:_e,negative:tt}),this.bitMaskTextureRef.maskWithSamOutput(_e,tt)}getTextureCacheId(){return this.texture.textureCacheIds[0]}getCopy(){const _e=this.log.eraseAt.map(ct=>({...ct})),tt=[...this.log.mask],rt=this.texture,it=this.x,st=this.y,At=this.rotation,ut=this.scale.clone();return{type:this.type,props:{eraseAt:_e,texture:rt,x:it,y:st,rotation:At,scale:ut,mask:tt}}}}const generateID=()=>{const et=Date.now(),_=v4();return`${et}-${_}`},createCopyFromCopy=et=>{if(et.type==="image"){const _e=et.props.eraseAt.map(rt=>({...rt})),tt={...et.props,eraseAt:_e};return{type:et.type,props:tt}}const _={...et.props};return{type:et.type,props:_}},createItemCopy=et=>et instanceof ImageItem?et.getCopy():createCopyFromCopy(et),MAX_HISTORY=100,registerHistoryEvents=(et,_,_e)=>{const tt={undostack:[],currentState:[],redostack:[]},rt=()=>{if(tt.undostack.length>0){tt.currentState&&tt.redostack.push(tt.currentState.map(ht=>createItemCopy(ht))),_e.clear(),et.removeChildren(0);const ct=tt.undostack.pop().map(ht=>_.createItemFromCopy(ht,!0));tt.currentState=ct.map(ht=>createItemCopy(ht))}},it=()=>{if(tt.redostack.length>0){_e.clear(),et.removeChildren(0);const ct=tt.redostack.pop().map(ht=>_.createItemFromCopy(ht,!0));tt.undostack.push(tt.currentState.map(ht=>createItemCopy(ht))),tt.currentState=ct.map(ht=>createItemCopy(ht))}},st=()=>{const ht=_.getItems().map(ot=>createItemCopy(ot));tt.undostack.length>=MAX_HISTORY&&tt.undostack.shift(),tt.currentState&&tt.undostack.push(tt.currentState.map(ot=>createItemCopy(ot))),tt.currentState=ht,tt.redostack=[]},At=()=>tt.undostack.length,ut=()=>tt.undostack.length;return st(),{onUndo:rt,onRedo:it,updateHistory:st,getRedoLength:ut,getUndoLength:At}};var stats_min={exports:{}};(function(et,_){(function(_e,tt){et.exports=tt()})(commonjsGlobal,function(){var _e=function(){function tt(at){return st.appendChild(at.dom),at}function rt(at){for(var lt=0;lt<st.children.length;lt++)st.children[lt].style.display=lt===at?"block":"none";it=at}var it=0,st=document.createElement("div");st.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",st.addEventListener("click",function(at){at.preventDefault(),rt(++it%st.children.length)},!1);var At=(performance||Date).now(),ut=At,ct=0,ht=tt(new _e.Panel("FPS","#0ff","#002")),ot=tt(new _e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var nt=tt(new _e.Panel("MB","#f08","#201"));return rt(0),{REVISION:16,dom:st,addPanel:tt,showPanel:rt,begin:function(){At=(performance||Date).now()},end:function(){ct++;var at=(performance||Date).now();if(ot.update(at-At,200),at>ut+1e3&&(ht.update(1e3*ct/(at-ut),100),ut=at,ct=0,nt)){var lt=performance.memory;nt.update(lt.usedJSHeapSize/1048576,lt.jsHeapSizeLimit/1048576)}return at},update:function(){At=this.end()},domElement:st,setMode:rt}};return _e.Panel=function(tt,rt,it){var st=1/0,At=0,ut=Math.round,ct=ut(window.devicePixelRatio||1),ht=80*ct,ot=48*ct,nt=3*ct,at=2*ct,lt=3*ct,dt=15*ct,ft=74*ct,pt=30*ct,gt=document.createElement("canvas");gt.width=ht,gt.height=ot,gt.style.cssText="width:80px;height:48px";var mt=gt.getContext("2d");return mt.font="bold "+9*ct+"px Helvetica,Arial,sans-serif",mt.textBaseline="top",mt.fillStyle=it,mt.fillRect(0,0,ht,ot),mt.fillStyle=rt,mt.fillText(tt,nt,at),mt.fillRect(lt,dt,ft,pt),mt.fillStyle=it,mt.globalAlpha=.9,mt.fillRect(lt,dt,ft,pt),{dom:gt,update:function(yt,vt){st=Math.min(st,yt),At=Math.max(At,yt),mt.fillStyle=it,mt.globalAlpha=1,mt.fillRect(0,0,ht,dt),mt.fillStyle=rt,mt.fillText(ut(yt)+" "+tt+" ("+ut(st)+"-"+ut(At)+")",nt,at),mt.drawImage(gt,lt+ct,dt,ft-ct,pt,lt,dt,ft-ct,pt),mt.fillRect(lt+ft-ct,dt,ct,pt),mt.fillStyle=it,mt.globalAlpha=.9,mt.fillRect(lt+ft-ct,dt,ct,ut((1-yt/vt)*pt))}}},_e})})(stats_min);var stats_minExports=stats_min.exports;const Stats=getDefaultExportFromCjs(stats_minExports),stats=new Stats;document.body.appendChild(stats.dom);stats.dom.style.pointerEvents="none";const setupApp=()=>{const et=()=>{stats.begin(),stats.end()},_=new Application({width:window.innerWidth,height:window.innerHeight,backgroundAlpha:0,resolution:1,antialias:!0,autoDensity:!0});_.stage.eventMode="static",_.stage.hitArea=_.screen;const _e=_.stage;_e.ding={id:"stage"};const tt=new Container;return tt.ding={id:"viewport"},_.stage.addChild(tt),window.addEventListener("resize",()=>{_.renderer.resize(window.innerWidth,window.innerHeight)}),_.ticker.add(et),{app:_,viewportContainer:tt,stage:_.stage}},createSelectionBoxGraphic=et=>{const _=new Graphics;return et.addChild(_),_},updateSelectionBoxGraphic=(et,_,_e=colorPalette.purple)=>{et.clear(),et.lineStyle(1,_e,1),et.drawRect(_.x,_.y,_.width+1,_.height+1)},clearSelectionBoxGraphic=et=>{et.clear()},createHandleContainer=et=>{const _=new Container,_e={},tt=10,rt=2,it=colorPalette.foreground_light,st=5,At=colorPalette.pink,ut=colorPalette.pink;for(const ct of["topLeft","topRight","bottomRight","bottomLeft"]){const ht=new Graphics;switch(ht.lineStyle(1,At).beginFill(it),ht.drawRoundedRect(0,0,tt,tt,rt),ht.endFill(),ct){case"topLeft":case"bottomRight":ht.cursor="nwse-resize";break;case"topRight":case"bottomLeft":ht.cursor="nesw-resize";break;default:ht.cursor="pointer"}ht.eventMode="static";const ot=new Rectangle(-st,-st,tt+st*2,tt+st*2);ht.hitArea=ot,ht.on("mouseover",()=>ht.tint=ut),ht.on("mouseout",()=>ht.tint=16777215),ht.pivot.set(tt/2,tt/2),_.addChild(ht),ht.ding={id:`handle-${ct}`},ht.visible=!1,_e[ct]=ht}return et.addChild(_),{handleContainer:_,handles:_e}},positionAndShowHandles=(et,{x:_,y:_e,width:tt,height:rt})=>{et.topLeft.position.set(_,_e),et.topRight.position.set(_+tt,_e),et.bottomLeft.position.set(_,_e+rt),et.bottomRight.position.set(_+tt,_e+rt),Object.values(et).forEach(it=>{it.visible=!0})},hideHandles=et=>{Object.values(et).forEach(_=>{_.visible=!1})},registerInteractivePointerEvents=({displayObject:et,onClick:_,onHover:_e,onUnhover:tt,onPointerDown:rt,onPointerUp:it})=>{let st=!1;et.on("pointerdown",At=>{st=!0,rt==null||rt(At)}),et.on("pointerup",At=>{st&&(_==null||_(At),it==null||it(At)),st=!1}),et.on("pointerupoutside",At=>{st=!1,it==null||it(At)}),et.on("pointerover",()=>_e==null?void 0:_e()),et.on("pointerout",()=>{tt==null||tt(),st&&(st=!1)})},createTooltip=et=>{const _=new Text("",{fontFamily:"Arial",fontSize:15,fill:"black",align:"center"}),_e=new Graphics;return _e.addChild(_),et.addChild(_e),{drawToolTip:(it,st,At=colorPalette.light_background,ut="white",ct=0)=>{if(!st)return;_.text=st,_.style.fill=ut,_.updateText(!1);let ht=it.toGlobal(new Point);_.x=ht.x+(it.width-_.width)/2,_.y=ht.y-_.height-10-ct,_e.clear(),_e.beginFill(At),_e.drawRoundedRect(_.x-5,_.y-5,_.width+10,_.height+10,5),_e.endFill(),_e.visible=!0},hideToolTip:()=>{_e.visible=!1},rectangle:_e}},styles={buttonSize:46,buttonPadding:0,barBorderRadius:5,iconColor:colorPalette.foreground_light,iconSize:23,hoverColor:colorPalette.dark_background,disabledColor:colorPalette.current_line,barBackgroundColor:colorPalette.light_background,pointerDownColor:colorPalette.selection,activeColor:colorPalette.pink,pixelsToFloatAbove:10},createButton=(et,_,_e,tt)=>{let rt,it;_?(it=_,rt=new Sprite(_)):(it=Texture.from(et),rt=new Sprite(it));const st=it.orig.width/it.orig.height;let At,ut;const ct=tt||(_?34:styles.iconSize);it.orig.width>it.orig.height?(At=ct,ut=ct/st):(ut=ct,At=ct*st),rt.width=At,rt.height=ut,rt.x=(styles.buttonSize-At)/2,rt.y=(styles.buttonSize-ut)/2;let ht=new Graphics;if(ht.eventMode="static",ht.cursor="pointer",ht.addChild(rt),_e){const ot=new TextStyle({fontFamily:"Arial",fontSize:40,fill:colorPalette.foreground_light,fontWeight:"900"}),nt=new Text(_e,ot);ht.addChild(nt),nt.x=5,nt.y=3,nt.scale.set(.3,.3)}return ht},createFauxRotationButton=({stage:et})=>{const _e=createButton("assets/svg/rotate.svg");_e.clear(),_e.beginFill(styles.activeColor),_e.drawRoundedRect(0,0,styles.buttonSize,styles.buttonSize,styles.barBorderRadius),_e.endFill(),_e.pivot.x=styles.buttonSize/2,_e.pivot.y=styles.buttonSize/2;const tt=(it,st,At)=>{const{x:ut,y:ct}=it,ht=styles.buttonSize/2,ot=styles.buttonSize/2;_e.pivot.x=ht,_e.pivot.y=ot;let nt=ut-st.x+(st.x-At.x),at=ct-st.y,lt=Math.atan2(at,nt);return _e.rotation=lt+Math.PI/2,_e.x=ut,_e.y=ct,_e.visible=!0,lt},rt=()=>{_e.visible=!1};return et.addChild(_e),rt(),{draw:tt,hide:rt}},createFloatingMenuBar=(et,_,_e)=>{let tt;const{drawToolTip:rt,hideToolTip:it}=createTooltip(_),st=ft=>ft.isActive()?styles.activeColor:ft.disabledWhen()?styles.disabledColor:ft.pointerDown?styles.pointerDownColor:ft.hovered?styles.hoverColor:styles.barBackgroundColor,At=()=>{let ft=0;for(let pt=0;pt<ht.length;pt++){const gt=ht[pt],{buttonRef:mt}=gt;mt.visible=gt.visibleWhen(),gt.disabledWhen()?mt.cursor="cursor":mt.cursor="pointer",mt.clear(),mt.beginFill(st(gt)),mt.drawRoundedRect(0,0,styles.buttonSize,styles.buttonSize,styles.barBorderRadius),mt.endFill(),mt.visible&&(mt.x=ft,mt.y=0,ft+=mt.width+styles.buttonPadding)}return ft},ut=ft=>{let pt=new Container;tt=new Graphics,pt.addChild(tt),pt.visible=!1;const gt=[];for(const mt of ft){const{textureSvgSourcePath:yt,texture:vt,hotkeyLabel:wt,iconSize:bt}=mt,Bt=createButton(yt,vt,wt,bt);gt.push({buttonRef:Bt,...mt,hovered:!1}),pt.addChild(Bt)}return{menuBar:pt,toolsForState:gt}},{menuBar:ct,toolsForState:ht}=ut(et);for(const ft of ht)registerInteractivePointerEvents({displayObject:ft.buttonRef,onClick:()=>{ft.disabledWhen()||ft.onClick()},onHover:()=>{var pt,gt,mt;ft.hovered=!0,ft.disabledWhen()?rt(ft.buttonRef,(pt=ft.disabledtip)==null?void 0:pt.text,(gt=ft.disabledtip)==null?void 0:gt.color,(mt=ft.disabledtip)==null?void 0:mt.fill):rt(ft.buttonRef,ft.tooltip),At()},onUnhover:()=>{ft.hovered=!1,it(),At()},onPointerDown:pt=>{ft.pointerDown=!0,ft.onPointerDown&&ft.onPointerDown(pt),At()},onPointerUp:()=>{ft.pointerDown=!1,it(),ft.onPointerUp&&ft.onPointerUp(),At()}});_.addChild(ct);const ot=ft=>{ct.visible=!0;const pt=At()*ct.scale.x,gt=(styles.buttonSize+styles.pixelsToFloatAbove)*ct.scale.y,mt=ft.x+ft.width/2,yt=_e?_e.width-pt:_.width-pt,vt=Math.min(Math.max(0,mt-pt/2),yt),wt=_e?_e.height-gt:_.height-gt;let bt=ft.y-gt;bt=Math.max(0,Math.min(bt,wt)),ct.position.set(vt,bt),tt.clear(),tt.beginFill(styles.barBackgroundColor),tt.drawRoundedRect(0,0,(styles.buttonSize+1)*et.length*ct.scale.x,styles.buttonSize,styles.barBorderRadius),tt.endFill()},nt=ft=>{ct.visible=!0;const pt=ft.x+ft.width/2,gt=At(),mt=pt-gt/2;ct.position.set(mt,ft.y+ft.height+styles.pixelsToFloatAbove),tt.clear(),tt.beginFill(styles.barBackgroundColor),tt.drawRoundedRect(0,0,gt,styles.buttonSize,styles.barBorderRadius),tt.endFill()},at=ft=>{ft&&(ct.x=ft.x,ct.y=ft.y),ct.visible=!0;const pt=At();tt.clear(),tt.beginFill(styles.barBackgroundColor),tt.drawRoundedRect(0,0,pt,styles.buttonSize,styles.barBorderRadius),tt.endFill()},lt=(ft,pt)=>{const gt=ht.find(mt=>mt.id===pt);gt&&Object.keys(ft).forEach(mt=>{gt[mt]=ft[mt]}),At()},dt=()=>{ct.visible=!1};return ct.scale.x=.8,ct.scale.y=.8,{menuBar:ct,updateWithBoundingBox:ot,update:at,updateToBottomOfBoundingBox:nt,tools:et,updateTool:lt,hide:dt}},updateFloatingMenuBarRef=(et,_)=>{et.updateWithBoundingBox(_)},hideFloatingMenuBarRef=et=>{et.menuBar.visible=!1},eraserInteractiveEffect=({state:et})=>createStateSideEffect({state:et,stateDependency:"globalMousePosition",onInteractiveStateOff:_=>{_.eraser.sliderRef.hide(),_.eraser.scrubRef.hide()},diffObserver:_=>`${Array.from(et.selectedItems).map(tt=>{const rt=tt.getBounds();return`${tt.ding.id}-${rt.x}-${rt.y}-${rt.width}-${rt.height}`}).sort().join(",")}, ${_.x}, ${_.y}`,sideEffect:_=>{et.selectedItems.size<1&&(et.interactiveState=null);const _e=getSelectedItemBounds(et.selectedItems),tt=positionIsInSelectedItemsBounds({position:_,selectedItems:et.selectedItems,leeway:20});updateSelectionBoxGraphic(et.selectionBoxGraphicRef,_e),updateFloatingMenuBarRef(et.floatingMenuBarRef,_e),et.eraser.sliderRef.draw(_e),tt?et.eraser.scrubRef.draw(_,et.eraser.sliderSize):et.eraser.scrubRef.hide()},effectName:"SELECTED_ITEMS_BOUNDING_BOX",interactiveState:"erase"}),inpaintInteractiveEffect=({state:et})=>createStateSideEffect({state:et,stateDependency:"globalMousePosition",onInteractiveStateOff:_=>{_.eraser.sliderRef.hide(),_.eraser.scrubRef.hide()},diffObserver:_=>`${Array.from(et.selectedItems).map(tt=>{const rt=tt.getBounds();return`${tt.ding.id}-${rt.x}-${rt.y}-${rt.width}-${rt.height}`}).sort().join(",")}, ${_.x}, ${_.y}`,sideEffect:_=>{et.selectedItems.size<1&&(et.interactiveState=null);const _e=getSelectedItemBounds(et.selectedItems),tt=positionIsInSelectedItemsBounds({position:_,selectedItems:et.selectedItems,leeway:20});updateSelectionBoxGraphic(et.selectionBoxGraphicRef,_e),updateFloatingMenuBarRef(et.floatingMenuBarRef,_e),et.eraser.sliderRef.draw(_e),tt?et.eraser.scrubRef.draw(_,et.eraser.sliderSize):et.eraser.scrubRef.hide()},effectName:"SELECTED_ITEMS_BOUNDING_BOX",interactiveState:"inpaint"}),snipeEffect=({state:et})=>createStateSideEffect({state:et,stateDependency:"selectedItems",onInteractiveStateOn:_=>{hideFloatingMenuBarRef(_.floatingMenuBarRef)},onInteractiveStateOff:_=>{if(_.snipe)_.snipe.circleGraphics.forEach(tt=>{tt.destroy()}),hideFloatingMenuBarRef(_.snipe.floatingSniperMenu),_.snipe.circleGraphics.length=0;else throw new Error("Unexpected lack of snipe on state");const _e=Array.from(_.selectedItems)[0];_e&&_e.updateSniper()},diffObserver:_=>Array.from(_).map(_e=>{const tt=_e.getNonTransparentBounds();return`${_e.id}-${tt.x}-${tt.y}-${tt.width}-${tt.height}`}).sort().join(","),sideEffect:_=>{var tt;_.size<1&&(et.interactiveState=null);const _e=getSelectedItemBounds(et.selectedItems);updateSelectionBoxGraphic(et.selectionBoxGraphicRef,_e),updateFloatingMenuBarRef((tt=et.snipe)==null?void 0:tt.floatingSniperMenu,_e)},effectName:"SELECTED_ITEMS_BOUNDING_BOX",interactiveState:"snipe"}),createStateSideEffect=({stateDependency:et,diffObserver:_,sideEffect:_e,state:tt,interactiveState:rt=null,onInteractiveStateOff:it,onInteractiveStateOn:st})=>{let At=null,ut=!1;return()=>{if(tt.interactiveState===rt&&!ut)st&&st(tt),ut=!0;else if(tt.interactiveState!==rt){At!==null&&it&&it(tt),ut=!1,At=null;return}if(At!==_(tt[et]))return At=_(tt[et]),_e(tt[et])}},selectedItemDrawBoundingRectangleEffect=({state:et})=>createStateSideEffect({state:et,stateDependency:"selectedItems",onInteractiveStateOff:_=>{hideHandles(_.handlesRef)},diffObserver:_=>Array.from(_).map(_e=>{const tt=_e.getNonTransparentBounds();return`${_e.id}-${tt.x}-${tt.y}-${tt.width}-${tt.height}`}).sort().join(","),sideEffect:_=>{const _e=getSelectedItemBounds(_);_.size>0?(updateSelectionBoxGraphic(et.selectionBoxGraphicRef,_e),positionAndShowHandles(et.handlesRef,_e),updateFloatingMenuBarRef(et.floatingMenuBarRef,_e)):(hideHandles(et.handlesRef),clearSelectionBoxGraphic(et.selectionBoxGraphicRef),hideFloatingMenuBarRef(et.floatingMenuBarRef))},effectName:"SELECTED_ITEMS_BOUNDING_BOX"}),rotationBoundingRectangleEffect=({state:et})=>createStateSideEffect({state:et,stateDependency:"globalMousePosition",onInteractiveStateOn:_=>{clearSelectionBoxGraphic(_.rotation.selectionBoxGraphicRef),clearSelectionBoxGraphic(_.selectionBoxGraphicRef),hideFloatingMenuBarRef(_.floatingMenuBarRef),_.rotation.fauxRotationButtonRef.hide()},onInteractiveStateOff:_=>{clearSelectionBoxGraphic(_.rotation.selectionBoxGraphicRef),_.rotation.fauxRotationButtonRef.hide()},diffObserver:_=>`${_.x}, ${_.y}`,sideEffect:_=>{const _e=et.rotation.boundingBox,tt={x:_e.x+_e.width/2,y:_e.y+_e.height/2};let rt=et.rotation.fauxRotationButtonRef.draw(_,tt,et.rotation.initialButtonDisjointPosition);rt=rt-3*Math.PI/2,updateSelectionBoxGraphic(et.rotation.selectionBoxGraphicRef,_e),et.rotation.selectionBoxGraphicRef.pivot.x=_e.x+_e.width/2,et.rotation.selectionBoxGraphicRef.pivot.y=_e.y+_e.height/2,et.rotation.selectionBoxGraphicRef.x=_e.x+_e.width/2,et.rotation.selectionBoxGraphicRef.y=_e.y+_e.height/2,et.rotation.selectionBoxGraphicRef.rotation=rt;for(let it=0;it<et.rotation.selected.length;it++){const{item:st,initialRotation:At,initialItemPosition:ut}=et.rotation.selected[it];rotateItemAround({item:st,rotateAround:tt,deltaRadians:rt,initialItemPosition:ut}),st.rotation=At+rt}},effectName:"ROTATE_EFFECT",interactiveState:"rotate"}),registerSideEffects=({app:et,state:_})=>{et.ticker.add(selectedItemDrawBoundingRectangleEffect({state:_})),et.ticker.add(rotationBoundingRectangleEffect({state:_})),et.ticker.add(eraserInteractiveEffect({state:_})),et.ticker.add(inpaintInteractiveEffect({state:_})),et.ticker.add(snipeEffect({state:_}))},registerViewportPanAndZoomEvents=(et,_,_e,tt)=>{let rt=!1,it=null,st=1;const At=(lt,dt,ft,pt,gt)=>{const mt=(pt-et.x)/et.scale.x,yt=(gt-et.y)/et.scale.y;et.scale.x*=ft,et.scale.y*=ft,et.x=pt-mt*et.scale.x,et.y=gt-yt*et.scale.y,et.x+=lt,et.y+=dt},ut=(lt,dt)=>{const ft=(lt.x+dt.x)/2,pt=(lt.y+dt.y)/2;return{x:ft,y:pt}},ct=(lt,dt)=>{const ft=dt.x-lt.x,pt=dt.y-lt.y;return Math.sqrt(ft*ft+pt*pt)};tt.registerTouchUpListener((lt,dt)=>{if(lt.pointerType==="touch"&&(it={x:lt.clientX,y:lt.clientY},Object.keys(dt).length>1)){const ft=Object.keys(dt).map(pt=>dt[pt]);st=ct(ft[0],ft[1]),it=ut(ft[0],ft[1])}}),tt.registerTouchMoveListener((lt,dt)=>{const ft=Object.keys(dt).map(pt=>dt[pt]).filter(pt=>{var gt,mt;return((mt=(gt=pt.target)==null?void 0:gt.ding)==null?void 0:mt.type)!=="item"});if(ft.length===2){const pt=ct(ft[0],ft[1]),gt=ut(ft[0],ft[1]),{x:mt,y:yt}=gt;let vt=pt/st;vt=Math.min(Math.max(vt,.985),1.015),At(0,0,vt,mt,yt),st=pt}if(ft.length===3){const pt=ut(ft[0],ft[1]),{x:gt,y:mt}=pt;let yt=gt-it.x,vt=mt-it.y;yt=Math.min(Math.max(yt,-10),10),vt=Math.min(Math.max(vt,-10),10),At(yt,vt,1,0,0),it=pt}if(_e.interactiveState==="grabpan"){const{x:pt,y:gt}=ft[0],mt=pt-it.x,yt=gt-it.y;At(mt,yt,1,0,0),it={x:pt,y:gt}}});const ht=lt=>{if(it={x:lt.clientX,y:lt.clientY},lt.pointerType==="mouse"&&(lt.button===1||_e.interactiveState==="grabpan")){rt=!0;return}},ot=lt=>{if(rt){const dt={x:lt.clientX,y:lt.clientY},ft=dt.x-it.x,pt=dt.y-it.y;At(ft,pt,1,0,0),it=dt;return}},nt=lt=>{lt.pointerType==="mouse"&&(rt=!1),it=null},at=lt=>{const pt=lt.clientX,gt=lt.clientY;if(lt.ctrlKey){const mt=Math.pow(2,-lt.deltaY*.005);At(0,0,mt,pt,gt)}else if(lt.shiftKey){const mt=lt.deltaY*-1;At(mt,0,1,pt,gt)}else{const mt=lt.deltaX*-1,yt=lt.deltaY*-1;At(mt,yt,1,pt,gt)}lt.preventDefault()};return _.addEventListener("pointerdown",ht),_.addEventListener("pointermove",ot),_.addEventListener("pointerup",nt),_.addEventListener("pointerupoutside",nt),_e.view.addEventListener("wheel",at),At};async function bitmapMSECompare(et,_,_e=10){const tt=await createImageBitmap(et),rt=await createImageBitmap(_),it=document.createElement("canvas"),st=it.getContext("2d");it.width=tt.width,it.height=tt.height,st.drawImage(tt,0,0);const At=st.getImageData(0,0,tt.width,tt.height),ut=document.createElement("canvas"),ct=ut.getContext("2d");ut.width=rt.width,ut.height=rt.height,ct.drawImage(rt,0,0);const ht=ct.getImageData(0,0,rt.width,rt.height);if(At.width!==ht.width||At.height!==ht.height)return!1;let ot=0;for(let nt=0;nt<At.data.length;nt+=4)for(let at=0;at<3;at++)ot+=(At.data[nt+at]-ht.data[nt+at])**2;return ot/=At.width*At.height*3,ot<_e}const getBitmapFromBlob=async et=>await createImageBitmap(et,{colorSpaceConversion:"none"}),registerClipboardEvents=(et,_,_e,tt,rt)=>{let it=null,st=[];const At=async ct=>{ct.preventDefault();const ht=ct.clipboardData,ot=Array.from(ht.items).find(nt=>nt.type.startsWith("image/"));if(ot){const nt=ot.getAsFile(),at=it&&await bitmapMSECompare(it,nt),lt=_.toLocal(rt.globalMousePosition);if(et.clear(),at){const pt=_e.createItemsFromCopies(st),gt=(Math.random()-.5)*10,mt=_.toLocal(rt.globalMousePosition);pt.forEach(yt=>{yt.x=yt.x+mt.x+gt-yt.width/2,yt.y=yt.y+mt.y+gt-yt.height/2,yt.type==="image"&&yt.updateHitmap(),et.add(yt)});return}const dt=await getBitmapFromBlob(nt),ft=_e.createItemWithSource(0,0,dt);ft.x=lt.x+(Math.random()-.5)*50-ft.width/2,ft.y=lt.y+(Math.random()-.5)*50-ft.height/2,et.add(ft)}},ut=async ct=>{const ht=_.children.filter(lt=>et.has(lt)),ot=getItemsRelativeCenterPositions(ht,_),nt=await tt.renderItems(Array.from(ht)),at=await(await fetch(nt)).blob();if(window.ClipboardItem&&navigator.clipboard&&navigator.clipboard.write){const lt=new ClipboardItem({[at.type]:at});await navigator.clipboard.write([lt])}ct==="cut"&&(_e.removeChildren(ht),et.clear()),it=at,st=ht.map((lt,dt)=>{let{x:ft,y:pt}=ot[dt];const gt=createItemCopy(lt);return gt.props.x=ft+lt.width/2,gt.props.y=pt+lt.height/2,gt})};document.addEventListener("paste",At),document.addEventListener("cut",()=>ut("cut")),document.addEventListener("copy",()=>ut("copy"))},registerHandleEvents=({handles:et,app:_,onDragEnd:_e,state:tt,viewportContainer:rt})=>{const st=["topLeft","topRight","bottomRight","bottomLeft"].map(At=>et[At]);for(let At=0;At<st.length;At++){const ut=st[At],ct=st[(At+2)%st.length];let ht=null,ot=!1,nt=null,at=null,lt=[],dt=0;ut.on("pointerdown",gt=>{ot=!0,nt=gt.data,at=rt.toLocal(ut.getGlobalPosition()),ht=rt.toLocal(ct.getGlobalPosition()),dt=Math.sqrt(Math.pow(at.x-ht.x,2)+Math.pow(at.y-ht.y,2)),lt=Array.from(tt.selectedItems).map(mt=>({position:mt.position.clone(),scale:mt.scale.clone()})),ut.alpha=.5,_.renderer.view.addEventListener("pointermove",ft)});const ft=gt=>{if(ot){const mt=rt.toLocal(nt.global);let vt=Math.sqrt(Math.pow(mt.x-ht.x,2)+Math.pow(mt.y-ht.y,2))/dt;const{x:wt,y:bt}=ht.clone(),Bt=Array.from(tt.selectedItems);for(let Tt=0;Tt<Bt.length;Tt++){const It=Bt[Tt],{position:Dt,scale:Ut}=lt[Tt];let _t=wt-Dt.x,St=bt-Dt.y;It.scale.x=Ut.x*vt,It.scale.y=Ut.y*vt,It.x=Dt.x-_t*(vt-1),It.y=Dt.y-St*(vt-1)}}},pt=gt=>{ot&&(ot=!1,nt=null,ut.alpha=1,_.renderer.view.removeEventListener("pointermove",ft),_e&&_e(ut,gt))};ut.on("pointerup",pt),ut.on("pointerupoutside",pt)}},isStage$3=et=>et.ding&&et.ding.id==="stage",noDraggyRules$1=(et,_)=>_.touches&&_.touches.length>1?!0:et.interactiveState!==null,stageItemEvents=({stage:et,state:_,onDragEnd:_e})=>{let tt=_.touches,rt=!1;const it=ut=>{_.interactiveState===null&&(isStage$3(ut.target)&&!(ut.pointerType==="mouse"&&ut.button===1)&&(_.selectedItems.clear(),rt=!1),ut.pointerType==="touch"&&(tt[ut.pointerId]={x:ut.clientX,y:ut.clientY}))},st=ut=>{if(Object.keys(tt).length>1||!_.isDragging||noDraggyRules$1(_,ut))return;const ct=ut.data.global;for(const ht of _.selectedItems){const ot=ct.x-ht.ding.pointerDownOffset.x,nt=ct.y-ht.ding.pointerDownOffset.y,at=ht.parent.toLocal(new Point(ot,nt));ht.position.set(at.x,at.y),rt=!0}},At=ut=>{ut.pointerType==="touch"&&delete tt[ut.pointerId],_.isDragging&&(rt&&_e(),_.isDragging=!1,rt=!1)};et.on("pointerup",At),et.on("pointerupoutside",At),et.on("pointermove",st),et.on("pointerdown",it)},isStage$2=et=>et.ding&&et.ding.id==="stage",registerDraggingSelectionEvents=({stage:et,state:_,itemsManager:_e,color:tt=colorPalette.purple,fill:rt=colorPalette.purple,fillAlpha:it=.1})=>{let st=!1,At={x:0,y:0};const ut=new Graphics;et.addChild(ut);const ct=dt=>isStage$2(dt.target)&&dt.data.button===0&&_.interactiveState==null,ht=dt=>{st=!0,At=dt.data.global.clone()},ot=dt=>{st=!1,ut.visible=!1};et.on("pointerup",dt=>{ot(),ot()}),et.on("pointerdown",dt=>{if(ct(dt)&&ht(dt),Object.keys(_.touches).length>1){ot();return}});const nt=({box:dt,x:ft,y:pt,width:gt,height:mt})=>{dt.clear(),dt.visible=!0,dt.lineStyle(1,tt,1),dt.drawRect(ft,pt,gt,mt),dt.beginFill(rt,it),dt.drawRect(ft,pt,gt,mt),dt.endFill()},at=(dt,ft)=>{let pt=dt.getBounds(),gt=ft.getNonTransparentBounds();return pt.intersects(gt)},lt=(dt,ft)=>ft.filter(pt=>at(dt,pt));et.on("pointermove",dt=>{if(!st)return;const ft=dt.data.global,pt=Math.min(At.x,ft.x),gt=Math.min(At.y,ft.y),mt=Math.abs(ft.x-At.x),yt=Math.abs(ft.y-At.y),vt=50;if(mt*yt>=vt){nt({box:ut,x:pt,y:gt,width:mt,height:yt});const bt=_e.getItems();_.selectedItems.clear(),lt(ut,bt).forEach(Bt=>_.selectedItems.add(Bt))}})},registerSnipe=({state:et,embeddings:_,neural:_e,selectedItems:tt,itemsManager:rt})=>{let it=[],st=[];const At=async()=>{st.forEach(dt=>{dt.destroy()}),st.length=0;const ot=Array.from(tt)[0];await ot.eraseWithSegment(ot.lastSegment,!0);const nt=createItemCopy(ot);nt.props.mask[nt.props.mask.length-1]={...nt.props.mask[nt.props.mask.length-1],negative:!nt.props.mask[nt.props.mask.length-1].negative};const at=rt.createItemFromCopy(nt,!0),lt=rt.getChildIndex(ot);rt.addChildAt(at,lt),et.interactiveState=null,ot.updateSniper(null),tt.clear(),tt.add(at),await at.updateHitmap(),await ot.updateHitmap(),it.length=0},ut=()=>{if(et.interactiveState==="snipe"){et.interactiveState=null;return}const ot=ht.floatingSniperMenu.menuBar.width/2+ht.floatingSniperMenu.menuBar.x,nt=26*2+ht.floatingSniperMenu.menuBar.y;console.log(ot,nt),et.interactiveState="snipe",st.length=0,it.length=0},ct=()=>{et.interactiveState=null,st.forEach(ot=>{ot.destroy()}),st.length=0,it.length=0},ht={floatingSniperMenu:createFloatingMenuBar([{id:"sniper",visibleWhen:()=>tt.size===1,disabledWhen:()=>Array.from(tt).some(ot=>!_.displayObjectWithTextureIsEmbedded(ot)),isActive:()=>et.interactiveState==="snipe",isLoading:()=>!1,onClick:()=>ut(),tooltip:"exit snipe",textureSvgSourcePath:"assets/svg/rifle.svg"},{id:"finishSnipe",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>et.interactiveState==="erase",isLoading:()=>!1,onClick:()=>At(),hotkeyLabel:"space",textureSvgSourcePath:"assets/svg/check.svg",iconSize:15,tooltip:"finish segment"},{id:"undoSnipe",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>et.interactiveState==="erase",isLoading:()=>!1,onClick:async()=>{const ot=Array.from(tt)[0];it.pop(),console.log("dingle?");const nt=st.pop();nt&&(nt.visible=!1,nt.destroy());const at=_.getEmbedding(ot.texture.baseTexture.textureCacheIds[0]);if(!at)return;const{width:lt,height:dt}=ot.getRealDims(),ft=await _e.runSamPrompt({clicks:it,width:lt,height:dt,embedding:at});ot.updateSniper(ft)},textureSvgSourcePath:"assets/svg/undo.svg",tooltip:"undo click"}],et.stage),clicks:it,circleGraphics:st,endSnipe:ct,onCompleteSnipe:At};return ht},keyPressEventsManager=et=>{const _=[];et.keys={KeyD:!1,Shift:!1,Ctrl:!1,KeyZ:!1,KeyY:!1};const _e=ut=>{for(const ct of _)if(ct.check(ut))return ct.action(ut)},tt=()=>{for(let ut in et.keys)et.keys[ut]=!1},rt=(ut,ct)=>{ut.code==="ShiftLeft"||ut.code==="ShiftRight"?et.keys.Shift=ct:["ControlLeft","ControlRight","MetaLeft","MetaRight"].includes(ut.code)?et.keys.Ctrl=ct:et.keys.hasOwnProperty(ut.code)&&(et.keys[ut.code]=ct)},it=ut=>{rt(ut,!0),_e(ut)},st=ut=>{rt(ut,!1)},At=()=>{tt()};return window.addEventListener("keydown",it),window.addEventListener("keyup",st),window.addEventListener("blur",At),{registerKeyHandlers:ut=>{for(const ct of ut)_.push(ct)}}},createSlider=({stage:et,onSizeChange:_})=>{let _e=new Graphics;_e.beginFill(colorPalette.pink),_e.drawCircle(0,0,50),_e.endFill(),_e.pivot.x=0,_e.pivot.y=0,_e.visible=!1,_e.eventMode="none";const tt=(ft,pt)=>{_e.x=ft.x,_e.y=ft.y,_e.scale.x=pt/50,_e.scale.y=pt/50,_e.visible=!0},rt=()=>{_e.visible=!1};et.addChild(_e);const it={barWidth:200,tabSize:20,pixelstToFloatBelow:15,hitAreaPadding:10};let st=new Graphics;st.beginFill(colorPalette.light_background),st.drawRoundedRect(0,0,it.barWidth,5,3),st.endFill();let At=new Graphics;At.beginFill(colorPalette.pink),At.drawRoundedRect(0,0,it.tabSize,it.tabSize,3);const ut=new Rectangle(-it.hitAreaPadding,-it.hitAreaPadding,it.tabSize+it.hitAreaPadding*2,it.tabSize+it.hitAreaPadding*2);At.hitArea=ut,At.endFill(),At.x=25,At.y=-5,At.eventMode="static",At.cursor="pointer",st.addChild(At),et.addChild(st);let ct=null,ht=!1;const ot=ft=>{ct=ft.data,ht=!0,ft.stopPropagation()},nt=()=>{ht&&(ht=!1,ct=null)},at=()=>{if(ht&&ct){let ft=ct.getLocalPosition(st);ft.x=Math.max(0,Math.min(ft.x-it.tabSize/2,200)),At.x=ft.x;let pt=ft.x/6+5;_(pt)}},lt=ft=>{st.visible=!0;const pt=ft.x+ft.width/2-it.barWidth/2;st.position.set(pt,ft.y+ft.height+it.pixelstToFloatBelow)};et.on("pointerup",nt).on("pointermove",at),At.on("pointerdown",ot);const dt=()=>{st.visible=!1};return st.x=50,st.y=50,dt(),{sliderRef:{draw:lt,hide:dt},scrubRef:{draw:tt,hide:rt}}},registerGlobalMouseEvents=({state:et,stage:_})=>{_.on("pointermove",_e=>{const tt=_e.data.global;et.globalMousePosition=tt})},onFlip=({state:et,onUpdateItems:_})=>{const _e=getSelectedItemBounds(et.selectedItems),tt=_e.x+_e.width/2,rt=_e.y+_e.height/2;et.selectedItems.forEach(it=>{it.scale.x*=-1,it.rotation*=-1;const st=it.x,{x:At}=it.parent.toLocal({x:tt,y:rt}),ut=st-At;it.x-=2*ut}),_()},registerTools=(et,_)=>[{id:"flip",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>onFlip({state:et,onUpdateItems:_}),textureSvgSourcePath:"assets/svg/flip.svg",tooltip:"mirror item"},{id:"rotate",visibleWhen:()=>!0,disabledWhen:()=>!1,onPointerDown:tt=>{et.rotation.boundingBox=getSelectedItemBounds(et.selectedItems),et.rotation.initialButtonDisjointPosition=tt.data.global.clone(),et.rotation.selected=[...Array.from(et.selectedItems).map(rt=>({initialRotation:rt.rotation,item:rt,initialItemPosition:rt.position.clone()}))],et.interactiveState="rotate"},onPointerUp:()=>{et.interactiveState=null,et.rotation.selected=null,_()},isActive:()=>!1,isLoading:()=>!1,textureSvgSourcePath:"assets/svg/rotate.svg",tooltip:"rotate: drag this button to rotate"}],isStage$1=et=>et.ding&&et.ding.id==="stage",registerEraserStageEvents=(et,_)=>{const _e=tt=>_.interactiveState==="erase"&&isStage$1(tt.target)&&!positionIsInSelectedItemsBounds({position:tt.data.global,selectedItems:_.selectedItems,leeway:20});et.on("pointerdown",tt=>{_e(tt)&&(_.interactiveState=null)})},apiPostJson=async(et,_,_e="application/json")=>{const tt=await fetch(`${et}`,{method:"POST",headers:{"Content-Type":_e},body:_e==="application/json"?JSON.stringify(_):_});if(!tt.ok)throw new Error("Network response was not ok");return await tt.json()},apiFetchJson=async et=>{const _=await fetch(et);if(!_.ok)throw new Error("Network response was not ok");return await _.json()},postEmbeddingJob=async(et,_=.8)=>{const _e=document.createElement("canvas");_e.width=et.width,_e.height=et.height;const tt=_e.getContext("2d"),rt=et.baseTexture.resource.source;tt.drawImage(rt,0,0);const At={data:{image:_e.toDataURL("image/webp",_).split(",")[1],type:"think"}};return await apiPostJson("/api/jobs/think",At)},postDiffusionJob=async(et,_)=>{const _e=et.split(",")[1],tt=_.split(",")[1];return await apiPostJson("/api/jobs/think",{data:{image:_e,mask:tt,type:"diffusion"}})},getDoneJobs=async()=>await apiFetchJson("/api/jobs/think/done"),getUserInfo=async()=>await apiFetchJson("/api/userinfo"),getJobResult=async et=>{const _=`/api/jobs/think/${et}`;return await apiFetchJson(_)};var ort_min={exports:{}};/*!
* ONNX Runtime Web v1.16.3
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(et,_){module.exports=_()})(self,()=>(()=>{var __webpack_modules__={5716:(et,_,_e)=>{_.R=void 0;const tt=_e(6027),rt=_e(1723);_.R=new class{async init(){}async createSessionHandler(it,st){const At=new tt.Session(st);return await At.loadModel(it),new rt.OnnxjsSessionHandler(At)}}},2818:(et,_,_e)=>{_.c8=_.rX=void 0;const tt=_e(2235),rt=_e(5381),it=_e(9544),st=_e(6640);_.rX=()=>{if((typeof tt.env.wasm.initTimeout!="number"||tt.env.wasm.initTimeout<0)&&(tt.env.wasm.initTimeout=0),typeof tt.env.wasm.simd!="boolean"&&(tt.env.wasm.simd=!0),typeof tt.env.wasm.proxy!="boolean"&&(tt.env.wasm.proxy=!1),typeof tt.env.wasm.numThreads!="number"||!Number.isInteger(tt.env.wasm.numThreads)||tt.env.wasm.numThreads<=0){const At=typeof navigator>"u"?(0,rt.cpus)().length:navigator.hardwareConcurrency;tt.env.wasm.numThreads=Math.min(4,Math.ceil((At||1)/2))}},_.c8=new class{async init(){(0,_.rX)(),await(0,it.initializeWebAssemblyInstance)()}async createSessionHandler(At,ut){const ct=new st.OnnxruntimeWebAssemblySessionHandler;return await ct.loadModel(At,ut),Promise.resolve(ct)}}},1057:function(et,_,_e){var tt=this&&this.__createBinding||(Object.create?function(At,ut,ct,ht){ht===void 0&&(ht=ct);var ot=Object.getOwnPropertyDescriptor(ut,ct);ot&&!("get"in ot?!ut.__esModule:ot.writable||ot.configurable)||(ot={enumerable:!0,get:function(){return ut[ct]}}),Object.defineProperty(At,ht,ot)}:function(At,ut,ct,ht){ht===void 0&&(ht=ct),At[ht]=ut[ct]}),rt=this&&this.__exportStar||function(At,ut){for(var ct in At)ct==="default"||Object.prototype.hasOwnProperty.call(ut,ct)||tt(ut,At,ct)};Object.defineProperty(_,"__esModule",{value:!0}),rt(_e(2235),_);const it=_e(2235),st=_e(8408);{const At=_e(5716).R;(0,it.registerBackend)("webgl",At,-10)}{const At=_e(2818).c8;(0,it.registerBackend)("cpu",At,10),(0,it.registerBackend)("wasm",At,10),(0,it.registerBackend)("xnnpack",At,9),(0,it.registerBackend)("webnn",At,9)}it.env.versions.web=st.version},4910:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createAttributeWithCacheKey=void 0;class _e{constructor(rt){Object.assign(this,rt)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(rt=>`${this[rt]}`).join(";")),this._cacheKey}}_.createAttributeWithCacheKey=tt=>new _e(tt)},6874:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Attribute=void 0;const tt=_e(5127),rt=_e(2446),it=_e(9240),st=_e(7273);var At=tt.onnxruntime.experimental.fbs;class ut{constructor(ht){if(this._attributes=new Map,ht!=null){for(const ot of ht)ot instanceof rt.onnx.AttributeProto?this._attributes.set(ot.name,[ut.getValue(ot),ut.getType(ot)]):ot instanceof At.Attribute&&this._attributes.set(ot.name(),[ut.getValue(ot),ut.getType(ot)]);if(this._attributes.size<ht.length)throw new Error("duplicated attribute names")}}set(ht,ot,nt){this._attributes.set(ht,[nt,ot])}delete(ht){this._attributes.delete(ht)}getFloat(ht,ot){return this.get(ht,"float",ot)}getInt(ht,ot){return this.get(ht,"int",ot)}getString(ht,ot){return this.get(ht,"string",ot)}getTensor(ht,ot){return this.get(ht,"tensor",ot)}getFloats(ht,ot){return this.get(ht,"floats",ot)}getInts(ht,ot){return this.get(ht,"ints",ot)}getStrings(ht,ot){return this.get(ht,"strings",ot)}getTensors(ht,ot){return this.get(ht,"tensors",ot)}get(ht,ot,nt){const at=this._attributes.get(ht);if(at===void 0){if(nt!==void 0)return nt;throw new Error(`required attribute not found: ${ht}`)}if(at[1]!==ot)throw new Error(`type mismatch: expected ${ot} but got ${at[1]}`);return at[0]}static getType(ht){const ot=ht instanceof rt.onnx.AttributeProto?ht.type:ht.type();switch(ot){case rt.onnx.AttributeProto.AttributeType.FLOAT:return"float";case rt.onnx.AttributeProto.AttributeType.INT:return"int";case rt.onnx.AttributeProto.AttributeType.STRING:return"string";case rt.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case rt.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case rt.onnx.AttributeProto.AttributeType.INTS:return"ints";case rt.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case rt.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${rt.onnx.AttributeProto.AttributeType[ot]}`)}}static getValue(ht){const ot=ht instanceof rt.onnx.AttributeProto?ht.type:ht.type();if(ot===rt.onnx.AttributeProto.AttributeType.GRAPH||ot===rt.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const nt=this.getValueNoCheck(ht);if(ot===rt.onnx.AttributeProto.AttributeType.INT&&st.LongUtil.isLong(nt))return st.LongUtil.longToNumber(nt);if(ot===rt.onnx.AttributeProto.AttributeType.INTS){const at=nt,lt=new Array(at.length);for(let dt=0;dt<at.length;dt++){const ft=at[dt];lt[dt]=st.LongUtil.longToNumber(ft)}return lt}if(ot===rt.onnx.AttributeProto.AttributeType.TENSOR)return ht instanceof rt.onnx.AttributeProto?it.Tensor.fromProto(nt):it.Tensor.fromOrtTensor(nt);if(ot===rt.onnx.AttributeProto.AttributeType.TENSORS){if(ht instanceof rt.onnx.AttributeProto)return nt.map(at=>it.Tensor.fromProto(at));if(ht instanceof At.Attribute)return nt.map(at=>it.Tensor.fromOrtTensor(at))}if(ot===rt.onnx.AttributeProto.AttributeType.STRING&&ht instanceof rt.onnx.AttributeProto){const at=nt;return(0,st.decodeUtf8String)(at)}return ot===rt.onnx.AttributeProto.AttributeType.STRINGS&&ht instanceof rt.onnx.AttributeProto?nt.map(st.decodeUtf8String):nt}static getValueNoCheck(ht){return ht instanceof rt.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(ht):this.getValueNoCheckFromOrtFormat(ht)}static getValueNoCheckFromOnnxFormat(ht){switch(ht.type){case rt.onnx.AttributeProto.AttributeType.FLOAT:return ht.f;case rt.onnx.AttributeProto.AttributeType.INT:return ht.i;case rt.onnx.AttributeProto.AttributeType.STRING:return ht.s;case rt.onnx.AttributeProto.AttributeType.TENSOR:return ht.t;case rt.onnx.AttributeProto.AttributeType.GRAPH:return ht.g;case rt.onnx.AttributeProto.AttributeType.FLOATS:return ht.floats;case rt.onnx.AttributeProto.AttributeType.INTS:return ht.ints;case rt.onnx.AttributeProto.AttributeType.STRINGS:return ht.strings;case rt.onnx.AttributeProto.AttributeType.TENSORS:return ht.tensors;case rt.onnx.AttributeProto.AttributeType.GRAPHS:return ht.graphs;default:throw new Error(`unsupported attribute type: ${rt.onnx.AttributeProto.AttributeType[ht.type]}`)}}static getValueNoCheckFromOrtFormat(ht){switch(ht.type()){case At.AttributeType.FLOAT:return ht.f();case At.AttributeType.INT:return ht.i();case At.AttributeType.STRING:return ht.s();case At.AttributeType.TENSOR:return ht.t();case At.AttributeType.GRAPH:return ht.g();case At.AttributeType.FLOATS:return ht.floatsArray();case At.AttributeType.INTS:{const ot=[];for(let nt=0;nt<ht.intsLength();nt++)ot.push(ht.ints(nt));return ot}case At.AttributeType.STRINGS:{const ot=[];for(let nt=0;nt<ht.stringsLength();nt++)ot.push(ht.strings(nt));return ot}case At.AttributeType.TENSORS:{const ot=[];for(let nt=0;nt<ht.tensorsLength();nt++)ot.push(ht.tensors(nt));return ot}default:throw new Error(`unsupported attribute type: ${At.AttributeType[ht.type()]}`)}}}_.Attribute=ut},1975:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.backend=void 0;const tt=_e(4418),rt=new Map;async function it(st){const At=_.backend;if(At[st]!==void 0&&function(ut){const ct=ut;return"initialize"in ct&&typeof ct.initialize=="function"&&"createSessionHandler"in ct&&typeof ct.createSessionHandler=="function"&&"dispose"in ct&&typeof ct.dispose=="function"}(At[st])){const ut=At[st];let ct=ut.initialize();if(typeof ct=="object"&&"then"in ct&&(ct=await ct),ct)return rt.set(st,ut),ut}}_.backend={webgl:new tt.WebGLBackend},_.resolveBackend=async function st(At){if(!At)return st(["webgl"]);{const ut=typeof At=="string"?[At]:At;for(const ct of ut){const ht=rt.get(ct);if(ht)return ht;const ot=await it(ct);if(ot)return ot}}throw new Error("no available backend to use")}},4418:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLBackend=void 0;const tt=_e(2235),rt=_e(1315),it=_e(2171),st=_e(3389);_.WebGLBackend=class{get contextId(){return tt.env.webgl.contextId}set contextId(At){tt.env.webgl.contextId=At}get matmulMaxBatchSize(){return tt.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(At){tt.env.webgl.matmulMaxBatchSize=At}get textureCacheMode(){return tt.env.webgl.textureCacheMode}set textureCacheMode(At){tt.env.webgl.textureCacheMode=At}get pack(){return tt.env.webgl.pack}set pack(At){tt.env.webgl.pack=At}get async(){return tt.env.webgl.async}set async(At){tt.env.webgl.async=At}initialize(){try{return this.glContext=(0,st.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),rt.Logger.setWithEnv(tt.env),rt.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(At){return rt.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${At}`),!1}}createSessionHandler(At){return new it.WebGLSessionHandler(this,At)}dispose(){this.glContext.dispose()}}},6859:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoordsGlslLib=void 0;const tt=_e(7273),rt=_e(1997),it=_e(6757),st=_e(7618),At=_e(432);class ut extends rt.GlslLib{constructor(ht){super(ht)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new rt.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new rt.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const ht=this.context.outputTextureLayout;return ht.isPacked?this.getPackedOutputSamplingSnippet(ht):this.getUnpackedOutputSamplingSnippet(ht)}getPackedOutputSamplingSnippet(ht){const ot=ht.unpackedShape,nt=[ht.width,ht.height],at={},lt="getOutputCoords";switch(ot.length){case 0:at[lt]=this.getOutputScalarCoords();break;case 1:at[lt]=this.getOutputPacked1DCoords(ot,nt);break;case 2:at[lt]=this.getOutputPacked2DCoords(ot,nt);break;case 3:at[lt]=this.getOutputPacked3DCoords(ot,nt);break;default:at[lt]=this.getOutputPackedNDCoords(ot,nt)}const dt=`
      void setOutput(vec4 val) {
        ${(0,it.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return at.floatTextureSetRGBA=new rt.GlslLibRoutine(dt),at}getUnpackedOutputSamplingSnippet(ht){const ot=ht.unpackedShape,nt=[ht.width,ht.height],at={},lt="getOutputCoords";switch(ot.length){case 0:at[lt]=this.getOutputScalarCoords();break;case 1:at[lt]=this.getOutputUnpacked1DCoords(ot,nt);break;case 2:at[lt]=this.getOutputUnpacked2DCoords(ot,nt);break;case 3:at[lt]=this.getOutputUnpacked3DCoords(ot,nt);break;case 4:at[lt]=this.getOutputUnpacked4DCoords(ot,nt);break;case 5:at[lt]=this.getOutputUnpacked5DCoords(ot,nt);break;case 6:at[lt]=this.getOutputUnpacked6DCoords(ot,nt);break;default:throw new Error(`Unsupported output dimensionality: ${ot.length}`)}const dt=`
        void setOutput(float val) {
          ${(0,it.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return at.floatTextureSetR=new rt.GlslLibRoutine(dt),at}getOutputScalarCoords(){return new rt.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(ht,ot){const nt=ot;let at="";return nt[0]===1?(at=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${nt[1]}.0);
          }
        `,new rt.GlslLibRoutine(at)):nt[1]===1?(at=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${nt[0]}.0);
          }
        `,new rt.GlslLibRoutine(at)):(at=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${nt[0]}, ${nt[1]}));
          return 2 * (resTexRC.y * ${nt[0]} + resTexRC.x);
        }
      `,new rt.GlslLibRoutine(at))}getOutputPacked2DCoords(ht,ot){let nt="";if(tt.ArrayUtil.arraysEqual(ht,ot))return nt=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${ot[0]}, ${ot[1]}));
        }
      `,new rt.GlslLibRoutine(nt);const at=ot,lt=Math.ceil(ht[1]/2);return nt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${at[0]}, ${at[1]}));

          int index = resTexRC.y * ${at[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${lt}) * 2;
          int c = 2 * (index / ${lt});

          return ivec2(r, c);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputPacked3DCoords(ht,ot){const nt=[ot[0],ot[1]],at=Math.ceil(ht[2]/2),lt=at*Math.ceil(ht[1]/2),dt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${nt[0]}, ${nt[1]}));
          int index = resTexRC.y * ${nt[0]} + resTexRC.x;

          int b = index / ${lt};
          index -= b * ${lt};

          // reverse r and c order for packed texture
          int r = imod(index, ${at}) * 2;
          int c = 2 * (index / ${at});

          return ivec3(b, r, c);
        }
      `;return new rt.GlslLibRoutine(dt)}getOutputPackedNDCoords(ht,ot){const nt=[ot[0],ot[1]],at=Math.ceil(ht[ht.length-1]/2),lt=at*Math.ceil(ht[ht.length-2]/2);let dt=lt,ft="",pt="b, r, c";for(let mt=2;mt<ht.length-1;mt++)dt*=ht[ht.length-mt-1],ft=`
      int b${mt} = index / ${dt};
      index -= b${mt} * ${dt};
    `+ft,pt=`b${mt}, `+pt;const gt=`
      ivec${ht.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${nt[0]}, ${nt[1]}));
        int index = resTexRC.y * ${nt[0]} + resTexRC.x;

        ${ft}

        int b = index / ${lt};
        index -= b * ${lt};

        // reverse r and c order for packed texture
        int r = imod(index, ${at}) * 2;
        int c = 2 * (index / ${at});

        return ivec${ht.length}(${pt});
      }
    `;return new rt.GlslLibRoutine(gt)}getOutputUnpacked1DCoords(ht,ot){const nt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          return resTexRC.y * ${ot[0]} + resTexRC.x;
        }
      `;return new rt.GlslLibRoutine(nt)}getOutputUnpacked2DCoords(ht,ot){const nt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          int r = index / ${ht[1]};
          int c = index - r * ${ht[1]};
          return ivec2(r, c);
        }
      `;return new rt.GlslLibRoutine(nt)}getOutputUnpacked3DCoords(ht,ot){let nt="";const at=ht.length;let lt=null;at<2&&(lt=[]),lt=new Array(at-1),lt[at-2]=ht[at-1];for(let pt=at-3;pt>=0;--pt)lt[pt]=lt[pt+1]*ht[pt+1];const dt=["r","c","d"],ft=lt.map((pt,gt)=>`int ${dt[gt]} = index / ${pt}; ${gt===lt.length-1?`int ${dt[gt+1]} = index - ${dt[gt]} * ${pt}`:`index -= ${dt[gt]} * ${pt}`};`).join("");return nt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${ft}
          return ivec3(r, c, d);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked4DCoords(ht,ot){let nt="";const at=ht.length;let lt=null;at<2&&(lt=[]),lt=new Array(at-1),lt[at-2]=ht[at-1];for(let pt=at-3;pt>=0;--pt)lt[pt]=lt[pt+1]*ht[pt+1];const dt=["r","c","d","d2"],ft=lt.map((pt,gt)=>`int ${dt[gt]} = index / ${pt}; ${gt===lt.length-1?`int ${dt[gt+1]} = index - ${dt[gt]} * ${pt}`:`index -= ${dt[gt]} * ${pt}`};`).join("");return nt=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${ft}
          return ivec4(r, c, d, d2);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked5DCoords(ht,ot){let nt="";const at=ht.length;let lt=null;at<2&&(lt=[]),lt=new Array(at-1),lt[at-2]=ht[at-1];for(let pt=at-3;pt>=0;--pt)lt[pt]=lt[pt+1]*ht[pt+1];const dt=["r","c","d","d2","d3"],ft=lt.map((pt,gt)=>`int ${dt[gt]} = index / ${pt}; ${gt===lt.length-1?`int ${dt[gt+1]} = index - ${dt[gt]} * ${pt}`:`index -= ${dt[gt]} * ${pt}`};`).join("");return nt=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${ft}
          return ivec5(r, c, d, d2, d3);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked6DCoords(ht,ot){let nt="";const at=ht.length;let lt=null;at<2&&(lt=[]),lt=new Array(at-1),lt[at-2]=ht[at-1];for(let pt=at-3;pt>=0;--pt)lt[pt]=lt[pt+1]*ht[pt+1];const dt=["r","c","d","d2","d3","d4"],ft=lt.map((pt,gt)=>`int ${dt[gt]} = index / ${pt}; ${gt===lt.length-1?`int ${dt[gt+1]} = index - ${dt[gt]} * ${pt}`:`index -= ${dt[gt]} * ${pt}`};`).join("");return nt=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${ot[0]}, ${ot[1]}));
         int index = resTexRC.y * ${ot[0]} + resTexRC.x;
         ${ft}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new rt.GlslLibRoutine(nt)}getCommonUtilFuncs(){const ht={};let ot="uvFromFlat";ht[ot]=new rt.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),ot="packedUVfrom1D",ht[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="packedUVfrom2D",ht[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="packedUVfrom3D",ht[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="sampleTexture";const nt=(0,it.getGlsl)(this.context.glContext.version);return ht[ot]=new rt.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${nt.texture2D}(textureSampler, uv).r;
        }`),ht}getInputsSamplingSnippets(){const ht={},ot=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((nt,at)=>{const lt=this.context.inputTextureLayouts[at],dt=(0,At.generateShaderFuncNameFromInputSamplerName)(nt);lt.isPacked?ht[dt]=this.getPackedSamplerFromInput(dt,nt,lt):ht[dt]=this.getUnpackedSamplerFromInput(dt,nt,lt);const ft=(0,At.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(nt);lt.unpackedShape.length<=ot.unpackedShape.length&&(lt.isPacked?ht[ft]=this.getPackedSamplerAtOutputCoords(ft,lt,ot,nt):ht[ft]=this.getUnpackedSamplerAtOutputCoords(ft,lt,ot,nt))}),ht}getPackedSamplerAtOutputCoords(ht,ot,nt,at){const lt=ot.unpackedShape,dt=nt.unpackedShape,ft=at,pt=(0,At.generateShaderFuncNameFromInputSamplerName)(ft),gt=lt.length,mt=dt.length,yt=tt.BroadcastUtil.getBroadcastDims(lt,dt),vt=(0,At.getCoordsDataType)(mt),wt=mt-gt;let bt;const Bt=(0,At.getGlChannels)();bt=gt===0?"":mt<2&&yt.length>=1?"coords = 0;":yt.map(St=>`coords.${Bt[St+wt]} = 0;`).join(`
`);let Tt="";Tt=mt<2&&gt>0?"coords":lt.map((St,xt)=>`coords.${Bt[xt+wt]}`).join(", ");let It="return outputValue;";const Dt=tt.ShapeUtil.size(lt)===1,Ut=tt.ShapeUtil.size(dt)===1;if(gt!==1||Dt||Ut){if(Dt&&!Ut)It=mt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(yt.length){const St=gt-2,xt=gt-1;yt.indexOf(St)>-1&&yt.indexOf(xt)>-1?It="return vec4(outputValue.x);":yt.indexOf(St)>-1?It="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":yt.indexOf(xt)>-1&&(It="return vec4(outputValue.xx, outputValue.zz);")}}else It=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const _t=`
      vec4 ${ht}() {
        ${vt} coords = getOutputCoords();
        
        int lastDim = coords.${Bt[mt-1]};
        coords.${Bt[mt-1]} = coords.${Bt[mt-2]};
        coords.${Bt[mt-2]} = lastDim;
      
        ${bt}
        vec4 outputValue = ${pt}(${Tt});
        ${It}
      }
    `;return new rt.GlslLibRoutine(_t,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(ht,ot,nt,at){const lt=[nt.width,nt.height],dt=[ot.width,ot.height],ft=ot.unpackedShape.length,pt=nt.unpackedShape.length,gt=ot.unpackedShape,mt=nt.unpackedShape,yt=(0,At.generateShaderFuncNameFromInputSamplerName)(at);if(ft===pt&&tt.ArrayUtil.arraysEqual(dt,lt)){const Ut=`
          float ${ht}() {
            return sampleTexture(${at}, TexCoords);
          }
        `;return new rt.GlslLibRoutine(Ut,["coordinates.sampleTexture"])}const vt=(0,At.getCoordsDataType)(pt),wt=tt.BroadcastUtil.getBroadcastDims(gt,mt),bt=pt-ft;let Bt;const Tt=(0,At.getGlChannels)();Bt=ft===0?"":pt<2&&wt.length>=1?"coords = 0;":wt.map(Ut=>`coords.${Tt[Ut+bt]} = 0;`).join(`
`);let It="";It=pt<2&&ft>0?"coords":ot.unpackedShape.map((Ut,_t)=>`coords.${Tt[_t+bt]}`).join(", ");const Dt=`
        float ${ht}() {
          ${vt} coords = getOutputCoords();
          ${Bt}
          return ${yt}(${It});
        }
      `;return new rt.GlslLibRoutine(Dt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(ht,ot,nt){switch(nt.unpackedShape.length){case 0:return this.getPackedSamplerScalar(ht,ot);case 1:return this.getPackedSampler1D(ht,ot,nt);case 2:return this.getPackedSampler2D(ht,ot,nt);case 3:return this.getPackedSampler3D(ht,ot,nt);default:return this.getPackedSamplerND(ht,ot,nt)}}getUnpackedSamplerFromInput(ht,ot,nt){const at=nt.unpackedShape;switch(at.length){case 0:return this.getUnpackedSamplerScalar(ht,ot,nt);case 1:return this.getUnpackedSampler1D(ht,ot,nt);case 2:return this.getUnpackedSampler2D(ht,ot,nt);case 3:return this.getUnpackedSampler3D(ht,ot,nt);case 4:return this.getUnpackedSampler4D(ht,ot,nt);case 5:return this.getUnpackedSampler5D(ht,ot,nt);case 6:return this.getUnpackedSampler6D(ht,ot,nt);default:throw new Error(`Unsupported dimension ${at.length}-D`)}}getPackedSamplerScalar(ht,ot){const nt=`
          vec4 ${ht}() {
            return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ot}, halfCR);
          }
        `;return new rt.GlslLibRoutine(nt)}getPackedSampler1D(ht,ot,nt){const at=[nt.width,nt.height],lt=[at[1],at[0]],dt=(0,it.getGlsl)(this.context.glContext.version),ft=`vec4 ${ht}(int index) {
      vec2 uv = packedUVfrom1D(
      ${lt[0]}, ${lt[1]}, index);
      return ${dt.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(ft,["coordinates.packedUVfrom1D"])}getPackedSampler2D(ht,ot,nt){const at=nt.unpackedShape,lt=[nt.width,nt.height],dt=(0,it.getGlsl)(this.context.glContext.version),ft=lt[0],pt=lt[1];if(lt!=null&&tt.ArrayUtil.arraysEqual(at,lt)){const vt=`vec4 ${ht}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${pt}.0, ${ft}.0);
        return ${dt.texture2D}(${ot}, uv);
      }`;return new rt.GlslLibRoutine(vt)}const gt=lt,mt=Math.ceil(at[1]/2),yt=`vec4 ${ht}(int row, int col) {
      vec2 uv = packedUVfrom2D(${gt[1]}, ${gt[0]}, ${mt}, row, col);
      return ${dt.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(yt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(ht,ot,nt){const at=nt.unpackedShape,lt=[nt.width,nt.height],dt=[lt[0],lt[1]],ft=(0,it.getGlsl)(this.context.glContext.version);if(at[0]===1){const vt=at.slice(1),wt=[1,2],bt=(0,At.squeezeInputShape)(at,vt),Bt=["b","row","col"],Tt=JSON.parse(JSON.stringify(nt));Tt.unpackedShape=bt;const It=this.getPackedSamplerFromInput(ht,ot,Tt),Dt=`${It.routineBody}
      vec4 ${ht}(int b, int row, int col) {
        return ${ht}(${(0,At.getSqueezedParams)(Bt,wt)});
      } `;return new rt.GlslLibRoutine(Dt,It.dependencies)}const pt=dt[0],gt=dt[1],mt=Math.ceil(at[2]/2),yt=`vec4 ${ht}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${gt}, ${pt}, ${mt*Math.ceil(at[1]/2)}, ${mt}, b, row, col);
      return ${ft.texture2D}(${ot}, uv);}`;return new rt.GlslLibRoutine(yt,["coordinates.packedUVfrom3D"])}getPackedSamplerND(ht,ot,nt){const at=nt.unpackedShape,lt=at.length,dt=[nt.width,nt.height],ft=(0,it.getGlsl)(this.context.glContext.version),pt=[dt[0],dt[1]],gt=pt[1],mt=pt[0],yt=Math.ceil(at[lt-1]/2);let vt=yt*Math.ceil(at[lt-2]/2),wt="int b, int row, int col",bt=`b * ${vt} + (row / 2) * ${yt} + (col / 2)`;for(let Tt=2;Tt<lt-1;Tt++)wt=`int b${Tt}, `+wt,vt*=at[lt-Tt-1],bt=`b${Tt} * ${vt} + `+bt;const Bt=`vec4 ${ht}(${wt}) {
      int index = ${bt};
      int texR = index / ${mt};
      int texC = index - texR * ${mt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${mt}, ${gt});
      return ${ft.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(Bt)}getUnpackedSamplerScalar(ht,ot,nt){const[at,lt]=[nt.width,nt.height];if(at===1&&lt===1){const ft=`
          float ${ht}() {
            return sampleTexture(${ot}, halfCR);
          }
        `;return new rt.GlslLibRoutine(ft,["coordinates.sampleTexture"])}const dt=`
        float ${ht}() {
          int offset_${ot} = coordsToOffset(TexCoords, ${at}, ${lt});
          vec2 uv = uvFromFlat(${at}, ${lt}, offset_${ot});
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(dt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(ht,ot,nt){const at=nt.width,lt=nt.height;if(lt===1&&at===1){const ft=`
        float ${ht}(int index) {
          return sampleTexture(${ot}, halfCR);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.sampleTexture"])}if(lt===1){const ft=`
          float ${ht}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${at}.0, 0.5);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(ft,["coordinates.sampleTexture"])}if(at===1){const ft=`
          float ${ht}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${lt}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(ft,["coordinates.sampleTexture"])}const dt=`
        float ${ht}(int index) {
          vec2 uv = uvFromFlat(${at}, ${lt}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(dt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(ht,ot,nt){const at=nt.unpackedShape,lt=[nt.height,nt.width];if(lt!=null&&tt.ArrayUtil.arraysEqual(at,lt)){const vt=`
          float ${ht}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${lt[1]}.0, ${lt[0]}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}const{newShape:dt,keptDims:ft}=(0,st.squeezeShape)(at),pt=dt;if(pt.length<at.length){const vt=(0,At.squeezeInputShape)(at,pt),wt=JSON.parse(JSON.stringify(nt));wt.unpackedShape=vt;const bt=["col","row"],Bt=`
          ${this.getUnpackedSamplerFromInput(ht,ot,wt).routineBody}
          float ${ht}(int row, int col) {
            return ${ht}(${(0,At.getSqueezedParams)(bt,ft)});
          }
        `;return new rt.GlslLibRoutine(Bt,["coordinates.sampleTexture"])}const gt=lt[1],mt=lt[0];if(mt===1){const vt=`
          float ${ht}(int row, int col) {
            int offset_${ot} = coordsToOffset(TexCoords, ${gt}, ${mt});
            float index = dot(vec3(row, col, offset_${ot}), vec3(${at[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${gt}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(gt===1){const vt=`
          float ${ht}(int row, int col) {
            int offset_${ot} = coordsToOffset(TexCoords, ${gt}, ${mt});
            float index = dot(vec3(row, col, offset_${ot}), vec3(${at[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${mt}.0, 0.5);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const yt=`
        float ${ht}(int row, int col) {
          int index = col * ${at[1]} + row;
          vec2 uv = uvFromFlat(${gt}, ${mt}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(yt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(ht,ot,nt){const at=nt.unpackedShape,lt=at[1]*at[2],dt=at[2],{newShape:ft,keptDims:pt}=(0,st.squeezeShape)(at),gt=ft;if(gt.length<at.length){const yt=(0,At.squeezeInputShape)(at,gt),vt=["batch","col","row"],wt=JSON.parse(JSON.stringify(nt));wt.unpackedShape=yt;const bt=this.getUnpackedSamplerFromInput(ht,ot,wt),Bt=pt.reverse(),Tt=`
          ${bt.routineBody}
          float ${ht}(int batch, int row, int col) {
            return ${ht}(${(0,At.getSqueezedParams)(vt,Bt)});
          }
        `;return new rt.GlslLibRoutine(Tt,bt.dependencies)}const mt=`
          float ${ht}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${lt} + col * ${dt} + row;
            vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
            return sampleTexture(${ot}, uv);
          }
      `;return new rt.GlslLibRoutine(mt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(ht,ot,nt){const at=nt.unpackedShape,lt=at[3],dt=at[2]*lt,ft=`
        float ${ht}(int row, int col, int depth, int depth2) {
          int index = row * ${at[1]*dt} + col * ${dt} +
              depth2 * ${lt} + depth;
          vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(ht,ot,nt){const at=nt.unpackedShape,lt=at[4],dt=at[3]*lt,ft=at[2]*dt,pt=at[1]*ft,{newShape:gt,keptDims:mt}=(0,st.squeezeShape)(at);if(gt.length<at.length){const vt=(0,At.squeezeInputShape)(at,gt),wt=["row","col","depth","depth2","depth3"],bt=JSON.parse(JSON.stringify(nt));bt.unpackedShape=vt;const Bt=`
          ${this.getUnpackedSamplerFromInput(ht,ot,bt).routineBody}
          float ${ht}(int row, int col, int depth, int depth2, int depth3) {
            return ${ht}(${(0,At.getSqueezedParams)(wt,mt)});
          }
        `;return new rt.GlslLibRoutine(Bt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const yt=`
        float ${ht}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${pt} + col * ${ft} + depth * ${dt} +
          depth3 * ${lt} + depth2;
          vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(yt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(ht,ot,nt){const at=nt.unpackedShape,lt=at[5],dt=at[4]*lt,ft=at[3]*dt,pt=at[2]*ft,gt=at[1]*pt,{newShape:mt,keptDims:yt}=(0,st.squeezeShape)(at);if(mt.length<at.length){const wt=(0,At.squeezeInputShape)(at,mt),bt=["row","col","depth","depth2","depth3","depth4"],Bt=JSON.parse(JSON.stringify(nt));Bt.unpackedShape=wt;const Tt=`
            ${this.getUnpackedSamplerFromInput(ht,ot,Bt).routineBody}
            float ${ht}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${ht}(${(0,At.getSqueezedParams)(bt,yt)});
            }
          `;return new rt.GlslLibRoutine(Tt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const vt=`
          float ${ht}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${gt} + col * ${pt} + depth * ${ft} +
            depth2 * ${dt} + depth3 * ${lt} + depth4;
            vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const ht=this.context.outputTextureLayout,ot=ht.shape.length,nt=ht.strides,at=ht.width,lt=ht.height,dt=[];for(let pt=0;pt<ot-1;++pt)dt.push(`
        c[${pt}] = offset / ${nt[pt]};`),dt.push(`
        offset -= c[${pt}] * ${nt[pt]};`);dt.push(`
        c[${ot-1}] = offset;`);const ft=`
      void toVec(vec2 texCoords, out int c[${ot}]) {
        int offset = coordsToOffset(texCoords, ${at}, ${lt});
        ${dt.join("")}
      }
      void toVec(int offset, out int c[${ot}]) {
        ${dt.join("")}
      }
    `;return{toVec:new rt.GlslLibRoutine(ft,["coordinates.coordsToOffset"])}}valueFrom(){const ht={};return this.context.programInfo.inputNames.forEach((ot,nt)=>{const at=this.context.inputTextureLayouts[nt],lt=(at.unpackedShape.length>0?at.unpackedShape:at.shape).length;let dt=`_${ot}`;ht[dt]=new rt.GlslLibRoutine(this.getValueFromSingle(ot,lt,at.width,at.height,!1),[`shapeUtils.indicesToOffset${dt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),dt+="_T",ht[dt]=new rt.GlslLibRoutine(this.getValueFromSingle(ot,lt,at.width,at.height,!0),[`shapeUtils.indicesToOffset${dt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),ht}getValueFromSingle(ht,ot,nt,at,lt){let dt=`_${ht}`;return lt&&(dt+="_T"),`
        float ${dt}(int m[${ot}]) {
          int offset = indicesToOffset${dt}(m);
          vec2 coords = offsetToCoords(offset, ${nt}, ${at});
          float value = getColorAsFloat(${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ht}, coords));
          return value;
        }
        `}getPackedValueFrom(ht,ot,nt,at,lt){let dt=`_${ht}_Pack`;return lt&&(dt+="_T"),`
        vec4 ${dt}(int m[${ot}]) {
          int offset = indicesToOffset_${ht}(m);
          vec2 coords = offsetToCoords(offset, ${nt}, ${at});
          return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ht}, coords);
        }
        `}}_.CoordsGlslLib=ut},1997:(et,_)=>{var _e;Object.defineProperty(_,"__esModule",{value:!0}),_.TopologicalSortGlslRoutines=_.GlslLibRoutineNode=_.GlslLibRoutine=_.GlslLib=_.GlslContext=_.FunctionType=void 0,(_e=_.FunctionType||(_.FunctionType={}))[_e.ValueBased=0]="ValueBased",_e[_e.Positional=1]="Positional",_.GlslContext=class{constructor(tt,rt,it,st){this.glContext=tt,this.programInfo=rt,this.inputTextureLayouts=it,this.outputTextureLayout=st}},_.GlslLib=class{constructor(tt){this.context=tt}},_.GlslLibRoutine=class{constructor(tt,rt){this.routineBody=tt,this.dependencies=rt}},_.GlslLibRoutineNode=class{constructor(tt,rt,it){this.name=tt,this.dependencies=it||[],rt&&(this.routineBody=rt)}addDependency(tt){tt&&this.dependencies.push(tt)}},_.TopologicalSortGlslRoutines=class{static returnOrderedNodes(tt){if(!tt||tt.length===0)return[];if(tt.length===1)return tt;const rt=new Set,it=new Set,st=new Array;return this.createOrderedNodes(tt,rt,it,st),st}static createOrderedNodes(tt,rt,it,st){for(let At=0;At<tt.length;++At)this.dfsTraverse(tt[At],rt,it,st)}static dfsTraverse(tt,rt,it,st){if(!tt||it.has(tt.name))return;if(rt.has(tt.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");rt.add(tt.name);const At=tt.dependencies;if(At&&At.length>0)for(let ut=0;ut<At.length;++ut)this.dfsTraverse(At[ut],rt,it,st);st.push(tt),it.add(tt.name),rt.delete(tt.name)}}},1371:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodingGlslLib=void 0;const tt=_e(1997);class rt extends tt.GlslLib{constructor(st){super(st)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new tt.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new tt.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const st=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new tt.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${st}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const st=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new tt.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${st}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const st=new ArrayBuffer(4),At=new Uint32Array(st),ut=new Uint8Array(st);if(At[0]=3735928559,ut[0]===239)return!0;if(ut[0]===222)return!1;throw new Error("unknown endianness")}}_.EncodingGlslLib=rt},2691:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FragColorGlslLib=void 0;const tt=_e(1997),rt=_e(6757);class it extends tt.GlslLib{constructor(At){super(At)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const At=(0,rt.getGlsl)(this.context.glContext.version);return{setFragColor:new tt.GlslLibRoutine(`
        void setFragColor(float value) {
            ${At.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new tt.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_.FragColorGlslLib=it},3878:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.replaceInlines=void 0;const _e=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_.replaceInlines=function(tt){const rt={};let it;for(;(it=_e.exec(tt))!==null;){const st=it[3].split(",").map(At=>{const ut=At.trim().split(" ");return ut&&ut.length===2?{type:ut[0],name:ut[1]}:null}).filter(At=>At!==null);rt[it[2]]={params:st,body:it[4]}}for(const st in rt){const At="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",st),ut=new RegExp(At,"gm");for(;(it=ut.exec(tt))!==null;){const ct=it[1],ht=it[2],ot=it[3].split(","),nt=ct?`${ct} ${ht};`:"";let at=rt[st].body,lt="";rt[st].params.forEach((ft,pt)=>{ft&&(lt+=`${ft.type} ${ft.name} = ${ot[pt]};
`)}),at=`${lt}
 ${at}`,at=at.replace("return",`${ht} = `);const dt=`
      ${nt}
      {
        ${at}
      }
      `;tt=tt.replace(it[0],dt)}}return tt.replace(_e,"")}},8897:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlslPreprocessor=void 0;const tt=_e(1997),rt=_e(3878),it=_e(1248),st=_e(6757);_.GlslPreprocessor=class{constructor(At,ut,ct,ht){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new tt.GlslContext(At,ut,ct,ht),Object.keys(it.glslRegistry).forEach(nt=>{const at=new it.glslRegistry[nt](this.context);this.libs[nt]=at});const ot=this.glslLibRoutineDependencyGraph;for(const nt in this.libs){const at=this.libs[nt].getFunctions();for(const lt in at){const dt=nt+"."+lt;let ft;ot[dt]?(ft=ot[dt],ft.routineBody=at[lt].routineBody):(ft=new tt.GlslLibRoutineNode(dt,at[lt].routineBody),ot[dt]=ft);const pt=at[lt].dependencies;if(pt)for(let gt=0;gt<pt.length;++gt)if(ot[pt[gt]])ft.addDependency(ot[pt[gt]]);else{const mt=new tt.GlslLibRoutineNode(pt[gt]);ot[pt[gt]]=mt,ft.addDependency(mt)}}}}preprocess(){const At=this.context.programInfo;let ut=At.shaderSource;return this.context.programInfo.hasMain||(ut=`${ut}
      ${(0,st.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),ut=(0,rt.replaceInlines)(ut),`${(0,st.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(At.inputNames,At.variables)}
    ${this.getImports(ut)}
    ${ut}`}getImports(At){const ut=this.selectGlslLibRoutinesToBeIncluded(At);if(ut.length===0)return"";let ct="";for(let ht=0;ht<ut.length;++ht){if(!ut[ht].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${ut[ht].name}`);ct+=ut[ht].routineBody+`
`}return ct}selectGlslLibRoutinesToBeIncluded(At){const ut=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(ct=>{const ht=ct.split(".")[1];At.indexOf(ht)!==-1&&ut.push(this.glslLibRoutineDependencyGraph[ct])}),tt.TopologicalSortGlslRoutines.returnOrderedNodes(ut)}getUniforms(At,ut){const ct=[];if(At)for(const ht of At)ct.push(`uniform sampler2D ${ht};`);if(ut)for(const ht of ut)ct.push(`uniform ${ht.type} ${ht.name}${ht.arrayLength?`[${ht.arrayLength}]`:""};`);return ct.join(`
`)}}},1248:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.glslRegistry=void 0;const tt=_e(6859),rt=_e(1371),it=_e(2691),st=_e(9183),At=_e(9314);_.glslRegistry={encoding:rt.EncodingGlslLib,fragcolor:it.FragColorGlslLib,vec:At.VecGlslLib,shapeUtils:st.ShapeUtilsGlslLib,coordinates:tt.CoordsGlslLib}},9183:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeUtilsGlslLib=void 0;const tt=_e(1997);class rt extends tt.GlslLib{constructor(st){super(st)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const st=this.context.outputTextureLayout.shape.length,At={};return this.context.programInfo.inputNames.forEach((ut,ct)=>{const ht=this.context.inputTextureLayouts[ct].unpackedShape;if(ht.length<=st){const ot=ht.length,nt=st-ot,at=`bcastIndices_${ut}`;let lt="";for(let ft=0;ft<ot;++ft)lt+=`
          realIndices[${ft}] = int( mod(float(bcastedIndices[${nt+ft}]), ${ht[ft]}.0) );
          `;const dt=`
        void ${at} (int bcastedIndices[${st}], out int realIndices[${ot}]) {
          ${lt}
        }
        `;At[at]=new tt.GlslLibRoutine(dt)}}),At}bcastMatmulIndex(){const st=this.context.outputTextureLayout.shape.length,At={};return this.context.programInfo.inputNames.forEach((ut,ct)=>{const ht=this.context.inputTextureLayouts[ct].shape;if(!(ht.length<2||ht.length>st)){const ot=ht.length,nt=st-ot,at=`bcastMatmulIndices_${ut}`;let lt="";for(let ft=0;ft<ot-2;++ft)lt+=`
          realIndices[${ft}] = int( mod(float(bcastedIndices[${nt+ft}]), ${ht[ft]}.0) );
          `;const dt=`
        void ${at}(int bcastedIndices[${st}], out int realIndices[${ot}]) {
          ${lt}
          realIndices[${ot-1}] = bcastedIndices[${st-1}];
          realIndices[${ot-2}] = bcastedIndices[${st-2}];
        }
        `;At[at]=new tt.GlslLibRoutine(dt)}}),At}indicesToOffset(){const st={};return this.context.programInfo.inputNames.forEach((At,ut)=>{const ct=this.context.inputTextureLayouts[ut].shape,ht=this.context.inputTextureLayouts[ut].strides,ot=ct.length;let nt=`indicesToOffset_${At}`;st[nt]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(nt,ot,ht)),nt=`indicesToOffset_${At}_T`,st[nt]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(nt,ot,ht.slice().reverse()))}),st}static indexToOffsetSingle(st,At,ut){let ct="";for(let ht=At-1;ht>=0;--ht)ct+=`
        offset += indices[${ht}] * ${ut[ht]};
        `;return`
      int ${st}(int indices[${At}]) {
        int offset = 0;
        ${ct}
        return offset;
      }
      `}offsetToIndices(){const st={};return this.context.programInfo.inputNames.forEach((At,ut)=>{const ct=this.context.inputTextureLayouts[ut].shape,ht=this.context.inputTextureLayouts[ut].strides,ot=ct.length;let nt=`offsetToIndices_${At}`;st[nt]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(nt,ot,ht)),nt=`offsetToIndices_${At}_T`,st[nt]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(nt,ot,ht.slice().reverse()))}),st}static offsetToIndicesSingle(st,At,ut){const ct=[];for(let ht=0;ht<At-1;++ht)ct.push(`
      indices[${ht}] = offset / ${ut[ht]};`),ct.push(`
        offset -= indices[${ht}] * ${ut[ht]};`);return ct.push(`
      indices[${At-1}] = offset;`),`
      void ${st}(int offset, out int indices[${At}]) {
        ${ct.join("")}
      }
      `}incrementIndices(){const st={};return this.context.programInfo.inputNames.forEach((At,ut)=>{const ct=this.context.inputTextureLayouts[ut].shape,ht=ct.length,ot=`incrementIndices_${At}`;let nt="";for(let lt=0;lt<ht;++lt)nt+=`
        shape[${lt}] = ${ct[lt]};`;const at=`
        void ${ot}(int axis, out int indices[${ht}]) {
          int shape[${ht}];
          ${nt};
          for(int i = ${ht} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;st[ot]=new tt.GlslLibRoutine(at)}),st}}_.ShapeUtilsGlslLib=rt},6757:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultFragShaderMain=_.getFragShaderPreamble=_.getVertexShaderSource=_.getGlsl=void 0;const _e={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},tt={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function rt(it){return it===1?_e:tt}_.getGlsl=rt,_.getVertexShaderSource=function(it){const st=rt(it);return`${st.version}
      precision highp float;
      ${st.attribute} vec3 position;
      ${st.attribute} vec2 textureCoord;

      ${st.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_.getFragShaderPreamble=function(it){const st=rt(it);return`${st.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${st.varyingFrag} vec2 TexCoords;
    ${st.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_.getDefaultFragShaderMain=function(it,st){return`
  void main() {
    int indices[${st}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${rt(it).output} = result;
  }
  `}},9314:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.VecGlslLib=void 0;const tt=_e(1997);class rt extends tt.GlslLib{constructor(st){super(st)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const st=this.context.outputTextureLayout.shape.length,At={add:"+=",sub:"-=",mul:"*=",div:"/="},ut={};for(const ct in At){const ht=`${ct}Vec`;let ot="";for(let at=0;at<st;++at)ot+=`
          dest[${at}] ${At[ct]} src[${at}];
          `;const nt=`
        void ${ht}(int src[${st}], out int dest[${st}]) {
          ${ot}
        }
        `;ut[ht]=new tt.GlslLibRoutine(nt)}return ut}copyVec(){const st=this.context.outputTextureLayout.shape.length;let At="";for(let ct=0;ct<st;++ct)At+=`
        dest[${ct}] = src[${ct}];
        `;const ut=`
      void copyVec(int src[${st}], out int dest[${st}]) {
        ${At}
      }
      `;return{copyVec:new tt.GlslLibRoutine(ut)}}setVecItem(){const st=this.context.outputTextureLayout.shape.length;let At=`
        if(index < 0)
            index =${st} + index;
        if (index == 0)
            m[0] = value;
        `;for(let ct=1;ct<st-1;++ct)At+=`
        else if (index == ${ct})
            m[${ct}] = value;
            `;At+=`
        else
            m[${st-1}] = value;
        `;const ut=`
      void setVecItem(out int m[${st}], int index, int value) {
        ${At}
      }
        `;return{setVecItem:new tt.GlslLibRoutine(ut)}}getVecItem(){const st=this.context.outputTextureLayout.shape.length;let At=`
        if(index < 0)
            index = ${st} + index;
        if (index == 0)
            return m[0];
      `;for(let ct=1;ct<st-1;++ct)At+=`
        else if (index == ${ct})
            return m[${ct}];
      `;At+=`
        else
            return m[${st-1}];
        `;const ut=`
      int getVecItem(int m[${st}], int index) {
        ${At}
      }
    `;return{getVecItem:new tt.GlslLibRoutine(ut)}}}_.VecGlslLib=rt},7860:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLInferenceHandler=void 0;const tt=_e(1315),rt=_e(9240),it=_e(7273),st=_e(9),At=_e(7379),ut=_e(2488),ct=_e(540),ht=_e(3314),ot=_e(5639);_.WebGLInferenceHandler=class{constructor(nt){this.session=nt,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(nt,at){return(0,ht.calculateTextureWidthAndHeight)(this.session.layoutStrategy,nt,at)}executeProgram(nt,at){if(at.length<nt.inputNames.length)throw new Error(`Input size mustn't be less than ${nt.inputNames.length}.`);if(nt.inputNames.length!==nt.inputTypes.length)throw new Error("input names size does not match input types");const lt=[];for(let yt=0;yt<nt.inputNames.length;++yt)lt[yt]=this.getOrCreateTextureData(at[yt],nt.inputTypes[yt]);const dt=((yt,vt)=>{const wt=vt.map(Bt=>`${Bt.unpackedShape.join(",")};${Bt.width}x${Bt.height}`).join("_");let bt=yt.name;return yt.cacheHint&&(bt+="["+yt.cacheHint+"]"),bt+=":"+wt,bt})(nt,lt);let ft=this.session.programManager.getArtifact(dt);const pt=ft?ft.programInfo:typeof nt.get=="function"?nt.get():nt,gt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,pt.output.dims,pt.output.textureType),mt=this.createTextureData(gt,pt.output.type);return ft||(ft=this.session.programManager.build(pt,lt,mt),this.session.programManager.setArtifact(dt,ft)),this.runProgram(ft,lt,mt),mt}run(nt,at){return this.executeProgram(nt,at).tensor}runProgram(nt,at,lt){for(let dt=0;dt<at.length;++dt)if(!!at[dt].isPacked!=(nt.programInfo.inputTypes[dt]===ot.TextureType.packed))throw new Error(`input[${dt}] property packed inconsistent`);if(!!lt.isPacked!=(nt.programInfo.output.textureType===ot.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(nt,at,lt)}getOrCreateTextureData(nt,at){let lt=this.getTextureData(nt.dataId,at===ot.TextureType.packed);if(!lt&&(lt=this.getTextureData(nt.dataId,at!==ot.TextureType.packed),lt))return at===ot.TextureType.packed?this.pack(lt):this.unpack(lt);if(!lt){const dt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,nt.dims,at);if(at===ot.TextureType.packedLastDimension){const gt=nt.dims;if(gt.length===4){const mt=[gt[0],Math.ceil(gt[1]*gt[2]*gt[3]/4)],yt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,mt,at);let vt=nt.numberData;if(gt[1]*gt[2]*gt[3]%4!=0){const wt=gt[0],bt=gt[1]*gt[2]*gt[3],Bt=Math.ceil(bt*1/4)*4;vt=new Float32Array(wt*Bt);for(let Tt=0;Tt<wt;++Tt){const It=Tt*bt,Dt=Tt*Bt+Tt%1*bt;vt.set(nt.numberData.subarray(It,It+bt),Dt)}}return this.createTextureData(yt,nt.type,vt,nt,1)}}if(at===ot.TextureType.packed){const ft=(0,ht.createTextureLayoutFromShape)(this.session.layoutStrategy,nt.dims,1,[],{reverseWH:!0}),pt=this.createTextureData(ft,nt.type,nt.numberData,nt,1);lt=this.pack(pt)}else lt=this.createTextureData(dt,nt.type,nt.numberData,nt,1)}return lt}createTextureDataFromLayoutBindTensor(nt,at,lt,dt){return this.createTextureData(nt,at,lt,dt,1)}createTextureData(nt,at,lt,dt,ft){tt.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(nt)}]`);const pt=this.session.textureManager.createTextureFromLayout(at,nt,lt,ft);return this.createTextureDataFromTexture(nt,at,pt,dt)}reshapeUnpacked(nt,at){const lt=this.getOrCreateTextureData(nt,ot.TextureType.unpacked),dt={channels:lt.channels,height:lt.height,width:lt.width,shape:at.length!==0?at:[1],strides:it.ShapeUtil.computeStrides(at),unpackedShape:at};return this.createTextureDataFromTexture(dt,nt.type,lt.texture).tensor}reshapePacked(nt,at){const lt=this.getOrCreateTextureData(nt,ot.TextureType.packed);if((0,At.isReshapeCheap)(nt.dims,at)){const mt={channels:lt.channels,height:lt.height,width:lt.width,shape:at.length!==0?at:[1],strides:it.ShapeUtil.computeStrides(at),unpackedShape:at,isPacked:!0};return this.createTextureDataFromTexture(mt,nt.type,lt.texture).tensor}const dt=(0,At.processDims3D)(nt.dims),ft=(0,At.processDims3D)(at),pt=this.reshapePacked(nt,dt),gt=this.run((0,At.createPackedReshape3DProgramInfoLoader)(this,pt,ft),[pt]);return this.reshapePacked(gt,at)}cast(nt,at){const lt=this.getOrCreateTextureData(nt,ot.TextureType.unpacked);return this.createTextureDataFromTexture(lt,at,lt.texture).tensor}createTextureDataFromTexture(nt,at,lt,dt,ft){const pt=Object.assign(Object.assign({},nt),{tensor:dt||new rt.Tensor(nt.unpackedShape,at,gt=>this.readTexture(pt),async gt=>this.readTextureAsync(pt),void 0,ft),texture:lt});return this.setTextureData(pt.tensor.dataId,pt,nt.isPacked),pt}getTextureData(nt,at=!1){return this.session.isInitializer(nt)?this.session.getTextureData(nt,at):at?this.packedTextureDataCache.get(nt):this.unpackedTextureDataCache.get(nt)}setTextureData(nt,at,lt=!1){this.session.isInitializer(nt)?this.session.setTextureData(nt,at,lt):(lt?this.packedTextureDataCache:this.unpackedTextureDataCache).set(nt,at)}isTextureLayoutCached(nt,at=!1){return!!this.getTextureData(nt.dataId,at)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(nt=>this.session.textureManager.releaseTexture(nt)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(nt=>this.session.textureManager.releaseTexture(nt)),this.unpackedTextureDataCache=new Map}readTexture(nt){return nt.isPacked?this.readTexture(this.unpack(nt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(nt,nt.tensor.type,nt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ut.encodeAsUint8)(this,nt))}async readTextureAsync(nt){return nt.isPacked?this.readTextureAsync(this.unpack(nt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(nt,nt.tensor.type,nt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ut.encodeAsUint8)(this,nt))}pack(nt){return this.executeProgram((0,st.createPackProgramInfoLoader)(this,nt.tensor),[nt.tensor])}unpack(nt){return this.executeProgram((0,ct.createUnpackProgramInfoLoader)(this,nt.tensor),[nt.tensor])}}},4110:function(et,_,_e){var tt=this&&this.__createBinding||(Object.create?function(Rt,Nt,Gt,Wt){Wt===void 0&&(Wt=Gt);var Xt=Object.getOwnPropertyDescriptor(Nt,Gt);Xt&&!("get"in Xt?!Nt.__esModule:Xt.writable||Xt.configurable)||(Xt={enumerable:!0,get:function(){return Nt[Gt]}}),Object.defineProperty(Rt,Wt,Xt)}:function(Rt,Nt,Gt,Wt){Wt===void 0&&(Wt=Gt),Rt[Wt]=Nt[Gt]}),rt=this&&this.__setModuleDefault||(Object.create?function(Rt,Nt){Object.defineProperty(Rt,"default",{enumerable:!0,value:Nt})}:function(Rt,Nt){Rt.default=Nt}),it=this&&this.__importStar||function(Rt){if(Rt&&Rt.__esModule)return Rt;var Nt={};if(Rt!=null)for(var Gt in Rt)Gt!=="default"&&Object.prototype.hasOwnProperty.call(Rt,Gt)&&tt(Nt,Rt,Gt);return rt(Nt,Rt),Nt};Object.defineProperty(_,"__esModule",{value:!0}),_.WEBGL_OP_RESOLVE_RULES=void 0;const st=_e(8817),At=it(_e(5194)),ut=_e(4752),ct=_e(6668),ht=_e(9754),ot=_e(5042),nt=_e(6742),at=_e(4125),lt=_e(6149),dt=_e(5378),ft=_e(6981),pt=_e(7413),gt=_e(7006),mt=_e(8276),yt=_e(5565),vt=_e(2834),wt=_e(1010),bt=_e(8126),Bt=_e(2801),Tt=_e(565),It=_e(2444),Dt=_e(815),Ut=_e(564),_t=_e(5416),St=_e(1240),xt=_e(5944),Ct=_e(5707),Ft=it(_e(9087)),Lt=_e(7862),Mt=_e(3980);_.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Ft.abs],["Acos","","7+",Ft.acos],["Add","","7+",At.add],["And","","7+",At.and],["Asin","","7+",Ft.asin],["Atan","","7+",Ft.atan],["AveragePool","","7+",vt.averagePool,vt.parseAveragePoolAttributes],["BatchNormalization","","7+",st.batchNormalization,st.parseBatchNormalizationAttributes],["Cast","","6+",ut.cast,ut.parseCastAttributes],["Ceil","","6+",Ft.ceil],["Clip","","6-10",Ft.clip,Ft.parseClipAttributes],["Clip","","11+",Ft.clipV11],["Concat","","4+",ct.concat,ct.parseConcatAttributes],["Conv","","1+",ht.conv,ht.parseConvAttributes],["ConvTranspose","","1+",ot.convTranspose,ot.parseConvTransposeAttributes],["Cos","","7+",Ft.cos],["Div","","7+",At.div],["Dropout","","7+",Ft.identity],["DepthToSpace","","1+",nt.depthToSpace,nt.parseDepthToSpaceAttributes],["Equal","","7+",At.equal],["Elu","","6+",Ft.elu,Ft.parseEluAttributes],["Exp","","6+",Ft.exp],["Flatten","","1+",at.flatten,at.parseFlattenAttributes],["Floor","","6+",Ft.floor],["FusedConv","com.microsoft","1+",ht.conv,ht.parseConvAttributes],["Gather","","1+",lt.gather,lt.parseGatherAttributes],["Gemm","","7-10",dt.gemm,dt.parseGemmAttributesV7],["Gemm","","11+",dt.gemm,dt.parseGemmAttributesV11],["GlobalAveragePool","","1+",vt.globalAveragePool,vt.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",vt.globalMaxPool],["Greater","","7+",At.greater],["Identity","","1+",Ft.identity],["ImageScaler","","1+",ft.imageScaler,ft.parseImageScalerAttributes],["InstanceNormalization","","6+",pt.instanceNormalization,pt.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Ft.leakyRelu,Ft.parseLeakyReluAttributes],["Less","","7+",At.less],["LRN","","1+",gt.lrn,gt.parseLrnAttributes],["Log","","6+",Ft.log],["MatMul","","1+",mt.matMul,mt.parseMatMulAttributes],["MaxPool","","1+",vt.maxPool,vt.parseMaxPoolAttributes],["Mul","","7+",At.mul],["Neg","","6+",Ft.neg],["Not","","1+",Ft.not],["Or","","7+",At.or],["Pad","","2-10",yt.padV2,yt.parsePadAttributesV2],["Pad","","11+",yt.padV11,yt.parsePadAttributesV11],["Pow","","7+",At.pow],["PRelu","","7+",At.pRelu],["ReduceLogSum","","1+",wt.reduceLogSum,wt.parseReduceAttributes],["ReduceMax","","1+",wt.reduceMax,wt.parseReduceAttributes],["ReduceMean","","1+",wt.reduceMean,wt.parseReduceAttributes],["ReduceMin","","1+",wt.reduceMin,wt.parseReduceAttributes],["ReduceProd","","1+",wt.reduceProd,wt.parseReduceAttributes],["ReduceSum","","1-12",wt.reduceSum,wt.parseReduceAttributes],["ReduceSumSquare","","1+",wt.reduceLogSumSquare,wt.parseReduceAttributes],["Relu","","6+",Ft.relu],["Reshape","","5+",bt.reshape],["Resize","","10",Bt.resize,Bt.parseResizeAttributesV10],["Resize","","11+",Bt.resize,Bt.parseResizeAttributesV11],["Shape","","1+",Tt.shape],["Sigmoid","","6+",Ft.sigmoid],["Sin","","7+",Ft.sin],["Slice","","10+",It.sliceV10],["Slice","","1-9",It.slice,It.parseSliceAttributes],["Softmax","","1-12",Dt.softmax,Dt.parseSoftmaxAttributes],["Softmax","","13+",Dt.softmaxV13,Dt.parseSoftmaxAttributesV13],["Split","","2-12",Ut.split,Ut.parseSplitAttributes],["Sqrt","","6+",Ft.sqrt],["Squeeze","","1-12",_t.squeeze,_t.parseSqueezeAttributes],["Squeeze","","13+",_t.squeezeV13],["Sub","","7+",At.sub],["Sum","","6+",St.sum],["Tan","","7+",Ft.tan],["Tanh","","6+",Ft.tanh],["Tile","","6+",xt.tile],["Transpose","","1+",Ct.transpose,Ct.parseTransposeAttributes],["Upsample","","7-8",Mt.upsample,Mt.parseUpsampleAttributesV7],["Upsample","","9",Mt.upsample,Mt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Lt.unsqueeze,Lt.parseUnsqueezeAttributes],["Unsqueeze","","13+",Lt.unsqueezeV13],["Xor","","7+",At.xor]]},8817:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseBatchNormalizationAttributes=_.batchNormalization=void 0;const tt=_e(4910),rt=_e(6757),it=_e(5639),st={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]};_.batchNormalization=(ct,ht,ot)=>(ut(ht),[ct.run(Object.assign(Object.assign({},st),{cacheHint:ot.cacheKey,get:()=>At(ct,ht,ot)}),ht)]),_.parseBatchNormalizationAttributes=ct=>{const ht=ct.attributes.getFloat("epsilon",1e-5),ot=ct.attributes.getFloat("momentum",.9),nt=ct.attributes.getInt("spatial",1);return(0,tt.createAttributeWithCacheKey)({epsilon:ht,momentum:ot,spatial:nt})};const At=(ct,ht,ot)=>{const nt=(0,rt.getGlsl)(ct.session.backend.glContext.version),at=ht[0].dims.length,[lt,dt]=ct.calculateTextureWidthAndHeight(ht[1].dims,it.TextureType.unpacked),ft=`
  float process(int[${at}] indices) {
    vec2 position = offsetToCoords(indices[1], ${lt}, ${dt});
    float scale = getColorAsFloat(${nt.texture2D}(Scale, position));
    float mean = getColorAsFloat(${nt.texture2D}(Mean, position));
    float variance = getColorAsFloat(${nt.texture2D}(Variance, position));
    float b = getColorAsFloat(${nt.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${ot.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},st),{output:{dims:ht[0].dims,type:ht[0].type,textureType:it.TextureType.unpacked},shaderSource:ft})},ut=ct=>{if(!ct||ct.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const ht=ct[0],ot=ct[1],nt=ct[2],at=ct[3],lt=ct[4];if(ht.dims.length<3||ot.dims.length!==1||nt.dims.length!==1||at.dims.length!==1||lt.dims.length!==1)throw new Error("invalid input shape.");if(ot.dims[0]!==ht.dims[1]||nt.dims[0]!==ht.dims[1]||at.dims[0]!==ht.dims[1]||lt.dims[0]!==ht.dims[1])throw new Error("invalid input shape.");if(ht.type!=="float32"&&ht.type!=="float64"||ot.type!=="float32"&&ot.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||at.type!=="float32"&&at.type!=="float64"||lt.type!=="float32"&&lt.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.xor=_.sub=_.pRelu=_.pow=_.or=_.mul=_.less=_.greater=_.equal=_.div=_.and=_.add=_.glslPRelu=_.glslPow=_.glslXor=_.glslOr=_.glslAnd=_.glslLess=_.glslGreater=_.glslEqual=_.glslSub=_.glslMul=_.glslDiv=_.glslAdd=void 0;const tt=_e(7273),rt=_e(1997),it=_e(6757),st=_e(5639);function At(){const vt="add_";return{body:`
  float ${vt}(float a, float b) {
    return a + b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ut(){const vt="div_";return{body:`
  float ${vt}(float a, float b) {
    return a / b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ct(){const vt="mul_";return{body:`
  float ${vt}(float a, float b) {
    return a * b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ht(){const vt="sub_";return{body:`
  float ${vt}(float a, float b) {
    return a - b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ot(){const vt="equal_";return{body:`
  float ${vt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function nt(){const vt="greater_";return{body:`
  float ${vt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function at(){const vt="less_";return{body:`
  float ${vt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function lt(){const vt="and_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function dt(){const vt="or_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ft(){const vt="xor_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function pt(){return function(vt){const wt=`${vt}_`;return{body:`
  float ${wt}(float a, float b) {
    return ${vt}(a, b);
  }
  vec4 ${wt}(vec4 v1, vec4 v2) {
    return ${vt}(v1, v2);
  }
  `,name:wt,type:rt.FunctionType.ValueBased}}("pow")}function gt(){const vt="prelu_";return{body:`
  float ${vt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}_.glslAdd=At,_.glslDiv=ut,_.glslMul=ct,_.glslSub=ht,_.glslEqual=ot,_.glslGreater=nt,_.glslLess=at,_.glslAnd=lt,_.glslOr=dt,_.glslXor=ft,_.glslPow=pt,_.glslPRelu=gt;const mt=(vt,wt,bt,Bt=wt[0].type,Tt)=>{const It=vt.session.pack?st.TextureType.packed:st.TextureType.unpacked;return{name:bt.name,inputNames:["A","B"],inputTypes:[It,It],cacheHint:Tt,get:()=>yt(vt,wt,bt,Bt)}},yt=(vt,wt,bt,Bt=wt[0].type)=>{const Tt=vt.session.pack?st.TextureType.packed:st.TextureType.unpacked,It=!tt.ShapeUtil.areEqual(wt[0].dims,wt[1].dims);let Dt=wt[0].dims;const Ut=vt.session.pack;if(It){const xt=tt.BroadcastUtil.calcShape(wt[0].dims,wt[1].dims,!1);if(!xt)throw new Error("Can't perform binary op on the given tensors");Dt=xt;const Ct=Dt.length,Ft=wt[0].dims.length!==0?wt[0].dims.length:1,Lt=wt[1].dims.length!==0?wt[1].dims.length:1,Mt=wt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Rt=wt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Nt=(0,it.getGlsl)(vt.session.backend.glContext.version),Gt=Ut?`
      ${bt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${bt.name}(a, b);
        ${Nt.output} = result;
      }`:`
      ${bt.body}
      float process(int indices[${Ct}]) {
        int aindices[${Ft}];
        int bindices[${Lt}];
        ${Mt}
        ${Rt}
        return ${bt.name}(_A(aindices), _B(bindices));
      }`;return{name:bt.name,inputNames:["A","B"],inputTypes:[Tt,Tt],output:{dims:Dt,type:Bt,textureType:Tt},shaderSource:Gt,hasMain:Ut}}const _t=(0,it.getGlsl)(vt.session.backend.glContext.version),St=`
    ${bt.body}
    void main() {
      vec4 v1 = ${_t.texture2D}(A, TexCoords);
      vec4 v2 = ${_t.texture2D}(B, TexCoords);
      vec4 result = ${bt.name}(v1, v2);
      ${_t.output} = result;
    }
    `;return{name:bt.name,inputNames:["A","B"],inputTypes:[Tt,Tt],output:{dims:wt[0].dims,type:Bt,textureType:Tt},shaderSource:St,hasMain:!0}};_.add=(vt,wt)=>[vt.run(mt(vt,wt,At()),wt)],_.and=(vt,wt)=>[vt.run(mt(vt,wt,lt(),"bool"),wt)],_.div=(vt,wt)=>[vt.run(mt(vt,wt,ut()),wt)],_.equal=(vt,wt)=>[vt.run(mt(vt,wt,ot(),"bool"),wt)],_.greater=(vt,wt)=>[vt.run(mt(vt,wt,nt(),"bool"),wt)],_.less=(vt,wt)=>[vt.run(mt(vt,wt,at(),"bool"),wt)],_.mul=(vt,wt)=>[vt.run(mt(vt,wt,ct()),wt)],_.or=(vt,wt)=>[vt.run(mt(vt,wt,dt(),"bool"),wt)],_.pow=(vt,wt)=>[vt.run(mt(vt,wt,pt()),wt)],_.pRelu=(vt,wt)=>[vt.run(mt(vt,wt,gt()),wt)],_.sub=(vt,wt)=>[vt.run(mt(vt,wt,ht()),wt)],_.xor=(vt,wt)=>[vt.run(mt(vt,wt,ft(),"bool"),wt)]},4752:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseCastAttributes=_.cast=void 0;const tt=_e(7273);_.cast=(it,st,At)=>(rt(st),[it.cast(st[0],At)]),_.parseCastAttributes=it=>tt.ProtoUtil.tensorDataTypeFromProto(it.attributes.getInt("to"));const rt=it=>{if(!it||it.length!==1)throw new Error("Cast requires 1 input.");if(it[0].type==="string")throw new Error("Invalid input type.")}},4595:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedConcatProgramInfoLoader=void 0;const tt=_e(6757),rt=_e(5639),it=_e(432),st=_e(5614);_.createPackedConcatProgramInfoLoader=(ut,ct,ht)=>{const ot=(nt=ct.length,at=ht.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:nt},(lt,dt)=>`X${dt}`),inputTypes:Array(nt).fill(rt.TextureType.packed),cacheHint:at});var nt,at;return Object.assign(Object.assign({},ot),{get:()=>((lt,dt,ft,pt)=>{const gt=ft[0].dims.slice();if(pt>=gt.length||pt<-1*gt.length)throw new Error("axis specified for concat doesn't match input dimensionality");pt<0&&(pt=gt.length+pt);const mt=gt.slice(0);for(let Mt=1;Mt<ft.length;Mt++){const Rt=ft[Mt].dims.slice();for(let Nt=0;Nt<gt.length;Nt++)if(Nt===pt)mt[pt]+=Rt[Nt];else if(gt[Nt]!==Rt[Nt])throw new Error("non concat dimensions must match")}const yt=mt.length,vt=(0,st.getChannels)("coords",yt),wt=(0,it.getCoordsDataType)(yt),bt=(0,st.unpackFromChannel)(),Bt=ft.map(Mt=>Mt.dims),Tt=(0,it.getGlChannels)(yt),It=new Array(Bt.length-1);It[0]=Bt[0][pt];for(let Mt=1;Mt<It.length;Mt++)It[Mt]=It[Mt-1]+Bt[Mt][pt];const Dt=Tt[pt],Ut=Tt.slice(-2),_t=Tt.join();let St=`if (${Dt} < ${It[0]}) {
        return getChannel(
            getX0(${_t}), vec2(${Ut.join()}));
        }`;for(let Mt=1;Mt<It.length;Mt++){const Rt=It[Mt-1];St+=`
            if (${Dt} < ${It[Mt]}  && ${Dt} >= ${It[Mt-1]}) {
              return getChannel(
                getX${Mt}(${At(Tt,Dt,Rt)}),
                vec2(${At(Ut,Dt,Rt)}));
            }`}const xt=It.length,Ct=It[It.length-1];St+=`
            return getChannel(
              getX${xt}(${At(Tt,Dt,Ct)}),
              vec2(${At(Ut,Dt,Ct)}));`;const Ft=(0,tt.getGlsl)(lt.session.backend.glContext.version),Lt=`
          ${bt}
          float getValue(${Tt.map(Mt=>"int "+Mt)}) {
            ${St}
          }

          void main() {
            ${wt} coords = getOutputCoords();
            int lastDim = coords.${Tt[yt-1]};
            coords.${Tt[yt-1]} = coords.${Tt[yt-2]};
            coords.${Tt[yt-2]} = lastDim;

            vec4 result = vec4(getValue(${vt}), 0., 0., 0.);

            ${vt[yt-1]} = ${vt[yt-1]} + 1;
            if (${vt[yt-1]} < ${mt[yt-1]}) {
              result.g = getValue(${vt});
            }

            ${vt[yt-2]} = ${vt[yt-2]} + 1;
            if (${vt[yt-2]} < ${mt[yt-2]}) {
              result.a = getValue(${vt});
            }

            ${vt[yt-1]} = ${vt[yt-1]} - 1;
            if (${vt[yt-2]} < ${mt[yt-2]} &&
                ${vt[yt-1]} < ${mt[yt-1]}) {
              result.b = getValue(${vt});
            }
            ${Ft.output} = result;
          }
        `;return Object.assign(Object.assign({},dt),{output:{dims:mt,type:ft[0].type,textureType:rt.TextureType.packed},shaderSource:Lt,hasMain:!0})})(ut,ot,ct,ht.axis)})};const At=(ut,ct,ht)=>{const ot=ut.indexOf(ct);return ut.map((nt,at)=>at===ot?`${nt} - ${ht}`:nt).join()}},6668:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConcatAttributes=_.concat=void 0;const tt=_e(4910),rt=_e(5639),it=_e(4595);_.concat=(nt,at,lt)=>(ot(at),nt.session.pack&&at[0].dims.length>1?[nt.run((0,it.createPackedConcatProgramInfoLoader)(nt,at,lt),at)]:[nt.run(st(nt,at,lt),at)]);const st=(nt,at,lt)=>{const dt=(ft=at.length,pt=lt.cacheKey,{name:"Concat",inputNames:Array.from({length:ft},(gt,mt)=>`X${mt}`),inputTypes:Array(ft).fill(rt.TextureType.unpacked),cacheHint:pt});var ft,pt;return Object.assign(Object.assign({},dt),{get:()=>((gt,mt,yt,vt)=>{const wt=yt[0].dims.slice();if(vt>=wt.length||vt<-1*wt.length)throw new Error("axis specified for concat doesn't match input dimensionality");vt<0&&(vt=wt.length+vt);const bt=wt.slice(0);for(let _t=1;_t<yt.length;_t++){const St=yt[_t].dims.slice();for(let xt=0;xt<wt.length;xt++)if(xt===vt)bt[vt]+=St[xt];else if(wt[xt]!==St[xt])throw new Error("non concat dimensions must match")}const Bt=bt.length,Tt=new Array(yt.length);let It=0;for(let _t=0;_t<Tt.length;++_t)It+=yt[_t].dims[vt],Tt[_t]=It;let Dt="";Dt=yt.length<5?At(Tt):ut(Tt);const Ut=`
        ${ct(yt.length,Bt)}
        ${ht(Tt)}
        ${Dt}
        float process(int indices[${Bt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${vt}]);

          if(textureIndex != 0) {
            indices[${vt}] = indices[${vt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},mt),{output:{dims:bt,type:yt[0].type,textureType:rt.TextureType.unpacked},shaderSource:Ut})})(0,dt,at,lt.axis)})},At=nt=>`int getTextureWhereDataResides(int index) {
      ${nt.map((at,lt)=>`if(index<${at}) {return ${lt};}
`).join("")}
    }`,ut=nt=>At(nt),ct=(nt,at)=>{const lt=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${at}]) {`];for(let dt=0;dt<nt;++dt)dt===0?lt.push(`	if (textureIndex == ${dt}) { return _X${dt}(indices); }`):dt===nt-1?lt.push(`	else { return _X${dt}(indices); }`):lt.push(`	else if (textureIndex == ${dt}) { return _X${dt}(indices); }`);return lt.push("	}"),lt.join(`
`)},ht=nt=>{const at=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let lt=0;lt<nt.length;++lt)lt===0?at.push(`	if (index == ${lt}) { return ${nt[lt]}; }`):lt===nt.length-1?at.push(`	else { return ${nt[lt]}; }`):at.push(`	else if (index == ${lt}) { return ${nt[lt]}; }`);return at.push("	}"),at.join(`
`)};_.parseConcatAttributes=nt=>(0,tt.createAttributeWithCacheKey)({axis:nt.attributes.getInt("axis")});const ot=nt=>{if(!nt||nt.length<1)throw new Error("too few inputs");const at=nt[0].type,lt=nt[0].dims.length;if(at==="string")throw new Error("string tensor is not supported yet");for(const dt of nt){if(dt.type!==at)throw new Error("input tensors should be one type");if(dt.dims.length!==lt)throw new Error("input tensors should have the same shape")}}},7825:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackedGroupedConvProgramInfoLoader=void 0;const tt=_e(1315),rt=_e(6757),it=_e(5639),st=_e(9754),At=_e(2150);_.createUnpackedGroupedConvProgramInfoLoader=(ut,ct,ht)=>{const ot=(nt=ct.length>2,at=ht.cacheKey,{name:"GroupedConv",inputNames:nt?["X","W","Bias"]:["X","W"],inputTypes:nt?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:at});var nt,at;return Object.assign(Object.assign({},ot),{get:()=>((lt,dt,ft,pt)=>{const gt=dt.length>2?"value += getBias(output_channel);":"",mt=dt[0].dims.slice(),yt=dt[1].dims.slice(),vt=yt[0]/pt.group;tt.Logger.verbose("GroupedConv",`autpPad:${pt.autoPad}, dilations:${pt.dilations}, group:${pt.group}, kernelShape:${pt.kernelShape}, pads:${pt.pads}, strides:${pt.strides}`);const wt=(0,st.calculateOutputShape)(mt,yt,pt.dilations,pt.pads,pt.strides),bt=(0,rt.getGlsl)(lt.session.backend.glContext.version),{activationFunction:Bt,applyActivation:Tt}=(0,At.getActivationSnippet)(pt),It=`
  const ivec2 strides = ivec2(${pt.strides[0]}, ${pt.strides[1]});
  const ivec2 pads = ivec2(${pt.pads[0]}, ${pt.pads[1]});
  ${Bt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${vt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${yt[1]}; wInChannel++) {
      int input_channel = group_id * ${yt[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${yt[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${pt.dilations[0]};

        if (xHeight < 0 || xHeight >= ${mt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${yt[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${pt.dilations[1]};
          if (xWidth < 0 || xWidth >= ${mt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${gt}
    ${Tt}
    ${bt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ft),{output:{dims:wt,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:It,hasMain:!0})})(ut,ct,ot,ht)})}},7708:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.conv2DPacked=_.conv2DPackedPointwise=void 0;const tt=_e(9754),rt=_e(5950),it=_e(5632);_.conv2DPackedPointwise=(st,At,ut)=>{const ct=At[0].dims,ht=At[1].dims,ot=(0,tt.calculateOutputShape)(ct,ht,ut.dilations,ut.pads,ut.strides),nt=st.reshapePacked(At[0],[ct[1],ct[2]*ct[3]]),at=st.reshapePacked(At[1],[ht[0],ht[1]]),lt=At.length>2?[at,nt,At[2]]:[at,nt],dt=st.run((0,it.createPackedMatmulProgramInfoLoader)(st,lt,ut),lt);return st.reshapePacked(dt,ot)},_.conv2DPacked=(st,At,ut)=>{const ct=At[0].dims,ht=At[1].dims,ot=(0,tt.calculateOutputShape)(ct,ht,ut.dilations,ut.pads,ut.strides),nt=st.run((0,rt.createPackedIm2ColProgramInfoLoader)(st,At[0],At[1],ot,ut),[At[0]]),at=st.reshapePacked(At[1],[ht[0],ht[1]*ht[2]*ht[3]]),lt=At.length===3?[at,nt,At[2]]:[at,nt],dt=st.run((0,it.createPackedMatmulProgramInfoLoader)(st,lt,ut),lt);return st.reshapePacked(dt,ot)}},5042:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvTransposeAttributes=_.convTranspose=void 0;const tt=_e(4910),rt=_e(6757),it=_e(5639),st=_e(2150),At=(at,lt,dt,ft,pt,gt)=>(at-1)*lt+dt+(ft-1)*pt+1-gt,ut=(at,lt,dt,ft,pt)=>{const gt=Math.floor(at/2);lt==="SAME_UPPER"?(dt[ft]=gt,dt[pt]=at-gt):lt==="SAME_LOWER"&&(dt[ft]=at-gt,dt[pt]=gt)};_.convTranspose=(at,lt,dt)=>(nt(lt,dt),ct(at,lt,dt));const ct=(at,lt,dt)=>{const ft=ot(dt,lt);return[ht(at,lt,ft)]},ht=(at,lt,dt)=>at.run(((ft,pt,gt)=>{const mt=(yt=pt.length>2,vt=gt.cacheKey,{name:"ConvTranspose",inputNames:yt?["X","W","B"]:["X","W"],inputTypes:yt?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:vt});var yt,vt;return Object.assign(Object.assign({},mt),{get:()=>((wt,bt,Bt,Tt)=>{const It=bt.length>2?"getB(output_channel)":"0.0",Dt=bt[0].dims,Ut=bt[1].dims,_t=Ut[1],St=Ut[0]/Tt.group,xt=[bt[0].dims[0],bt[1].dims[1]*Tt.group,...Tt.outputShape],Ct=(0,rt.getGlsl)(wt.session.backend.glContext.version),{activationFunction:Ft,applyActivation:Lt}=(0,st.getActivationSnippet)(Tt),Mt=`
  const ivec2 strides = ivec2(${Tt.strides[0]}, ${Tt.strides[1]});
  const ivec2 pads = ivec2(${Tt.pads[0]}, ${Tt.pads[1]});
  ${Ft}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${_t};
    int wOutChannel = output_channel - group_id * ${_t};

    float value = ${It};
    for (int inChannelOffset = 0; inChannelOffset < ${St}; inChannelOffset++) {
      int input_channel = group_id * ${St} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Ut[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Ut[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${Tt.dilations[0]}, wHOff * ${Tt.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Dt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Dt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Lt}
    ${Ct.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Bt),{output:{dims:xt,type:bt[0].type,textureType:it.TextureType.unpacked},shaderSource:Mt,hasMain:!0})})(ft,pt,mt,gt)})})(at,lt,dt),lt),ot=(at,lt)=>{const dt=at.kernelShape.slice();if(at.kernelShape.length===0)for(let mt=2;mt<lt[1].dims.length;++mt)dt.push(lt[1].dims[mt]);const ft=at.pads.slice(),pt=at.outputShape.slice();((mt,yt,vt,wt,bt,Bt,Tt,It)=>{const Dt=mt.length-2,Ut=It.length===0;for(let _t=0;_t<Dt;++_t){const St=Ut?mt[_t+2]*Bt[_t]:It[_t],xt=At(mt[_t+2],Bt[_t],bt[_t],yt[_t],vt[_t],St);ut(xt,wt,bt,_t,_t+Dt),Ut&&It.push(Bt[_t]*(mt[_t+2]-1)+Tt[_t]+(yt[_t]-1)*vt[_t]+1-bt[_t]-bt[_t+Dt])}})(lt[0].dims,dt,at.dilations,at.autoPad,ft,at.strides,at.outputPadding,pt);const gt=Object.assign({},at);return Object.assign(gt,{kernelShape:dt,pads:ft,outputShape:pt,cacheKey:at.cacheKey}),gt};_.parseConvTransposeAttributes=at=>{const lt=at.attributes,dt=(0,st.parseInternalActivationAttributes)(lt),ft=lt.getString("auto_pad","NOTSET"),pt=lt.getInts("dilations",[1,1]),gt=lt.getInt("group",1),mt=lt.getInts("kernel_shape",[]),yt=lt.getInts("output_padding",[0,0]),vt=lt.getInts("output_shape",[]),wt=lt.getInts("pads",[0,0,0,0]),bt=lt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:ft,dilations:pt,group:gt,kernelShape:mt,outputPadding:yt,outputShape:vt,pads:wt,strides:bt},dt))};const nt=(at,lt)=>{if(!at||at.length!==2&&at.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(at[0].dims.length!==4||at[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(at[0].dims[1]!==at[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const dt=at[1].dims[1]*lt.group;if(at.length===3&&(at[2].dims.length!==1||at[2].dims[0]!==dt))throw new Error("invalid bias");const ft=at[0].dims.length-2;if(lt.dilations.length!==ft)throw new Error(`dilations should be ${ft}D`);if(lt.strides.length!==ft)throw new Error(`strides should be ${ft}D`);if(lt.pads.length!==2*ft)throw new Error(`pads should be ${2*ft}D`);if(lt.outputPadding.length!==ft)throw new Error(`output_padding should be ${ft}D`);if(lt.kernelShape.length!==0&&lt.kernelShape.length!==at[1].dims.length-2)throw new Error("invalid kernel shape");if(lt.outputShape.length!==0&&lt.outputShape.length!==at[0].dims.length-2)throw new Error("invalid output shape");if(at[0].type!=="float32"||at[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(at.length===3&&at[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvAttributes=_.conv=_.calculateOutputShape=void 0;const tt=_e(4910),rt=_e(7273),it=_e(7825),st=_e(7708),At=_e(3281),ut=_e(2150),ct=_e(1625),ht=_e(8276);_.calculateOutputShape=(ft,pt,gt,mt,yt)=>{const vt=ft[0],wt=ft.slice(2),bt=wt.length,Bt=pt[0],Tt=pt.slice(2).map((Dt,Ut)=>Dt+(Dt-1)*(gt[Ut]-1)),It=wt.map((Dt,Ut)=>Dt+mt[Ut]+mt[Ut+bt]).map((Dt,Ut)=>Math.floor((Dt-Tt[Ut]+yt[Ut])/yt[Ut]));return[vt,Bt].concat(...It)},_.conv=(ft,pt,gt)=>(dt(pt,gt),ot(ft,pt,gt));const ot=(ft,pt,gt)=>{const mt=lt(gt,pt),yt=ft.session.pack,vt=mt.kernelShape[0]===1&&mt.kernelShape[1]===1;return mt.group>1?[ft.run((0,it.createUnpackedGroupedConvProgramInfoLoader)(ft,pt,mt),pt)]:vt&&yt?[nt(ft,pt,mt)]:yt&&pt[0].dims.length===4&&pt[0].dims[0]===1&&!vt?[(0,st.conv2DPacked)(ft,pt,mt)]:[at(ft,pt,mt)]},nt=(ft,pt,gt)=>{const mt=pt[0].dims,yt=pt[1].dims,vt=(0,_.calculateOutputShape)(mt,yt,gt.dilations,gt.pads,gt.strides),wt=ft.reshapeUnpacked(pt[0],[mt[1],mt[2]*mt[3]]),bt=ft.reshapeUnpacked(pt[1],[yt[0],yt[1]]),Bt=pt.length>2?[bt,wt,pt[2]]:[bt,wt],Tt=ft.run((0,ht.createMatmulProgramInfoLoader)(Bt,gt),Bt);return ft.reshapeUnpacked(Tt,vt)},at=(ft,pt,gt)=>{const mt=pt[0].dims,yt=pt[1].dims,vt=(0,_.calculateOutputShape)(mt,yt,gt.dilations,gt.pads,gt.strides),wt=ft.run((0,ct.createIm2ColProgramInfoLoader)(ft,pt[0],pt[1],vt,gt),[pt[0]]),bt=pt.length===3?[wt,pt[1],pt[2]]:[wt,pt[1]];return ft.run((0,At.createDotProductProgramInfoLoader)(ft,pt,vt,gt),bt)},lt=(ft,pt)=>{const gt=ft.kernelShape.slice();if(ft.kernelShape.length===0)for(let vt=2;vt<pt[1].dims.length;++vt)gt.push(pt[1].dims[vt]);const mt=ft.pads.slice();rt.PoolConvUtil.adjustPadsBasedOnAutoPad(pt[0].dims,ft.strides,ft.dilations,gt,mt,ft.autoPad);const yt=Object.assign({},ft);return Object.assign(yt,{kernelShape:gt,pads:mt,cacheKey:ft.cacheKey}),yt};_.parseConvAttributes=ft=>{const pt=ft.attributes,gt=(0,ut.parseInternalActivationAttributes)(pt),mt=pt.getString("auto_pad","NOTSET"),yt=pt.getInts("dilations",[1,1]),vt=pt.getInt("group",1),wt=pt.getInts("kernel_shape",[]),bt=pt.getInts("pads",[0,0,0,0]),Bt=pt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:mt,dilations:yt,group:vt,kernelShape:wt,pads:bt,strides:Bt},gt))};const dt=(ft,pt)=>{if(!ft||ft.length!==2&&ft.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(ft[0].dims.length!==4||ft[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(ft[0].dims[1]!==ft[1].dims[1]*pt.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(ft.length===3&&(ft[2].dims.length!==1||ft[1].dims[0]!==ft[2].dims[0]))throw new Error("invalid bias");const gt=ft[0].dims.length-2;if(pt.dilations.length!==gt)throw new Error(`dilations should be ${gt}D`);if(pt.strides.length!==gt)throw new Error(`strides should be ${gt}D`);if(pt.pads.length!==2*gt)throw new Error(`pads should be ${2*gt}D`);if(pt.kernelShape.length!==0&&pt.kernelShape.length!==ft[1].dims.length-2)throw new Error("invalid kernel shape");if(ft[0].type!=="float32"||ft[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(ft.length===3&&ft[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseDepthToSpaceAttributes=_.depthToSpace=void 0;const tt=_e(5707);_.depthToSpace=(it,st,At)=>{rt(st);const ut=At.blocksize,ct=ut*ut,ht=At.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],ot=At.mode==="DCR"?[st[0].dims[0],ut,ut,st[0].dims[1]/ct,st[0].dims[2],st[0].dims[3]]:[st[0].dims[0],st[0].dims[1]/ct,ut,ut,st[0].dims[2],st[0].dims[3]],nt=it.reshapeUnpacked(st[0],ot),at={perm:ht,cacheKey:`${ht}`},[lt]=(0,tt.transpose)(it,[nt],at),dt=[st[0].dims[0],st[0].dims[1]/ct,st[0].dims[2]*ut,st[0].dims[3]*ut];return[it.reshapeUnpacked(lt,dt)]},_.parseDepthToSpaceAttributes=it=>{const st=it.attributes.getInt("blocksize");if(st<1)throw new Error(`blocksize must be >= 1, but got : ${st} for DepthToSpace`);const At=it.attributes.getString("mode","DCR");if(At!=="DCR"&&At!=="CRD")throw new Error(`unrecognized mode: ${At} for DepthToSpace`);return{mode:At,blocksize:st}};const rt=it=>{if(it.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${it.length}`);if(it[0].type==="string"||it[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createDotProductProgramInfoLoader=void 0;const tt=_e(7273),rt=_e(6757),it=_e(5639),st=_e(2150),At=_e(1625);_.createDotProductProgramInfoLoader=(ut,ct,ht,ot)=>{const nt=((at,lt)=>({name:"ConvDotProduct",inputNames:at?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:at?[it.TextureType.unpacked,it.TextureType.packedLastDimension,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.packedLastDimension],cacheKey:lt.activationCacheKey}))(ct.length>2,ot);return Object.assign(Object.assign({},nt),{get:()=>((at,lt,dt,ft,pt)=>{const gt=dt[0].dims,mt=dt[1].dims,yt=[mt[0],Math.ceil(gt[1]*mt[2]*mt[3]/4)],vt=(0,At.calculateIm2ColDims)(gt,mt,ft),[wt,bt]=at.calculateTextureWidthAndHeight(yt,it.TextureType.packedLastDimension),Bt=tt.ShapeUtil.computeStrides(vt),[Tt,It]=at.calculateTextureWidthAndHeight(vt,it.TextureType.packedLastDimension),Dt=ft.length,Ut=dt.length<3?"0.0":"_B(b)",_t=Math.ceil(gt[1]*mt[2]*mt[3]/4),{activationFunction:St,applyActivation:xt}=(0,st.getActivationSnippet)(pt),Ct=(0,rt.getGlsl)(at.session.backend.glContext.version),Ft=`
${St}
float process(int indices[${Dt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Bt[0]} + im2col[1] * ${Bt[1]} + im2col[2] * ${Bt[2]};
  int kernelOffset = indices[1] * ${yt[1]};
  float value = ${Ut};
  for (int i = 0; i < ${_t}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${Tt}, ${It});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${wt}, ${bt});
    value += dot(${Ct.texture2D}(Im2Col, im2colCoords), ${Ct.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${xt}
  return value;
}`;return Object.assign(Object.assign({},lt),{output:{dims:ft,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:Ft})})(ut,nt,ct,ht,ot)})}},4125:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseFlattenAttributes=_.flatten=void 0;const tt=_e(7273);_.flatten=(it,st,At)=>{rt(st,At);const ut=tt.ShapeUtil.flattenShape(st[0].dims,At);return[it.reshapeUnpacked(st[0],ut)]},_.parseFlattenAttributes=it=>it.attributes.getInt("axis",1);const rt=(it,st)=>{if(!it||it.length!==1)throw new Error("Flatten requires 1 input.");const At=it[0].dims.length;if(At===0)throw new Error("scalar tensor is not supported.");if(st<-At||st>At)throw new Error("Invalid axis");if(it[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInternalActivationAttributes=_.getActivationSnippet=void 0;const tt=_e(7273),rt=_e(9087);_.getActivationSnippet=function(it){let st;switch(it.activation){case"Relu":st=(0,rt.glslRelu)();break;case"Sigmoid":st=(0,rt.glslSigmoid)();break;case"Clip":st=(0,rt.glslClip)(it.clipMin,it.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const At=st.name;return{activationFunction:st.body,applyActivation:`value = ${At}_(value);`}},_.parseInternalActivationAttributes=it=>{const st=it.getString("activation","");if(st==="Clip"){const[At,ut]=it.getFloats("activation_params",[tt.MIN_CLIP,tt.MAX_CLIP]);return{activation:st,clipMax:ut,clipMin:At,activationCacheKey:`${st}:${At},${ut}`}}return{activation:st,activationCacheKey:st}}},6149:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGatherAttributes=_.gather=void 0;const tt=_e(4910),rt=_e(6145),it=_e(7273),st=_e(5639);_.gather=(ht,ot,nt)=>(ct(ot,nt.axis),[ht.run(ut(ht,ot,nt),ot)]),_.parseGatherAttributes=ht=>(0,tt.createAttributeWithCacheKey)({axis:ht.attributes.getInt("axis",0)});const At={name:"Gather",inputNames:["A","B"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked]},ut=(ht,ot,nt)=>{const at=Object.assign(Object.assign({},At),{cacheHint:nt.cacheKey});return Object.assign(Object.assign({},at),{get:()=>((lt,dt,ft,pt)=>{const gt=ft[0].dims.slice(),mt=ft[1].dims.slice(),yt=new Array(gt.length+mt.length-1);pt=it.ShapeUtil.normalizeAxis(pt,gt.length);const vt=[];for(let bt=0;bt<yt.length;bt++)bt<pt?(yt[bt]=gt[bt],vt.push(`inputIdx[${bt}] = outputIdx[${bt}];`)):bt<pt+mt.length?(yt[bt]=mt[bt-pt],vt.push(`indexDataIdx[${bt-pt}] = outputIdx[${bt}];`)):(yt[bt]=gt[bt-mt.length+1],vt.push(`inputIdx[${bt-mt.length+1}] = outputIdx[${bt}];`));const wt=`
      float process(int outputIdx[${yt.length||1}]) {
        int inputIdx[${gt.length}];
        int indexDataIdx[${mt.length||1}];
        indexDataIdx[0] = 0;
        ${vt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${pt}] = idx < 0 ? idx + ${gt[pt]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},dt),{output:{dims:yt,type:ft[0].type,textureType:st.TextureType.unpacked},shaderSource:wt})})(0,at,ot,nt.axis)})},ct=(ht,ot)=>{if(!ht||ht.length!==2)throw new Error("Gather requires 2 inputs.");const nt=ht[0].dims.length;if(nt<1)throw new Error("Invalid input shape.");if(ot<-nt||ot>nt-1)throw new Error("Invalid axis.");if(rt.NUMBER_TYPES.indexOf(ht[0].type)===-1)throw new Error("Invaid input type.");if(ht[1].type!=="int32"&&ht[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGemmAttributesV11=_.parseGemmAttributesV7=_.gemm=void 0;const tt=_e(4910),rt=_e(7273),it=_e(5639);_.gemm=(ht,ot,nt)=>(ct(ot,nt),[ht.run(At(ot,nt),ot)]);const st=(ht,ot)=>{const nt=ht.attributes.getInt("transA",0)!==0,at=ht.attributes.getInt("transB",0)!==0,lt=ht.attributes.getFloat("alpha",1),dt=ht.attributes.getFloat("beta",1);return(0,tt.createAttributeWithCacheKey)({transA:nt,transB:at,alpha:lt,beta:dt,isOptionalC:ot})};_.parseGemmAttributesV7=ht=>st(ht,!1),_.parseGemmAttributesV11=ht=>st(ht,!0);const At=(ht,ot)=>{const nt={name:"Gemm",inputNames:ht.length===3?["A","B","C"]:["A","B"],inputTypes:ht.length===3?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],key:ot.cacheKey};return Object.assign(Object.assign({},nt),{get:()=>ut(nt,ht,ot)})},ut=(ht,ot,nt)=>{const at=ot[0].dims.slice(),lt=ot[1].dims.slice(),[dt,ft]=rt.GemmUtil.getShapeOfGemmResult(at,nt.transA,lt,nt.transB,ot.length===3?ot[2].dims:void 0),pt=[dt,ft];if(!pt)throw new Error("Can't use gemm on the given tensors");let gt=at[at.length-1],mt="";nt.transA&&(gt=at[0]),nt.transA&&nt.transB?mt="value += _A_T(a) * _B_T(b);":nt.transA&&!nt.transB?mt="value += _A_T(a) * _B(b);":!nt.transA&&nt.transB?mt="value += _A(a) * _B_T(b);":nt.transA||nt.transB||(mt="value += _A(a) * _B(b);");const yt=pt.length,vt=`
      float process(int indices[${yt}]) {
          int a[${yt}];
          int b[${yt}];
          ${ot.length===3?`int c[${ot[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${ot.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${gt}; ++k) {
              a[${yt-1}] = k;
              b[${yt-2}] = k;
              ${mt}
          }

          value = value * alpha;
          ${ot.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},ht),{output:{dims:pt,type:ot[0].type,textureType:it.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:nt.alpha},{name:"beta",type:"float",data:nt.beta}],shaderSource:vt})},ct=(ht,ot)=>{if(!ht)throw new Error("Input is missing");if(ot.isOptionalC&&(ht.length<2||ht.length>3))throw new Error("Invaid input shape.");if(!ot.isOptionalC&&ht.length!==3)throw new Error("Gemm requires 3 inputs");if(ht.length===3&&ht[2].dims.length!==1&&ht[2].dims.length!==2)throw new Error("Invalid input shape of C");if(ht[0].type!=="float32"&&ht[0].type!=="float64"||ht[1].type!=="float32"&&ht[1].type!=="float64"||ht.length===3&&ht[2].type!=="float32"&&ht[2].type!=="float64")throw new Error("Invalid input type.");if(ht[0].type!==ht[1].type||ht.length===3&&ht[0].type!==ht[2].type)throw new Error("Input types are mismatched")}},5950:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedIm2ColProgramInfoLoader=void 0;const tt=_e(6757),rt=_e(5639),it=_e(5614);_.createPackedIm2ColProgramInfoLoader=(st,At,ut,ct,ht)=>{const ot=(nt=ht.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[rt.TextureType.packed],cacheHint:nt});var nt;return Object.assign(Object.assign({},ot),{get:()=>((at,lt,dt,ft,pt,gt)=>{const mt=dt.dims,yt=ft.dims,vt=pt.length,wt=[yt[1]*yt[2]*yt[3],pt[2]*pt[3]],bt=yt[2]*yt[3],Bt=(0,it.unpackFromChannel)(),Tt=(0,tt.getGlsl)(at.session.backend.glContext.version);let It="";for(let Ut=0;Ut<=1;Ut++)for(let _t=0;_t<=1;_t++)It+=`
            blockIndex = rc.x + ${_t};
            pos = rc.y + ${Ut};

            if(blockIndex < ${wt[1]} && pos < ${wt[0]}) {
              offsetY = int(blockIndex / (${pt[vt-1]})) * ${gt.strides[0]} -
                ${gt.pads[0]};
              d0 = offsetY + ${gt.dilations[0]} * (imod(pos, ${bt}) / ${yt[2]});

              if(d0 < ${mt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${pt[vt-1]}) * ${gt.strides[1]} -
                  ${gt.pads[1]};
                d1 = offsetX + ${gt.dilations[1]} * imod(imod(pos, ${bt}), ${yt[2]});

                if(d1 < ${mt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${bt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Ut+_t}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Dt=`
      ${Bt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${It}
          ${Tt.output} = result;
      }
            `;return Object.assign(Object.assign({},lt),{output:{dims:wt,type:dt.type,textureType:rt.TextureType.packed},shaderSource:Dt,hasMain:!0})})(st,ot,At,ut,ct,ht)})}},1625:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.calculateIm2ColDims=_.createIm2ColProgramInfoLoader=void 0;const tt=_e(5639);_.createIm2ColProgramInfoLoader=(rt,it,st,At,ut)=>{const ct=(ht=ut.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[tt.TextureType.unpacked],cacheHint:ht});var ht;return Object.assign(Object.assign({},ct),{get:()=>((ot,nt,at,lt,dt,ft)=>{const pt=at.dims,gt=lt.dims,mt=dt.length,yt=(0,_.calculateIm2ColDims)(pt,gt,dt,4),vt=`
        const int XC = ${pt[1]};
        const int XH = ${pt[2]};
        const int XW = ${pt[3]};
        const int KH = ${ft.kernelShape[0]};
        const int KW = ${ft.kernelShape[1]};
        const int dilationH = ${ft.dilations[0]};
        const int dilationW = ${ft.dilations[1]};
        const int strideH = ${ft.strides[0]};
        const int strideW = ${ft.strides[1]};
        const int padH = ${ft.pads[0]};
        const int padW = ${ft.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${mt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${pt.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},nt),{output:{dims:yt,type:at.type,textureType:tt.TextureType.packedLastDimension},shaderSource:vt})})(0,ct,it,st,At,ut)})},_.calculateIm2ColDims=(rt,it,st,At=4)=>[st[0],st[2],st[3],Math.ceil(rt[1]*it[2]*it[3]/At)]},6981:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseImageScalerAttributes=_.imageScaler=void 0;const tt=_e(4910),rt=_e(5639);_.imageScaler=(ct,ht,ot)=>(ut(ht),[ct.run(st(ct,ht,ot),ht)]),_.parseImageScalerAttributes=ct=>{const ht=ct.attributes.getFloat("scale"),ot=ct.attributes.getFloats("bias");return(0,tt.createAttributeWithCacheKey)({scale:ht,bias:ot})};const it={name:"ImageScaler",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},st=(ct,ht,ot)=>{const nt=Object.assign(Object.assign({},it),{cacheHint:ot.cacheKey});return Object.assign(Object.assign({},nt),{get:()=>((at,lt,dt,ft)=>{const pt=dt[0].dims.slice(),gt=pt.length,mt=`
      ${At(ft.bias.length)}
      float process(int indices[${gt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},lt),{output:{dims:pt,type:dt[0].type,textureType:rt.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:ft.bias.length,data:ft.bias},{name:"scale",type:"float",data:ft.scale}],shaderSource:mt})})(0,nt,ht,ot)})},At=ct=>{const ht=[`float getBias(float bias[${ct}], int channel) {`];for(let ot=0;ot<ct;++ot)ot===0?ht.push(`	if (channel == ${ot}) { return bias[${ot}]; }`):ot===ct-1?ht.push(`	else { return bias[${ot}]; }`):ht.push(`	else if (channel == ${ot}) { return bias[${ot}]; }`);return ht.push("	}"),ht.join(`
`)},ut=ct=>{if(!ct||ct.length!==1)throw new Error("ImageScaler requires 1 input.");if(ct[0].dims.length!==4)throw new Error("Invalid input shape.");if(ct[0].type!=="float32"&&ct[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInstanceNormalizationAttributes=_.instanceNormalization=void 0;const tt=_e(6757),rt=_e(5639);_.instanceNormalization=(ht,ot,nt)=>{ct(ot);const at=ht.run(st(ot[0]),ot);return[ht.run(ut(ht,ot[0],nt,at.dims),[ot[0],at,ot[1],ot[2]])]},_.parseInstanceNormalizationAttributes=ht=>ht.attributes.getFloat("epsilon",1e-5);const it={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},st=ht=>Object.assign(Object.assign({},it),{get:()=>((ot,nt)=>{const at=nt.dims.slice(),lt=at[1],dt=at[2]*at[3],ft=[at[0],lt],pt=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${at[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${at[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${dt});
        temp = 0.0;
        for(int a2=0; a2<${at[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${at[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${dt});

        return v;
      }`;return Object.assign(Object.assign({},ot),{output:{dims:ft,type:nt.type,textureType:rt.TextureType.packedLastDimension},shaderSource:pt})})(it,ht)}),At={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[rt.TextureType.unpacked,rt.TextureType.packedLastDimension,rt.TextureType.unpacked,rt.TextureType.unpacked]},ut=(ht,ot,nt,at)=>{const lt=Object.assign(Object.assign({},At),{cacheHint:`${nt}`});return Object.assign(Object.assign({},lt),{get:()=>((dt,ft,pt,gt,mt)=>{const yt=(0,tt.getGlsl)(dt.session.backend.glContext.version),[vt,wt]=dt.calculateTextureWidthAndHeight(mt,rt.TextureType.packedLastDimension),[bt,Bt]=[vt/4,wt],Tt=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${bt}, ${Bt});
        return ${yt.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},ft),{output:{dims:pt.dims,type:pt.type,textureType:rt.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:gt}],shaderSource:Tt})})(ht,lt,ot,nt,at)})},ct=ht=>{if(!ht||ht.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const ot=ht[0],nt=ht[1],at=ht[2];if(ot.dims.length<3||nt.dims.length!==1||at.dims.length!==1)throw new Error("Invalid input shape.");if(nt.dims[0]!==ot.dims[1]||at.dims[0]!==ot.dims[1])throw new Error("Input shapes are mismatched.");if(ot.type!=="float32"&&ot.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||at.type!=="float32"&&at.type!=="float64")throw new Error("Invalid input type.");if(ht[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createLrnProgramInfoLoader=_.parseLrnAttributes=_.lrn=void 0;const tt=_e(4910),rt=_e(5639);_.lrn=(ut,ct,ht)=>(At(ct),[ut.run(st(ct,ht),ct)]),_.parseLrnAttributes=ut=>{const ct=ut.attributes.getFloat("alpha",1e-4),ht=ut.attributes.getFloat("beta",.75),ot=ut.attributes.getFloat("bias",1),nt=ut.attributes.getInt("size");return(0,tt.createAttributeWithCacheKey)({alpha:ct,beta:ht,bias:ot,size:nt})};const it={name:"LRN",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]};function st(ut,ct){return Object.assign(Object.assign({},it),{cacheHint:ct.cacheKey,get:()=>function(ht,ot){const nt=ht[0].dims[1],at=ht[0].dims.length,lt=-Math.floor((ot.size-1)/2),dt=Math.ceil((ot.size-1)/2),ft=`float(${ot.alpha}) / float(${ot.size})`,pt=`
    float process(int indices[${at}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${lt}; i <= ${dt}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${nt}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${ot.bias}) + ${ft} * square_sum, float(${ot.beta}));
    }`;return Object.assign(Object.assign({},it),{cacheHint:ot.cacheKey,output:{dims:ht[0].dims,type:ht[0].type,textureType:rt.TextureType.unpacked},shaderSource:pt})}(ut,ct)})}_.createLrnProgramInfoLoader=st;const At=ut=>{if(!ut||ut.length!==1)throw new Error("LRN requires 1 input.");if(ut[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(ut[0].type!=="float32")throw new Error("input should be float type")}},5632:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedMatmulProgramInfoLoader=void 0;const tt=_e(7273),rt=_e(6757),it=_e(5639),st=_e(432),At=_e(2150),ut=_e(8276);_.createPackedMatmulProgramInfoLoader=(ct,ht,ot)=>{const nt=(at=ht.length>2,lt=ot.activationCacheKey,{name:"MatMul (packed)",inputNames:at?["A","B","Bias"]:["A","B"],inputTypes:at?[it.TextureType.packed,it.TextureType.packed,it.TextureType.packed]:[it.TextureType.packed,it.TextureType.packed],cacheHint:lt});var at,lt;return Object.assign(Object.assign({},nt),{get:()=>((dt,ft,pt,gt)=>{const mt=pt.length>2,yt=mt?"value += getBiasForMatmul();":"",vt=pt[0].dims,wt=pt[1].dims,bt=tt.BroadcastUtil.calcShape(vt,wt,!0),Bt=!tt.ShapeUtil.areEqual(pt[0].dims,pt[1].dims);if(!bt)throw new Error("Can't use matmul on the given tensors");const Tt=vt[vt.length-1],It=Math.ceil(Tt/2),Dt=vt.length,Ut=wt.length,_t=(0,rt.getGlsl)(dt.session.backend.glContext.version),St=(0,st.getCoordsDataType)(bt.length),xt=bt.length,Ct=(0,st.getGlChannels)(),{activationFunction:Ft,applyActivation:Lt}=(0,At.getActivationSnippet)(gt),Mt=mt?`${(0,ut.getBiasForMatmul)(St,Ct,pt[2].dims,bt,!0)}`:"",Rt=Bt?`${function(Xt,Yt,Zt,er){let Ar=[],hr=[];const dr=Zt[0].dims,ar=Zt[1].dims,ur=dr.length,or=ar.length,fr=er.length,pr=fr-ur,yr=fr-or;Ar=dr.map((Cr,Dr)=>`coords.${Yt[Dr+pr]}`),Ar[ur-1]="i*2",Ar.join(", "),hr=ar.map((Cr,Dr)=>`coords.${Yt[Dr+yr]}`),hr[or-2]="i*2",hr.join(", ");const Tr=tt.BroadcastUtil.getBroadcastDims(dr,er),Br=tt.BroadcastUtil.getBroadcastDims(ar,er),Fr=Tr.map(Cr=>`coords.${Yt[Cr+pr]} = 0;`).join(`
`),Qr=Br.map(Cr=>`coords.${Yt[Cr+yr]} = 0;`).join(`
`),kr=`int lastDim = coords.${Yt[fr-1]};
  coords.${Yt[fr-1]} = coords.${Yt[fr-2]};
  coords.${Yt[fr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Xt} coords = getOutputCoords();
  ${kr}
  ${Fr}
  vec4 outputValue = getA(${Ar});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Xt} coords = getOutputCoords();
  ${kr}
  ${Qr}
  vec4 outputValue = getB(${hr});
  return outputValue;
}`}(St,Ct,pt,bt)}`:"",Nt=Bt?"getAAtOutCoordsMatmul(i)":`getA(${function(Xt,Yt){let Zt="";for(let er=0;er<Yt-2;er++)Zt+=`rc.${Xt[er]}, `;return Zt+=`rc.${Xt[Yt-2]}, i*2`,Zt}(Ct,Dt)})`,Gt=Bt?"getBAtOutCoordsMatmul(i)":`getB(${function(Xt,Yt){let Zt="";for(let er=0;er<Yt-2;er++)Zt+=`rc.${Xt[er]}, `;return Zt+=`i*2, rc.${Xt[Yt-1]}`,Zt}(Ct,Ut)})`,Wt=`
            ${Rt}
            ${Mt}
            ${Ft}
            void main() {
              ${Bt?"":`${St} rc =
          getOutputCoords(); int lastDim = rc.${Ct[xt-1]}; rc.${Ct[xt-1]} =
          rc.${Ct[xt-2]}; rc.${Ct[xt-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${It}; i++) {
                vec4 a = ${Nt};
                vec4 b = ${Gt};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${yt}
              ${Lt}
              ${_t.output} = value;
            }`;return Object.assign(Object.assign({},ft),{output:{dims:bt,type:pt[0].type,textureType:it.TextureType.packed},shaderSource:Wt,hasMain:!0})})(ct,nt,ht,ot)})}},8276:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBiasForMatmul=_.createMatmulProgramInfoLoader=_.parseMatMulAttributes=_.matMul=void 0;const tt=_e(7273),rt=_e(5639),it=_e(432),st=_e(2150),At=_e(5632);_.matMul=(nt,at,lt)=>(ht(at),nt.session.pack?[nt.run((0,At.createPackedMatmulProgramInfoLoader)(nt,at,lt),at)]:[nt.run(ct(at,lt),at)]),_.parseMatMulAttributes=nt=>(0,st.parseInternalActivationAttributes)(nt.attributes);const ut=(nt,at)=>({name:"MatMul",inputNames:nt?["A","B","Bias"]:["A","B"],inputTypes:nt?[rt.TextureType.unpacked,rt.TextureType.unpacked,rt.TextureType.unpacked]:[rt.TextureType.unpacked,rt.TextureType.unpacked],cacheHint:at});function ct(nt,at){const lt=ut(nt.length>2,at.activationCacheKey);return Object.assign(Object.assign({},lt),{get:()=>function(dt,ft,pt){const gt=ft[0].dims,mt=ft[1].dims,yt=tt.BroadcastUtil.calcShape(gt,mt,!0);if(!yt)throw new Error("Can't use matmul on the given tensors");const vt=(0,it.getCoordsDataType)(yt.length),wt=(0,it.getGlChannels)(),{activationFunction:bt,applyActivation:Bt}=(0,st.getActivationSnippet)(pt),Tt=ft.length>2,It=Tt?"value += getBiasForMatmul();":"",Dt=Tt?`${ot(vt,wt,ft[2].dims,yt,!1)}`:"",Ut=yt.length,_t=gt.length,St=mt.length,xt=`
    ${bt}
    ${Dt}
    float process(int indices[${Ut}]) {
        int a[${_t}];
        int b[${St}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${gt[gt.length-1]}; ++k) {
            a[${_t-1}] = k;
            b[${St-2}] = k;
            value += _A(a) * _B(b);
        }
        ${It}
        ${Bt}
        return value;
    }`;return Object.assign(Object.assign({},dt),{output:{dims:yt,type:ft[0].type,textureType:rt.TextureType.unpacked},shaderSource:xt})}(lt,nt,at)})}_.createMatmulProgramInfoLoader=ct;const ht=nt=>{if(!nt||nt.length!==2)throw new Error("MatMul requires 2 inputs.");if(nt[0].dims[nt[0].dims.length-1]!==nt[1].dims[nt[1].dims.length-2])throw new Error("shared dimension does not match.");if(nt[0].type!=="float32"&&nt[0].type!=="float64"||nt[1].type!=="float32"&&nt[1].type!=="float64")throw new Error("inputs should be float type");if(nt[0].type!==nt[1].type)throw new Error("inputs types should match")};function ot(nt,at,lt,dt,ft){let pt="";const gt=lt.length,mt=dt.length,yt=mt-gt;pt=mt<2&&gt>0?"coords":lt.map((bt,Bt)=>`coords.${at[Bt+yt]}`).join(", ");const vt=tt.BroadcastUtil.getBroadcastDims(lt,dt).map(bt=>`coords.${at[bt+yt]} = 0;`).join(`
`);let wt="vec4(outputValue.xx, outputValue.yy)";return tt.ShapeUtil.size(lt)===1&&(wt="vec4(outputValue.x)"),ft?`
vec4 getBiasForMatmul() {
  ${nt} coords = getOutputCoords();
  ${vt}
  vec4 outputValue = getBias(${pt});
  return ${wt};
}`:`
float getBiasForMatmul() {
  ${nt} coords = getOutputCoords();
  ${vt}
  return getBias(coords.x);
}`}_.getBiasForMatmul=ot},9:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackProgramInfoLoader=void 0;const tt=_e(6757),rt=_e(5639),it=_e(432),st=_e(5614),At={name:"pack",inputNames:["A"],inputTypes:[rt.TextureType.unpackedReversed]};_.createPackProgramInfoLoader=(ut,ct)=>Object.assign(Object.assign({},At),{get:()=>((ht,ot)=>{const nt=(0,tt.getGlsl)(ht.session.backend.glContext.version),at=ot.dims,lt=at.length,dt=ot.dims.length,ft=(0,it.getCoordsDataType)(dt),pt=(0,st.getChannels)("rc",dt),gt=(mt=dt,yt=pt,vt=at[at.length-2],wt=at[at.length-1],mt===0||mt===1?"":`
    int r = ${yt[mt-2]};
    int c = ${yt[mt-1]};
    int rp1 = ${yt[mt-2]} + 1;
    int cp1 = ${yt[mt-1]} + 1;
    bool rEdge = rp1 >= ${wt};
    bool cEdge = cp1 >= ${vt};
    `);var mt,yt,vt,wt;let bt;bt=lt===0?[1,1]:lt===1?[at[0],1]:[at[dt-1],at[dt-2]];const Bt=function(Dt,Ut,_t){if(Dt===0)return"false";if(Dt===1)return`rc > ${Ut[0]}`;let St="";for(let xt=Dt-2;xt<Dt;xt++)St+=`${_t[xt]} >= ${Ut[xt-Dt+2]}`,xt<Dt-1&&(St+="||");return St}(dt,bt,pt),Tt=function(Dt,Ut){const _t=Dt.length;if(_t===0)return"getA(), 0, 0, 0";if(_t===1)return`getA(rc),
            rc + 1 >= ${Dt[0]} ? 0. : getA(rc + 1),
            0, 0`;let St="";if(_t>2)for(let xt=0;xt<_t-2;++xt)St+=`${Ut[xt]},`;return`getA(${St}r, c),
          rEdge ? 0. : getA(${St}rp1, c),
          cEdge ? 0. : getA(${St}r, cp1),
          rEdge || cEdge ? 0. : getA(${St}rp1, cp1)`}(at,pt),It=`
        void main() {
          ${ft} rc = getOutputCoords();

          if(${Bt}) {
            ${nt.output} = vec4(0);
          } else {
            ${gt}

            ${nt.output} = vec4(${Tt});
          }
        }
      `;return Object.assign(Object.assign({},At),{hasMain:!0,output:{dims:ot.dims,type:ot.type,textureType:rt.TextureType.packed},shaderSource:It})})(ut,ct)})},5614:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.unpackFromChannel=_.getChannels=_.getVecChannels=void 0;const tt=_e(432);function rt(it,st){return(0,tt.getGlChannels)(st).map(At=>`${it}.${At}`)}_.getVecChannels=rt,_.getChannels=function(it,st){return st===1?[it]:rt(it,st)},_.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parsePadAttributesV11=_.padV11=_.parsePadAttributesV2=_.padV2=void 0;const tt=_e(4910),rt=_e(7273),it=_e(6757),st=_e(5639),At={name:"Pad",inputNames:["A"],inputTypes:[st.TextureType.unpacked]};_.padV2=(ft,pt,gt)=>(ht(pt),[ft.run(Object.assign(Object.assign({},At),{cacheHint:gt.cacheKey,get:()=>ct(ft,pt[0],gt)}),pt)]),_.parsePadAttributesV2=ft=>{const pt=ft.attributes.getString("mode","constant"),gt=ft.attributes.getFloat("value",0),mt=ft.attributes.getInts("pads");return(0,tt.createAttributeWithCacheKey)({mode:pt,value:gt,pads:mt})},_.padV11=(ft,pt,gt)=>{ot(pt);const mt=ut(ft,pt,gt);return(0,_.padV2)(ft,[pt[0]],mt)},_.parsePadAttributesV11=ft=>ft.attributes.getString("mode","constant");const ut=(ft,pt,gt)=>{if(!ft.session.isInitializer(pt[1].dataId)||pt.length>=3&&!ft.session.isInitializer(pt[2].dataId))throw new Error("dynamic pad attributes are not allowed");const mt=Array.from(pt[1].integerData),yt=pt.length>=3?pt[2].floatData[0]:0;return(0,tt.createAttributeWithCacheKey)({mode:gt,pads:mt,value:yt})},ct=(ft,pt,gt)=>{const mt=rt.ShapeUtil.padShape(pt.dims.slice(),gt.pads),yt=mt.length,vt=`
      ${nt(ft,pt,gt)}
      float process(int[${yt}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[st.TextureType.unpacked],output:{dims:mt,type:pt.type,textureType:st.TextureType.unpacked},shaderSource:vt}},ht=ft=>{if(!ft||ft.length!==1)throw new Error("Pad requires 1 input");if(ft[0].type!=="float32"&&ft[0].type!=="float64")throw new Error("Invalid input type.")},ot=ft=>{if(!ft||ft.length!==2&&ft.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(ft[1].type!=="int32")throw new Error("Invalid input type.");if(ft.length>=3&&ft[2].type==="string")throw new Error("Invalid input type.")},nt=(ft,pt,gt)=>{const mt=(0,it.getGlsl)(ft.session.backend.glContext.version),[yt,vt]=ft.calculateTextureWidthAndHeight(pt.dims,st.TextureType.unpacked),wt=rt.ShapeUtil.computeStrides(pt.dims);switch(gt.mode){case"constant":return at(mt,pt.dims,wt,yt,vt,gt.pads,gt.value);case"reflect":return lt(mt,pt.dims,wt,yt,vt,gt.pads);case"edge":return dt(mt,pt.dims,wt,yt,vt,gt.pads);default:throw new Error("Invalid mode")}},at=(ft,pt,gt,mt,yt,vt,wt)=>{const bt=pt.length;let Bt="";for(let Tt=bt-1;Tt>=0;--Tt)Bt+=`
        k = m[${Tt}] - ${vt[Tt]};
        if (k < 0)  return constant;
        if (k >= ${pt[Tt]}) return constant;
        offset += k * ${gt[Tt]};
        `;return`
      float padA(int m[${bt}]) {
        const float constant = float(${wt});
        int offset = 0;
        int k = 0;
        ${Bt}
        vec2 coords = offsetToCoords(offset, ${mt}, ${yt});
        float value = getColorAsFloat(${ft.texture2D}(A, coords));
        return value;
      }
      `},lt=(ft,pt,gt,mt,yt,vt)=>{const wt=pt.length;let bt="";for(let Bt=wt-1;Bt>=0;--Bt)bt+=`
        k = m[${Bt}] - ${vt[Bt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(pt[Bt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${pt[Bt]}) { k = _2n_1 - k; }
        }
        offset += k * ${gt[Bt]};
        `;return`
      float padA(int m[${wt}]) {
        int offset = 0;
        int k = 0;
        ${bt}
        vec2 coords = offsetToCoords(offset, ${mt}, ${yt});
        float value = getColorAsFloat(${ft.texture2D}(A, coords));
        return value;
      }
      `},dt=(ft,pt,gt,mt,yt,vt)=>{const wt=pt.length;let bt="";for(let Bt=wt-1;Bt>=0;--Bt)bt+=`
        k = m[${Bt}] - ${vt[Bt]};
        if (k < 0)  k = 0;
        if (k >= ${pt[Bt]}) k = ${pt[Bt]-1};
        offset += k * ${gt[Bt]};
      `;return`
      float padA(int m[${wt}]) {
        int offset = 0;
        int k = 0;
        ${bt}
        vec2 coords = offsetToCoords(offset, ${mt}, ${yt});
        float value = getColorAsFloat(${ft.texture2D}(A, coords));
        return value;
      }
      `}},2834:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.globalMaxPool=_.parseMaxPoolAttributes=_.maxPool=_.parseGlobalAveragePoolAttributes=_.globalAveragePool=_.parseAveragePoolAttributes=_.averagePool=void 0;const tt=_e(4910),rt=_e(7273),it=_e(5639);_.averagePool=(dt,ft,pt)=>{ot(ft);const gt={name:"AveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:pt.cacheKey};return[dt.run(Object.assign(Object.assign({},gt),{get:()=>st(ft,gt,!1,pt)}),ft)]},_.parseAveragePoolAttributes=dt=>{const ft=dt.attributes.getString("auto_pad","NOTSET"),pt=dt.attributes.getInt("ceil_mode",0),gt=dt.attributes.getInt("count_include_pad",0)!==0,mt=dt.attributes.getInts("kernel_shape"),yt=dt.attributes.getInts("strides",[]),vt=dt.attributes.getInts("pads",[]);if(pt!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,tt.createAttributeWithCacheKey)({autoPad:ft,ceilMode:pt,countIncludePad:gt,kernelShape:mt,strides:yt,pads:vt})};const st=(dt,ft,pt,gt)=>{const[mt,yt]=ut(dt,gt,pt),vt=rt.ShapeUtil.size(mt.kernelShape);let wt="";mt.countIncludePad?wt+=`value /= float(${vt});`:wt+=`value /= float(${vt} - pad);`;const bt=`
        ${nt(dt[0].dims,mt,"value += _X(x);",wt,"0.0")}
      `;return Object.assign(Object.assign({},ft),{output:{dims:yt,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:bt})};_.globalAveragePool=(dt,ft,pt)=>{ot(ft);const gt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:`${pt.countIncludePad}`};return[dt.run(Object.assign(Object.assign({},gt),{get:()=>st(ft,gt,!0,pt)}),ft)]},_.parseGlobalAveragePoolAttributes=dt=>{const ft=dt.attributes.getInt("count_include_pad",0)!==0;return(0,tt.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:ft,kernelShape:[],strides:[],pads:[]})},_.maxPool=(dt,ft,pt)=>{ot(ft);const gt={name:"MaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:pt.cacheKey};return[dt.run(Object.assign(Object.assign({},gt),{get:()=>At(ft,gt,!1,pt)}),ft)]},_.parseMaxPoolAttributes=dt=>{const ft=dt.attributes.getString("auto_pad","NOTSET"),pt=dt.attributes.getInt("ceil_mode",0),gt=dt.attributes.getInts("kernel_shape"),mt=dt.attributes.getInts("strides",[]),yt=dt.attributes.getInts("pads",[]),vt=dt.attributes.getInt("storage_order",0),wt=dt.attributes.getInts("dilations",[]);if(vt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(pt!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,tt.createAttributeWithCacheKey)({autoPad:ft,ceilMode:pt,countIncludePad:!1,kernelShape:gt,strides:mt,pads:yt,storageOrder:vt,dilations:wt})};const At=(dt,ft,pt,gt)=>{const[mt,yt]=ut(dt,gt,pt),vt=`
      ${nt(dt[0].dims,mt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},ft),{output:{dims:yt,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:vt})},ut=(dt,ft,pt)=>{const gt=dt[0].dims.slice(),mt=Object.hasOwnProperty.call(ft,"dilations"),yt=ft.kernelShape.slice(),vt=ft.strides.slice(),wt=mt?ft.dilations.slice():[],bt=ft.pads.slice();rt.PoolConvUtil.adjustPoolAttributes(pt,gt,yt,vt,wt,bt);const Bt=rt.PoolConvUtil.computePoolOutputShape(pt,gt,vt,wt,yt,bt,ft.autoPad),Tt=Object.assign({},ft);return mt?Object.assign(Tt,{kernelShape:yt,strides:vt,pads:bt,dilations:wt,cacheKey:ft.cacheKey}):Object.assign(Tt,{kernelShape:yt,strides:vt,pads:bt,cacheKey:ft.cacheKey}),[Tt,Bt]},ct={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},ht={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.globalMaxPool=(dt,ft)=>(ot(ft),[dt.run(Object.assign(Object.assign({},ht),{get:()=>At(ft,ht,!0,ct)}),ft)]);const ot=dt=>{if(!dt||dt.length!==1)throw new Error("Pool ops requires 1 input.");if(dt[0].type!=="float32"&&dt[0].type!=="float64")throw new Error("Invalid input type.")},nt=(dt,ft,pt,gt,mt)=>{const yt=dt.length;if(ft.kernelShape.length<=2){const vt=ft.kernelShape[ft.kernelShape.length-1],wt=ft.strides[ft.strides.length-1],bt=ft.pads[ft.pads.length/2-1],Bt=ft.pads[ft.pads.length-1],Tt=dt[yt-1];let It="",Dt="",Ut="";if(It=bt+Bt!==0?`
          for (int i = 0; i < ${vt}; i++) {
            x[${yt} - 1] = indices[${yt} - 1] * ${wt} - ${bt} + i;
            if (x[${yt} - 1] < 0 || x[${yt} - 1] >= ${Tt}) {
              pad++;
              continue;
            }
            ${pt}
          }`:`
          for (int i = 0; i < ${vt}; i++) {
            x[${yt} - 1] = indices[${yt} - 1] * ${wt} - ${bt} + i;
            ${pt}
          }`,ft.kernelShape.length===2){const _t=ft.kernelShape[ft.kernelShape.length-2],St=ft.strides[ft.strides.length-2],xt=ft.pads[ft.pads.length/2-2],Ct=ft.pads[ft.pads.length-2],Ft=dt[yt-2];Dt=xt+Ct!==0?`
            for (int j = 0; j < ${_t}; j++) {
              x[${yt} - 2] = indices[${yt} - 2] * ${St} - ${xt} + j;
              if (x[${yt} - 2] < 0 || x[${yt} - 2] >= ${Ft}) {
                pad+= ${vt};
                continue;
              }
          `:`
            for (int j = 0; j < ${_t}; j++) {
              x[${yt} - 2] = indices[${yt} - 2] * ${St} - ${xt} + j;
            `,Ut=`
          }
        `}return`
        float process(int indices[${yt}]) {
          int x[${yt}];
          copyVec(indices, x);

          float value = ${mt};
          int pad = 0;
          ${Dt}
          ${It}
          ${Ut}
          ${gt}
          return value;
        }
      `}{const vt=rt.ShapeUtil.size(ft.kernelShape),wt=rt.ShapeUtil.computeStrides(ft.kernelShape),bt=wt.length,Bt=ft.pads.length,Tt=lt(bt),It=at(dt,"inputDims"),Dt=at(ft.pads,"pads"),Ut=at(wt,"kernelStrides"),_t=at(ft.strides,"strides");let St="";return St=ft.pads.reduce((xt,Ct)=>xt+Ct)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${pt}
          }`:`
          }
          ${pt}
        `,`
        ${Tt}
        float process(int indices[${yt}]) {
          int x[${yt}];
          copyVec(indices, x);
          int offset[${bt}];
          int pads[${Bt}];
          int inputDims[${yt}];
          int kernelStrides[${bt}];
          int strides[${bt}];
          ${Dt}
          ${It}
          ${_t}
          ${Ut}

          float value = ${mt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${vt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${yt} - ${bt}; j < ${yt}; j++) {
              x[j] = indices[j] * strides[j - ${yt} + ${bt}]
                + offset[j - ${yt} + ${bt}] - pads[j - 2];
              ${St}
          }
          ${gt}

          return value;
        }
      `}},at=(dt,ft)=>{let pt="";for(let gt=0;gt<dt.length;gt++)pt+=`
      ${ft}[${gt}] = ${dt[gt]};
    `;return pt},lt=dt=>`
  void offsetToIndices(int offset, int[${dt}] strides, out int[${dt}] indices) {
    if (${dt} == 0) {
      return;
    }
    for (int i = 0; i < ${dt} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${dt} - 1] = offset;
  }`},1010:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reduceLogSumSquare=_.reduceLogSum=_.reduceProd=_.reduceMin=_.reduceMax=_.reduceMean=_.reduceSum=_.parseReduceAttributes=void 0;const tt=_e(4910),rt=_e(6145),it=_e(7273),st=_e(5639),At=(ht,ot,nt,at,lt)=>{ct(ot);const dt={name:at,inputNames:["A"],inputTypes:[st.TextureType.unpacked]};return[ht.run(Object.assign(Object.assign({},dt),{cacheHint:nt.cacheKey,get:()=>ut(ht,ot,nt,at,lt,dt)}),ot)]};_.parseReduceAttributes=ht=>{const ot=ht.attributes.getInts("axes",[]),nt=ht.attributes.getInt("keepdims",1)===1;return(0,tt.createAttributeWithCacheKey)({axes:ot,keepDims:nt})};const ut=(ht,ot,nt,at,lt,dt)=>{const ft=[],pt=ot[0].dims.length||1,gt=[],mt=it.ShapeUtil.normalizeAxes(nt.axes,ot[0].dims.length),yt=lt(ot,mt);let vt=yt[1];for(let bt=0;bt<ot[0].dims.length;bt++)mt.indexOf(bt)>=0||mt.length===0?(nt.keepDims&&ft.push(1),vt=`
          for(int j${bt} = 0; j${bt} < ${ot[0].dims[bt]}; j${bt}++) {
            inputIdx[${bt}] = j${bt};
            ${vt}
          }`):(gt.push(`inputIdx[${bt}] = outputIdx[${ft.length}];`),ft.push(ot[0].dims[bt]));const wt=`
      float process(int outputIdx[${ft.length||1}]) {
        float value;                 // final result
        int inputIdx[${pt}];      // addressing input data
        ${gt.join(`
`)}
        ${yt[0]}       // init ops for reduce max/min
        ${vt}
        ${yt[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},dt),{output:{dims:ft,type:ot[0].type,textureType:st.TextureType.unpacked},shaderSource:wt})},ct=ht=>{if(!ht||ht.length!==1)throw new Error("Reduce op requires 1 input.");if(rt.NUMBER_TYPES.indexOf(ht[0].type)===-1)throw new Error("Invalid input type.")};_.reduceSum=(ht,ot,nt)=>At(ht,ot,nt,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_.reduceMean=(ht,ot,nt)=>At(ht,ot,nt,"ReduceMean",(at,lt)=>{let dt=1;for(let ft=0;ft<at[0].dims.length;ft++)(lt.indexOf(ft)>=0||lt.length===0)&&(dt*=at[0].dims[ft]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${dt}.;`]}),_.reduceMax=(ht,ot,nt)=>At(ht,ot,nt,"ReduceMax",(at,lt)=>{const dt=[];for(let ft=0;ft<at[0].dims.length;ft++)(lt.indexOf(ft)>=0||lt.length===0)&&dt.push(`inputIdx[${ft}] = 0;`);return[`${dt.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_.reduceMin=(ht,ot,nt)=>At(ht,ot,nt,"ReduceMin",(at,lt)=>{const dt=[];for(let ft=0;ft<at[0].dims.length;ft++)(lt.indexOf(ft)>=0||lt.length===0)&&dt.push(`inputIdx[${ft}] = 0;`);return[`${dt.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_.reduceProd=(ht,ot,nt)=>At(ht,ot,nt,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_.reduceLogSum=(ht,ot,nt)=>At(ht,ot,nt,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_.reduceLogSumSquare=(ht,ot,nt)=>At(ht,ot,nt,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isReshapeCheap=_.processDims3D=_.createPackedReshape3DProgramInfoLoader=void 0;const tt=_e(7273),rt=_e(6757),it=_e(5639),st=_e(5614);_.createPackedReshape3DProgramInfoLoader=(At,ut,ct)=>{const ht=(ot=>({name:"Reshape (packed)",inputTypes:[it.TextureType.packed],inputNames:["A"],cacheHint:`${ot}`}))(ct);return Object.assign(Object.assign({},ht),{get:()=>((ot,nt,at,lt)=>{const dt=nt.dims,ft=lt;let pt="";for(let yt=0;yt<4;yt++){let vt="";switch(yt){case 0:vt="outputCoords = rc;";break;case 1:vt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:vt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:vt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}pt+=`
        ${vt}
        ${yt>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${yt}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${yt>0?"}":""}
      `}const gt=(0,rt.getGlsl)(ot.session.backend.glContext.version),mt=`
      ${function(yt){const vt=tt.ShapeUtil.computeStrides(yt),wt=["b","r","c"],bt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${vt.map((Bt,Tt)=>`int ${wt[Tt]} = ${bt} / ${Bt}; ${Tt===vt.length-1?`int ${wt[Tt+1]} = ${bt} - ${wt[Tt]} * ${Bt}`:`index -= ${wt[Tt]} * ${Bt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(dt)}
      ${function(yt){const vt=tt.ShapeUtil.computeStrides(yt);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${vt[0]} + coords.z * ${vt[1]} + coords.y;
  }
`}(ft)}
      ${(0,st.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${ft[2]};
        int cols = ${ft[1]};

        ${pt}
        ${gt.output} = result;
      }
    `;return Object.assign(Object.assign({},at),{output:{dims:ft,type:nt.type,textureType:it.TextureType.packed},shaderSource:mt,hasMain:!0})})(At,ut,ht,ct)})},_.processDims3D=function(At){if(At.length===0)return[1,1,1];let ut=1;for(let ct=0;ct<At.length-2;++ct)ut*=At[ct];return[ut,At.length>1?At[At.length-2]:1,At[At.length-1]]},_.isReshapeCheap=function(At,ut){let ct=!1;return ct=At.length===0||ut.length===0||(At.length<2||ut.length<2?At[At.length-1]===ut[ut.length-1]:At[At.length-1]===ut[ut.length-1]&&At[At.length-2]===ut[ut.length-2]),ct}},8126:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reshape=void 0;const tt=_e(7273);_.reshape=(rt,it)=>{const st=tt.ShapeUtil.calculateReshapedDims(it[0].dims,it[1].integerData);return rt.session.pack?[rt.reshapePacked(it[0],st)]:[rt.reshapeUnpacked(it[0],st)]}},2801:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseResizeAttributesV11=_.parseResizeAttributesV10=_.resize=void 0;const tt=_e(6757),rt=_e(5639),it=_e(432),st=_e(5614),At=_e(3980),ut={name:"Resize",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.resize=(at,lt,dt)=>((0,At.validateInputs)(lt,dt),[at.run(Object.assign(Object.assign({},ut),{cacheHint:dt.cacheKey,get:()=>ct(at,lt,dt)}),lt)]),_.parseResizeAttributesV10=at=>(0,At.parseUpsampleAttributes)(at,10),_.parseResizeAttributesV11=at=>(0,At.parseUpsampleAttributes)(at,11);const ct=(at,lt,dt)=>{const ft=(0,tt.getGlsl)(at.session.backend.glContext.version),[pt,gt]=ht(lt,dt);if(pt.every(St=>St===1)&&dt.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},ut),{output:{dims:gt,type:lt[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${ft.texture2D}(X, TexCoords);
                    ${ft.output} = v;
                }`});const mt=gt.length;if(mt<2)throw new Error(`output dimension should be at least 2, but got ${mt}`);const yt=gt[mt-2],vt=gt[mt-1],wt=lt[0].dims;if(mt!==wt.length)throw new Error(`output dimension should match input ${wt.length}, but got ${mt}`);const bt=wt[mt-2],Bt=wt[mt-1],Tt=pt[mt-2],It=pt[mt-1];let Dt="";if(dt.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${dt.mode}'`);switch(dt.coordinateTransformMode){case"asymmetric":Dt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Dt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Dt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${vt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${yt}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${vt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${yt}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Dt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${vt}.0 - 1.0, ${yt}.0 - 1.0, ${vt}.0 - 1.0,
                            ${yt}.0 - 1.0);
                        vec4 original = vec4(${Bt}.0 - 1.0, ${bt}.0 - 1.0, ${Bt}.0 - 1.0,
                            ${bt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${dt.coordinateTransformMode}'`)}const Ut=(0,it.getCoordsDataType)(mt),_t=`
            const vec2 inputWH = vec2(${bt}.0, ${Bt}.0);
            const vec4 scaleWHWH = vec4(float(${Tt}), float(${It}), float(${Tt}), float(${It}));
            ${(0,st.unpackFromChannel)()}
            ${Dt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Ut} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${yt-1};
                bool hasNextCol = rc.z < ${vt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${ft.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},ut),{output:{dims:gt,type:lt[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:_t})},ht=(at,lt)=>{const dt=at[0].dims;let ft,pt=lt.scales;if(pt.length===0){const mt=at[lt.scalesInputIdx];if(mt&&mt.size!==0){if(at[lt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");pt=ot(mt,lt.mode,lt.isResize)}else{const yt=at[lt.sizesInputIdx];if(!yt||yt.size===0)throw new Error("Either scales or sizes MUST be provided as input.");ft=Array.from(yt.integerData),pt=nt(ft,dt,lt.mode,lt.isResize)}}else if(at[lt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const gt=ft||dt.map((mt,yt)=>Math.floor(mt*pt[yt]));return[pt,gt]},ot=(at,lt,dt)=>{const ft=Array.from(at.floatData);return(0,At.scalesValidation)(ft,lt,dt),ft},nt=(at,lt,dt,ft)=>{const pt=lt.length,gt=new Array(pt);for(let mt=0,yt=pt;mt<yt;mt++)if(lt[mt]===0){if(at[mt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");gt[mt]=1}else gt[mt]=at[mt]/lt[mt];return(0,At.scalesValidation)(gt,dt,ft),gt}},565:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.shape=void 0;const tt=_e(9240);_.shape=(it,st)=>(rt(st),[new tt.Tensor([st[0].dims.length],"int32",void 0,void 0,new Int32Array(st[0].dims))]);const rt=it=>{if(!it||it.length!==1)throw new Error("Shape requires 1 input.")}},2444:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sliceV10=_.parseSliceAttributes=_.slice=void 0;const tt=_e(4910),rt=_e(6145),it=_e(7273),st=_e(5639),At={name:"Slice",inputNames:["A"],inputTypes:[st.TextureType.unpacked]};_.slice=(nt,at,lt)=>(ct(at),[nt.run(Object.assign(Object.assign({},At),{cacheHint:lt.cacheKey,get:()=>ut(nt,at[0],lt)}),at)]),_.parseSliceAttributes=nt=>{const at=nt.attributes.getInts("starts"),lt=nt.attributes.getInts("ends"),dt=nt.attributes.getInts("axes",[]);return(0,tt.createAttributeWithCacheKey)({starts:at,ends:lt,axes:dt})};const ut=(nt,at,lt)=>{const dt=lt.axes.length===0?at.dims.slice(0).map((wt,bt)=>bt):lt.axes,ft=it.ShapeUtil.normalizeAxes(dt,at.dims.length),pt=lt.starts.map((wt,bt)=>wt>at.dims[ft[bt]]-1?at.dims[ft[bt]]:it.ShapeUtil.normalizeAxis(wt,at.dims[ft[bt]])),gt=lt.ends.map((wt,bt)=>wt>at.dims[ft[bt]]-1?at.dims[ft[bt]]:it.ShapeUtil.normalizeAxis(wt,at.dims[ft[bt]])),mt=at.dims.slice(),yt=[];for(let wt=0;wt<ft.length;wt++)mt[ft[wt]]=gt[wt]-pt[wt],pt[wt]>0&&yt.push(`outputIdx[${ft[wt]}] += ${pt[wt]};`);const vt=`
      float process(int outputIdx[${mt.length}]) {
        ${yt.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},At),{output:{dims:mt,type:at.type,textureType:st.TextureType.unpacked},shaderSource:vt})},ct=nt=>{if(!nt||nt.length!==1)throw new Error("Slice requires 1 input.");if(rt.NUMBER_TYPES.indexOf(nt[0].type)===-1)throw new Error("Invalid input type.")};_.sliceV10=(nt,at)=>{ot(at);const lt=ht(nt,at);return[nt.run(Object.assign(Object.assign({},At),{cacheHint:lt.cacheKey,get:()=>ut(nt,at[0],lt)}),[at[0]])]};const ht=(nt,at)=>{if(!nt.session.isInitializer(at[1].dataId)||!nt.session.isInitializer(at[2].dataId)||at.length>=4&&!nt.session.isInitializer(at[3].dataId)||at.length>=5&&!nt.session.isInitializer(at[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(at.length>=5&&at[4].integerData.some(pt=>pt!==1))throw new Error("currently non-1 steps is not supported for Slice");const lt=Array.from(at[1].integerData),dt=Array.from(at[2].integerData),ft=at.length>=4?Array.from(at[3].integerData):[];return{starts:lt,ends:dt,axes:ft,cacheKey:`${ft};${lt};${dt}`}},ot=nt=>{if(!nt||nt.length<3||nt.length>5)throw new Error("Invalid input number.");if(nt[1].type!=="int32"||nt[1].dims.length!==1)throw new Error("Invalid input type.");if(nt[2].type!=="int32"||nt[2].dims.length!==1)throw new Error("Invalid input type.");if(nt.length>=4&&(nt[3].type!=="int32"||nt[3].dims.length!==1))throw new Error("Invalid input type.");if(nt.length>=5&&(nt[4].type!=="int32"||nt[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.softmaxV13=_.parseSoftmaxAttributesV13=_.parseSoftmaxAttributes=_.softmax=void 0;const tt=_e(4910),rt=_e(7273),it=_e(6757),st=_e(5639),At=_e(5707),ut={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[st.TextureType.unpacked]},ct={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked]},ht={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked,st.TextureType.unpacked]};_.softmax=(ft,pt,gt)=>{dt(pt);const mt=pt[0].dims.slice(),yt=rt.ShapeUtil.normalizeAxis(gt.axis,mt.length),vt=rt.ShapeUtil.sizeToDimension(mt,yt),wt=rt.ShapeUtil.sizeFromDimension(mt,yt);return ot(ft,pt,gt,vt,wt)},_.parseSoftmaxAttributes=ft=>(0,tt.createAttributeWithCacheKey)({axis:ft.attributes.getInt("axis",1)}),_.parseSoftmaxAttributesV13=ft=>(0,tt.createAttributeWithCacheKey)({axis:ft.attributes.getInt("axis",-1)}),_.softmaxV13=(ft,pt,gt)=>{dt(pt);const mt=pt[0].dims.slice(),yt=rt.ShapeUtil.normalizeAxis(gt.axis,mt.length),vt=mt.length,wt=yt!==vt-1,bt=[];let Bt,Tt=[],It=[];wt&&(Tt=Array.from({length:vt}).map((St,xt)=>xt),Tt[yt]=vt-1,Tt[vt-1]=yt,Tt.map(St=>bt.push(mt[St])),Bt=(0,tt.createAttributeWithCacheKey)({perm:Tt}),It=(0,At.transpose)(ft,pt,Bt));const Dt=wt?rt.ShapeUtil.sizeToDimension(bt,vt-1):rt.ShapeUtil.sizeToDimension(mt,vt-1),Ut=wt?rt.ShapeUtil.sizeFromDimension(bt,vt-1):rt.ShapeUtil.sizeFromDimension(mt,vt-1),_t=ot(ft,wt?It:pt,gt,Dt,Ut);return wt?(0,At.transpose)(ft,_t,Bt):_t};const ot=(ft,pt,gt,mt,yt)=>{const vt=nt(ft,pt[0],mt,yt,[mt]),wt=ft.run(Object.assign(Object.assign({},ut),{cacheHint:gt.cacheKey,get:()=>vt}),pt),bt=at(ft,pt[0],mt,yt,vt.output.dims,[mt]),Bt=ft.run(Object.assign(Object.assign({},ct),{cacheHint:gt.cacheKey,get:()=>bt}),[pt[0],wt]),Tt=lt(ft,pt[0],mt,yt,vt.output.dims,bt.output.dims);return[ft.run(Object.assign(Object.assign({},ht),{cacheHint:gt.cacheKey,get:()=>Tt}),[pt[0],wt,Bt])]},nt=(ft,pt,gt,mt,yt)=>{const[vt,wt]=ft.calculateTextureWidthAndHeight(pt.dims,st.TextureType.unpacked),bt=yt.length;if(gt<1||mt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(yt.length!==1)throw new Error("Dimensionality of the output should be 1");if(yt[0]!==gt)throw new Error("Shape of the output should be equal to logical row count");const Bt=(0,it.getGlsl)(ft.session.backend.glContext.version),Tt=`
      float process(int[${bt}] indices) {
        int logical_row_start_offset = indices[0] * ${mt};

        float max = getColorAsFloat(${Bt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${vt},
        ${wt} )));
        for(int i=1; i<${mt}; ++i)
        {
          float current = getColorAsFloat(${Bt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${vt}, ${wt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},ut),{output:{dims:yt,type:pt.type,textureType:st.TextureType.unpacked},shaderSource:Tt})},at=(ft,pt,gt,mt,yt,vt)=>{const[wt,bt]=ft.calculateTextureWidthAndHeight(pt.dims,st.TextureType.unpacked),Bt=vt.length;if(gt<1||mt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(vt.length!==1)throw new Error("Dimensionality of the output should be 1");if(vt[0]!==gt)throw new Error("Shape of the output should be equal to logical row count");if(yt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(yt[0]!==gt)throw new Error("Shape of the intermediate results should be equal to logical row count");const Tt=`
      float process(int[${Bt}] indices) {
        int logical_row_start_offset = indices[0] * ${mt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${mt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,it.getGlsl)(ft.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${wt}, ${bt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},ct),{output:{dims:vt,type:pt.type,textureType:st.TextureType.unpacked},shaderSource:Tt})},lt=(ft,pt,gt,mt,yt,vt)=>{const[wt,bt]=ft.calculateTextureWidthAndHeight(pt.dims,st.TextureType.unpacked),Bt=pt.dims.length;if(gt<1||mt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(yt.length!==1||vt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(yt[0]!==gt||vt[0]!==gt)throw new Error("Shape of the intermediate results should be equal to logical row count");const Tt=`
      float process(int[${Bt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${wt}, ${bt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${mt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},ht),{output:{dims:pt.dims,type:pt.type,textureType:st.TextureType.unpacked},shaderSource:Tt})},dt=ft=>{if(!ft||ft.length!==1)throw new Error("Softmax requires 1 input.");if(ft[0].type!=="float32"&&ft[0].type!=="float64")throw new Error("Invalid input type")}},564:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSplitAttributes=_.split=void 0;const tt=_e(4910),rt=_e(7273),it=_e(5639),st={name:"Split",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.split=(ht,ot,nt)=>{ct(ot);const at=rt.ShapeUtil.normalizeAxis(nt.axis,ot[0].dims.length),lt=At(ht,ot,at,nt),dt=[];for(let ft=0;ft<lt;++ft)dt.push(ht.run(Object.assign(Object.assign({},st),{cacheHint:`${nt.cacheKey};${ft}`,get:()=>ut(ht,ot[0],nt,at,ft)}),ot));return dt},_.parseSplitAttributes=ht=>{const ot=ht.attributes.getInt("axis",0),nt=ht.attributes.getInts("split",[]),at=ht.outputs.length;return(0,tt.createAttributeWithCacheKey)({axis:ot,split:nt,numOutputs:at})};const At=(ht,ot,nt,at)=>{const[,lt]=rt.SplitUtil.splitShape(ot[0].dims,nt,at.split,at.numOutputs);return lt.length},ut=(ht,ot,nt,at,lt)=>{const[dt,ft]=rt.SplitUtil.splitShape(ot.dims,at,nt.split,nt.numOutputs),pt=ft[lt],gt=dt[lt],mt=`
      float process(int indices[${gt.length}]) {
        indices[${at}] += ${pt};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},st),{cacheHint:`${nt.cacheKey}:${lt}`,output:{dims:gt,type:ot.type,textureType:it.TextureType.unpacked},shaderSource:mt})},ct=ht=>{if(!ht||ht.length!==1)throw new Error("Split requires one input.");if(ht[0].type!=="int8"&&ht[0].type!=="uint8"&&ht[0].type!=="int16"&&ht[0].type!=="uint16"&&ht[0].type!=="int32"&&ht[0].type!=="uint32"&&ht[0].type!=="float32"&&ht[0].type!=="float64"&&ht[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSqueezeAttributes=_.squeezeV13=_.squeeze=void 0;const tt=_e(7273);_.squeeze=(st,At,ut)=>{rt(At);const ct=tt.ShapeUtil.squeezeShape(At[0].dims,ut);return[st.reshapeUnpacked(At[0],ct)]},_.squeezeV13=(st,At)=>(it(At),(0,_.squeeze)(st,[At[0]],Array.from(At[1].integerData))),_.parseSqueezeAttributes=st=>st.attributes.getInts("axes");const rt=st=>{if(!st||st.length!==1)throw new Error("Squeeze requires 1 input.");if(st[0].type==="string")throw new Error("invalid input tensor types.")},it=st=>{if(!st||st.length!==2)throw new Error("Squeeze requires 2 inputs.");if(st[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sum=void 0;const tt=_e(6757),rt=_e(5639);_.sum=(At,ut)=>{st(ut);const ct={name:"Sum",inputNames:ut.map((ht,ot)=>`X${ot}`),inputTypes:new Array(ut.length).fill(rt.TextureType.unpacked)};return[At.run(Object.assign(Object.assign({},ct),{get:()=>it(At,ut,ct)}),ut)]};const it=(At,ut,ct)=>{const ht=(0,tt.getGlsl)(At.session.backend.glContext.version),ot=ut[0].dims.slice(),nt=`
      void main() {
        vec4 result = ${ut.map((at,lt)=>`${ht.texture2D}(X${lt},TexCoords)`).join(" + ")};
        ${ht.output} = result;
      }
    `;return Object.assign(Object.assign({},ct),{output:{dims:ot,type:ut[0].type,textureType:rt.TextureType.unpacked},hasMain:!0,shaderSource:nt})},st=At=>{if(!At||At.length===0)throw new Error("Sum requires inputs.");const ut=At[0].dims.length;for(let ct=1;ct<At.length;ct++){if(ut!==At[ct].dims.length)throw new Error("Input shapes are mismatched.");for(let ht=0;ht<ut;ht++)if(At[0].dims[ht]!==At[ct].dims[ht])throw new Error("Input shapes are not matched.")}if(At[0].type!=="float32"&&At[0].type!=="float64")throw new Error("Invalid input type.");for(let ct=1;ct<At.length;ct++)if(At[0].type!==At[ct].type)throw new Error("Input types are not matched.")}},5944:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tile=void 0;const tt=_e(6145),rt=_e(5639);_.tile=(At,ut)=>{st(ut);const ct={name:"Tile",inputNames:["A"],inputTypes:[rt.TextureType.unpacked]};return[At.run(Object.assign(Object.assign({},ct),{get:()=>it(At,ut,ct)}),ut)]};const it=(At,ut,ct)=>{const ht=ut[0].dims.slice(),ot=new Array(ht.length),nt=[];for(let dt=0;dt<ht.length;dt++)ot[dt]=ht[dt]*ut[1].numberData[dt],nt.push(`inputIdx[${dt}] = int(mod(float(outputIdx[${dt}]), ${ht[dt]}.));`);const at=ot.length,lt=`
      float process(int outputIdx[${at}]) {
        int inputIdx[${at}];
        ${nt.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},ct),{output:{dims:ot,type:ut[0].type,textureType:rt.TextureType.unpacked},shaderSource:lt})},st=At=>{if(!At||At.length!==2)throw new Error("Tile requires 2 input.");if(At[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(At[1].dims[0]!==At[0].dims.length)throw new Error("Invalid input shape.");if(tt.NUMBER_TYPES.indexOf(At[0].type)===-1)throw new Error("Invalid input type.");if(At[1].type!=="int32"&&At[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseTransposeAttributes=_.transpose=void 0;const tt=_e(4910),rt=_e(7273),it=_e(5639),st={name:"Transpose",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.transpose=(nt,at,lt)=>(ot(at),[nt.run(Object.assign(Object.assign({},st),{cacheHint:lt.cacheKey,get:()=>At(nt,at[0],lt.perm)}),at)]),_.parseTransposeAttributes=nt=>(0,tt.createAttributeWithCacheKey)({perm:nt.attributes.getInts("perm",[])});const At=(nt,at,lt)=>{const dt=at.dims;lt=ut(dt,lt);const ft=ct(dt,lt),pt=dt.length,gt=`
      ${ht("perm",lt,pt)}
      float process(int indices[${pt}]) {
        int a[${pt}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},st),{output:{dims:ft,type:at.type,textureType:it.TextureType.unpacked},shaderSource:gt})},ut=(nt,at)=>(at&&at.length!==nt.length&&(at=[...nt.keys()].reverse()),at),ct=(nt,at)=>(at=ut(nt,at),rt.ShapeUtil.sortBasedOnPerm(nt,at)),ht=(nt,at,lt)=>{const dt=[];dt.push(`void ${nt}(out int a[${lt}], int src[${lt}]) {`);for(let ft=0;ft<lt;++ft)dt.push(`	a[${at[ft]}]=src[${ft}];`);return dt.push("	}"),dt.join(`
`)},ot=nt=>{if(!nt||nt.length!==1)throw new Error("Transpose requires 1 input.");if(nt[0].type!=="float32"&&nt[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.encodeAsUint8=void 0;const tt=_e(6757),rt=_e(5639);_.encodeAsUint8=(it,st)=>{const At=st.shape,ut=(0,tt.getGlsl)(it.session.backend.glContext.version),ct=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${ut.texture2D}(X,TexCoords).r;
      ${ut.output} = encodeAsUint8(value);
    }`,ht={name:"Uint8Encode",inputTypes:[rt.TextureType.unpacked],inputNames:["X"],output:{dims:At,type:st.tensor.type,textureType:rt.TextureType.downloadUint8AsFloat},shaderSource:ct,hasMain:!0};return it.executeProgram(ht,[st.tensor])}},9087:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tanh=_.tan=_.sqrt=_.sin=_.sigmoid=_.relu=_.not=_.neg=_.log=_.parseLeakyReluAttributes=_.leakyRelu=_.identity=_.floor=_.exp=_.parseEluAttributes=_.elu=_.cos=_.ceil=_.clipV11=_.parseClipAttributes=_.clip=_.atan=_.asin=_.acos=_.abs=_.glslTanh=_.glslTan=_.glslSqrt=_.glslSigmoid=_.glslRelu=_.glslSin=_.glslNot=_.glslNeg=_.glslLog=_.glslLeakyRelu=_.glslIdentity=_.glslClip=_.glslFloor=_.glslExp=_.glslElu=_.glslCos=_.glslCeil=_.glslAtan=_.glslAsin=_.glslAcos=_.glslAbs=void 0;const tt=_e(4910),rt=_e(7273),it=_e(1997),st=_e(6757),At=_e(5639);function ut(){return _t("abs")}function ct(){return _t("acos")}function ht(){return _t("asin")}function ot(){return _t("atan")}function nt(){return _t("ceil")}function at(){return _t("cos")}function lt(Ct){const Ft="elu";return{body:`
  const float alpha = float(${Ct});

  float ${Ft}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Ft}_(vec4 v) {
    return vec4(${Ft}_(v.x), ${Ft}_(v.y), ${Ft}_(v.z), ${Ft}_(v.w));
  }
  `,name:Ft,type:it.FunctionType.ValueBased}}function dt(){return _t("exp")}function ft(){return _t("floor")}function pt(Ct,Ft){const Lt="clip";return{body:`
  const float min = float(${Ct});
  const float max = float(${Ft});

  float ${Lt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Lt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Lt,type:it.FunctionType.ValueBased}}function gt(){const Ct="indentity";return{body:`
  float ${Ct}_(float a) {
    return a;
  }
  vec4 ${Ct}_(vec4 v) {
    return v;
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function mt(Ct){const Ft="leakyRelu";return{body:`
  const float alpha = float(${Ct});

  float ${Ft}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Ft}_(vec4 v) {
    return vec4(${Ft}_(v.x), ${Ft}_(v.y), ${Ft}_(v.z), ${Ft}_(v.w));
  }
  `,name:Ft,type:it.FunctionType.ValueBased}}function yt(){return _t("log")}function vt(){const Ct="neg";return{body:`
  float ${Ct}_(float a) {
    return -a;
  }
  vec4 ${Ct}_(vec4 v) {
    return -v;
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function wt(){const Ct="not";return{body:`
  float ${Ct}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Ct}_(bool a) {
    return !a;
  }
  vec4 ${Ct}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Ct}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function bt(){return _t("sin")}function Bt(){const Ct="relu";return{body:`
  float ${Ct}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Ct}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function Tt(){const Ct="sigmoid";return{body:`
  float ${Ct}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Ct}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function It(){return _t("sqrt")}function Dt(){return _t("tan")}function Ut(){const Ct="tanh";return{body:`
  float ${Ct}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Ct}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}function _t(Ct){return{body:`
  float ${Ct}_(float a) {
    return ${Ct}(a);
  }
  vec4 ${Ct}_(vec4 v) {
    return ${Ct}(v);
  }
  `,name:Ct,type:it.FunctionType.ValueBased}}_.glslAbs=ut,_.glslAcos=ct,_.glslAsin=ht,_.glslAtan=ot,_.glslCeil=nt,_.glslCos=at,_.glslElu=lt,_.glslExp=dt,_.glslFloor=ft,_.glslClip=pt,_.glslIdentity=gt,_.glslLeakyRelu=mt,_.glslLog=yt,_.glslNeg=vt,_.glslNot=wt,_.glslSin=bt,_.glslRelu=Bt,_.glslSigmoid=Tt,_.glslSqrt=It,_.glslTan=Dt,_.glslTanh=Ut;const St=(Ct,Ft,Lt,Mt)=>{const Rt=Ct.session.pack?At.TextureType.packed:At.TextureType.unpacked,Nt={name:Lt.name,inputTypes:[Rt],inputNames:["A"],cacheHint:Mt};return Object.assign(Object.assign({},Nt),{get:()=>((Gt,Wt,Xt,Yt)=>{const Zt=Gt.session.pack?At.TextureType.packed:At.TextureType.unpacked,er=(0,st.getGlsl)(Gt.session.backend.glContext.version);return Object.assign(Object.assign({},Wt),{output:{dims:Xt.dims,type:Xt.type,textureType:Zt},shaderSource:`
     ${Yt.body}
     void main() {
       vec4 v = ${er.texture2D}(A, TexCoords);
       v = ${Yt.name}_(v);
       ${er.output} = v;
     }
     `,hasMain:!0})})(Ct,Nt,Ft,Lt)})};_.abs=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],ut()),Ft)],_.acos=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],ct()),Ft)],_.asin=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],ht()),Ft)],_.atan=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],ot()),Ft)],_.clip=(Ct,Ft,Lt)=>[Ct.run(St(Ct,Ft[0],pt(Lt.min,Lt.max),Lt.cacheKey),Ft)],_.parseClipAttributes=Ct=>(0,tt.createAttributeWithCacheKey)({min:Ct.attributes.getFloat("min",rt.MIN_CLIP),max:Ct.attributes.getFloat("max",rt.MAX_CLIP)}),_.clipV11=(Ct,Ft)=>{const Lt=xt(Ct,Ft);return(0,_.clip)(Ct,[Ft[0]],Lt)};const xt=(Ct,Ft)=>{if(Ft.length>=3&&(!Ct.session.isInitializer(Ft[1].dataId)||!Ct.session.isInitializer(Ft[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Lt=Ft.length>=3?Ft[1].numberData[0]:rt.MIN_CLIP,Mt=Ft.length>=3?Ft[2].numberData[0]:rt.MAX_CLIP;return(0,tt.createAttributeWithCacheKey)({min:Lt,max:Mt})};_.ceil=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],nt()),Ft)],_.cos=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],at()),Ft)],_.elu=(Ct,Ft,Lt)=>[Ct.run(St(Ct,Ft[0],lt(Lt.alpha),Lt.cacheKey),Ft)],_.parseEluAttributes=Ct=>(0,tt.createAttributeWithCacheKey)({alpha:Ct.attributes.getFloat("alpha",1)}),_.exp=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],dt()),Ft)],_.floor=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],ft()),Ft)],_.identity=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],gt()),Ft)],_.leakyRelu=(Ct,Ft,Lt)=>[Ct.run(St(Ct,Ft[0],mt(Lt.alpha),Lt.cacheKey),Ft)],_.parseLeakyReluAttributes=Ct=>(0,tt.createAttributeWithCacheKey)({alpha:Ct.attributes.getFloat("alpha",.01)}),_.log=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],yt()),Ft)],_.neg=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],vt()),Ft)],_.not=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],wt()),Ft)],_.relu=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],Bt()),Ft)],_.sigmoid=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],Tt()),Ft)],_.sin=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],bt()),Ft)],_.sqrt=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],It()),Ft)],_.tan=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],Dt()),Ft)],_.tanh=(Ct,Ft)=>[Ct.run(St(Ct,Ft[0],Ut()),Ft)]},540:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackProgramInfoLoader=_.createUnpackProgramInfo=void 0;const tt=_e(6757),rt=_e(5639),it=_e(432),st=_e(5614),At={name:"unpack",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.createUnpackProgramInfo=(ut,ct)=>{const ht=ct.dims.length,ot=(0,st.getChannels)("rc",ht),nt=ot.slice(-2),at=(0,it.getCoordsDataType)(ht),lt=(0,st.unpackFromChannel)(),dt=ct.dims.length===0?"":function(gt,mt){if(gt===1)return"rc";let yt="";for(let vt=0;vt<gt;vt++)yt+=mt[vt],vt<gt-1&&(yt+=",");return yt}(ht,ot),ft=ht<=1?"rc":`vec2(${nt.join(",")})`,pt=`
    ${lt}
    void main() {
      ${at} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${dt});

       ${(0,tt.getGlsl)(ut.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${ft}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},At),{hasMain:!0,output:{dims:ct.dims,type:ct.type,textureType:rt.TextureType.unpacked},shaderSource:pt})},_.createUnpackProgramInfoLoader=(ut,ct)=>Object.assign(Object.assign({},At),{get:()=>(0,_.createUnpackProgramInfo)(ut,ct)})},7862:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseUnsqueezeAttributes=_.unsqueezeV13=_.unsqueeze=void 0;const tt=_e(7273);_.unsqueeze=(st,At,ut)=>{rt(At);const ct=tt.ShapeUtil.unsqueezeShape(At[0].dims,ut);return[st.reshapeUnpacked(At[0],ct)]},_.unsqueezeV13=(st,At)=>(it(At),(0,_.unsqueeze)(st,[At[0]],Array.from(At[1].integerData))),_.parseUnsqueezeAttributes=st=>st.attributes.getInts("axes");const rt=st=>{if(!st||st.length!==1)throw new Error("Unsqueeze requires 1 input.");if(st[0].type==="string")throw new Error("invalid input tensor types.")},it=st=>{if(!st||st.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(st[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.scalesValidation=_.validateInputs=_.parseUpsampleAttributes=_.parseUpsampleAttributesV9=_.parseUpsampleAttributesV7=_.upsample=void 0;const tt=_e(4910),rt=_e(6757),it=_e(5639),st={name:"Upsample",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.upsample=(ut,ct,ht)=>((0,_.validateInputs)(ct,ht),[ut.run(Object.assign(Object.assign({},st),{cacheHint:ht.cacheKey,get:()=>At(ut,ct,ht)}),ct)]),_.parseUpsampleAttributesV7=ut=>(0,_.parseUpsampleAttributes)(ut,7),_.parseUpsampleAttributesV9=ut=>(0,_.parseUpsampleAttributes)(ut,9),_.parseUpsampleAttributes=(ut,ct)=>{const ht=ct>=10,ot=ut.attributes.getString("mode","nearest");if(ot!=="nearest"&&ot!=="linear"&&(ct<11||ot!=="cubic"))throw new Error(`unrecognized mode: ${ot}`);let nt=[];ct<9&&(nt=ut.attributes.getFloats("scales"),(0,_.scalesValidation)(nt,ot,ht));const at=ut.attributes.getFloat("extrapolation_value",0),lt=ct>10?ut.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(lt)===-1)throw new Error(`coordinate_transform_mode '${lt}' is not supported`);const dt=lt==="tf_crop_and_resize",ft=dt,pt=ot==="nearest"&&ct>=11?ut.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(pt)===-1)throw new Error(`nearest_mode '${pt}' is not supported`);const gt=ut.attributes.getFloat("cubic_coeff_a",-.75),mt=ut.attributes.getInt("exclude_outside",0)!==0;if(mt&&ot!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const yt=ct<11||ot==="nearest"&&lt==="asymmetric"&&pt==="floor";let vt=0,wt=0,bt=0;return ct>10?ut.inputs.length>2?(vt=1,wt=2,bt=3):(wt=1,bt=2):ct===9&&(wt=1),(0,tt.createAttributeWithCacheKey)({opset:ct,isResize:ht,mode:ot,scales:nt,extrapolationValue:at,coordinateTransformMode:lt,useExtrapolation:ft,needRoiInput:dt,nearestMode:pt,cubicCoefficientA:gt,excludeOutside:mt,useNearest2xOptimization:yt,roiInputIdx:vt,scalesInputIdx:wt,sizesInputIdx:bt})};const At=(ut,ct,ht)=>{const ot=(0,rt.getGlsl)(ut.session.backend.glContext.version),[nt,at]=ut.calculateTextureWidthAndHeight(ct[0].dims,it.TextureType.unpacked),lt=ct[0].dims.map((bt,Bt)=>Math.floor(bt*ht.scales[Bt])),[dt,ft]=ut.calculateTextureWidthAndHeight(lt,it.TextureType.unpacked),pt=lt.length,gt=new Array(pt),mt=new Array(pt);let yt=`
      int output_pitches[${pt}];
      int input_pitches[${pt}];
      `;for(let bt=pt-1;bt>=0;bt--)gt[bt]=bt===pt-1?1:gt[bt+1]*lt[bt+1],mt[bt]=bt===pt-1?1:mt[bt+1]*ct[0].dims[bt+1],yt+=`
        output_pitches[${bt}] = ${gt[bt]};
        input_pitches[${bt}] = ${mt[bt]};
        `;const vt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${nt}, ${at});
        float value = getColorAsFloat(${ot.texture2D}(X, coords));
        return value;
      }
      `,wt=ht.mode==="nearest"?`
    ${vt}
    float process(int indices[${pt}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${dt}, ${ft});

      ${yt}

      int d, m;
      for (int dim = 0; dim < ${pt}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:pt===4?`
    ${vt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${dt}, ${ft});

      ${yt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ct[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${vt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${dt}, ${ft});

      ${yt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ct[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},st),{output:{dims:lt,type:ct[0].type,textureType:it.TextureType.unpacked},shaderSource:wt,variables:[{name:"scales",type:"int",arrayLength:ht.scales.length,data:ht.scales.map(bt=>Math.ceil(bt))}]})};_.validateInputs=(ut,ct)=>{if(!ut||ct.opset<9&&ut.length!==1||ct.opset>=9&&ct.opset<11&&ut.length!==2||ct.opset>=11&&ut.length<2)throw new Error("invalid inputs.");if(ct.scales.length>0&&ut[0].dims.length!==ct.scales.length)throw new Error("Invalid input shape.");if(ut[0].type==="string")throw new Error("Invalid input tensor types.")},_.scalesValidation=(ut,ct,ht)=>{if(ht){for(const ot of ut)if(ot<=0)throw new Error("Scale value should be greater than 0.")}else for(const ot of ut)if(ot<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(ct!=="linear"&&ct!=="cubic"||ut.length===2||ut.length===4&&ut[0]===1&&ut[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${ht?"Resize":"Upsample"} opeartor.`)}},2757:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ProgramManager=void 0;const tt=_e(2235),rt=_e(1315),it=_e(8897),st=_e(6757);_.ProgramManager=class{constructor(At,ut,ct){this.profiler=At,this.glContext=ut,this.textureLayoutStrategy=ct,this.repo=new Map,this.attributesBound=!1}getArtifact(At){return this.repo.get(At)}setArtifact(At,ut){this.repo.set(At,ut)}run(At,ut,ct){var ht;this.profiler.event("op",`ProgramManager.run ${(ht=At.programInfo.name)!==null&&ht!==void 0?ht:"unknown kernel"}`,()=>{var ot;const nt=this.glContext.gl,at=At.program;nt.useProgram(at);try{this.bindOutput(ct),this.attributesBound||this.bindAttributes(At.attribLocations),this.bindUniforms(At.uniformLocations,(ot=At.programInfo.variables)!==null&&ot!==void 0?ot:[],ut)}catch(lt){throw rt.Logger.error("ProgramManager",At.programInfo.shaderSource),lt}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(At=>this.glContext.deleteProgram(At.program))}build(At,ut,ct){return this.profiler.event("backend","ProgramManager.build",()=>{const ht=new it.GlslPreprocessor(this.glContext,At,ut,ct),ot=ht.preprocess(),nt=this.compile(ot);return{programInfo:At,program:nt,uniformLocations:this.getUniformLocations(nt,ht.context.programInfo.inputNames,ht.context.programInfo.variables),attribLocations:this.getAttribLocations(nt)}})}compile(At){if(!this.vertexShader){rt.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const ht=(0,st.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(ht,this.glContext.gl.VERTEX_SHADER)}tt.env.debug&&rt.Logger.verbose("ProrgramManager",`FragShader:
${At}
`);const ut=this.glContext.compileShader(At,this.glContext.gl.FRAGMENT_SHADER),ct=this.glContext.createProgram(this.vertexShader,ut);return this.glContext.deleteShader(ut),ct}bindOutput(At){const ut=At.width,ct=At.height;rt.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${ut}/${ct}, shape=${At.shape}, type=${At.tensor.type}`),this.glContext.attachFramebuffer(At.texture,ut,ct)}bindAttributes(At){const ut=At.position,ct=At.textureCoord;this.glContext.setVertexAttributes(ut,ct),this.attributesBound=!0}bindUniforms(At,ut,ct){var ht;const ot=this.glContext.gl;let nt=0;for(const{name:at,type:lt,location:dt,arrayLength:ft}of At){const pt=(ht=ut.find(gt=>gt.name===at))===null||ht===void 0?void 0:ht.data;if(lt!=="sampler2D"&&!pt)throw new Error(`variable '${at}' does not have data defined in program info`);switch(lt){case"sampler2D":this.bindTexture(ct[nt],dt,nt),nt++;break;case"float":ft?ot.uniform1fv(dt,pt):ot.uniform1f(dt,pt);break;case"int":ft?ot.uniform1iv(dt,pt):ot.uniform1i(dt,pt);break;default:throw new Error(`Uniform not implemented: ${lt}`)}}}bindTexture(At,ut,ct){this.glContext.bindTextureToUniform(At.texture,ct,ut)}getAttribLocations(At){return{position:this.getAttribLocation(At,"position"),textureCoord:this.getAttribLocation(At,"textureCoord")}}getUniformLocations(At,ut,ct){const ht=[];if(ut)for(const ot of ut)ht.push({name:ot,type:"sampler2D",location:this.getUniformLocation(At,ot)});if(ct)for(const ot of ct)ht.push(Object.assign(Object.assign({},ot),{location:this.getUniformLocation(At,ot.name)}));return ht}getUniformLocation(At,ut){const ct=this.glContext.gl.getUniformLocation(At,ut);if(ct===null)throw new Error(`Uniform ${ut} not found.`);return ct}getAttribLocation(At,ut){return this.glContext.gl.getAttribLocation(At,ut)}}},2171:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLSessionHandler=void 0;const tt=_e(1315),rt=_e(5881),it=_e(7860),st=_e(4110),At=_e(2757),ut=_e(7618),ct=_e(5243);_.WebGLSessionHandler=class{constructor(ht,ot){this.backend=ht,this.context=ot,this.layoutStrategy=new ut.PreferLogicalStrategy(ht.glContext.maxTextureSize),this.programManager=new At.ProgramManager(this.context.profiler,ht.glContext,this.layoutStrategy),this.textureManager=new ct.TextureManager(ht.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:ht.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=ht.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new it.WebGLInferenceHandler(this)}onGraphInitialized(ht){const ot=ht.getValues().filter(nt=>nt.from===-1&&nt.tensor).map(nt=>nt.tensor.dataId);this.initializers=new Set(ot)}isInitializer(ht){return!!this.initializers&&this.initializers.has(ht)}addInitializer(ht){this.initializers.add(ht)}getTextureData(ht,ot){return ot?this.packedTextureDataCache.get(ht):this.unpackedTextureDataCache.get(ht)}setTextureData(ht,ot,nt=!1){tt.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),nt?this.packedTextureDataCache.set(ht,ot):this.unpackedTextureDataCache.set(ht,ot)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(ht=>this.textureManager.releaseTexture(ht,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(ht=>this.textureManager.releaseTexture(ht,!0)),this.unpackedTextureDataCache=new Map}resolve(ht,ot,nt){const at=(0,rt.resolveOperator)(ht,ot,st.WEBGL_OP_RESOLVE_RULES);return{impl:at.opImpl,context:at.opInit?at.opInit(ht,nt):ht}}}},9622:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Uint8DataEncoder=_.RGBAFloatDataEncoder=_.RedFloat32DataEncoder=void 0;const tt=_e(1315);_.RedFloat32DataEncoder=class{constructor(rt,it=1){if(it===1)this.internalFormat=rt.R32F,this.format=rt.RED,this.textureType=rt.FLOAT,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA32F,this.format=rt.RGBA,this.textureType=rt.FLOAT,this.channelSize=it}}encode(rt,it){let st,At;return rt.constructor!==Float32Array&&(tt.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),At=new Float32Array(rt)),it*this.channelSize>rt.length?(tt.Logger.warning("Encoder","Source data too small. Allocating larger array"),At=rt,st=this.allocate(it*this.channelSize),At.forEach((ut,ct)=>st[ct]=ut)):(At=rt,st=At),st}allocate(rt){return new Float32Array(4*rt)}decode(rt,it){return this.channelSize===1?rt.filter((st,At)=>At%4==0).subarray(0,it):rt.subarray(0,it)}},_.RGBAFloatDataEncoder=class{constructor(rt,it=1,st){if(it!==1&&it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.channelSize=it,this.textureType=st||rt.FLOAT}encode(rt,it){let st=rt;return this.channelSize===1&&(tt.Logger.verbose("Encoder","Exploding into a larger array"),st=this.allocate(it),rt.forEach((At,ut)=>st[4*ut]=At)),st}allocate(rt){return new Float32Array(4*rt)}decode(rt,it){return this.channelSize===1?rt.filter((st,At)=>At%4==0).subarray(0,it):rt.subarray(0,it)}},_.Uint8DataEncoder=class{constructor(rt,it=1){if(this.channelSize=4,it===1)this.internalFormat=rt.ALPHA,this.format=rt.ALPHA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=it}}encode(rt,it){return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength)}allocate(rt){return new Uint8Array(rt*this.channelSize)}decode(rt,it){if(rt instanceof Uint8Array)return rt.subarray(0,it);throw new Error(`Invalid array type: ${rt.constructor}`)}}},7618:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBatchDim=_.sizeToSquarishShape=_.getRowsCols=_.sizeFromShape=_.isInt=_.parseAxisParam=_.squeezeShape=_.PreferLogicalStrategy=_.AlwaysKeepOriginalSizeStrategy=void 0;const tt=_e(1315),rt=_e(7273);function it(ht,ot){const nt=[],at=[],lt=ot!=null&&Array.isArray(ot)&&ot.length===0,dt=ot==null||lt?null:st(ot,ht).sort();let ft=0;for(let pt=0;pt<ht.length;++pt){if(dt!=null){if(dt[ft]===pt&&ht[pt]!==1)throw new Error(`Can't squeeze axis ${pt} since its dim '${ht[pt]}' is not 1`);(dt[ft]==null||dt[ft]>pt)&&ht[pt]===1&&(nt.push(ht[pt]),at.push(pt)),dt[ft]<=pt&&ft++}ht[pt]!==1&&(nt.push(ht[pt]),at.push(pt))}return{newShape:nt,keptDims:at}}function st(ht,ot){const nt=ot.length;return ht=ht==null?ot.map((at,lt)=>lt):[].concat(ht),(0,rt.assert)(ht.every(at=>at>=-nt&&at<nt),()=>`All values in axis param must be in range [-${nt}, ${nt}) but got axis ${ht}`),(0,rt.assert)(ht.every(At),()=>`All values in axis param must be integers but got axis ${ht}`),ht.map(at=>at<0?nt+at:at)}function At(ht){return ht%1==0}function ut(ht){if(ht.length===0)return 1;let ot=ht[0];for(let nt=1;nt<ht.length;nt++)ot*=ht[nt];return ot}function ct(ht){const ot=Math.ceil(Math.sqrt(ht));return[ot,Math.ceil(ht/ot)]}_.AlwaysKeepOriginalSizeStrategy=class{constructor(ht){this.maxTextureSize=ht}computeTextureWH(ht,ot){if(ht.length===0)return[1,1];const nt=this.maxTextureSize;if(ot&&ot.breakAxis!==void 0){const dt=ot.breakAxis>=ht.length?1:ht.slice(ot.breakAxis).reduce((pt,gt)=>pt*gt),ft=ot.breakAxis<=0?1:ht.slice(0,ot.breakAxis).reduce((pt,gt)=>pt*gt);if(!(dt>nt||ft>nt))return[dt,ft];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ht}, breakAxis:${ot.breakAxis}`)}const at=ht.reduce((dt,ft)=>dt*ft);let lt=Math.floor(Math.sqrt(at));for(;lt<nt&&lt<at&&at%lt!=0;lt++);if(lt>=nt||at%lt!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${ht}`);return[lt,at/lt]}},_.PreferLogicalStrategy=class{constructor(ht){this.maxTextureSize=ht}computeTextureWH(ht,ot){const nt=this.computeTexture(ht,ot);return ot&&ot.isPacked&&(nt[0]/=2,nt[1]/=2),ot&&ot.reverseWH?[nt[1],nt[0]]:nt}computeTexture(ht,ot){const nt=ot&&ot.isPacked;if(ht.length===0)return nt?[2,2]:[1,1];let at=this.maxTextureSize;if(ot&&ot.breakAxis!==void 0){const ft=ot.breakAxis>=ht.length?1:ht.slice(ot.breakAxis).reduce((gt,mt)=>gt*mt),pt=ot.breakAxis<=0?1:ht.slice(0,ot.breakAxis).reduce((gt,mt)=>gt*mt);if(!(ft>at||pt>at))return[ft,pt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ht}, breakAxis:${ot.breakAxis}`)}let lt=ht.slice(0);nt&&(at*=2,lt=lt.map((ft,pt)=>pt>=lt.length-2?lt[pt]%2==0?lt[pt]:lt[pt]+1:lt[pt]),lt.length===1&&(lt=[2,lt[0]])),lt.length!==2&&(lt=it(lt).newShape);const dt=ut(lt);return lt.length<=1&&dt<=at?[1,dt]:lt.length===2&&lt[0]<=at&&lt[1]<=at?lt:lt.length===3&&lt[0]*lt[1]<=at&&lt[2]<=at?[lt[0]*lt[1],lt[2]]:lt.length===3&&lt[0]<=at&&lt[1]*lt[2]<=at?[lt[0],lt[1]*lt[2]]:lt.length===4&&lt[0]*lt[1]*lt[2]<=at&&lt[3]<=at?[lt[0]*lt[1]*lt[2],lt[3]]:lt.length===4&&lt[0]<=at&&lt[1]*lt[2]*lt[3]<=at?[lt[0],lt[1]*lt[2]*lt[3]]:nt?ct(dt/4).map(ft=>2*ft):ct(dt)}},_.squeezeShape=it,_.parseAxisParam=st,_.isInt=At,_.sizeFromShape=ut,_.getRowsCols=function(ht){if(ht.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[ht.length>1?ht[ht.length-2]:1,ht[ht.length-1]]},_.sizeToSquarishShape=ct,_.getBatchDim=function(ht,ot=2){return ut(ht.slice(0,ht.length-ot))}},3314:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createTextureLayoutFromShape=_.calculateTextureWidthAndHeight=_.createTextureLayoutFromTextureType=void 0;const tt=_e(7273),rt=_e(5639);_.createTextureLayoutFromTextureType=(it,st,At)=>{const ut=At===rt.TextureType.unpacked||At===rt.TextureType.unpackedReversed?1:4,ct=At===rt.TextureType.packed,ht=At===rt.TextureType.unpackedReversed||At===rt.TextureType.packed,ot=At===rt.TextureType.packedLastDimension?st.length-1:void 0,nt=At===rt.TextureType.packedLastDimension?st.map((at,lt)=>lt===st.length-1?4*at:at):void 0;return(0,_.createTextureLayoutFromShape)(it,st,ut,nt,{isPacked:ct,reverseWH:ht,breakAxis:ot})},_.calculateTextureWidthAndHeight=(it,st,At)=>{const ut=(0,_.createTextureLayoutFromTextureType)(it,st,At);return[ut.width,ut.height]},_.createTextureLayoutFromShape=(it,st,At=1,ut,ct)=>{const ht=!(!ct||!ct.isPacked),[ot,nt]=it.computeTextureWH(ht&&ut||st,ct),at=st.length;let lt=st.slice(0);if(at===0&&(lt=[1]),At===1)ut=st;else if(ht){if(At!==4)throw new Error("a packed texture must be 4-channel");ut=st,at>0&&(lt[at-1]=Math.ceil(lt[at-1]/2)),at>1&&(lt[at-2]=Math.ceil(lt[at-2]/2))}else if(!ut)throw new Error("Unpacked shape is needed when using channels > 1");return{width:ot,height:nt,channels:At,isPacked:ht,shape:lt,strides:tt.ShapeUtil.computeStrides(lt),unpackedShape:ut,reversedWH:ct&&ct.reverseWH}}},5243:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextureManager=void 0;const tt=_e(1315);_.TextureManager=class{constructor(rt,it,st,At){this.glContext=rt,this.layoutStrategy=it,this.profiler=st,this.config=At,this.pendingRead=new Map,At.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(rt,it,st,At){const ut=this.toEncoderType(rt),ct=this.glContext.getEncoder(ut,it.channels||1,At);if(it.isPacked&&At===1)throw new Error("not implemented");const ht=it.width,ot=it.height;let nt,at;if(this.config.reuseTextures){nt=`${ht}x${ot}_${ct.format}_${ct.internalFormat}_${ct.textureType}`,at=this.inUseTextures.get(nt),at||(at=[],this.inUseTextures.set(nt,at));const dt=this.idleTextures.get(nt);if(dt&&dt.length>0){const ft=dt.pop();return at.push(ft),At===1&&this.glContext.updateTexture(ft,ht,ot,ct,this.toTextureData(rt,st)),ft}}tt.Logger.verbose("TextureManager",`Creating new texture of size ${it.width}x${it.height}`);const lt=this.glContext.allocateTexture(ht,ot,ct,this.toTextureData(rt,st));return this.config.reuseTextures&&(at.push(lt),this.textureLookup.set(lt,nt)),lt}readTexture(rt,it,st){return st||(st=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const At=rt.shape.reduce((ct,ht)=>ct*ht)*st,ut=this.glContext.readTexture(rt.texture,rt.width,rt.height,At,this.toEncoderType(it),st);return this.toTensorData(it,ut)})}async readTextureAsync(rt,it,st){const At=rt.tensor.dataId;if(st||(st=1),this.pendingRead.has(At)){const ut=this.pendingRead.get(At);return new Promise(ct=>ut==null?void 0:ut.push(ct))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(At,[]);const ut=rt.shape.reduce((nt,at)=>nt*at)*st;await this.glContext.createAndWaitForFence();const ct=this.glContext.readTexture(rt.texture,rt.width,rt.height,ut,this.toEncoderType(it),st),ht=this.toTensorData(it,ct),ot=this.pendingRead.get(At);return this.pendingRead.delete(At),ot==null||ot.forEach(nt=>nt(ht)),ht})}readUint8TextureAsFloat(rt){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const it=rt.shape.reduce((At,ut)=>At*ut),st=this.glContext.readTexture(rt.texture,rt.width,rt.height,4*it,"byte",4);return new Float32Array(st.buffer,st.byteOffset,it)})}releaseTexture(rt,it){let st;if(this.config.reuseTextures&&(st=this.textureLookup.get(rt.texture),st)){it&&this.textureLookup.delete(st);const At=this.inUseTextures.get(st);if(At){const ut=At.indexOf(rt.texture);if(ut!==-1){At.splice(ut,1);let ct=this.idleTextures.get(st);ct||(ct=[],this.idleTextures.set(st,ct)),ct.push(rt.texture)}}}st&&!it||(tt.Logger.verbose("TextureManager",`Deleting texture of size ${rt.width}x${rt.height}`),this.glContext.deleteTexture(rt.texture))}toTensorData(rt,it){switch(rt){case"int16":return it instanceof Int16Array?it:Int16Array.from(it);case"int32":return it instanceof Int32Array?it:Int32Array.from(it);case"int8":return it instanceof Int8Array?it:Int8Array.from(it);case"uint16":return it instanceof Uint16Array?it:Uint16Array.from(it);case"uint32":return it instanceof Uint32Array?it:Uint32Array.from(it);case"uint8":case"bool":return it instanceof Uint8Array?it:Uint8Array.from(it);case"float32":return it instanceof Float32Array?it:Float32Array.from(it);case"float64":return it instanceof Float64Array?it:Float64Array.from(it);default:throw new Error(`TensorData type ${rt} is not supported`)}}toTextureData(rt,it){if(it)return it instanceof Float32Array?it:new Float32Array(it)}toEncoderType(rt){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(et,_)=>{var _e;Object.defineProperty(_,"__esModule",{value:!0}),_.TextureType=void 0,(_e=_.TextureType||(_.TextureType={}))[_e.unpacked=0]="unpacked",_e[_e.unpackedReversed=1]="unpackedReversed",_e[_e.packed=2]="packed",_e[_e.downloadUint8AsFloat=3]="downloadUint8AsFloat",_e[_e.packedLastDimension=4]="packedLastDimension"},432:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getGlChannels=_.getCoordsDataType=_.getSqueezedParams=_.squeezeInputShape=_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_.generateShaderFuncNameFromInputSamplerName=_.repeatedTry=_.getPackedShape=void 0;const tt=_e(7273);_.getPackedShape=function(rt){const it=rt.length;return rt.slice(0,it-1).concat(rt[it-1]/4)},_.repeatedTry=async function(rt,it=At=>0,st){return new Promise((At,ut)=>{let ct=0;const ht=()=>{if(rt())return void At();ct++;const ot=it(ct);st!=null&&ct>=st?ut():setTimeout(ht,ot)};ht()})},_.generateShaderFuncNameFromInputSamplerName=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)},_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)+"AtOutCoords"},_.squeezeInputShape=function(rt,it){let st=JSON.parse(JSON.stringify(rt));return st=it,st},_.getSqueezedParams=function(rt,it){return it.map(st=>rt[st]).join(", ")},_.getCoordsDataType=function(rt){if(rt<=1)return"int";if(rt===2)return"ivec2";if(rt===3)return"ivec3";if(rt===4)return"ivec4";if(rt===5)return"ivec5";if(rt===6)return"ivec6";throw Error(`GPU for rank ${rt} is not yet supported`)},_.getGlChannels=function(rt=6){return["x","y","z","w","u","v"].slice(0,rt)}},3389:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createNewWebGLContext=_.createWebGLContext=void 0;const tt=_e(1315),rt=_e(3524),it={};function st(At,ut){let ct;const ht={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!ut||ut==="webgl2")&&(ct=At.getContext("webgl2",ht),ct))try{return new rt.WebGLContext(ct,2)}catch(ot){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${ot}`)}if((!ut||ut==="webgl")&&(ct=At.getContext("webgl",ht)||At.getContext("experimental-webgl",ht),ct))try{return new rt.WebGLContext(ct,1)}catch(ot){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${ot}`)}throw new Error("WebGL is not supported")}_.createWebGLContext=function At(ut){let ct;if(ut&&ut!=="webgl2"||!("webgl2"in it)?ut&&ut!=="webgl"||!("webgl"in it)||(ct=it.webgl):ct=it.webgl2,!ct)try{ct=st(function(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),ut)}catch{ct=st(function(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");const nt=document.createElement("canvas");return nt.width=1,nt.height=1,nt}(),ut)}ut=ut||ct.version===1?"webgl":"webgl2";const ht=ct.gl;return it[ut]=ct,ht.isContextLost()?(delete it[ut],At(ut)):(ht.disable(ht.DEPTH_TEST),ht.disable(ht.STENCIL_TEST),ht.disable(ht.BLEND),ht.disable(ht.DITHER),ht.disable(ht.POLYGON_OFFSET_FILL),ht.disable(ht.SAMPLE_COVERAGE),ht.enable(ht.SCISSOR_TEST),ht.enable(ht.CULL_FACE),ht.cullFace(ht.BACK),ct)},_.createNewWebGLContext=st},3524:function(et,_,_e){var tt=this&&this.__createBinding||(Object.create?function(ht,ot,nt,at){at===void 0&&(at=nt);var lt=Object.getOwnPropertyDescriptor(ot,nt);lt&&!("get"in lt?!ot.__esModule:lt.writable||lt.configurable)||(lt={enumerable:!0,get:function(){return ot[nt]}}),Object.defineProperty(ht,at,lt)}:function(ht,ot,nt,at){at===void 0&&(at=nt),ht[at]=ot[nt]}),rt=this&&this.__setModuleDefault||(Object.create?function(ht,ot){Object.defineProperty(ht,"default",{enumerable:!0,value:ot})}:function(ht,ot){ht.default=ot}),it=this&&this.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var ot={};if(ht!=null)for(var nt in ht)nt!=="default"&&Object.prototype.hasOwnProperty.call(ht,nt)&&tt(ot,ht,nt);return rt(ot,ht),ot};Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLContext=_.linearSearchLastTrue=void 0;const st=_e(2235),At=it(_e(9622)),ut=_e(432);function ct(ht){let ot=0;for(;ot<ht.length&&ht[ot]();++ot);return ot-1}_.linearSearchLastTrue=ct,_.WebGLContext=class{constructor(ht,ot){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=ht,this.version=ot,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(ht,ot,nt,at){const lt=this.gl,dt=lt.createTexture();lt.bindTexture(lt.TEXTURE_2D,dt),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_MIN_FILTER,lt.NEAREST),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_MAG_FILTER,lt.NEAREST),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_WRAP_S,lt.CLAMP_TO_EDGE),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_WRAP_T,lt.CLAMP_TO_EDGE);const ft=at?nt.encode(at,ht*ot):null;return lt.texImage2D(lt.TEXTURE_2D,0,nt.internalFormat,ht,ot,0,nt.format,nt.textureType,ft),this.checkError(),dt}updateTexture(ht,ot,nt,at,lt){const dt=this.gl;dt.bindTexture(dt.TEXTURE_2D,ht);const ft=at.encode(lt,ot*nt);dt.texSubImage2D(dt.TEXTURE_2D,0,0,0,ot,nt,at.format,at.textureType,ft),this.checkError()}attachFramebuffer(ht,ot,nt){const at=this.gl;at.bindTexture(at.TEXTURE_2D,ht),at.bindFramebuffer(at.FRAMEBUFFER,this.framebuffer),at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,ht,0),this.checkError(),at.viewport(0,0,ot,nt),at.scissor(0,0,ot,nt)}readTexture(ht,ot,nt,at,lt,dt){const ft=this.gl;dt||(dt=1),this.frameBufferBound||this.attachFramebuffer(ht,ot,nt);const pt=this.getEncoder(lt,dt),gt=pt.allocate(ot*nt);return ft.bindTexture(ft.TEXTURE_2D,ht),ft.framebufferTexture2D(ft.FRAMEBUFFER,ft.COLOR_ATTACHMENT0,ft.TEXTURE_2D,ht,0),ft.readPixels(0,0,ot,nt,ft.RGBA,pt.textureType,gt),this.checkError(),pt.decode(gt,at)}isFramebufferReady(){return!0}getActiveTexture(){const ht=this.gl;return"TEXTURE"+(ht.getParameter(this.gl.ACTIVE_TEXTURE)-ht.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(ht,ot){const nt=this.gl;nt.vertexAttribPointer(ht,3,nt.FLOAT,!1,20,0),nt.enableVertexAttribArray(ht),ot!==-1&&(nt.vertexAttribPointer(ot,2,nt.FLOAT,!1,20,12),nt.enableVertexAttribArray(ot)),this.checkError()}createProgram(ht,ot){const nt=this.gl,at=nt.createProgram();return nt.attachShader(at,ht),nt.attachShader(at,ot),nt.linkProgram(at),at}compileShader(ht,ot){const nt=this.gl,at=nt.createShader(ot);if(!at)throw new Error(`createShader() returned null with type ${ot}`);if(nt.shaderSource(at,ht),nt.compileShader(at),nt.getShaderParameter(at,nt.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${nt.getShaderInfoLog(at)}
Shader source:
${ht}`);return at}deleteShader(ht){this.gl.deleteShader(ht)}bindTextureToUniform(ht,ot,nt){const at=this.gl;at.activeTexture(at.TEXTURE0+ot),this.checkError(),at.bindTexture(at.TEXTURE_2D,ht),this.checkError(),at.uniform1i(nt,ot),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(st.env.debug){const ht=this.gl,ot=ht.getError();let nt="";switch(ot){case ht.NO_ERROR:return;case ht.INVALID_ENUM:nt="INVALID_ENUM";break;case ht.INVALID_VALUE:nt="INVALID_VALUE";break;case ht.INVALID_OPERATION:nt="INVALID_OPERATION";break;case ht.INVALID_FRAMEBUFFER_OPERATION:nt="INVALID_FRAMEBUFFER_OPERATION";break;case ht.OUT_OF_MEMORY:nt="OUT_OF_MEMORY";break;case ht.CONTEXT_LOST_WEBGL:nt="CONTEXT_LOST_WEBGL";break;default:nt=`Unknown WebGL Error: ${ot.toString(16)}`}throw new Error(nt)}}deleteTexture(ht){this.gl.deleteTexture(ht)}deleteProgram(ht){this.gl.deleteProgram(ht)}getEncoder(ht,ot,nt=0){if(this.version===2)return new At.RedFloat32DataEncoder(this.gl,ot);switch(ht){case"float":return nt===1||this.isRenderFloat32Supported?new At.RGBAFloatDataEncoder(this.gl,ot):new At.RGBAFloatDataEncoder(this.gl,ot,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new At.Uint8DataEncoder(this.gl,ot);default:throw new Error(`Invalid dataType: ${ht}`)}}clearActiveTextures(){const ht=this.gl;for(let ot=0;ot<this.maxTextureImageUnits;++ot)ht.activeTexture(ht.TEXTURE0+ot),ht.bindTexture(ht.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const ht=this.gl;ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteFramebuffer(this.framebuffer),ht.bindBuffer(ht.ARRAY_BUFFER,null),ht.deleteBuffer(this.vertexbuffer),ht.bindBuffer(ht.ELEMENT_ARRAY_BUFFER,null),ht.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const ht=this.gl,ot=ht.createBuffer();if(!ot)throw new Error("createBuffer() returned null");const nt=this.createDefaultGeometry();return ht.bindBuffer(ht.ARRAY_BUFFER,ot),ht.bufferData(ht.ARRAY_BUFFER,nt,ht.STATIC_DRAW),this.checkError(),ot}createFramebuffer(){const ht=this.gl.createFramebuffer();if(!ht)throw new Error("createFramebuffer returned null");return ht}queryVitalParameters(){const ht=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=ht.getParameter(ht.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=ht.getParameter(ht.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const ht=this.gl,ot=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,ot);const nt=this.version===2?ht.RGBA32F:ht.RGBA;ht.texImage2D(ht.TEXTURE_2D,0,nt,1,1,0,ht.RGBA,ht.FLOAT,null);const at=ht.createFramebuffer();ht.bindFramebuffer(ht.FRAMEBUFFER,at),ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,ot,0);const lt=ht.checkFramebufferStatus(ht.FRAMEBUFFER)===ht.FRAMEBUFFER_COMPLETE;return ht.bindTexture(ht.TEXTURE_2D,null),ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteTexture(ot),ht.deleteFramebuffer(at),lt}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const ht=this.gl;let ot,nt,at,lt,dt;try{ot=ht.createTexture(),nt=ht.createFramebuffer(),ht.bindTexture(ht.TEXTURE_2D,ot);const ft=this.version===2?ht.RGBA32F:ht.RGBA;return ht.texImage2D(ht.TEXTURE_2D,0,ft,1,1,0,ht.RGBA,ht.FLOAT,null),ht.bindFramebuffer(ht.FRAMEBUFFER,nt),ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,ot,0),ht.enable(ht.BLEND),at=ht.createShader(ht.VERTEX_SHADER),!!at&&(ht.shaderSource(at,"void main(){}"),ht.compileShader(at),lt=ht.createShader(ht.FRAGMENT_SHADER),!!lt&&(ht.shaderSource(lt,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),ht.compileShader(lt),dt=ht.createProgram(),!!dt&&(ht.attachShader(dt,at),ht.attachShader(dt,lt),ht.linkProgram(dt),ht.useProgram(dt),ht.drawArrays(ht.POINTS,0,1),ht.getError()===ht.NO_ERROR)))}finally{ht.disable(ht.BLEND),dt&&ht.deleteProgram(dt),at&&ht.deleteShader(at),lt&&ht.deleteShader(lt),nt&&(ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteFramebuffer(nt)),ot&&(ht.bindTexture(ht.TEXTURE_2D,null),ht.deleteTexture(ot))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const ht=this.gl,ot=this.disjointTimerQueryWebgl2Extension,nt=ht.createQuery();return ht.beginQuery(ot.TIME_ELAPSED_EXT,nt),nt}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ht=this.gl,ot=this.disjointTimerQueryWebgl2Extension;ht.endQuery(ot.TIME_ELAPSED_EXT)}}isTimerResultAvailable(ht){let ot=!1,nt=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const at=this.gl,lt=this.disjointTimerQueryWebgl2Extension;ot=at.getQueryParameter(ht,at.QUERY_RESULT_AVAILABLE),nt=at.getParameter(lt.GPU_DISJOINT_EXT)}return ot&&!nt}getTimerResult(ht){let ot=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const nt=this.gl;ot=nt.getQueryParameter(ht,nt.QUERY_RESULT),nt.deleteQuery(ht)}return ot/1e6}async waitForQueryAndGetTime(ht){return await(0,ut.repeatedTry)(()=>this.isTimerResultAvailable(ht)),this.getTimerResult(ht)}async createAndWaitForFence(){const ht=this.createFence(this.gl);return this.pollFence(ht)}createFence(ht){let ot;const nt=ht,at=nt.fenceSync(nt.SYNC_GPU_COMMANDS_COMPLETE,0);return ht.flush(),ot=at===null?()=>!0:()=>{const lt=nt.clientWaitSync(at,0,0);return lt===nt.ALREADY_SIGNALED||lt===nt.CONDITION_SATISFIED},{query:at,isFencePassed:ot}}async pollFence(ht){return new Promise(ot=>{this.addItemToPoll(()=>ht.isFencePassed(),()=>ot())})}pollItems(){const ht=ct(this.itemsToPoll.map(ot=>ot.isDoneFn));for(let ot=0;ot<=ht;++ot){const{resolveFn:nt}=this.itemsToPoll[ot];nt()}this.itemsToPoll=this.itemsToPoll.slice(ht+1)}async addItemToPoll(ht,ot){this.itemsToPoll.push({isDoneFn:ht,resolveFn:ot}),this.itemsToPoll.length>1||await(0,ut.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExecutionPlan=void 0;const tt=_e(1315);class rt{constructor(st,At){this.op=st,this.node=At}}_.ExecutionPlan=class{constructor(it,st,At){this.graph=it,this.profiler=At,this.initialize(st)}initialize(it){this.profiler.event("session","ExecutionPlan.initialize",()=>{const st=this.graph.getNodes();if(st.length!==it.length)throw new Error("The size of nodes and OPs do not match.");this._ops=it.map((At,ut)=>new rt(At,st[ut])),this.reset(),this._starter=[],this._ops.forEach((At,ut)=>{let ct=!0;for(const ht of At.node.inputs)if(!this._values[ht]&&this.graph.getInputIndices().indexOf(ht)===-1){ct=!1;break}ct&&this._starter.push(ut)})})}reset(){this._values=this.graph.getValues().map(it=>it.tensor)}async execute(it,st){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const At=it.createInferenceHandler(),ut=this.graph.getInputIndices();if(st.length!==ut.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${st.length} expected: ${ut.length}`);st.forEach((lt,dt)=>{const ft=ut[dt];this._values[ft]=lt});const ct=this._starter.slice(0),ht=this.graph.getValues(),ot=this.graph.getNodes();let nt=0;for(;nt<ct.length;){const lt=ct[nt++],dt=this._ops[lt],ft=dt.node.inputs.map(yt=>this._values[yt]);if(ft.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${dt.node}`);const pt=ft;tt.Logger.verbose("ExecPlan",`Runing op:${dt.node.name} (${pt.map((yt,vt)=>`'${dt.node.inputs[vt]}': ${yt.type}[${yt.dims.join(",")}]`).join(", ")})`);const gt=await this.profiler.event("node",dt.node.name,async()=>dt.op.impl(At,pt,dt.op.context));if(gt.length!==dt.node.outputs.length)throw new Error("the size of output does not match model definition.");gt.forEach((yt,vt)=>{const wt=dt.node.outputs[vt];if(this._values[wt])throw new Error(`output [${wt}] already has value: op:${dt.node.name}`);this._values[wt]=yt});const mt=new Set;gt.forEach((yt,vt)=>{const wt=dt.node.outputs[vt];for(const bt of ht[wt].to){const Bt=ot[bt];let Tt=!0;for(const It of Bt.inputs)if(!this._values[It]){Tt=!1;break}Tt&&mt.add(bt)}}),ct.push(...mt)}const at=[];for(let lt=0;lt<this.graph.getOutputIndices().length;lt++){const dt=this.graph.getOutputIndices()[lt],ft=this._values[dt];if(ft===void 0)throw new Error(`required output [${dt}] does not have value`);dt===0?await ft.getData():ft.data,at.push(ft)}return tt.Logger.verbose("ExecPlan","disposing of inferenceHandler"),At.dispose(),at})}}},4662:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Graph=void 0;const tt=_e(6874),rt=_e(5127),it=_e(2446),st=_e(9240),At=_e(7273);var ut=rt.onnxruntime.experimental.fbs;_.Graph={from:(nt,at)=>new ot(nt,at)};class ct{constructor(at){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,at&&(this.type=At.ProtoUtil.tensorValueTypeFromProto(at.type.tensorType))}get from(){return this._from}get to(){return this._to}}class ht{constructor(at,lt){at instanceof it.onnx.NodeProto?(this.name=at.name,this.opType=at.opType,this.attributes=new tt.Attribute(at.attribute)):at instanceof ut.Node&&(this.name=lt??at.name(),this.opType=at.opType(),this.attributes=new tt.Attribute(At.ProtoUtil.tensorAttributesFromORTFormat(at))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ot{constructor(at,lt){if(!at)throw new TypeError("graph is empty");this.buildGraph(at),this.transformGraph(lt),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(at){if(at instanceof it.onnx.GraphProto)this.buildGraphFromOnnxFormat(at);else{if(!(at instanceof ut.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(at)}}buildGraphFromOnnxFormat(at){const lt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const dt=new Map;if(!at.input)throw new Error("missing information in graph: input");const ft=[];for(const pt of at.input){if(lt.has(pt.name))throw new Error(`duplicated input name: ${pt.name}`);const gt=this._allData.push(new ct(pt))-1;lt.set(pt.name,gt),ft.push(pt.name)}if(!at.initializer)throw new Error("missing information in graph: initializer");for(const pt of at.initializer){let gt=lt.get(pt.name);if(gt===void 0){const mt=new ct;mt.type={shape:{dims:At.ProtoUtil.tensorDimsFromProto(pt.dims)},tensorType:At.ProtoUtil.tensorDataTypeFromProto(pt.dataType)},gt=this._allData.push(mt)-1,lt.set(pt.name,gt)}this._allData[gt]._from=-1,this._allData[gt].tensor=st.Tensor.fromProto(pt)}for(let pt=0;pt<this._allData.length;pt++)this._allData[pt].tensor||(this._allInputIndices.push(pt),this._allInputNames.push(ft[pt]));if(!at.output)throw new Error("missing information in graph: output");for(const pt of at.output){if(lt.has(pt.name))throw new Error(`duplicated output name: ${pt.name}`);const gt=this._allData.push(new ct(pt))-1;lt.set(pt.name,gt),this._allOutputIndices.push(gt),this._allOutputNames.push(pt.name)}if(!at.node)throw new Error("missing information in graph: node");for(const pt of at.node){if(!pt.name)for(let mt=0;;mt++){const yt=`unnamed_${pt.opType}_${mt}`;if(!dt.has(yt)){pt.name=yt;break}}if(dt.has(pt.name))throw new Error(`duplicated node name: ${pt.name}`);const gt=this._nodes.push(new ht(pt))-1;dt.set(pt.name,gt)}for(let pt=0;pt<this._nodes.length;pt++){const gt=this._nodes[pt],mt=at.node[pt];if(!mt.output)throw new Error(`missing output for node: ${mt.name}`);for(const yt of mt.output){let vt=lt.get(yt);if(vt===void 0&&(vt=this._allData.push(new ct)-1,lt.set(yt,vt)),gt.outputs.push(vt),this._allData[vt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${vt}`);if(this._allData[vt]._from=pt,mt.opType==="Constant"){if(!mt.attribute||mt.attribute.length!==1||!mt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!mt.output||mt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");gt.outputs.pop(),gt.executeNode=!1,this._allData[vt]._from=-1,this._allData[vt].tensor=st.Tensor.fromProto(mt.attribute[0].t)}}}for(let pt=0;pt<this._nodes.length;pt++){const gt=this._nodes[pt],mt=at.node[pt];if(!mt.input)throw new Error(`missing input for node: ${mt.name}`);for(const yt of mt.input){const vt=lt.get(yt);if(vt===void 0){if(yt===""&&(mt.input.length===3||mt.input.length===4)&&mt.opType==="Resize")continue;throw new Error(`unrecognized input '${yt}' for node: ${mt.name}`)}gt.inputs.push(vt),this._allData[vt]._to.push(pt)}}return!0}buildGraphFromOrtFormat(at){var lt,dt,ft;const pt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const gt=new Map,mt=[];for(let yt=0;yt<at.inputsLength();yt++){const vt=at.inputs(yt);if(pt.has(vt))throw new Error(`duplicated input name: ${vt}`);for(let wt=0;wt<at.nodeArgsLength();wt++)if(((lt=at.nodeArgs(wt))===null||lt===void 0?void 0:lt.name())===vt){const bt=new ct;if(((ft=(dt=at.nodeArgs(wt))===null||dt===void 0?void 0:dt.type())===null||ft===void 0?void 0:ft.valueType())!==ut.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Bt=at.nodeArgs(wt).type().value(new ut.TensorTypeAndShape),Tt=At.ProtoUtil.tensorDataTypeFromProto(Bt.elemType()),It=Bt.shape(),Dt=[];for(let _t=0;_t<It.dimLength();_t++)Dt.push(At.LongUtil.longToNumber(It.dim(_t).value().dimValue()));bt.type={shape:{dims:Dt},tensorType:Tt};const Ut=this._allData.push(bt)-1;pt.set(vt,Ut),mt.push(vt)}}for(let yt=0;yt<at.initializersLength();yt++){const vt=at.initializers(yt);let wt=pt.get(vt.name());if(wt===void 0){const bt=new ct,Bt=At.ProtoUtil.tensorDimsFromORTFormat(vt),Tt=At.ProtoUtil.tensorDataTypeFromProto(vt.dataType());bt.type={shape:{dims:Bt},tensorType:Tt},wt=this._allData.push(bt)-1,pt.set(vt.name(),wt)}this._allData[wt]._from=-1,this._allData[wt].tensor=st.Tensor.fromOrtTensor(vt)}for(let yt=0;yt<this._allData.length;yt++)this._allData[yt].tensor||(this._allInputIndices.push(yt),this._allInputNames.push(mt[yt]));for(let yt=0;yt<at.outputsLength();yt++){const vt=at.outputs(yt);if(pt.has(vt))throw new Error(`duplicated output name: ${vt}`);const wt=this._allData.push(new ct)-1;pt.set(vt,wt),this._allOutputIndices.push(wt),this._allOutputNames.push(vt)}if(!at.nodes)throw new Error("missing information in graph: node");for(let yt=0;yt<at.nodesLength();yt++){const vt=at.nodes(yt);let wt=vt.name();if(!wt)for(let Bt=0;wt=`unnamed_${vt.opType()}_${Bt}`,gt.has(wt);Bt++);if(gt.has(wt))throw new Error(`duplicated node name: ${wt}`);const bt=this._nodes.push(new ht(vt,wt))-1;gt.set(wt,bt)}for(let yt=0;yt<this._nodes.length;yt++){const vt=this._nodes[yt],wt=at.nodes(yt);if(wt==null)throw new Error(`No node exists at index ${yt}`);if((wt==null?void 0:wt.outputsLength())===0)throw new Error(`missing output for node: ${wt.name}`);for(let bt=0;bt<(wt==null?void 0:wt.outputsLength());bt++){const Bt=wt==null?void 0:wt.outputs(bt);let Tt=pt.get(Bt);if(Tt===void 0&&(Tt=this._allData.push(new ct)-1,pt.set(Bt,Tt)),vt.outputs.push(Tt),this._allData[Tt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Tt}`);if(this._allData[Tt]._from=yt,wt.opType()==="Constant"){if(wt.attributesLength()!==1||!wt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(wt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");vt.outputs.pop(),vt.executeNode=!1,this._allData[Tt]._from=-1,this._allData[Tt].tensor=st.Tensor.fromOrtTensor(wt.attributes(0).t())}}}for(let yt=0;yt<this._nodes.length;yt++){const vt=this._nodes[yt],wt=at.nodes(yt);if(wt.inputsLength()===0)throw new Error(`missing input for node: ${wt.name}`);for(let bt=0;bt<wt.inputsLength();bt++){const Bt=wt.inputs(bt),Tt=pt.get(Bt);if(Tt===void 0)throw new Error(`unrecognized input '${Bt}' for node: ${wt.name()}`);vt.inputs.push(Tt),this._allData[Tt]._to.push(yt)}}}checkIsAcyclic(){const at=new Set;this._allInputIndices.forEach(ft=>{this._allData[ft]._to.forEach(pt=>{at.add(pt)})});const lt=Array.from(at),dt=new Array(this._nodes.length).fill("white");for(;lt.length>0;){const ft=lt.pop();dt[ft]==="gray"?dt[ft]="black":(lt.push(ft),dt[ft]="gray",this._nodes[ft].outputs.forEach(pt=>{const gt=this._allData[pt];if(gt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(gt._from!==ft)throw new Error("from property of the Value object doesn't match index of Node being processed");gt._to.forEach(mt=>{if(dt[mt]==="gray")throw new Error("model graph is cyclic");dt[mt]==="white"&&lt.push(mt)})}))}}transformGraph(at){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),at&&at.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let at=0;const lt=new Array(this._nodes.length,0);let dt=0;for(let ft=0;ft<this._nodes.length;ft++)lt[ft]=dt,this._nodes[ft].executeNode?(dt!==ft&&(this._nodes[dt]=this._nodes[ft]),dt++):this._nodes[ft].outputs.forEach(pt=>{this._allData[pt]._from=-2});this._nodes.splice(dt,this._nodes.length-dt);for(let ft=0;ft<this._allData.length;ft++){const pt=this._allData[ft];pt._from!==void 0&&pt._from!==-1&&pt._from!==-2&&(pt._from=lt[pt._from]);for(let gt=0;gt<pt._to.length;gt++){if(!(pt._to[gt]>=0))throw new Error("Trying to update a removed node");pt._to[gt]=lt[pt._to[gt]]}}at=0;for(let ft=0;ft<this._allData.length;ft++)if(this._allData[ft].from!==-2||this._allOutputIndices.indexOf(ft+at)!==-1){if(at>0){let pt=-1;this._allData[ft].from!==void 0&&this._allData[ft].from!==-1?(pt=this._nodes[this._allData[ft].from].outputs.indexOf(ft+at),pt!==-1&&(this._nodes[this._allData[ft].from].outputs[pt]=ft)):(pt=this._allInputIndices.indexOf(ft+at),pt!==-1&&(this._allInputIndices[pt]=ft)),this._allData[ft].to.forEach(gt=>{pt=this._nodes[gt].inputs.indexOf(ft+at),pt!==-1&&(this._nodes[gt].inputs[pt]=ft)}),this._allData[ft].to.length===0&&(pt=this._allOutputIndices.indexOf(ft+at),pt!==-1&&(this._allOutputIndices[pt]=ft))}}else at++,this._allData.splice(ft,1),ft--}deleteNode(at){const lt=this._nodes[at];if(lt.outputs.length>1){for(let mt=1;mt<lt.outputs.length;mt++)if(this._allData[lt.outputs[mt]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}lt.executeNode=!1;const dt=lt.inputs[0],ft=lt.outputs[0],pt=this._allData[ft].to;for(let mt=0;mt<lt.inputs.length;mt++){const yt=this._allData[lt.inputs[mt]].to.indexOf(at);if(yt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[lt.inputs[mt]].to.splice(yt,1)}this._allData[ft]._to=[];const gt=this._allOutputIndices.indexOf(ft);if(gt!==-1&&(this._allOutputIndices[gt]=dt),pt&&pt.length>0)for(const mt of pt){const yt=this._nodes[mt].inputs.indexOf(ft);if(yt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[mt].inputs[yt]=dt,this._allData[dt].to.push(mt)}}removeAllDropoutNodes(){let at=0;for(const lt of this._nodes){if(lt.opType==="Dropout"){if(lt.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(lt.outputs.length!==1&&lt.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(lt.outputs.length===2&&this._allData[lt.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(at)}at++}}removeAllIdentityNodes(){let at=0;for(const lt of this._nodes)lt.opType==="Identity"&&this.deleteNode(at),at++}isActivation(at){switch(at.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const at of this._nodes)if(at.opType==="Conv"){const lt=this._allData[at.outputs[0]]._to;if(lt.length===1&&this.isActivation(this._nodes[lt[0]])){const dt=this._nodes[lt[0]];if(dt.opType==="Clip")if(dt.inputs.length===1)try{at.attributes.set("activation_params","floats",[dt.attributes.getFloat("min"),dt.attributes.getFloat("max")])}catch{at.attributes.set("activation_params","floats",[At.MIN_CLIP,At.MAX_CLIP])}else{if(!(dt.inputs.length>=3&&this._allData[dt.inputs[1]].tensor!==void 0&&this._allData[dt.inputs[2]].tensor!==void 0))continue;at.attributes.set("activation_params","floats",[this._allData[dt.inputs[1]].tensor.floatData[0],this._allData[dt.inputs[2]].tensor.floatData[0]])}at.attributes.set("activation","string",dt.opType),this.deleteNode(lt[0])}}}}},1315:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.now=_.Profiler=_.Logger=void 0;const _e={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},tt={none:new class{log(ht,ot,nt){}},console:new class{log(ht,ot,nt){console.log(`${this.color(ht)} ${nt?"\x1B[35m"+nt+"\x1B[0m ":""}${ot}`)}color(ht){switch(ht){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${ht}`)}}}},rt={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let it={"":rt};function st(ht,ot,nt,at){if(ot===void 0)return lt=ht,{verbose:st.verbose.bind(null,lt),info:st.info.bind(null,lt),warning:st.warning.bind(null,lt),error:st.error.bind(null,lt),fatal:st.fatal.bind(null,lt)};if(nt===void 0)At(ht,ot);else if(typeof nt=="number"&&at===void 0)At(ht,ot);else if(typeof nt=="string"&&at===void 0)At(ht,nt,0,ot);else{if(typeof nt!="string"||typeof at!="number")throw new TypeError("input is valid");At(ht,nt,0,ot)}var lt}function At(ht,ot,nt,at){const lt=it[at||""]||it[""];_e[ht]<_e[lt.minimalSeverity]||(lt.logDateTime&&(ot=`${new Date().toISOString()}|${ot}`),lt.logSourceLocation,tt[lt.provider].log(ht,ot,at))}(function(ht){function ot(at){it={},nt("",at||{})}function nt(at,lt){if(at==="*")ot(lt);else{const dt=it[at]||rt;it[at]={provider:lt.provider||dt.provider,minimalSeverity:lt.minimalSeverity||dt.minimalSeverity,logDateTime:lt.logDateTime===void 0?dt.logDateTime:lt.logDateTime,logSourceLocation:lt.logSourceLocation===void 0?dt.logSourceLocation:lt.logSourceLocation}}}ht.verbose=function(at,lt){ht("verbose",at,lt)},ht.info=function(at,lt){ht("info",at,lt)},ht.warning=function(at,lt){ht("warning",at,lt)},ht.error=function(at,lt){ht("error",at,lt)},ht.fatal=function(at,lt){ht("fatal",at,lt)},ht.reset=ot,ht.set=nt,ht.setWithEnv=function(at){const lt={};at.logLevel&&(lt.minimalSeverity=at.logLevel),nt("",lt)}})(st||(st={})),_.Logger=st;class ut{constructor(ot,nt,at,lt,dt,ft){this.category=ot,this.name=nt,this.startTime=at,this.endCallback=lt,this.timer=dt,this.ctx=ft}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class ct{constructor(ot,nt,at,lt){this.category=ot,this.name=nt,this.startTime=at,this.endTime=lt}}_.Profiler=class{static create(ht){return ht===void 0?new this:new this(ht.maxNumberEvents,ht.flushBatchSize,ht.flushIntervalInMilliseconds)}constructor(ht,ot,nt){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=ht===void 0?1e4:ht,this._flushBatchSize=ot===void 0?10:ot,this._flushIntervalInMilliseconds=nt===void 0?5e3:nt}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(ht,ot,nt,at){const lt=this._started?this.begin(ht,ot,at):void 0;let dt=!1;const ft=nt();if(ft&&typeof ft.then=="function")return dt=!0,new Promise((pt,gt)=>{ft.then(async mt=>{lt&&await lt.end(),pt(mt)},async mt=>{lt&&await lt.end(),gt(mt)})});if(!dt&&lt){const pt=lt.end();if(pt&&typeof pt.then=="function")return new Promise((gt,mt)=>{pt.then(()=>{gt(ft)},yt=>{mt(yt)})})}return ft}begin(ht,ot,nt){if(!this._started)throw new Error("profiler is not started yet");if(nt===void 0){const at=(0,_.now)();return this.flush(at),new ut(ht,ot,at,lt=>this.endSync(lt))}{const at=nt.beginTimer();return new ut(ht,ot,0,async lt=>this.end(lt),at,nt)}}async end(ht){const ot=await ht.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ct(ht.category,ht.name,ht.startTime,ot)),this.flush(ot))}endSync(ht){const ot=(0,_.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ct(ht.category,ht.name,ht.startTime,ot)),this.flush(ot))}logOneEvent(ht){_.Logger.verbose(`Profiler.${ht.category}`,`${(ht.endTime-ht.startTime).toFixed(2)}ms on event '${ht.name}' at ${ht.endTime.toFixed(2)}`)}flush(ht){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||ht-this._flushTime>=this._flushIntervalInMilliseconds){for(const ot=this._flushPointer;this._flushPointer<ot+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_.now)()}}get started(){return this._started}},_.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Model=void 0;const tt=_e(5686),rt=_e(4662),it=_e(5127),st=_e(2446),At=_e(7273);var ut=it.onnxruntime.experimental.fbs;_.Model=class{constructor(){}load(ct,ht,ot){if(!ot)try{return void this.loadFromOnnxFormat(ct,ht)}catch(nt){if(ot!==void 0)throw nt}this.loadFromOrtFormat(ct,ht)}loadFromOnnxFormat(ct,ht){const ot=st.onnx.ModelProto.decode(ct);if(At.LongUtil.longToNumber(ot.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=ot.opsetImport.map(nt=>({domain:nt.domain,version:At.LongUtil.longToNumber(nt.version)})),this._graph=rt.Graph.from(ot.graph,ht)}loadFromOrtFormat(ct,ht){const ot=new tt.flatbuffers.ByteBuffer(ct),nt=ut.InferenceSession.getRootAsInferenceSession(ot).model();if(At.LongUtil.longToNumber(nt.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let at=0;at<nt.opsetImportLength();at++){const lt=nt.opsetImport(at);this._opsets.push({domain:lt==null?void 0:lt.domain(),version:At.LongUtil.longToNumber(lt.version())})}this._graph=rt.Graph.from(nt.graph(),ht)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FLOAT_TYPES=_.INT_TYPES=_.NUMBER_TYPES=void 0,_.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_.FLOAT_TYPES=["float32","float64"]},5881:(et,_)=>{function _e(tt,rt){if(rt.endsWith("+")){const it=Number.parseInt(rt.substring(0,rt.length-1),10);return!isNaN(it)&&it<=tt}if(rt.split("-").length===2){const it=rt.split("-"),st=Number.parseInt(it[0],10),At=Number.parseInt(it[1],10);return!isNaN(st)&&!isNaN(At)&&st<=tt&&tt<=At}return Number.parseInt(rt,10)===tt}Object.defineProperty(_,"__esModule",{value:!0}),_.resolveOperator=void 0,_.resolveOperator=function(tt,rt,it){for(const st of it){const At=st[0],ut=st[1],ct=st[2],ht=st[3],ot=st[4];if(tt.opType===At){for(const nt of rt)if((nt.domain===ut||nt.domain==="ai.onnx"&&ut==="")&&_e(nt.version,ct))return{opImpl:ht,opInit:ot}}}throw new TypeError(`cannot resolve operator '${tt.opType}' with opsets: ${rt.map(st=>`${st.domain||"ai.onnx"} v${st.version}`).join(", ")}`)}},5127:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.onnxruntime=void 0;const tt=_e(5686);var rt,it;rt=_.onnxruntime||(_.onnxruntime={}),function(st){(function(At){At[At.UNDEFINED=0]="UNDEFINED",At[At.FLOAT=1]="FLOAT",At[At.INT=2]="INT",At[At.STRING=3]="STRING",At[At.TENSOR=4]="TENSOR",At[At.GRAPH=5]="GRAPH",At[At.FLOATS=6]="FLOATS",At[At.INTS=7]="INTS",At[At.STRINGS=8]="STRINGS",At[At.TENSORS=9]="TENSORS",At[At.GRAPHS=10]="GRAPHS",At[At.SPARSE_TENSOR=11]="SPARSE_TENSOR",At[At.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(st.AttributeType||(st.AttributeType={}))}((it=rt.experimental||(rt.experimental={})).fbs||(it.fbs={})),function(st){(function(At){(function(ut){(function(ct){ct[ct.UNKNOWN=0]="UNKNOWN",ct[ct.VALUE=1]="VALUE",ct[ct.PARAM=2]="PARAM"})(ut.DimensionValueType||(ut.DimensionValueType={}))})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){(function(ct){ct[ct.UNDEFINED=0]="UNDEFINED",ct[ct.FLOAT=1]="FLOAT",ct[ct.UINT8=2]="UINT8",ct[ct.INT8=3]="INT8",ct[ct.UINT16=4]="UINT16",ct[ct.INT16=5]="INT16",ct[ct.INT32=6]="INT32",ct[ct.INT64=7]="INT64",ct[ct.STRING=8]="STRING",ct[ct.BOOL=9]="BOOL",ct[ct.FLOAT16=10]="FLOAT16",ct[ct.DOUBLE=11]="DOUBLE",ct[ct.UINT32=12]="UINT32",ct[ct.UINT64=13]="UINT64",ct[ct.COMPLEX64=14]="COMPLEX64",ct[ct.COMPLEX128=15]="COMPLEX128",ct[ct.BFLOAT16=16]="BFLOAT16",ct[ct.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",ct[ct.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",ct[ct.FLOAT8E5M2=19]="FLOAT8E5M2",ct[ct.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(ut.TensorDataType||(ut.TensorDataType={}))})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){(function(ct){ct[ct.Primitive=0]="Primitive",ct[ct.Fused=1]="Fused"})(ut.NodeType||(ut.NodeType={}))})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){(function(ct){ct[ct.NONE=0]="NONE",ct[ct.tensor_type=1]="tensor_type",ct[ct.sequence_type=2]="sequence_type",ct[ct.map_type=3]="map_type"})(ut.TypeInfoValue||(ut.TypeInfoValue={}))})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsShape(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsShape(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}dim(ot,nt){let at=this.bb.__offset(this.bb_pos,4);return at?(nt||new st.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}dimLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startShape(ot){ot.startObject(1)}static addDim(ot,nt){ot.addFieldOffset(0,nt,0)}static createDimVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startDimVector(ot,nt){ot.startVector(4,nt,4)}static endShape(ot){return ot.endObject()}static createShape(ot,nt){return ct.startShape(ot),ct.addDim(ot,nt),ct.endShape(ot)}}ut.Shape=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsDimension(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsDimension(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}value(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}denotation(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startDimension(ot){ot.startObject(2)}static addValue(ot,nt){ot.addFieldOffset(0,nt,0)}static addDenotation(ot,nt){ot.addFieldOffset(1,nt,0)}static endDimension(ot){return ot.endObject()}static createDimension(ot,nt,at){return ct.startDimension(ot),ct.addValue(ot,nt),ct.addDenotation(ot,at),ct.endDimension(ot)}}ut.Dimension=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsDimensionValue(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsDimensionValue(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}dimType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt8(this.bb_pos+ot):st.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}dimParam(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startDimensionValue(ot){ot.startObject(3)}static addDimType(ot,nt){ot.addFieldInt8(0,nt,st.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(ot,nt){ot.addFieldInt64(1,nt,ot.createLong(0,0))}static addDimParam(ot,nt){ot.addFieldOffset(2,nt,0)}static endDimensionValue(ot){return ot.endObject()}static createDimensionValue(ot,nt,at,lt){return ct.startDimensionValue(ot),ct.addDimType(ot,nt),ct.addDimValue(ot,at),ct.addDimParam(ot,lt),ct.endDimensionValue(ot)}}ut.DimensionValue=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTensorTypeAndShape(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTensorTypeAndShape(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}elemType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}shape(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startTensorTypeAndShape(ot){ot.startObject(2)}static addElemType(ot,nt){ot.addFieldInt32(0,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(ot,nt){ot.addFieldOffset(1,nt,0)}static endTensorTypeAndShape(ot){return ot.endObject()}static createTensorTypeAndShape(ot,nt,at){return ct.startTensorTypeAndShape(ot),ct.addElemType(ot,nt),ct.addShape(ot,at),ct.endTensorTypeAndShape(ot)}}ut.TensorTypeAndShape=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsMapType(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsMapType(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}keyType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}valueType(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startMapType(ot){ot.startObject(2)}static addKeyType(ot,nt){ot.addFieldInt32(0,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(ot,nt){ot.addFieldOffset(1,nt,0)}static endMapType(ot){return ot.endObject()}static createMapType(ot,nt,at){return ct.startMapType(ot),ct.addKeyType(ot,nt),ct.addValueType(ot,at),ct.endMapType(ot)}}ut.MapType=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSequenceType(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSequenceType(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}elemType(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startSequenceType(ot){ot.startObject(1)}static addElemType(ot,nt){ot.addFieldOffset(0,nt,0)}static endSequenceType(ot){return ot.endObject()}static createSequenceType(ot,nt){return ct.startSequenceType(ot),ct.addElemType(ot,nt),ct.endSequenceType(ot)}}ut.SequenceType=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(At.fbs||(At.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(ut,ct){return this.bb_pos=ut,this.bb=ct,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(ut,ct,ht,ot){return ut.prep(4,12),ut.writeInt32(ot),ut.writeInt32(ht),ut.writeInt32(ct),ut.offset()}}})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsNodeEdge(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsNodeEdge(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}nodeIndex(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readUint32(this.bb_pos+ot):0}inputEdges(ot,nt){let at=this.bb.__offset(this.bb_pos,6);return at?(nt||new st.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+at)+12*ot,this.bb):null}inputEdgesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputEdges(ot,nt){let at=this.bb.__offset(this.bb_pos,8);return at?(nt||new st.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+at)+12*ot,this.bb):null}outputEdgesLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startNodeEdge(ot){ot.startObject(3)}static addNodeIndex(ot,nt){ot.addFieldInt32(0,nt,0)}static addInputEdges(ot,nt){ot.addFieldOffset(1,nt,0)}static startInputEdgesVector(ot,nt){ot.startVector(12,nt,4)}static addOutputEdges(ot,nt){ot.addFieldOffset(2,nt,0)}static startOutputEdgesVector(ot,nt){ot.startVector(12,nt,4)}static endNodeEdge(ot){return ot.endObject()}static createNodeEdge(ot,nt,at,lt){return ct.startNodeEdge(ot),ct.addNodeIndex(ot,nt),ct.addInputEdges(ot,at),ct.addOutputEdges(ot,lt),ct.endNodeEdge(ot)}}ut.NodeEdge=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsNode(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsNode(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}domain(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}sinceVersion(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readInt32(this.bb_pos+ot):0}index(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.readUint32(this.bb_pos+ot):0}opType(ot){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(){let ot=this.bb.__offset(this.bb_pos,16);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.NodeType.Primitive}executionProviderType(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?this.bb.__string(this.bb_pos+nt,ot):null}inputs(ot,nt){let at=this.bb.__offset(this.bb_pos,20);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}inputsLength(){let ot=this.bb.__offset(this.bb_pos,20);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputs(ot,nt){let at=this.bb.__offset(this.bb_pos,22);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}outputsLength(){let ot=this.bb.__offset(this.bb_pos,22);return ot?this.bb.__vector_len(this.bb_pos+ot):0}attributes(ot,nt){let at=this.bb.__offset(this.bb_pos,24);return at?(nt||new st.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}attributesLength(){let ot=this.bb.__offset(this.bb_pos,24);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputArgCounts(ot){let nt=this.bb.__offset(this.bb_pos,26);return nt?this.bb.readInt32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}inputArgCountsLength(){let ot=this.bb.__offset(this.bb_pos,26);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputArgCountsArray(){let ot=this.bb.__offset(this.bb_pos,26);return ot?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}implicitInputs(ot,nt){let at=this.bb.__offset(this.bb_pos,28);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}implicitInputsLength(){let ot=this.bb.__offset(this.bb_pos,28);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startNode(ot){ot.startObject(13)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addDomain(ot,nt){ot.addFieldOffset(2,nt,0)}static addSinceVersion(ot,nt){ot.addFieldInt32(3,nt,0)}static addIndex(ot,nt){ot.addFieldInt32(4,nt,0)}static addOpType(ot,nt){ot.addFieldOffset(5,nt,0)}static addType(ot,nt){ot.addFieldInt32(6,nt,st.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(ot,nt){ot.addFieldOffset(7,nt,0)}static addInputs(ot,nt){ot.addFieldOffset(8,nt,0)}static createInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startInputsVector(ot,nt){ot.startVector(4,nt,4)}static addOutputs(ot,nt){ot.addFieldOffset(9,nt,0)}static createOutputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startOutputsVector(ot,nt){ot.startVector(4,nt,4)}static addAttributes(ot,nt){ot.addFieldOffset(10,nt,0)}static createAttributesVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startAttributesVector(ot,nt){ot.startVector(4,nt,4)}static addInputArgCounts(ot,nt){ot.addFieldOffset(11,nt,0)}static createInputArgCountsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addInt32(nt[at]);return ot.endVector()}static startInputArgCountsVector(ot,nt){ot.startVector(4,nt,4)}static addImplicitInputs(ot,nt){ot.addFieldOffset(12,nt,0)}static createImplicitInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startImplicitInputsVector(ot,nt){ot.startVector(4,nt,4)}static endNode(ot){return ot.endObject()}static createNode(ot,nt,at,lt,dt,ft,pt,gt,mt,yt,vt,wt,bt,Bt){return ct.startNode(ot),ct.addName(ot,nt),ct.addDocString(ot,at),ct.addDomain(ot,lt),ct.addSinceVersion(ot,dt),ct.addIndex(ot,ft),ct.addOpType(ot,pt),ct.addType(ot,gt),ct.addExecutionProviderType(ot,mt),ct.addInputs(ot,yt),ct.addOutputs(ot,vt),ct.addAttributes(ot,wt),ct.addInputArgCounts(ot,bt),ct.addImplicitInputs(ot,Bt),ct.endNode(ot)}}ut.Node=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsValueInfo(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsValueInfo(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startValueInfo(ot){ot.startObject(3)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addType(ot,nt){ot.addFieldOffset(2,nt,0)}static endValueInfo(ot){return ot.endObject()}static createValueInfo(ot,nt,at,lt){return ct.startValueInfo(ot),ct.addName(ot,nt),ct.addDocString(ot,at),ct.addType(ot,lt),ct.endValueInfo(ot)}}ut.ValueInfo=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTypeInfo(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTypeInfo(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}denotation(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}valueType(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readUint8(this.bb_pos+ot):st.experimental.fbs.TypeInfoValue.NONE}value(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__union(ot,this.bb_pos+nt):null}static startTypeInfo(ot){ot.startObject(3)}static addDenotation(ot,nt){ot.addFieldOffset(0,nt,0)}static addValueType(ot,nt){ot.addFieldInt8(1,nt,st.experimental.fbs.TypeInfoValue.NONE)}static addValue(ot,nt){ot.addFieldOffset(2,nt,0)}static endTypeInfo(ot){return ot.endObject()}static createTypeInfo(ot,nt,at,lt){return ct.startTypeInfo(ot),ct.addDenotation(ot,nt),ct.addValueType(ot,at),ct.addValue(ot,lt),ct.endTypeInfo(ot)}}ut.TypeInfo=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsOperatorSetId(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsOperatorSetId(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}domain(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}version(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}static startOperatorSetId(ot){ot.startObject(2)}static addDomain(ot,nt){ot.addFieldOffset(0,nt,0)}static addVersion(ot,nt){ot.addFieldInt64(1,nt,ot.createLong(0,0))}static endOperatorSetId(ot){return ot.endObject()}static createOperatorSetId(ot,nt,at){return ct.startOperatorSetId(ot),ct.addDomain(ot,nt),ct.addVersion(ot,at),ct.endOperatorSetId(ot)}}ut.OperatorSetId=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTensor(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTensor(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}dims(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}dimsLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}dataType(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}rawData(ot){let nt=this.bb.__offset(this.bb_pos,12);return nt?this.bb.readUint8(this.bb.__vector(this.bb_pos+nt)+ot):0}rawDataLength(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.__vector_len(this.bb_pos+ot):0}rawDataArray(){let ot=this.bb.__offset(this.bb_pos,12);return ot?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}stringData(ot,nt){let at=this.bb.__offset(this.bb_pos,14);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}stringDataLength(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startTensor(ot){ot.startObject(6)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addDims(ot,nt){ot.addFieldOffset(2,nt,0)}static createDimsVector(ot,nt){ot.startVector(8,nt.length,8);for(let at=nt.length-1;at>=0;at--)ot.addInt64(nt[at]);return ot.endVector()}static startDimsVector(ot,nt){ot.startVector(8,nt,8)}static addDataType(ot,nt){ot.addFieldInt32(3,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(ot,nt){ot.addFieldOffset(4,nt,0)}static createRawDataVector(ot,nt){ot.startVector(1,nt.length,1);for(let at=nt.length-1;at>=0;at--)ot.addInt8(nt[at]);return ot.endVector()}static startRawDataVector(ot,nt){ot.startVector(1,nt,1)}static addStringData(ot,nt){ot.addFieldOffset(5,nt,0)}static createStringDataVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startStringDataVector(ot,nt){ot.startVector(4,nt,4)}static endTensor(ot){return ot.endObject()}static createTensor(ot,nt,at,lt,dt,ft,pt){return ct.startTensor(ot),ct.addName(ot,nt),ct.addDocString(ot,at),ct.addDims(ot,lt),ct.addDataType(ot,dt),ct.addRawData(ot,ft),ct.addStringData(ot,pt),ct.endTensor(ot)}}ut.Tensor=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSparseTensor(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSparseTensor(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}values(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}indices(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}dims(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}dimsLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startSparseTensor(ot){ot.startObject(3)}static addValues(ot,nt){ot.addFieldOffset(0,nt,0)}static addIndices(ot,nt){ot.addFieldOffset(1,nt,0)}static addDims(ot,nt){ot.addFieldOffset(2,nt,0)}static createDimsVector(ot,nt){ot.startVector(8,nt.length,8);for(let at=nt.length-1;at>=0;at--)ot.addInt64(nt[at]);return ot.endVector()}static startDimsVector(ot,nt){ot.startVector(8,nt,8)}static endSparseTensor(ot){return ot.endObject()}static createSparseTensor(ot,nt,at,lt){return ct.startSparseTensor(ot),ct.addValues(ot,nt),ct.addIndices(ot,at),ct.addDims(ot,lt),ct.endSparseTensor(ot)}}ut.SparseTensor=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsAttribute(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsAttribute(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.AttributeType.UNDEFINED}f(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readFloat32(this.bb_pos+ot):0}i(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}s(ot){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb_pos+nt,ot):null}t(ot){let nt=this.bb.__offset(this.bb_pos,16);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}g(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?(ot||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}floats(ot){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.readFloat32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}floatsLength(){let ot=this.bb.__offset(this.bb_pos,20);return ot?this.bb.__vector_len(this.bb_pos+ot):0}floatsArray(){let ot=this.bb.__offset(this.bb_pos,20);return ot?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}ints(ot){let nt=this.bb.__offset(this.bb_pos,22);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}intsLength(){let ot=this.bb.__offset(this.bb_pos,22);return ot?this.bb.__vector_len(this.bb_pos+ot):0}strings(ot,nt){let at=this.bb.__offset(this.bb_pos,24);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}stringsLength(){let ot=this.bb.__offset(this.bb_pos,24);return ot?this.bb.__vector_len(this.bb_pos+ot):0}tensors(ot,nt){let at=this.bb.__offset(this.bb_pos,26);return at?(nt||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}tensorsLength(){let ot=this.bb.__offset(this.bb_pos,26);return ot?this.bb.__vector_len(this.bb_pos+ot):0}graphs(ot,nt){let at=this.bb.__offset(this.bb_pos,28);return at?(nt||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}graphsLength(){let ot=this.bb.__offset(this.bb_pos,28);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startAttribute(ot){ot.startObject(13)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addType(ot,nt){ot.addFieldInt32(2,nt,st.experimental.fbs.AttributeType.UNDEFINED)}static addF(ot,nt){ot.addFieldFloat32(3,nt,0)}static addI(ot,nt){ot.addFieldInt64(4,nt,ot.createLong(0,0))}static addS(ot,nt){ot.addFieldOffset(5,nt,0)}static addT(ot,nt){ot.addFieldOffset(6,nt,0)}static addG(ot,nt){ot.addFieldOffset(7,nt,0)}static addFloats(ot,nt){ot.addFieldOffset(8,nt,0)}static createFloatsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addFloat32(nt[at]);return ot.endVector()}static startFloatsVector(ot,nt){ot.startVector(4,nt,4)}static addInts(ot,nt){ot.addFieldOffset(9,nt,0)}static createIntsVector(ot,nt){ot.startVector(8,nt.length,8);for(let at=nt.length-1;at>=0;at--)ot.addInt64(nt[at]);return ot.endVector()}static startIntsVector(ot,nt){ot.startVector(8,nt,8)}static addStrings(ot,nt){ot.addFieldOffset(10,nt,0)}static createStringsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startStringsVector(ot,nt){ot.startVector(4,nt,4)}static addTensors(ot,nt){ot.addFieldOffset(11,nt,0)}static createTensorsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startTensorsVector(ot,nt){ot.startVector(4,nt,4)}static addGraphs(ot,nt){ot.addFieldOffset(12,nt,0)}static createGraphsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startGraphsVector(ot,nt){ot.startVector(4,nt,4)}static endAttribute(ot){return ot.endObject()}static createAttribute(ot,nt,at,lt,dt,ft,pt,gt,mt,yt,vt,wt,bt,Bt){return ct.startAttribute(ot),ct.addName(ot,nt),ct.addDocString(ot,at),ct.addType(ot,lt),ct.addF(ot,dt),ct.addI(ot,ft),ct.addS(ot,pt),ct.addT(ot,gt),ct.addG(ot,mt),ct.addFloats(ot,yt),ct.addInts(ot,vt),ct.addStrings(ot,wt),ct.addTensors(ot,bt),ct.addGraphs(ot,Bt),ct.endAttribute(ot)}}ut.Attribute=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsGraph(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsGraph(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}initializers(ot,nt){let at=this.bb.__offset(this.bb_pos,4);return at?(nt||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}initializersLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodeArgs(ot,nt){let at=this.bb.__offset(this.bb_pos,6);return at?(nt||new st.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}nodeArgsLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodes(ot,nt){let at=this.bb.__offset(this.bb_pos,8);return at?(nt||new st.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}nodesLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}maxNodeIndex(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readUint32(this.bb_pos+ot):0}nodeEdges(ot,nt){let at=this.bb.__offset(this.bb_pos,12);return at?(nt||new st.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}nodeEdgesLength(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputs(ot,nt){let at=this.bb.__offset(this.bb_pos,14);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}inputsLength(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputs(ot,nt){let at=this.bb.__offset(this.bb_pos,16);return at?this.bb.__string(this.bb.__vector(this.bb_pos+at)+4*ot,nt):null}outputsLength(){let ot=this.bb.__offset(this.bb_pos,16);return ot?this.bb.__vector_len(this.bb_pos+ot):0}sparseInitializers(ot,nt){let at=this.bb.__offset(this.bb_pos,18);return at?(nt||new st.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}sparseInitializersLength(){let ot=this.bb.__offset(this.bb_pos,18);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startGraph(ot){ot.startObject(8)}static addInitializers(ot,nt){ot.addFieldOffset(0,nt,0)}static createInitializersVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startInitializersVector(ot,nt){ot.startVector(4,nt,4)}static addNodeArgs(ot,nt){ot.addFieldOffset(1,nt,0)}static createNodeArgsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startNodeArgsVector(ot,nt){ot.startVector(4,nt,4)}static addNodes(ot,nt){ot.addFieldOffset(2,nt,0)}static createNodesVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startNodesVector(ot,nt){ot.startVector(4,nt,4)}static addMaxNodeIndex(ot,nt){ot.addFieldInt32(3,nt,0)}static addNodeEdges(ot,nt){ot.addFieldOffset(4,nt,0)}static createNodeEdgesVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startNodeEdgesVector(ot,nt){ot.startVector(4,nt,4)}static addInputs(ot,nt){ot.addFieldOffset(5,nt,0)}static createInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startInputsVector(ot,nt){ot.startVector(4,nt,4)}static addOutputs(ot,nt){ot.addFieldOffset(6,nt,0)}static createOutputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startOutputsVector(ot,nt){ot.startVector(4,nt,4)}static addSparseInitializers(ot,nt){ot.addFieldOffset(7,nt,0)}static createSparseInitializersVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startSparseInitializersVector(ot,nt){ot.startVector(4,nt,4)}static endGraph(ot){return ot.endObject()}static createGraph(ot,nt,at,lt,dt,ft,pt,gt,mt){return ct.startGraph(ot),ct.addInitializers(ot,nt),ct.addNodeArgs(ot,at),ct.addNodes(ot,lt),ct.addMaxNodeIndex(ot,dt),ct.addNodeEdges(ot,ft),ct.addInputs(ot,pt),ct.addOutputs(ot,gt),ct.addSparseInitializers(ot,mt),ct.endGraph(ot)}}ut.Graph=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsModel(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsModel(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}irVersion(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}opsetImport(ot,nt){let at=this.bb.__offset(this.bb_pos,6);return at?(nt||new st.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}opsetImportLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}producerName(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}producerVersion(ot){let nt=this.bb.__offset(this.bb_pos,10);return nt?this.bb.__string(this.bb_pos+nt,ot):null}domain(ot){let nt=this.bb.__offset(this.bb_pos,12);return nt?this.bb.__string(this.bb_pos+nt,ot):null}modelVersion(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}docString(ot){let nt=this.bb.__offset(this.bb_pos,16);return nt?this.bb.__string(this.bb_pos+nt,ot):null}graph(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?(ot||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}graphDocString(ot){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startModel(ot){ot.startObject(9)}static addIrVersion(ot,nt){ot.addFieldInt64(0,nt,ot.createLong(0,0))}static addOpsetImport(ot,nt){ot.addFieldOffset(1,nt,0)}static createOpsetImportVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startOpsetImportVector(ot,nt){ot.startVector(4,nt,4)}static addProducerName(ot,nt){ot.addFieldOffset(2,nt,0)}static addProducerVersion(ot,nt){ot.addFieldOffset(3,nt,0)}static addDomain(ot,nt){ot.addFieldOffset(4,nt,0)}static addModelVersion(ot,nt){ot.addFieldInt64(5,nt,ot.createLong(0,0))}static addDocString(ot,nt){ot.addFieldOffset(6,nt,0)}static addGraph(ot,nt){ot.addFieldOffset(7,nt,0)}static addGraphDocString(ot,nt){ot.addFieldOffset(8,nt,0)}static endModel(ot){return ot.endObject()}static createModel(ot,nt,at,lt,dt,ft,pt,gt,mt,yt){return ct.startModel(ot),ct.addIrVersion(ot,nt),ct.addOpsetImport(ot,at),ct.addProducerName(ot,lt),ct.addProducerVersion(ot,dt),ct.addDomain(ot,ft),ct.addModelVersion(ot,pt),ct.addDocString(ot,gt),ct.addGraph(ot,mt),ct.addGraphDocString(ot,yt),ct.endModel(ot)}}ut.Model=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsKernelCreateInfos(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsKernelCreateInfos(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}nodeIndices(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.readUint32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}nodeIndicesLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodeIndicesArray(){let ot=this.bb.__offset(this.bb_pos,4);return ot?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}kernelDefHashes(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.readUint64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}kernelDefHashesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startKernelCreateInfos(ot){ot.startObject(2)}static addNodeIndices(ot,nt){ot.addFieldOffset(0,nt,0)}static createNodeIndicesVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addInt32(nt[at]);return ot.endVector()}static startNodeIndicesVector(ot,nt){ot.startVector(4,nt,4)}static addKernelDefHashes(ot,nt){ot.addFieldOffset(1,nt,0)}static createKernelDefHashesVector(ot,nt){ot.startVector(8,nt.length,8);for(let at=nt.length-1;at>=0;at--)ot.addInt64(nt[at]);return ot.endVector()}static startKernelDefHashesVector(ot,nt){ot.startVector(8,nt,8)}static endKernelCreateInfos(ot){return ot.endObject()}static createKernelCreateInfos(ot,nt,at){return ct.startKernelCreateInfos(ot),ct.addNodeIndices(ot,nt),ct.addKernelDefHashes(ot,at),ct.endKernelCreateInfos(ot)}}ut.KernelCreateInfos=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSubGraphSessionState(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSubGraphSessionState(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}graphId(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}sessionState(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startSubGraphSessionState(ot){ot.startObject(2)}static addGraphId(ot,nt){ot.addFieldOffset(0,nt,0)}static addSessionState(ot,nt){ot.addFieldOffset(1,nt,0)}static endSubGraphSessionState(ot){let nt=ot.endObject();return ot.requiredField(nt,4),nt}static createSubGraphSessionState(ot,nt,at){return ct.startSubGraphSessionState(ot),ct.addGraphId(ot,nt),ct.addSessionState(ot,at),ct.endSubGraphSessionState(ot)}}ut.SubGraphSessionState=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSessionState(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSessionState(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}kernels(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}subGraphSessionStates(ot,nt){let at=this.bb.__offset(this.bb_pos,6);return at?(nt||new st.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+at)+4*ot),this.bb):null}subGraphSessionStatesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startSessionState(ot){ot.startObject(2)}static addKernels(ot,nt){ot.addFieldOffset(0,nt,0)}static addSubGraphSessionStates(ot,nt){ot.addFieldOffset(1,nt,0)}static createSubGraphSessionStatesVector(ot,nt){ot.startVector(4,nt.length,4);for(let at=nt.length-1;at>=0;at--)ot.addOffset(nt[at]);return ot.endVector()}static startSubGraphSessionStatesVector(ot,nt){ot.startVector(4,nt,4)}static endSessionState(ot){return ot.endObject()}static createSessionState(ot,nt,at){return ct.startSessionState(ot),ct.addKernels(ot,nt),ct.addSubGraphSessionStates(ot,at),ct.endSessionState(ot)}}ut.SessionState=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(At){(function(ut){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsInferenceSession(ot,nt){return(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsInferenceSession(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ct).__init(ot.readInt32(ot.position())+ot.position(),ot)}static bufferHasIdentifier(ot){return ot.__has_identifier("ORTM")}ortVersion(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}model(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}sessionState(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?(ot||new st.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startInferenceSession(ot){ot.startObject(3)}static addOrtVersion(ot,nt){ot.addFieldOffset(0,nt,0)}static addModel(ot,nt){ot.addFieldOffset(1,nt,0)}static addSessionState(ot,nt){ot.addFieldOffset(2,nt,0)}static endInferenceSession(ot){return ot.endObject()}static finishInferenceSessionBuffer(ot,nt){ot.finish(nt,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(ot,nt){ot.finish(nt,"ORTM",!0)}static createInferenceSession(ot,nt,at,lt){return ct.startInferenceSession(ot),ct.addOrtVersion(ot,nt),ct.addModel(ot,at),ct.addSessionState(ot,lt),ct.endInferenceSession(ot)}}ut.InferenceSession=ct})(At.fbs||(At.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={}))},1723:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxjsSessionHandler=void 0;const tt=_e(2235),rt=_e(9240);_.OnnxjsSessionHandler=class{constructor(it){this.session=it,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(it,st,At){const ut=new Map;for(const ot in it)if(Object.hasOwnProperty.call(it,ot)){const nt=it[ot];ut.set(ot,new rt.Tensor(nt.dims,nt.type,void 0,void 0,nt.data))}const ct=await this.session.run(ut),ht={};return ct.forEach((ot,nt)=>{ht[nt]=new tt.Tensor(ot.type,ot.data,ot.dims)}),ht}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Session=void 0;const tt=_e(7067),rt=_e(1296),it=_e(1975),st=_e(6496),At=_e(1315),ut=_e(1745);_.Session=class{constructor(ct={}){this._initialized=!1,this.backendHint=ct.backendHint,this.profiler=At.Profiler.create(ct.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(ct,ht,ot){await this.profiler.event("session","Session.loadModel",async()=>{const nt=await(0,it.resolveBackend)(this.backendHint);if(this.sessionHandler=nt.createSessionHandler(this.context),this._model=new ut.Model,typeof ct=="string"){const at=ct.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){const lt=await(0,rt.promisify)(tt.readFile)(ct);this.initialize(lt,at)}else{const lt=await fetch(ct),dt=await lt.arrayBuffer();this.initialize(new Uint8Array(dt),at)}}else if(ArrayBuffer.isView(ct))this.initialize(ct);else{const at=new Uint8Array(ct,ht||0,ot||ct.byteLength);this.initialize(at)}})}initialize(ct,ht){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const ot=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(ct,ot,ht),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new st.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(ct){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const ht=this.normalizeAndValidateInputs(ct),ot=await this._executionPlan.execute(this.sessionHandler,ht);return this.createOutput(ot)})}normalizeAndValidateInputs(ct){const ht=this._model.graph.getInputNames();if(Array.isArray(ct)){if(ct.length!==ht.length)throw new Error(`incorrect input array length: expected ${ht.length} but got ${ct.length}`)}else{if(ct.size!==ht.length)throw new Error(`incorrect input map size: expected ${ht.length} but got ${ct.size}`);const ot=new Array(ct.size);let nt=0;for(let at=0;at<ht.length;++at){const lt=ct.get(ht[at]);if(!lt)throw new Error(`missing input tensor for: '${name}'`);ot[nt++]=lt}ct=ot}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,ct,!1);else{const ot=this._model.graph.getInputIndices(),nt=this._model.graph.getValues(),at=new Array(ot.length);for(let lt=0;lt<ot.length;++lt){const dt=nt[ot[lt]];at[lt]=dt.type.shape.dims,this.context.graphInputTypes.push(dt.type.tensorType),this.context.graphInputDims.push(ct[lt].dims)}this.validateInputTensorDims(at,ct,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,ct),ct}validateInputTensorTypes(ct,ht){for(let ot=0;ot<ht.length;ot++){const nt=ct[ot],at=ht[ot].type;if(nt!==at)throw new Error(`input tensor[${ot}] check failed: expected type '${nt}' but got ${at}`)}}validateInputTensorDims(ct,ht,ot){for(let nt=0;nt<ht.length;nt++){const at=ct[nt],lt=ht[nt].dims;if(!this.compareTensorDims(at,lt,ot))throw new Error(`input tensor[${nt}] check failed: expected shape '[${at.join(",")}]' but got [${lt.join(",")}]`)}}compareTensorDims(ct,ht,ot){if(ct.length!==ht.length)return!1;for(let nt=0;nt<ct.length;++nt)if(ct[nt]!==ht[nt]&&(!ot||ct[nt]!==0))return!1;return!0}createOutput(ct){const ht=this._model.graph.getOutputNames();if(ct.length!==ht.length)throw new Error("expected number of outputs do not match number of generated outputs");const ot=new Map;for(let nt=0;nt<ht.length;++nt)ot.set(ht[nt],ct[nt]);return ot}initializeOps(ct){const ht=ct.getNodes();this._ops=new Array(ht.length);for(let ot=0;ot<ht.length;ot++)this._ops[ot]=this.sessionHandler.resolve(ht[ot],this._model.opsets,ct)}}},9240:function(et,_,_e){var tt=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const rt=_e(3442),it=tt(_e(1583)),st=_e(5127),At=_e(2446),ut=_e(7273);var ct=st.onnxruntime.experimental.fbs;class ht{get data(){if(this.cache===void 0){const ft=this.dataProvider(this.dataId);if(ft.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=ft}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(ft){return this.data[ut.ShapeUtil.indicesToOffset(ft,this.strides)]}set(ft,pt){this.data[ut.ShapeUtil.indicesToOffset(ft,this.strides)]=pt}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=ut.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(ft,pt,gt,mt,yt,vt=rt.Guid.create()){this.dims=ft,this.type=pt,this.dataProvider=gt,this.asyncDataProvider=mt,this.cache=yt,this.dataId=vt,this.size=ut.ShapeUtil.validateDimsAndCalcSize(ft);const wt=this.size,bt=gt===void 0&&mt===void 0&&yt===void 0;if(yt!==void 0&&yt.length!==wt)throw new RangeError("Input dims doesn't match data length.");if(pt==="string"){if(!(yt===void 0||Array.isArray(yt)&&yt.every(Bt=>typeof Bt=="string")))throw new TypeError("cache should be a string array");bt&&(this.cache=new Array(wt))}else{if(yt!==void 0){const Bt=nt(pt);if(!(yt instanceof Bt))throw new TypeError(`cache should be type ${Bt.name}`)}if(bt){const Bt=new ArrayBuffer(wt*function(Tt){switch(Tt){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${Tt}`)}}(pt));this.cache=function(Tt,It){return new(nt(It))(Tt)}(Bt,pt)}}}static fromProto(ft){if(!ft)throw new Error("cannot construct Value from an empty tensor");const pt=ut.ProtoUtil.tensorDataTypeFromProto(ft.dataType),gt=ut.ProtoUtil.tensorDimsFromProto(ft.dims),mt=new ht(gt,pt);if(pt==="string")ft.stringData.forEach((yt,vt)=>{mt.data[vt]=(0,ut.decodeUtf8String)(yt)});else if(ft.rawData&&typeof ft.rawData.byteLength=="number"&&ft.rawData.byteLength>0){const yt=mt.data,vt=new DataView(ft.rawData.buffer,ft.rawData.byteOffset,ft.rawData.byteLength),wt=ot(ft.dataType),bt=ft.rawData.byteLength/wt;if(ft.rawData.byteLength%wt!=0)throw new Error("invalid buffer length");if(yt.length!==bt)throw new Error("buffer length mismatch");for(let Bt=0;Bt<bt;Bt++){const Tt=lt(vt,ft.dataType,Bt*wt);yt[Bt]=Tt}}else{let yt;switch(ft.dataType){case At.onnx.TensorProto.DataType.FLOAT:yt=ft.floatData;break;case At.onnx.TensorProto.DataType.INT32:case At.onnx.TensorProto.DataType.INT16:case At.onnx.TensorProto.DataType.UINT16:case At.onnx.TensorProto.DataType.INT8:case At.onnx.TensorProto.DataType.UINT8:case At.onnx.TensorProto.DataType.BOOL:yt=ft.int32Data;break;case At.onnx.TensorProto.DataType.INT64:yt=ft.int64Data;break;case At.onnx.TensorProto.DataType.DOUBLE:yt=ft.doubleData;break;case At.onnx.TensorProto.DataType.UINT32:case At.onnx.TensorProto.DataType.UINT64:yt=ft.uint64Data;break;default:throw new Error("unspecific error")}if(yt==null)throw new Error("failed to populate data from a tensorproto value");const vt=mt.data;if(vt.length!==yt.length)throw new Error("array length mismatch");for(let wt=0;wt<yt.length;wt++){const bt=yt[wt];it.default.isLong(bt)?vt[wt]=at(bt,ft.dataType):vt[wt]=bt}}return mt}static fromData(ft,pt,gt){return new ht(pt,gt,void 0,void 0,ft)}static fromOrtTensor(ft){if(!ft)throw new Error("cannot construct Value from an empty tensor");const pt=ut.ProtoUtil.tensorDimsFromORTFormat(ft),gt=ut.ProtoUtil.tensorDataTypeFromProto(ft.dataType()),mt=new ht(pt,gt);if(gt==="string")for(let yt=0;yt<ft.stringDataLength();yt++)mt.data[yt]=ft.stringData(yt);else if(ft.rawDataArray()&&typeof ft.rawDataLength()=="number"&&ft.rawDataLength()>0){const yt=mt.data,vt=new DataView(ft.rawDataArray().buffer,ft.rawDataArray().byteOffset,ft.rawDataLength()),wt=ot(ft.dataType()),bt=ft.rawDataLength()/wt;if(ft.rawDataLength()%wt!=0)throw new Error("invalid buffer length");if(yt.length!==bt)throw new Error("buffer length mismatch");for(let Bt=0;Bt<bt;Bt++){const Tt=lt(vt,ft.dataType(),Bt*wt);yt[Bt]=Tt}}return mt}}function ot(dt){switch(dt){case At.onnx.TensorProto.DataType.UINT8:case At.onnx.TensorProto.DataType.INT8:case At.onnx.TensorProto.DataType.BOOL:return 1;case At.onnx.TensorProto.DataType.UINT16:case At.onnx.TensorProto.DataType.INT16:return 2;case At.onnx.TensorProto.DataType.FLOAT:case At.onnx.TensorProto.DataType.INT32:case At.onnx.TensorProto.DataType.UINT32:return 4;case At.onnx.TensorProto.DataType.INT64:case At.onnx.TensorProto.DataType.DOUBLE:case At.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${At.onnx.TensorProto.DataType[dt]}`)}}function nt(dt){switch(dt){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function at(dt,ft){if(ft===At.onnx.TensorProto.DataType.INT64||ft===ct.TensorDataType.INT64){if(dt.greaterThanOrEqual(2147483648)||dt.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(ft!==At.onnx.TensorProto.DataType.UINT32&&ft!==ct.TensorDataType.UINT32&&ft!==At.onnx.TensorProto.DataType.UINT64&&ft!==ct.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${At.onnx.TensorProto.DataType[ft]}`);if(dt.greaterThanOrEqual(4294967296)||dt.lessThan(0))throw new TypeError("uint64 is not supported")}return dt.toNumber()}function lt(dt,ft,pt){switch(ft){case At.onnx.TensorProto.DataType.BOOL:case At.onnx.TensorProto.DataType.UINT8:return dt.getUint8(pt);case At.onnx.TensorProto.DataType.INT8:return dt.getInt8(pt);case At.onnx.TensorProto.DataType.UINT16:return dt.getUint16(pt,!0);case At.onnx.TensorProto.DataType.INT16:return dt.getInt16(pt,!0);case At.onnx.TensorProto.DataType.FLOAT:return dt.getFloat32(pt,!0);case At.onnx.TensorProto.DataType.INT32:return dt.getInt32(pt,!0);case At.onnx.TensorProto.DataType.UINT32:return dt.getUint32(pt,!0);case At.onnx.TensorProto.DataType.INT64:return at(it.default.fromBits(dt.getUint32(pt,!0),dt.getUint32(pt+4,!0),!1),ft);case At.onnx.TensorProto.DataType.DOUBLE:return dt.getFloat64(pt,!0);case At.onnx.TensorProto.DataType.UINT64:return at(it.default.fromBits(dt.getUint32(pt,!0),dt.getUint32(pt+4,!0),!0),ft);default:throw new Error(`cannot read from DataView for type ${At.onnx.TensorProto.DataType[ft]}`)}}_.Tensor=ht},7273:function(et,_,_e){var tt=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeUtf8String=_.MAX_CLIP=_.MIN_CLIP=_.PoolConvUtil=_.ReduceUtil=_.SplitUtil=_.MathUtil=_.ShapeUtil=_.LongUtil=_.ProtoUtil=_.GemmUtil=_.arrayCopyHelper=_.BroadcastUtil=_.MatMulUtil=_.ArrayUtil=_.assert=_.checkInputsShape=void 0;const rt=_e(5686),it=tt(_e(1583)),st=_e(2446),At=_e(9240);_.checkInputsShape=function(ft,...pt){if(!ft||ft.length!==pt.length)return!1;for(let gt=0;gt<ft.length;gt++)if(!ft[gt].dims||ft[gt].dims.length!==pt[gt])return!1;return!0},_.assert=function(ft,pt){if(!ft)throw new Error(typeof pt=="string"?pt:pt())},_.ArrayUtil=class{static arraysEqual(ft,pt){if(ft.length!==pt.length)return!1;for(let gt=0;gt<ft.length;gt++)if(ft[gt]!==pt[gt])return!1;return!0}};class ut{static preprocessInputShapes(pt,gt){return[pt.length===1?[1,pt[0]]:pt,gt.length===1?[gt[0],1]:gt]}static postprocessOutputShape(pt,gt,mt){gt===1&&pt.splice(pt.length-2,1),mt===1&&pt.pop()}static calcMatMulShape(pt,gt){return pt[1]!==gt[0]?void 0:[pt[0],gt[1]]}}_.MatMulUtil=ut;class ct{static calcShape(pt,gt,mt=!1){const yt=pt.length,vt=gt.length;if(yt===0)return gt;if(vt===0)return pt;const wt=Math.max(pt.length,gt.length),bt=new Array(wt);if(mt){if(yt<2||vt<2)return;const Bt=ut.calcMatMulShape([pt[yt-2],pt[yt-1]],[gt[vt-2],gt[vt-1]]);if(Bt===void 0)return;[bt[wt-2],bt[wt-1]]=Bt}for(let Bt=mt?3:1;Bt<=wt;Bt++){const Tt=yt-Bt<0?1:pt[yt-Bt],It=vt-Bt<0?1:gt[vt-Bt];if(Tt!==It&&Tt>1&&It>1)return;bt[wt-Bt]=Math.max(Tt,It)}return bt}static index(pt,gt){const mt=new Array(gt.length);return ct.fillIndex(pt,gt,mt),mt}static fillIndex(pt,gt,mt){const yt=pt.length-gt.length;for(let vt=0;vt<gt.length;vt++)mt[vt]=pt[yt+vt]%gt[vt]}static calc(pt,gt,mt,yt,vt){const wt=ct.calcShape(pt.dims,gt.dims);if(wt){if(yt&&!nt.areEqual(wt,pt.dims))return;const bt=nt.size(wt),Bt=yt?pt:new At.Tensor(wt,vt||pt.type);if(wt.length===0)Bt.set([],mt(pt.get([]),gt.get([])));else{const Tt=new Array(wt.length),It=new Array(pt.dims.length),Dt=new Array(gt.dims.length);let Ut,_t=0,St=0,xt=!1,Ct=!1;pt.dims.length===0&&(_t=pt.get([]),xt=!0),gt.dims.length===0&&(St=gt.get([]),Ct=!0);for(let Ft=0;Ft<bt;Ft++){Ut=Ft;for(let Lt=wt.length-1;Lt>=0;Lt--)Tt[Lt]=Ut%wt[Lt],Ut=Math.floor(Ut/wt[Lt]);xt||(ct.fillIndex(Tt,pt.dims,It),_t=pt.get(It)),Ct||(ct.fillIndex(Tt,gt.dims,Dt),St=gt.get(Dt)),Bt.set(Tt,mt(_t,St))}}return Bt}}static isValidBroadcast(pt,gt){const mt=pt.length,yt=gt.length;if(mt>yt)return!1;for(let vt=1;vt<=mt;vt++)if(pt[mt-vt]!==1&&pt[mt-vt]!==gt[yt-vt])return!1;return!0}static getBroadcastDims(pt,gt){const mt=pt.length,yt=[];for(let vt=0;vt<mt;vt++){const wt=mt-1-vt,bt=pt[wt]||1;(gt[gt.length-1-vt]||1)>1&&bt===1&&yt.unshift(wt)}return yt}}_.BroadcastUtil=ct,_.arrayCopyHelper=function(ft,pt,gt,mt,yt){if(mt<0||mt>=pt.length)throw new Error("sourceIndex out of bounds");if(gt<0||gt>=ft.length)throw new Error("targetIndex out of bounds");if(mt+yt>pt.length)throw new Error("source indices to be copied are outside bounds");if(gt+yt>ft.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<yt;vt++)ft[gt+vt]=pt[mt+vt]},_.GemmUtil=class{static getShapeOfGemmResult(ft,pt,gt,mt,yt){if(ft.length!==2||gt.length!==2)throw new Error("shape need to be of size 2");let vt,wt,bt;pt?(vt=ft[1],wt=ft[0]):(vt=ft[0],wt=ft[1]);let Bt=-1;if(mt?(bt=gt[0],Bt=1):(bt=gt[1],Bt=0),gt[Bt]!==wt)throw new Error("dimension mismatch");if(vt<=0||bt<=0||wt<=0)throw new Error("invalid shape specified");if(yt&&!ct.isValidBroadcast(yt,[vt,bt]))throw new Error("gemm: invalid bias shape for broadcast");return[vt,bt,wt]}};class ht{static tensorDataTypeFromProto(pt){switch(pt){case st.onnx.TensorProto.DataType.INT8:return"int8";case st.onnx.TensorProto.DataType.UINT8:return"uint8";case st.onnx.TensorProto.DataType.BOOL:return"bool";case st.onnx.TensorProto.DataType.INT16:return"int16";case st.onnx.TensorProto.DataType.UINT16:return"uint16";case st.onnx.TensorProto.DataType.INT32:return"int32";case st.onnx.TensorProto.DataType.UINT32:return"uint32";case st.onnx.TensorProto.DataType.FLOAT:return"float32";case st.onnx.TensorProto.DataType.DOUBLE:return"float64";case st.onnx.TensorProto.DataType.STRING:return"string";case st.onnx.TensorProto.DataType.INT64:return"int32";case st.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${st.onnx.TensorProto.DataType[pt]}`)}}static tensorDataTypeStringToEnum(pt){switch(pt){case"int8":return st.onnx.TensorProto.DataType.INT8;case"uint8":return st.onnx.TensorProto.DataType.UINT8;case"bool":return st.onnx.TensorProto.DataType.BOOL;case"int16":return st.onnx.TensorProto.DataType.INT16;case"uint16":return st.onnx.TensorProto.DataType.UINT16;case"int32":return st.onnx.TensorProto.DataType.INT32;case"uint32":return st.onnx.TensorProto.DataType.UINT32;case"float32":return st.onnx.TensorProto.DataType.FLOAT;case"float64":return st.onnx.TensorProto.DataType.DOUBLE;case"string":return st.onnx.TensorProto.DataType.STRING;case"int64":return st.onnx.TensorProto.DataType.INT64;case"uint64":return st.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${pt}`)}}static tensorDimsFromProto(pt){return pt.map(gt=>it.default.isLong(gt)?gt.toNumber():gt)}static tensorValueTypeFromProto(pt){return{tensorType:ht.tensorDataTypeFromProto(pt.elemType),shape:{dims:ht.tensorDimsFromProto(pt.shape.dim.map(gt=>gt.dimValue))}}}static tensorDimsFromORTFormat(pt){const gt=[];for(let mt=0;mt<pt.dimsLength();mt++)gt.push(ot.longToNumber(pt.dims(mt)));return gt}static tensorAttributesFromORTFormat(pt){const gt=[];for(let mt=0;mt<pt.attributesLength();mt++)gt.push(pt.attributes(mt));return gt}}_.ProtoUtil=ht;class ot{static longToNumber(pt,gt){return it.default.isLong(pt)?pt.toNumber():pt instanceof rt.flatbuffers.Long?it.default.fromValue({low:pt.low,high:pt.high,unsigned:gt!=null&&gt}).toNumber():pt}static isLong(pt){return it.default.isLong(pt)||pt instanceof rt.flatbuffers.Long}}_.LongUtil=ot;class nt{static size(pt){return nt.getSizeFromDimensionRange(pt,0,pt.length)}static sizeFromDimension(pt,gt){if(gt<0||gt>pt.length)throw new Error(`invalid dimension of ${gt} for sizeFromDimension as Tensor has ${pt.length} dimensions.`);return nt.getSizeFromDimensionRange(pt,gt,pt.length)}static sizeToDimension(pt,gt){if(gt<0||gt>pt.length)throw new Error(`invalid dimension of ${gt} for sizeToDimension as Tensor has ${pt.length} dimensions.`);return nt.getSizeFromDimensionRange(pt,0,gt)}static getSizeFromDimensionRange(pt,gt,mt){let yt=1;for(let vt=gt;vt<mt;vt++){if(pt[vt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");yt*=pt[vt]}return yt}static computeStrides(pt){const gt=pt.length;if(gt===0)return[];if(gt===1)return[1];const mt=new Array(gt);mt[gt-1]=1,mt[gt-2]=pt[gt-1];for(let yt=gt-3;yt>=0;--yt)mt[yt]=mt[yt+1]*pt[yt+1];return mt}static transpose(pt){return pt.slice().reverse()}static indicesToOffset(pt,gt,mt){mt===void 0&&(mt=pt.length);let yt=0;for(let vt=0;vt<mt;++vt)yt+=gt[vt]*pt[vt];return yt}static offsetToIndices(pt,gt){const mt=gt.length;if(mt===0)return[];if(mt===1)return[pt*gt[0]];const yt=new Array(gt.length);for(let vt=0;vt<yt.length-1;++vt)yt[vt]=Math.floor(pt/gt[vt]),pt-=yt[vt]*gt[vt];return yt[yt.length-1]=pt,yt}static normalizeAxis(pt,gt){if(pt<-gt&&pt>=gt)throw new Error("unsupported axis for this operation.");return pt<0?pt+gt:pt}static normalizeAxes(pt,gt){return pt.map(mt=>this.normalizeAxis(mt,gt))}static incrementIndex(pt,gt,mt){if(gt.length===0||pt.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(mt===void 0)mt=gt.length;else if(mt<=0||mt>gt.length)throw new Error("Incorrect axis to increment on");for(let yt=mt-1;yt>=0&&(pt[yt]++,!(pt[yt]<gt[yt]));--yt)pt[yt]=0}static calculateReshapedDims(pt,gt){if(gt.length===0){if(pt.length===0||nt.size(pt)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const mt=gt.length,yt=new Array(mt);let vt=-1,wt=1;for(let Bt=0;Bt<mt;Bt++){if(gt[Bt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(gt[Bt]===-1){if(vt!==-1)throw new Error("at most one dimension in shape hints can be -1");vt=Bt}else{if(gt[Bt]===0){if(Bt>=pt.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");yt[Bt]=pt[Bt]}else yt[Bt]=gt[Bt];wt*=yt[Bt]}}const bt=nt.size(pt);if(vt!==-1){if(bt%wt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${pt}] Output shape: [${gt}]`);yt[vt]=bt/wt}else if(wt!==bt)throw new Error("reshapedDims and originalDims don't have matching sizes");return yt}static sortBasedOnPerm(pt,gt){return gt?gt.map(mt=>pt[mt]):pt.slice().reverse()}static padShape(pt,gt){const mt=pt.length;return pt.map((yt,vt)=>yt+gt[vt]+gt[vt+mt])}static areEqual(pt,gt){return pt.length===gt.length&&pt.every((mt,yt)=>mt===gt[yt])}static validateDimsAndCalcSize(pt){if(pt.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let gt=1;for(const mt of pt){if(!Number.isInteger(mt))throw new TypeError(`Invalid shape: ${mt} is not an integer`);if(mt<0||mt>2147483647)throw new TypeError(`Invalid shape: length ${mt} is not allowed`);gt*=mt}return gt}static flattenShape(pt,gt){gt<0&&(gt+=pt.length);const mt=pt.reduce((vt,wt)=>vt*wt,1),yt=pt.slice(gt).reduce((vt,wt)=>vt*wt,1);return[mt/yt,yt]}static squeezeShape(pt,gt){const mt=new Array;gt=nt.normalizeAxes(gt,pt.length);for(let yt=0;yt<pt.length;yt++){const vt=gt.indexOf(yt)>=0;if(vt&&pt[yt]!==1)throw new Error("squeeze an axis of size different than 1");(gt.length===0&&pt[yt]>1||gt.length>0&&!vt)&&mt.push(pt[yt])}return mt}static unsqueezeShape(pt,gt){const mt=new Array(pt.length+gt.length);mt.fill(0);for(let vt=0;vt<gt.length;vt++){const wt=nt.normalizeAxis(gt[vt],mt.length);if(wt>=mt.length)throw new Error("'axes' has an out of range axis");if(mt[wt]!==0)throw new Error("'axes' has a duplicate axis");mt[wt]=1}let yt=0;for(let vt=0;vt<mt.length;vt++)mt[vt]===0&&(mt[vt]=pt[yt++]);if(yt!==pt.length)throw new Error("the unsqueezed dimension could not be established");return mt}}_.ShapeUtil=nt,_.MathUtil=class{static sqr(ft,pt,gt,mt,yt){if(mt<0||mt>=pt.length)throw new Error("sourceIndex out of bounds");if(gt<0||gt>=ft.length)throw new Error("targetIndex out of bounds");if(mt+yt>pt.length)throw new Error("source indices to be copied are outside bounds");if(gt+yt>ft.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<yt;vt++)ft[gt+vt]+=Math.pow(pt[mt+vt],2)}static axpy(ft,pt,gt,mt,yt,vt){if(mt<0||mt>=pt.length)throw new Error("sourceIndex out of bounds");if(gt<0||gt>=ft.length)throw new Error("targetIndex out of bounds");if(mt+yt>pt.length)throw new Error("source indices to be copied are outside bounds");if(gt+yt>ft.length)throw new Error("target array is too small to hold result");for(let wt=0;wt<yt;wt++)ft[gt+wt]+=vt*pt[mt+wt]}static powx(ft,pt,gt,mt,yt,vt){if(mt<0||mt>=pt.length)throw new Error("sourceIndex out of bounds");if(gt<0||gt>=ft.length)throw new Error("targetIndex out of bounds");if(mt+yt>pt.length)throw new Error("source indices to be copied are outside bounds");if(gt+yt>ft.length)throw new Error("target array is too small to hold result");for(let wt=0;wt<yt;wt++)ft[gt+wt]=Math.pow(pt[mt+wt],vt)}static mul(ft,pt,gt,mt,yt){if(mt<0||mt>=pt.length)throw new Error("sourceIndex out of bounds");if(gt<0||gt>=ft.length)throw new Error("targetIndex out of bounds");if(mt+yt>pt.length)throw new Error("source indices to be copied are outside bounds");if(gt+yt>ft.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<yt;vt++)ft[gt+vt]=pt[mt+vt]*ft[gt+vt]}};class at{static splitShape(pt,gt,mt,yt){if(mt.length===0){if(!yt)throw new Error("need to know number of outputs when the 'split' attribute is not specified");at.determineSplit(pt[gt],yt,mt)}const vt=[],wt=[0];for(let bt=0;bt<mt.length;++bt){bt!==0&&wt.push(wt[bt-1]+mt[bt-1]);const Bt=pt.slice();Bt[gt]=mt[bt],vt.push(Bt)}return[vt,wt]}static determineSplit(pt,gt,mt){if(pt%gt!=0)throw new Error("cannot split tensor to equal sized parts");for(let yt=0;yt<gt;++yt)mt.push(pt/gt)}}_.SplitUtil=at;class lt{static calcReduce(pt,gt,mt,yt,vt){const wt=pt.dims.slice(0);gt.length===0&&wt.forEach((_t,St)=>gt.push(St));const bt=lt.calcReduceShape(wt,gt,!0),Bt=nt.size(bt),Tt=new At.Tensor(bt,pt.type),It=nt.computeStrides(bt),Dt=nt.computeStrides(wt),Ut=new Array(wt.length);for(let _t=0;_t<Bt;_t++){const St=nt.offsetToIndices(_t,It);ct.fillIndex(St,wt,Ut),Tt.set(St,lt.calcReduceByAxis(pt.numberData,gt,wt,0,nt.indicesToOffset(Ut,Dt),yt,vt))}return mt?Tt:new At.Tensor(lt.calcReduceShape(wt,gt,mt),Tt.type,void 0,void 0,Tt.data,Tt.dataId)}static calcReduceByAxis(pt,gt,mt,yt,vt,wt,bt){let Bt=0;if(yt>=gt.length)return wt(pt[vt]);const Tt=gt[yt],It=Tt>=mt.length?1:nt.size(mt.slice(Tt+1));for(let Dt=0;Dt<mt[Tt];Dt++)Bt=Dt===0?lt.calcReduceByAxis(pt,gt,mt,yt+1,vt,wt,bt):bt(Bt,lt.calcReduceByAxis(pt,gt,mt,yt+1,vt,wt,bt)),vt+=It;return Bt}static calcReduceShape(pt,gt,mt){const yt=pt.slice();for(let vt=0;vt<gt.length;vt++)yt[gt[vt]]=mt?1:0;return yt.filter(vt=>vt!==0)}}_.ReduceUtil=lt;class dt{static adjustPoolAttributes(pt,gt,mt,yt,vt,wt){if(!pt&&mt.length!==gt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(pt)for(let bt=0;bt<gt.length-2;bt++)bt>=mt.length?mt.push(gt[bt+2]):mt[bt]=gt[bt+2];for(let bt=0;bt<mt.length;bt++)if(bt<yt.length){if(yt[bt]<0)throw new Error("strides should be greater than or equal to 1")}else yt.push(1);for(let bt=0;bt<mt.length;bt++)if(bt<vt.length){if(vt[bt]<0)throw new Error("dilations should be greater than or equal to 1")}else vt.push(1);for(let bt=0;bt<2*mt.length;bt++)if(bt<wt.length){if(wt[bt]<0)throw new Error("pad should be greater than or equal to 1")}else wt.push(0);for(let bt=0;bt<mt.length;bt++){if(mt[bt]<=0)throw new Error("kernel shapes need to be greater than 0");if(wt[bt]>=mt[bt]||wt[bt+mt.length]>=mt[bt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(pt,gt,mt,yt,vt,wt){if(wt){if(vt.length!==2*(pt.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(gt.length!==pt.length-2)throw new Error("length of strides should be the length of data dimensions");if(yt.length!==pt.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let bt=0;bt<pt.length-2;bt++)dt.adjustPadAndReturnShape(pt[bt+2],gt[bt],mt[bt],yt[bt],vt,bt,bt+pt.length-2,wt)}}static computePoolOutputShape(pt,gt,mt,yt,vt,wt,bt){if(gt.length<=0)throw new Error("input shape must be of size greater than 0");const Bt=[gt[0],gt[1]];return dt.computeShapeHelper(pt,gt,Bt,mt,yt,vt,wt,bt),Bt}static computeConvOutputShape(pt,gt,mt,yt,vt,wt,bt){if(pt.length<=0||gt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Bt=[pt[0],gt[0]];return dt.computeShapeHelper(!1,pt,Bt,mt,yt,vt,wt,bt),Bt}static computeShapeHelper(pt,gt,mt,yt,vt,wt,bt,Bt){if(pt)for(let Tt=0;Tt<gt.length-2;Tt++)mt.push(1);else for(let Tt=0;Tt<gt.length-2;Tt++)mt.push(dt.adjustPadAndReturnShape(gt[Tt+2],yt[Tt],vt[Tt],wt[Tt],bt,Tt,Tt+gt.length-2,Bt))}static adjustPadAndReturnShape(pt,gt,mt,yt,vt,wt,bt,Bt){const Tt=mt*(yt-1)+1;if(!Bt||Bt==="NOTSET")return Math.floor((pt+vt[wt]+vt[bt]-Tt)/gt+1);switch(Bt){case"VALID":return vt[wt]=0,vt[bt]=0,Math.floor((pt-Tt)/gt+1);case"SAME_LOWER":case"SAME_UPPER":if(mt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const It=((pt+gt-1)/gt-1)*gt+yt-pt;return vt[wt]=Math.floor(Bt==="SAME_LOWER"?(It+1)/2:It/2),vt[bt]=It-vt[wt],Math.floor((pt+It-yt)/gt+1)}default:throw new Error("Unsupported AutoPad type")}}}_.PoolConvUtil=dt,_.MIN_CLIP=-34028234663852886e22,_.MAX_CLIP=34028234663852886e22,_.decodeUtf8String=function(ft){return new TextDecoder().decode(ft)}},8408:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.version=void 0,_.version="1.16.3"},9544:function(et,_,_e){var tt,rt=this&&this.__createBinding||(Object.create?function(It,Dt,Ut,_t){_t===void 0&&(_t=Ut);var St=Object.getOwnPropertyDescriptor(Dt,Ut);St&&!("get"in St?!Dt.__esModule:St.writable||St.configurable)||(St={enumerable:!0,get:function(){return Dt[Ut]}}),Object.defineProperty(It,_t,St)}:function(It,Dt,Ut,_t){_t===void 0&&(_t=Ut),It[_t]=Dt[Ut]}),it=this&&this.__setModuleDefault||(Object.create?function(It,Dt){Object.defineProperty(It,"default",{enumerable:!0,value:Dt})}:function(It,Dt){It.default=Dt}),st=this&&this.__importStar||function(It){if(It&&It.__esModule)return It;var Dt={};if(It!=null)for(var Ut in It)Ut!=="default"&&Object.prototype.hasOwnProperty.call(It,Ut)&&rt(Dt,It,Ut);return it(Dt,It),Dt};Object.defineProperty(_,"__esModule",{value:!0}),_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initializeRuntime=_.initializeWebAssemblyInstance=void 0;const At=_e(2235),ut=st(_e(1259)),ct=_e(263),ht=()=>!!At.env.wasm.proxy&&typeof document<"u";let ot,nt,at,lt=!1,dt=!1,ft=!1;const pt=[],gt=[],mt=[],yt=[],vt=[],wt=[],bt=()=>{if(lt||!dt||ft||!ot)throw new Error("worker not ready")},Bt=It=>{switch(It.data.type){case"init-wasm":lt=!1,It.data.err?(ft=!0,nt[1](It.data.err)):(dt=!0,nt[0]());break;case"init-ort":It.data.err?at[1](It.data.err):at[0]();break;case"create_allocate":It.data.err?pt.shift()[1](It.data.err):pt.shift()[0](It.data.out);break;case"create_finalize":It.data.err?gt.shift()[1](It.data.err):gt.shift()[0](It.data.out);break;case"create":It.data.err?mt.shift()[1](It.data.err):mt.shift()[0](It.data.out);break;case"release":It.data.err?yt.shift()[1](It.data.err):yt.shift()[0]();break;case"run":It.data.err?vt.shift()[1](It.data.err):vt.shift()[0](It.data.out);break;case"end-profiling":It.data.err?wt.shift()[1](It.data.err):wt.shift()[0]()}},Tt=typeof document<"u"?(tt=document==null?void 0:document.currentScript)===null||tt===void 0?void 0:tt.src:void 0;_.initializeWebAssemblyInstance=async()=>{if(ht()){if(dt)return;if(lt)throw new Error("multiple calls to 'initWasm()' detected.");if(ft)throw new Error("previous call to 'initWasm()' failed.");return lt=!0,At.env.wasm.wasmPaths===void 0&&Tt&&Tt.indexOf("blob:")!==0&&(At.env.wasm.wasmPaths=Tt.substr(0,+Tt.lastIndexOf("/")+1)),new Promise((It,Dt)=>{ot==null||ot.terminate(),ot=_e(8050).Z(),ot.onmessage=Bt,nt=[It,Dt];const Ut={type:"init-wasm",in:At.env.wasm};ot.postMessage(Ut)})}return(0,ct.initializeWebAssembly)(At.env.wasm)},_.initializeRuntime=async It=>{if(ht())return bt(),new Promise((Dt,Ut)=>{at=[Dt,Ut];const _t={type:"init-ort",in:It};ot.postMessage(_t)});await ut.initRuntime(It)},_.createSessionAllocate=async It=>ht()?(bt(),new Promise((Dt,Ut)=>{pt.push([Dt,Ut]);const _t={type:"create_allocate",in:{model:It}};ot.postMessage(_t,[It.buffer])})):ut.createSessionAllocate(It),_.createSessionFinalize=async(It,Dt)=>ht()?(bt(),new Promise((Ut,_t)=>{gt.push([Ut,_t]);const St={type:"create_finalize",in:{modeldata:It,options:Dt}};ot.postMessage(St)})):ut.createSessionFinalize(It,Dt),_.createSession=async(It,Dt)=>ht()?(bt(),new Promise((Ut,_t)=>{mt.push([Ut,_t]);const St={type:"create",in:{model:It,options:Dt}};ot.postMessage(St,[It.buffer])})):ut.createSession(It,Dt),_.releaseSession=async It=>{if(ht())return bt(),new Promise((Dt,Ut)=>{yt.push([Dt,Ut]);const _t={type:"release",in:It};ot.postMessage(_t)});ut.releaseSession(It)},_.run=async(It,Dt,Ut,_t,St)=>ht()?(bt(),new Promise((xt,Ct)=>{vt.push([xt,Ct]);const Ft={type:"run",in:{sessionId:It,inputIndices:Dt,inputs:Ut,outputIndices:_t,options:St}};ot.postMessage(Ft,ut.extractTransferableBuffers(Ut))})):ut.run(It,Dt,Ut,_t,St),_.endProfiling=async It=>{if(ht())return bt(),new Promise((Dt,Ut)=>{wt.push([Dt,Ut]);const _t={type:"end-profiling",in:It};ot.postMessage(_t)});ut.endProfiling(It)}},7918:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setRunOptions=void 0;const tt=_e(263),rt=_e(1497);_.setRunOptions=it=>{const st=(0,tt.getInstance)();let At=0;const ut=[],ct=it||{};try{if((it==null?void 0:it.logSeverityLevel)===void 0)ct.logSeverityLevel=2;else if(typeof it.logSeverityLevel!="number"||!Number.isInteger(it.logSeverityLevel)||it.logSeverityLevel<0||it.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${it.logSeverityLevel}`);if((it==null?void 0:it.logVerbosityLevel)===void 0)ct.logVerbosityLevel=0;else if(typeof it.logVerbosityLevel!="number"||!Number.isInteger(it.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${it.logVerbosityLevel}`);(it==null?void 0:it.terminate)===void 0&&(ct.terminate=!1);let ht=0;return(it==null?void 0:it.tag)!==void 0&&(ht=(0,rt.allocWasmString)(it.tag,ut)),At=st._OrtCreateRunOptions(ct.logSeverityLevel,ct.logVerbosityLevel,!!ct.terminate,ht),At===0&&(0,rt.checkLastError)("Can't create run options."),(it==null?void 0:it.extra)!==void 0&&(0,rt.iterateExtraOptions)(it.extra,"",new WeakSet,(ot,nt)=>{const at=(0,rt.allocWasmString)(ot,ut),lt=(0,rt.allocWasmString)(nt,ut);st._OrtAddRunConfigEntry(At,at,lt)!==0&&(0,rt.checkLastError)(`Can't set a run config entry: ${ot} - ${nt}.`)}),[At,ut]}catch(ht){throw At!==0&&st._OrtReleaseRunOptions(At),ut.forEach(ot=>st._free(ot)),ht}}},6640:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxruntimeWebAssemblySessionHandler=void 0;const tt=_e(2806),rt=_e(2235),it=_e(2850),st=_e(9544);let At;_.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(ut){const ct=await fetch(ut);if(ct.status!==200)throw new Error(`failed to load model: ${ut}`);const ht=await ct.arrayBuffer();return(0,st.createSessionAllocate)(new Uint8Array(ht))}async loadModel(ut,ct){if(At||(await(0,st.initializeRuntime)(rt.env),At=!0),typeof ut=="string")if(typeof process<"u"&&process.versions&&process.versions.node){const ht=await(0,it.promisify)(tt.readFile)(ut);[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSession)(ht,ct)}else{const ht=await this.createSessionAllocate(ut);[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSessionFinalize)(ht,ct)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSession)(ut,ct)}async dispose(){return(0,st.releaseSession)(this.sessionId)}async run(ut,ct,ht){const ot=[],nt=[];Object.entries(ut).forEach(ft=>{const pt=ft[0],gt=ft[1],mt=this.inputNames.indexOf(pt);if(mt===-1)throw new Error(`invalid input '${pt}'`);ot.push(gt),nt.push(mt)});const at=[];Object.entries(ct).forEach(ft=>{const pt=ft[0],gt=this.outputNames.indexOf(pt);if(gt===-1)throw new Error(`invalid output '${pt}'`);at.push(gt)});const lt=await(0,st.run)(this.sessionId,nt,ot.map(ft=>[ft.type,ft.dims,ft.data]),at,ht),dt={};for(let ft=0;ft<lt.length;ft++)dt[this.outputNames[at[ft]]]=new rt.Tensor(lt[ft][0],lt[ft][2],lt[ft][1]);return dt}startProfiling(){}endProfiling(){(0,st.endProfiling)(this.sessionId)}}},7622:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setSessionOptions=void 0;const tt=_e(263),rt=_e(1497);_.setSessionOptions=it=>{var st,At,ut,ct;const ht=(0,tt.getInstance)();let ot=0;const nt=[],at=it||{};(lt=>{lt.extra||(lt.extra={}),lt.extra.session||(lt.extra.session={});const dt=lt.extra.session;dt.use_ort_model_bytes_directly||(dt.use_ort_model_bytes_directly="1"),lt.executionProviders&&lt.executionProviders.some(ft=>(typeof ft=="string"?ft:ft.name)==="webgpu")&&(lt.enableMemPattern=!1)})(at);try{const lt=(yt=>{switch(yt){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${yt}`)}})((st=at.graphOptimizationLevel)!==null&&st!==void 0?st:"all"),dt=(yt=>{switch(yt){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${yt}`)}})((At=at.executionMode)!==null&&At!==void 0?At:"sequential"),ft=typeof at.logId=="string"?(0,rt.allocWasmString)(at.logId,nt):0,pt=(ut=at.logSeverityLevel)!==null&&ut!==void 0?ut:2;if(!Number.isInteger(pt)||pt<0||pt>4)throw new Error(`log serverity level is not valid: ${pt}`);const gt=(ct=at.logVerbosityLevel)!==null&&ct!==void 0?ct:0;if(!Number.isInteger(gt)||gt<0||gt>4)throw new Error(`log verbosity level is not valid: ${gt}`);const mt=typeof at.optimizedModelFilePath=="string"?(0,rt.allocWasmString)(at.optimizedModelFilePath,nt):0;return ot=ht._OrtCreateSessionOptions(lt,!!at.enableCpuMemArena,!!at.enableMemPattern,dt,!!at.enableProfiling,0,ft,pt,gt,mt),ot===0&&(0,rt.checkLastError)("Can't create session options."),at.executionProviders&&((yt,vt,wt)=>{for(const bt of vt){let Bt=typeof bt=="string"?bt:bt.name;switch(Bt){case"xnnpack":Bt="XNNPACK";break;case"webnn":if(Bt="WEBNN",typeof bt!="string"){const It=bt;if(It!=null&&It.deviceType){const Dt=(0,rt.allocWasmString)("deviceType",wt),Ut=(0,rt.allocWasmString)(It.deviceType,wt);(0,tt.getInstance)()._OrtAddSessionConfigEntry(yt,Dt,Ut)!==0&&(0,rt.checkLastError)(`Can't set a session config entry: 'deviceType' - ${It.deviceType}.`)}if(It!=null&&It.powerPreference){const Dt=(0,rt.allocWasmString)("powerPreference",wt),Ut=(0,rt.allocWasmString)(It.powerPreference,wt);(0,tt.getInstance)()._OrtAddSessionConfigEntry(yt,Dt,Ut)!==0&&(0,rt.checkLastError)(`Can't set a session config entry: 'powerPreference' - ${It.powerPreference}.`)}}break;case"webgpu":Bt="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${Bt}`)}const Tt=(0,rt.allocWasmString)(Bt,wt);(0,tt.getInstance)()._OrtAppendExecutionProvider(yt,Tt)!==0&&(0,rt.checkLastError)(`Can't append execution provider: ${Bt}.`)}})(ot,at.executionProviders,nt),at.extra!==void 0&&(0,rt.iterateExtraOptions)(at.extra,"",new WeakSet,(yt,vt)=>{const wt=(0,rt.allocWasmString)(yt,nt),bt=(0,rt.allocWasmString)(vt,nt);ht._OrtAddSessionConfigEntry(ot,wt,bt)!==0&&(0,rt.checkLastError)(`Can't set a session config entry: ${yt} - ${vt}.`)}),[ot,nt]}catch(lt){throw ot!==0&&ht._OrtReleaseSessionOptions(ot),nt.forEach(dt=>ht._free(dt)),lt}}},7917:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.logLevelStringToEnum=_.tensorTypeToTypedArrayConstructor=_.getTensorElementSize=_.tensorDataTypeEnumToString=_.tensorDataTypeStringToEnum=void 0,_.tensorDataTypeStringToEnum=_e=>{switch(_e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${_e}`)}},_.tensorDataTypeEnumToString=_e=>{switch(_e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${_e}`)}},_.getTensorElementSize=_e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][_e],_.tensorTypeToTypedArrayConstructor=_e=>{switch(_e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${_e}`)}},_.logLevelStringToEnum=_e=>{switch(_e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${_e}`)}}},1259:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.extractTransferableBuffers=_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initRuntime=void 0;const tt=_e(7918),rt=_e(7622),it=_e(7917),st=_e(263),At=_e(1497);_.initRuntime=async ct=>{var ht,ot;ht=ct.wasm.numThreads,ot=(0,it.logLevelStringToEnum)(ct.logLevel),(0,st.getInstance)()._OrtInit(ht,ot)!==0&&(0,At.checkLastError)("Can't initialize onnxruntime.")};const ut=new Map;_.createSessionAllocate=ct=>{const ht=(0,st.getInstance)(),ot=ht._malloc(ct.byteLength);if(ot===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${ct.byteLength}.`);return ht.HEAPU8.set(ct,ot),[ot,ct.byteLength]},_.createSessionFinalize=(ct,ht)=>{const ot=(0,st.getInstance)();let nt=0,at=0,lt=[];const dt=[],ft=[];try{[at,lt]=(0,rt.setSessionOptions)(ht),nt=ot._OrtCreateSession(ct[0],ct[1],at),nt===0&&(0,At.checkLastError)("Can't create a session.");const[pt,gt]=(vt=>{const wt=(0,st.getInstance)(),bt=wt.stackSave();try{const Bt=wt.stackAlloc(8);return wt._OrtGetInputOutputCount(vt,Bt,Bt+4)!==0&&(0,At.checkLastError)("Can't get session input/output count."),[wt.HEAP32[Bt/4],wt.HEAP32[Bt/4+1]]}finally{wt.stackRestore(bt)}})(nt),mt=[],yt=[];for(let vt=0;vt<pt;vt++){const wt=ot._OrtGetInputName(nt,vt);wt===0&&(0,At.checkLastError)("Can't get an input name."),dt.push(wt),mt.push(ot.UTF8ToString(wt))}for(let vt=0;vt<gt;vt++){const wt=ot._OrtGetOutputName(nt,vt);wt===0&&(0,At.checkLastError)("Can't get an output name."),ft.push(wt),yt.push(ot.UTF8ToString(wt))}return ut.set(nt,[nt,dt,ft]),[nt,mt,yt]}catch(pt){throw dt.forEach(gt=>ot._OrtFree(gt)),ft.forEach(gt=>ot._OrtFree(gt)),nt!==0&&ot._OrtReleaseSession(nt),pt}finally{ot._free(ct[0]),at!==0&&ot._OrtReleaseSessionOptions(at),lt.forEach(pt=>ot._free(pt))}},_.createSession=(ct,ht)=>{const ot=(0,_.createSessionAllocate)(ct);return(0,_.createSessionFinalize)(ot,ht)},_.releaseSession=ct=>{const ht=(0,st.getInstance)(),ot=ut.get(ct);if(!ot)throw new Error(`cannot release session. invalid session id: ${ct}`);const[nt,at,lt]=ot;at.forEach(dt=>ht._OrtFree(dt)),lt.forEach(dt=>ht._OrtFree(dt)),ht._OrtReleaseSession(nt),ut.delete(ct)},_.run=async(ct,ht,ot,nt,at)=>{const lt=(0,st.getInstance)(),dt=ut.get(ct);if(!dt)throw new Error(`cannot run inference. invalid session id: ${ct}`);const[ft,pt,gt]=dt,mt=ht.length,yt=nt.length;let vt=0,wt=[];const bt=[],Bt=[];try{[vt,wt]=(0,tt.setRunOptions)(at);for(let St=0;St<mt;St++){const xt=ot[St][0],Ct=ot[St][1],Ft=ot[St][2];let Lt,Mt;if(Array.isArray(Ft)){Mt=4*Ft.length,Lt=lt._malloc(Mt),Bt.push(Lt);let Gt=Lt/4;for(let Wt=0;Wt<Ft.length;Wt++){if(typeof Ft[Wt]!="string")throw new TypeError(`tensor data at index ${Wt} is not a string`);lt.HEAPU32[Gt++]=(0,At.allocWasmString)(Ft[Wt],Bt)}}else Mt=Ft.byteLength,Lt=lt._malloc(Mt),Bt.push(Lt),lt.HEAPU8.set(new Uint8Array(Ft.buffer,Ft.byteOffset,Mt),Lt);const Rt=lt.stackSave(),Nt=lt.stackAlloc(4*Ct.length);try{let Gt=Nt/4;Ct.forEach(Xt=>lt.HEAP32[Gt++]=Xt);const Wt=lt._OrtCreateTensor((0,it.tensorDataTypeStringToEnum)(xt),Lt,Mt,Nt,Ct.length);Wt===0&&(0,At.checkLastError)(`Can't create tensor for input[${St}].`),bt.push(Wt)}finally{lt.stackRestore(Rt)}}const Tt=lt.stackSave(),It=lt.stackAlloc(4*mt),Dt=lt.stackAlloc(4*mt),Ut=lt.stackAlloc(4*yt),_t=lt.stackAlloc(4*yt);try{let St=It/4,xt=Dt/4,Ct=Ut/4,Ft=_t/4;for(let Nt=0;Nt<mt;Nt++)lt.HEAPU32[St++]=bt[Nt],lt.HEAPU32[xt++]=pt[ht[Nt]];for(let Nt=0;Nt<yt;Nt++)lt.HEAPU32[Ct++]=0,lt.HEAPU32[Ft++]=gt[nt[Nt]];let Lt=lt._OrtRun(ft,Dt,It,mt,_t,yt,Ut,vt);const Mt=lt.jsepRunPromise;Mt&&Mt.then!==void 0&&(Lt=await Mt);const Rt=[];Lt!==0&&(0,At.checkLastError)("failed to call OrtRun().");for(let Nt=0;Nt<yt;Nt++){const Gt=lt.HEAPU32[Ut/4+Nt],Wt=lt.stackSave(),Xt=lt.stackAlloc(16);let Yt,Zt=0;try{Lt=lt._OrtGetTensorData(Gt,Xt,Xt+4,Xt+8,Xt+12),Lt!==0&&(0,At.checkLastError)(`Can't access output tensor data on index ${Nt}.`);let er=Xt/4;const Ar=lt.HEAPU32[er++];Zt=lt.HEAPU32[er++];const hr=lt.HEAPU32[er++],dr=lt.HEAPU32[er++],ar=[];for(let or=0;or<dr;or++)ar.push(lt.HEAPU32[hr/4+or]);lt._OrtFree(hr);const ur=ar.length===0?1:ar.reduce((or,fr)=>or*fr);if(Yt=(0,it.tensorDataTypeEnumToString)(Ar),Yt==="string"){const or=[];let fr=Zt/4;for(let pr=0;pr<ur;pr++){const yr=lt.HEAPU32[fr++],Tr=pr===ur-1?void 0:lt.HEAPU32[fr]-yr;or.push(lt.UTF8ToString(yr,Tr))}Rt.push([Yt,ar,or])}else{const or=new((0,it.tensorTypeToTypedArrayConstructor)(Yt))(ur);new Uint8Array(or.buffer,or.byteOffset,or.byteLength).set(lt.HEAPU8.subarray(Zt,Zt+or.byteLength)),Rt.push([Yt,ar,or])}}finally{lt.stackRestore(Wt),Yt==="string"&&Zt&&lt._free(Zt),lt._OrtReleaseTensor(Gt)}}return Rt}finally{lt.stackRestore(Tt)}}finally{bt.forEach(Tt=>lt._OrtReleaseTensor(Tt)),Bt.forEach(Tt=>lt._free(Tt)),vt!==0&&lt._OrtReleaseRunOptions(vt),wt.forEach(Tt=>lt._free(Tt))}},_.endProfiling=ct=>{const ht=(0,st.getInstance)(),ot=ut.get(ct);if(!ot)throw new Error("invalid session id");const nt=ot[0],at=ht._OrtEndProfiling(nt);at===0&&(0,At.checkLastError)("Can't get an profile file name."),ht._OrtFree(at)},_.extractTransferableBuffers=ct=>{const ht=[];for(const ot of ct){const nt=ot[2];!Array.isArray(nt)&&nt.buffer&&ht.push(nt.buffer)}return ht}},263:function(et,_,_e){var tt=this&&this.__createBinding||(Object.create?function(at,lt,dt,ft){ft===void 0&&(ft=dt);var pt=Object.getOwnPropertyDescriptor(lt,dt);pt&&!("get"in pt?!lt.__esModule:pt.writable||pt.configurable)||(pt={enumerable:!0,get:function(){return lt[dt]}}),Object.defineProperty(at,ft,pt)}:function(at,lt,dt,ft){ft===void 0&&(ft=dt),at[ft]=lt[dt]}),rt=this&&this.__setModuleDefault||(Object.create?function(at,lt){Object.defineProperty(at,"default",{enumerable:!0,value:lt})}:function(at,lt){at.default=lt}),it=this&&this.__importStar||function(at){if(at&&at.__esModule)return at;var lt={};if(at!=null)for(var dt in at)dt!=="default"&&Object.prototype.hasOwnProperty.call(at,dt)&&tt(lt,at,dt);return rt(lt,at),lt};Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.getInstance=_.initializeWebAssembly=void 0;const st=it(_e(6449)),At=_e(932),ut=_e(3474);let ct,ht=!1,ot=!1,nt=!1;_.initializeWebAssembly=async at=>{if(ht)return Promise.resolve();if(ot)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(nt)throw new Error("previous call to 'initializeWebAssembly()' failed.");ot=!0;const lt=at.initTimeout,dt=at.numThreads,ft=at.simd,pt=dt>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),gt=ft&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),mt=at.wasmPaths,yt=typeof mt=="string"?mt:void 0,vt=((Tt,It)=>It?Tt?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":Tt?"ort-wasm-simd.wasm":"ort-wasm.wasm")(gt,pt),wt=typeof mt=="object"?mt[vt]:void 0;let bt=!1;const Bt=[];if(lt>0&&Bt.push(new Promise(Tt=>{setTimeout(()=>{bt=!0,Tt()},lt)})),Bt.push(new Promise((Tt,It)=>{const Dt=pt?ut:At,Ut={locateFile:(_t,St)=>pt&&_t.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([_e(4154)],{type:"text/javascript"})):_t.endsWith(".wasm")?wt||(yt??St)+vt:St+_t};if(pt)if(typeof Blob>"u")Ut.mainScriptUrlOrBlob=st.join(__dirname,"ort-wasm-threaded.js");else{const _t=`var ortWasmThreaded=(function(){var _scriptDir;return ${Dt.toString()}})();`;Ut.mainScriptUrlOrBlob=new Blob([_t],{type:"text/javascript"})}Dt(Ut).then(_t=>{ot=!1,ht=!0,ct=_t,Tt()},_t=>{ot=!1,nt=!0,It(_t)})})),await Promise.race(Bt),bt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${lt}ms`)},_.getInstance=()=>{if(ht&&ct)return ct;throw new Error("WebAssembly is not initialized yet.")},_.dispose=()=>{var at;!ht||ot||nt||(ot=!0,(at=ct.PThread)===null||at===void 0||at.terminateAllThreads(),ct=void 0,ot=!1,ht=!1,nt=!0)}},1497:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.checkLastError=_.iterateExtraOptions=_.allocWasmString=void 0;const tt=_e(263);_.allocWasmString=(rt,it)=>{const st=(0,tt.getInstance)(),At=st.lengthBytesUTF8(rt)+1,ut=st._malloc(At);return st.stringToUTF8(rt,ut,At),it.push(ut),ut},_.iterateExtraOptions=(rt,it,st,At)=>{if(typeof rt=="object"&&rt!==null){if(st.has(rt))throw new Error("Circular reference in options");st.add(rt)}Object.entries(rt).forEach(([ut,ct])=>{const ht=it?it+ut:ut;if(typeof ct=="object")(0,_.iterateExtraOptions)(ct,ht+".",st,At);else if(typeof ct=="string"||typeof ct=="number")At(ht,ct.toString());else{if(typeof ct!="boolean")throw new Error("Can't handle extra config type: "+typeof ct);At(ht,ct?"1":"0")}})},_.checkLastError=rt=>{const it=(0,tt.getInstance)(),st=it.stackSave();try{const At=it.stackAlloc(8);it._OrtGetLastError(At,At+4);const ut=it.HEAP32[At/4],ct=it.HEAPU32[At/4+1],ht=ct?it.UTF8ToString(ct):"";throw new Error(`${rt} ERROR_CODE: ${ut}, ERROR_MESSAGE: ${ht}`)}finally{it.stackRestore(st)}}},8050:(et,_,_e)=>{_e.d(_,{Z:()=>it});var tt=_e(6614),rt=_e.n(tt);function it(){return rt()('/*!\n* ONNX Runtime Web v1.16.3\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const n=r(263),a=r(497);t.setRunOptions=e=>{const t=(0,n.getInstance)();let r=0;const o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);let n=0;return void 0!==(null==e?void 0:e.tag)&&(n=(0,a.allocWasmString)(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,n),0===r&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,((e,n)=>{const i=(0,a.allocWasmString)(e,o),s=(0,a.allocWasmString)(n,o);0!==t._OrtAddRunConfigEntry(r,i,s)&&(0,a.checkLastError)(`Can\'t set a run config entry: ${e} - ${n}.`)})),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),o.forEach((e=>t._free(e))),e}}},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const n=r(263),a=r(497);t.setSessionOptions=e=>{var t,r,o,i;const s=(0,n.getInstance)();let u=0;const c=[],l=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(l);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=l.graphOptimizationLevel)&&void 0!==t?t:"all"),f=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(r=l.executionMode)&&void 0!==r?r:"sequential"),d="string"==typeof l.logId?(0,a.allocWasmString)(l.logId,c):0,p=null!==(o=l.logSeverityLevel)&&void 0!==o?o:2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);const g=null!==(i=l.logVerbosityLevel)&&void 0!==i?i:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof l.optimizedModelFilePath?(0,a.allocWasmString)(l.optimizedModelFilePath,c):0;return u=s._OrtCreateSessionOptions(e,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,d,p,g,h),0===u&&(0,a.checkLastError)("Can\'t create session options."),l.executionProviders&&((e,t,r)=>{for(const o of t){let t="string"==typeof o?o:o.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webnn":if(t="WEBNN","string"!=typeof o){const t=o;if(null==t?void 0:t.deviceType){const o=(0,a.allocWasmString)("deviceType",r),i=(0,a.allocWasmString)(t.deviceType,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'deviceType\' - ${t.deviceType}.`)}if(null==t?void 0:t.powerPreference){const o=(0,a.allocWasmString)("powerPreference",r),i=(0,a.allocWasmString)(t.powerPreference,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'powerPreference\' - ${t.powerPreference}.`)}}break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}const i=(0,a.allocWasmString)(t,r);0!==(0,n.getInstance)()._OrtAppendExecutionProvider(e,i)&&(0,a.checkLastError)(`Can\'t append execution provider: ${t}.`)}})(u,l.executionProviders,c),void 0!==l.extra&&(0,a.iterateExtraOptions)(l.extra,"",new WeakSet,((e,t)=>{const r=(0,a.allocWasmString)(e,c),n=(0,a.allocWasmString)(t,c);0!==s._OrtAddSessionConfigEntry(u,r,n)&&(0,a.checkLastError)(`Can\'t set a session config entry: ${e} - ${t}.`)})),[u,c]}catch(e){throw 0!==u&&s._OrtReleaseSessionOptions(u),c.forEach((e=>s._free(e))),e}}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;const n=r(918),a=r(622),o=r(917),i=r(263),s=r(497);t.initRuntime=async e=>{var t,r;t=e.wasm.numThreads,r=(0,o.logLevelStringToEnum)(e.logLevel),0!==(0,i.getInstance)()._OrtInit(t,r)&&(0,s.checkLastError)("Can\'t initialize onnxruntime.")};const u=new Map;t.createSessionAllocate=e=>{const t=(0,i.getInstance)(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{const r=(0,i.getInstance)();let n=0,o=0,c=[];const l=[],f=[];try{[o,c]=(0,a.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],o),0===n&&(0,s.checkLastError)("Can\'t create a session.");const[d,p]=(e=>{const t=(0,i.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,s.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}})(n),g=[],h=[];for(let e=0;e<d;e++){const t=r._OrtGetInputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an input name."),l.push(t),g.push(r.UTF8ToString(t))}for(let e=0;e<p;e++){const t=r._OrtGetOutputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an output name."),f.push(t),h.push(r.UTF8ToString(t))}return u.set(n,[n,l,f]),[n,g,h]}catch(e){throw l.forEach((e=>r._OrtFree(e))),f.forEach((e=>r._OrtFree(e))),0!==n&&r._OrtReleaseSession(n),e}finally{r._free(e[0]),0!==o&&r._OrtReleaseSessionOptions(o),c.forEach((e=>r._free(e)))}},t.createSession=(e,r)=>{const n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);const[n,a,o]=r;a.forEach((e=>t._OrtFree(e))),o.forEach((e=>t._OrtFree(e))),t._OrtReleaseSession(n),u.delete(e)},t.run=async(e,t,r,a,c)=>{const l=(0,i.getInstance)(),f=u.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);const[d,p,g]=f,h=t.length,m=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,n.setRunOptions)(c);for(let e=0;e<h;e++){const t=r[e][0],n=r[e][1],a=r[e][2];let i,u;if(Array.isArray(a)){u=4*a.length,i=l._malloc(u),w.push(i);let e=i/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,s.allocWasmString)(a[t],w)}}else u=a.byteLength,i=l._malloc(u),w.push(i),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),i);const c=l.stackSave(),f=l.stackAlloc(4*n.length);try{let r=f/4;n.forEach((e=>l.HEAP32[r++]=e));const a=l._OrtCreateTensor((0,o.tensorDataTypeStringToEnum)(t),i,u,f,n.length);0===a&&(0,s.checkLastError)(`Can\'t create tensor for input[${e}].`),b.push(a)}finally{l.stackRestore(c)}}const e=l.stackSave(),i=l.stackAlloc(4*h),u=l.stackAlloc(4*h),f=l.stackAlloc(4*m),_=l.stackAlloc(4*m);try{let e=i/4,r=u/4,n=f/4,c=_/4;for(let n=0;n<h;n++)l.HEAPU32[e++]=b[n],l.HEAPU32[r++]=p[t[n]];for(let e=0;e<m;e++)l.HEAPU32[n++]=0,l.HEAPU32[c++]=g[a[e]];let v=l._OrtRun(d,u,i,h,_,m,f,y);const w=l.jsepRunPromise;w&&void 0!==w.then&&(v=await w);const O=[];0!==v&&(0,s.checkLastError)("failed to call OrtRun().");for(let e=0;e<m;e++){const t=l.HEAPU32[f/4+e],r=l.stackSave(),n=l.stackAlloc(16);let a,i=0;try{v=l._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==v&&(0,s.checkLastError)(`Can\'t access output tensor data on index ${e}.`);let r=n/4;const u=l.HEAPU32[r++];i=l.HEAPU32[r++];const c=l.HEAPU32[r++],f=l.HEAPU32[r++],d=[];for(let e=0;e<f;e++)d.push(l.HEAPU32[c/4+e]);l._OrtFree(c);const p=0===d.length?1:d.reduce(((e,t)=>e*t));if(a=(0,o.tensorDataTypeEnumToString)(u),"string"===a){const e=[];let t=i/4;for(let r=0;r<p;r++){const n=l.HEAPU32[t++],a=r===p-1?void 0:l.HEAPU32[t]-n;e.push(l.UTF8ToString(n,a))}O.push([a,d,e])}else{const e=new((0,o.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(i,i+e.byteLength)),O.push([a,d,e])}}finally{l.stackRestore(r),"string"===a&&i&&l._free(i),l._OrtReleaseTensor(t)}}return O}finally{l.stackRestore(e)}}finally{b.forEach((e=>l._OrtReleaseTensor(e))),w.forEach((e=>l._free(e))),0!==y&&l._OrtReleaseRunOptions(y),v.forEach((e=>l._free(e)))}},t.endProfiling=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error("invalid session id");const n=r[0],a=t._OrtEndProfiling(n);0===a&&(0,s.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const r of e){const e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(r(449)),s=r(932),u=r(474);let c,l=!1,f=!1,d=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(d)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,n=e.numThreads,a=e.simd,o=n>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),p=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g=e.wasmPaths,h="string"==typeof g?g:void 0,m=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(p,o),y="object"==typeof g?g[m]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const n=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([r(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=h?h:t)+m:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join(__dirname,"ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${n.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}n(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,d=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||d||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,d=!0)}},497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;const n=r(263);t.allocWasmString=(e,t)=>{const r=(0,n.getInstance)(),a=r.lengthBytesUTF8(e)+1,o=r._malloc(a);return r.stringToUTF8(e,o,a),t.push(o),o},t.iterateExtraOptions=(e,r,n,a)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach((([e,o])=>{const i=r?r+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",n,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))},t.checkLastError=e=>{const t=(0,n.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);const n=t.HEAP32[r/4],a=t.HEAPU32[r/4+1],o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}},474:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return k.buffer!=x.buffer&&Y(),x}function n(){return k.buffer!=x.buffer&&Y(),I}function a(){return k.buffer!=x.buffer&&Y(),U}function o(){return k.buffer!=x.buffer&&Y(),L}function i(){return k.buffer!=x.buffer&&Y(),W}var s,u,c=e;c.ready=new Promise(((e,t)=>{s=e,u=t}));var l,f,d,p=Object.assign({},c),g="./this.program",h=(e,t)=>{throw t},m="object"==typeof window,y="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=c.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(e){return c.locateFile?c.locateFile(e,w):w+e}if(v){var O=r(384),S=r(908);let t;w=y?S.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFileSync(e,t?void 0:"utf8")),d=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!c.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=r(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(m||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));v&&"undefined"==typeof performance&&(global.performance=r(953).performance);var E=console.log.bind(console),A=console.error.bind(console);v&&(E=(...e)=>O.writeSync(1,e.join(" ")+"\\n"),A=(...e)=>O.writeSync(2,e.join(" ")+"\\n"));var T,M=c.print||E,R=c.printErr||A;Object.assign(c,p),p=null,c.thisProgram&&(g=c.thisProgram),c.quit&&(h=c.quit),c.wasmBinary&&(T=c.wasmBinary);var F=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&te("no native wasm support detected");var k,C,P,D,x,I,U,L,W,H=!1;function Y(){var e=k.buffer;c.HEAP8=x=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=U=new Int32Array(e),c.HEAPU8=I=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=L=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=W=new Float64Array(e)}var j=c.INITIAL_MEMORY||16777216;if(5242880<=j||te("INITIAL_MEMORY should be larger than STACK_SIZE, was "+j+"! (STACK_SIZE=5242880)"),b)k=c.wasmMemory;else if(c.wasmMemory)k=c.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:j/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw R("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&R("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),j=k.buffer.byteLength;var z,G=[],N=[],B=[],$=0;function q(){return F||0<$}var V,J,X=0,K=null,Z=null;function Q(){X++,c.monitorRunDependencies&&c.monitorRunDependencies(X)}function ee(){if(X--,c.monitorRunDependencies&&c.monitorRunDependencies(X),0==X&&(null!==K&&(clearInterval(K),K=null),Z)){var e=Z;Z=null,e()}}function te(e){throw c.onAbort&&c.onAbort(e),R(e="Aborted("+e+")"),H=!0,D=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function re(e){return e.startsWith("data:application/octet-stream;base64,")}function ne(e){if(e==V&&T)return new Uint8Array(T);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,r){return function(e){if(!T&&(m||y)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>ne(e)));if(f)return new Promise(((t,r)=>{f(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>ne(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{R("failed to asynchronously prepare wasm: "+e),te(e)}))}function oe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function ie(e){e.terminate(),e.onmessage=()=>{}}function se(e){(e=ge.Fa[e])||te(),ge.fb(e)}function ue(e){var t=ge.Za();if(!t)return 6;ge.Ia.push(t),ge.Fa[e.Ha]=t,t.Ha=e.Ha;var r={cmd:"run",start_routine:e.gb,arg:e.Ya,pthread_ptr:e.Ha};return v&&t.unref(),t.postMessage(r,e.mb),0}re(V="ort-wasm-threaded.wasm")||(V=_(V));var ce="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,le=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ce)return ce.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},fe=(e,t)=>(e>>>=0)?le(n(),e,t):"";function de(e){if(b)return qe(1,1,e);D=e,q()||(ge.hb(),c.onExit&&c.onExit(e),H=!0),h(e,new oe(e))}var pe=e=>{if(D=e,b)throw me(e),"unwind";de(e)},ge={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?ge.ab():ge.$a()},$a:function(){G.unshift((()=>{Q(),ge.bb((()=>ee()))}))},ab:function(){ge.receiveObjectTransfer=ge.eb,ge.threadInitTLS=ge.Sa,ge.setExitStatus=ge.Ra,F=!1},Ra:function(e){D=e},rb:["$terminateWorker"],hb:function(){for(var e of ge.Ia)ie(e);for(e of ge.La)ie(e);ge.La=[],ge.Ia=[],ge.Fa=[]},fb:function(e){var t=e.Ha;delete ge.Fa[t],ge.La.push(e),ge.Ia.splice(ge.Ia.indexOf(e),1),e.Ha=0,yt(t)},eb:function(){},Sa:function(){ge.Ta.forEach((e=>e()))},cb:e=>new Promise((t=>{e.onmessage=r=>{var n=(r=r.data).cmd;if(r.targetThread&&r.targetThread!=dt()){var a=ge.Fa[r.qb];a?a.postMessage(r,r.transferList):R(\'Internal error! Worker sent a message "\'+n+\'" to target pthread \'+r.targetThread+", but that thread no longer exists!")}else"checkMailbox"===n?He():"spawnThread"===n?ue(r):"cleanupThread"===n?se(r.thread):"killThread"===n?(r=r.thread,n=ge.Fa[r],delete ge.Fa[r],ie(n),yt(r),ge.Ia.splice(ge.Ia.indexOf(n),1),n.Ha=0):"cancelThread"===n?ge.Fa[r.thread].postMessage({cmd:"cancel"}):"loaded"===n?(e.loaded=!0,t(e)):"alert"===n?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===n?c[r.handler](...r.args):n&&R("worker sent an unknown command "+n)},e.onerror=e=>{throw R("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var r,n=[];for(r of["onExit","onAbort","print","printErr"])c.hasOwnProperty(r)&&n.push(r);e.postMessage({cmd:"load",handlers:n,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:P})})),bb:function(e){e()},Xa:function(){var e=_("ort-wasm-threaded.worker.js");e=new Worker(e),ge.La.push(e)},Za:function(){return 0==ge.La.length&&(ge.Xa(),ge.cb(ge.La[0])),ge.La.pop()}};c.PThread=ge;var he=e=>{for(;0<e.length;)e.shift()(c)};function me(e){if(b)return qe(2,0,e);pe(e)}c.establishStackSpace=function(){var e=dt(),t=a()[e+52>>2>>>0];e=a()[e+56>>2>>>0],_t(t,t-e),St(t)};var ye=[];function ve(e){this.Oa=e-24,this.Wa=function(e){o()[this.Oa+4>>2>>>0]=e},this.Va=function(e){o()[this.Oa+8>>2>>>0]=e},this.Pa=function(e,t){this.Ua(),this.Wa(e),this.Va(t)},this.Ua=function(){o()[this.Oa+16>>2>>>0]=0}}function be(e,t,r,n){return b?qe(3,1,e,t,r,n):we(e,t,r,n)}function we(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,"undefined"==typeof SharedArrayBuffer)return R("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?be(e,t,r,n):(e={gb:r,Ha:e,Ya:n,mb:a},b?(e.ob="spawnThread",postMessage(e,a),0):ue(e))}function _e(e,t,r){return b?qe(4,1,e,t,r):0}function Oe(e,t){if(b)return qe(5,1,e,t)}c.invokeEntryPoint=function(e,t){var r=ye[e];r||(e>=ye.length&&(ye.length=e+1),ye[e]=r=z.get(e)),e=r(t),q()?ge.Ra(e):vt(e)};var Se=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},Ee=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Ae=(e,t,r)=>Ee(e,n(),t,r);function Te(e,t){if(b)return qe(6,1,e,t)}function Me(e,t,r){if(b)return qe(7,1,e,t,r)}function Re(e,t,r){return b?qe(8,1,e,t,r):0}function Fe(e,t){if(b)return qe(9,1,e,t)}function ke(e,t,r){if(b)return qe(10,1,e,t,r)}function Ce(e,t,r,n){if(b)return qe(11,1,e,t,r,n)}function Pe(e,t,r,n){if(b)return qe(12,1,e,t,r,n)}function De(e,t,r,n){if(b)return qe(13,1,e,t,r,n)}function xe(e){if(b)return qe(14,1,e)}function Ie(e,t){if(b)return qe(15,1,e,t)}function Ue(e,t,r){if(b)return qe(16,1,e,t,r)}var Le=e=>{if(!H)try{if(e(),!q())try{b?vt(D):pe(D)}catch(e){e instanceof oe||"unwind"==e||h(1,e)}}catch(e){e instanceof oe||"unwind"==e||h(1,e)}};function We(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(a(),e>>2,e).value.then(He),e+=128,Atomics.store(a(),e>>2,1))}function He(){var e=dt();e&&(We(e),Le((()=>bt())))}c.__emscripten_thread_mailbox_await=We,c.checkMailbox=He;var Ye=e=>0==e%4&&(0!=e%100||0==e%400),je=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Ge(e,t,r,n,a,o,i,s){return b?qe(17,1,e,t,r,n,a,o,i,s):-52}function Ne(e,t,r,n,a,o,i){if(b)return qe(18,1,e,t,r,n,a,o,i)}var Be=e=>{var t=Se(e)+1,r=pt(t);return r&&Ae(e,r,t),r},$e=e=>{var t=Ot();return e=e(),St(t),e};function qe(e,t){var r=arguments.length-2,n=arguments;return $e((()=>{for(var a=Et(8*r),o=a>>3,s=0;s<r;s++){var u=n[2+s];i()[o+s>>>0]=u}return mt(e,r,a,t)}))}var Ve,Je=[],Xe={},Ke=()=>{if(!Ve){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);Ve=r}return Ve};function Ze(e,r){if(b)return qe(19,1,e,r);e>>>=0,r>>>=0;var n=0;return Ke().forEach((function(a,i){var s=r+n;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,n+=a.length+1})),0}function Qe(e,t){if(b)return qe(20,1,e,t);e>>>=0,t>>>=0;var r=Ke();o()[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),o()[t>>2>>>0]=n,0}function et(e){return b?qe(21,1,e):52}function tt(e,t,r,n){return b?qe(22,1,e,t,r,n):52}function rt(e,t,r,n,a){return b?qe(23,1,e,t,r,n,a):70}var nt=[null,[],[]];function at(e,t,r,a){if(b)return qe(24,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var i=0,s=0;s<r;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=n()[u+l>>>0],d=nt[e];0===f||10===f?((1===e?M:R)(le(d,0)),d.length=0):d.push(f)}i+=c}return o()[a>>2>>>0]=i,0}var ot=e=>(ot=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(v)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}te("initRandomDevice")})())(e),it=[31,29,31,30,31,30,31,31,30,31,30,31],st=[31,28,31,30,31,30,31,31,30,31,30,31],ut=(e,r)=>{t().set(e,r>>>0)};function ct(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Ja;for(e=new Date(new Date(e.Ka+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Ye(e.getFullYear())?it:st)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),r=u(r),0>=s(t,e)?0>=s(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0,n>>>=0;var l=a()[n+40>>2>>>0];for(var f in n={kb:a()[n>>2>>>0],jb:a()[n+4>>2>>>0],Ma:a()[n+8>>2>>>0],Qa:a()[n+12>>2>>>0],Na:a()[n+16>>2>>>0],Ka:a()[n+20>>2>>>0],Ga:a()[n+24>>2>>>0],Ja:a()[n+28>>2>>>0],sb:a()[n+32>>2>>>0],ib:a()[n+36>>2>>>0],lb:l?fe(l):""},r=fe(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(f,"g"),l[f]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(f in l={"%a":e=>d[e.Ga].substring(0,3),"%A":e=>d[e.Ga],"%b":e=>p[e.Na].substring(0,3),"%B":e=>p[e.Na],"%C":e=>i((e.Ka+1900)/100|0,2),"%d":e=>i(e.Qa,2),"%e":e=>o(e.Qa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>i(e.Ma,2),"%I":e=>(0==(e=e.Ma)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.Na-1;t+=(Ye(e.Ka+1900)?it:st)[r++]);return i(e.Qa+t,3)},"%m":e=>i(e.Na+1,2),"%M":e=>i(e.jb,2),"%n":()=>"\\n","%p":e=>0<=e.Ma&&12>e.Ma?"AM":"PM","%S":e=>i(e.kb,2),"%t":()=>"\\t","%u":e=>e.Ga||7,"%U":e=>i(Math.floor((e.Ja+7-e.Ga)/7),2),"%V":e=>{var t=Math.floor((e.Ja+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ja-2)%7&&t++,t)53==t&&(4==(r=(e.Ga+371-e.Ja)%7)||3==r&&Ye(e.Ka)||(t=1));else{t=52;var r=(e.Ga+7-e.Ja-1)%7;(4==r||5==r&&Ye(e.Ka%400-1))&&t++}return i(t,2)},"%w":e=>e.Ga,"%W":e=>i(Math.floor((e.Ja+7-(e.Ga+6)%7)/7),2),"%y":e=>(e.Ka+1900).toString().substring(2),"%Y":e=>e.Ka+1900,"%z":e=>{var t=0<=(e=e.ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.lb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),l)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),l[f](n)));return f=function(e){var t=Array(Se(e)+1);return Ee(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),f.length>t?0:(ut(f,e),f.length-1)}ge.Pa();var lt=[null,de,me,be,_e,Oe,Te,Me,Re,Fe,ke,Ce,Pe,De,xe,Ie,Ue,Ge,Ne,Ze,Qe,et,tt,rt,at],ft={b:function(e,t,r){throw new ve(e>>>=0).Pa(t>>>0,r>>>0),e},N:function(e){gt(e>>>0,!y,1,!m,131072,!1),ge.Sa()},k:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):se(e)},I:we,h:_e,T:Oe,E:Te,G:Me,U:Re,R:Fe,J:ke,Q:Ce,o:Pe,F:De,C:xe,S:Ie,D:Ue,q:()=>!0,A:function(e,t){(e>>>=0)==t>>>0?setTimeout((()=>He())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ge.Fa[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:We,p:function(e){v&&ge.Fa[e>>>0].ref()},t:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getUTCSeconds(),a()[r+4>>2>>>0]=e.getUTCMinutes(),a()[r+8>>2>>>0]=e.getUTCHours(),a()[r+12>>2>>>0]=e.getUTCDate(),a()[r+16>>2>>>0]=e.getUTCMonth(),a()[r+20>>2>>>0]=e.getUTCFullYear()-1900,a()[r+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[r+28>>2>>>0]=e},u:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getSeconds(),a()[r+4>>2>>>0]=e.getMinutes(),a()[r+8>>2>>>0]=e.getHours(),a()[r+12>>2>>>0]=e.getDate(),a()[r+16>>2>>>0]=e.getMonth(),a()[r+20>>2>>>0]=e.getFullYear()-1900,a()[r+24>>2>>>0]=e.getDay(),t=(Ye(e.getFullYear())?je:ze)[e.getMonth()]+e.getDate()-1|0,a()[r+28>>2>>>0]=t,a()[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),a()[r+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),r=a()[e+32>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>r?a()[e+32>>2>>>0]=Number(o!=i&&s==n):0<r!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),a()[e+24>>2>>>0]=t.getDay(),r=(Ye(t.getFullYear())?je:ze)[t.getMonth()]+t.getDate()-1|0,a()[e+28>>2>>>0]=r,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,wt((J=e,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),e>>>0},r:Ge,s:Ne,z:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}e>>>=0,t>>>=0,r>>>=0;var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=n(s),t=n(u),e=Be(e),t=Be(t),c<i?(o()[r>>2>>>0]=e,o()[r+4>>2>>>0]=t):(o()[r>>2>>>0]=t,o()[r+4>>2>>>0]=e)},c:()=>{te("")},l:function(){},i:function(){return Date.now()},V:()=>{throw $+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?r(993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,r,n){for(ge.pb=t>>>0,Je.length=r,t=n>>>0>>3,n=0;n<r;n++)Je[n]=i()[t+n>>>0];return lt[e].apply(null,Je)},y:function(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var a=t*(1+.2/r);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a);e:{o=o.min.call(o,4294901760,a+(65536-a%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(o),Y();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},O:Ze,P:Qe,j:pe,g:et,n:tt,w:rt,m:at,x:function(e,t){return e>>>=0,t>>>=0,ot(n().subarray(e>>>0,e+t>>>0)),0},a:k||c.wasmMemory,H:ct,d:function(e,t,r,n){return ct(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e,t){return e=e.exports,C=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),ge.Ta.push(C.sa),z=C.ta,N.unshift(C.W),P=t,ee(),e}var t={a:ft};if(Q(),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){R("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var r=V;return T||"function"!=typeof WebAssembly.instantiateStreaming||re(r)||r.startsWith("file://")||v||"function"!=typeof fetch?ae(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return R("wasm streaming compile failed: "+n),R("falling back to ArrayBuffer instantiation"),ae(r,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(u)}(),c._OrtInit=(e,t)=>(c._OrtInit=C.X)(e,t),c._OrtGetLastError=(e,t)=>(c._OrtGetLastError=C.Y)(e,t),c._OrtCreateSessionOptions=(e,t,r,n,a,o,i,s,u,l)=>(c._OrtCreateSessionOptions=C.Z)(e,t,r,n,a,o,i,s,u,l),c._OrtAppendExecutionProvider=(e,t)=>(c._OrtAppendExecutionProvider=C._)(e,t),c._OrtAddSessionConfigEntry=(e,t,r)=>(c._OrtAddSessionConfigEntry=C.$)(e,t,r),c._OrtReleaseSessionOptions=e=>(c._OrtReleaseSessionOptions=C.aa)(e),c._OrtCreateSession=(e,t,r)=>(c._OrtCreateSession=C.ba)(e,t,r),c._OrtReleaseSession=e=>(c._OrtReleaseSession=C.ca)(e),c._OrtGetInputOutputCount=(e,t,r)=>(c._OrtGetInputOutputCount=C.da)(e,t,r),c._OrtGetInputName=(e,t)=>(c._OrtGetInputName=C.ea)(e,t),c._OrtGetOutputName=(e,t)=>(c._OrtGetOutputName=C.fa)(e,t),c._OrtFree=e=>(c._OrtFree=C.ga)(e),c._OrtCreateTensor=(e,t,r,n,a)=>(c._OrtCreateTensor=C.ha)(e,t,r,n,a),c._OrtGetTensorData=(e,t,r,n,a)=>(c._OrtGetTensorData=C.ia)(e,t,r,n,a),c._OrtReleaseTensor=e=>(c._OrtReleaseTensor=C.ja)(e),c._OrtCreateRunOptions=(e,t,r,n)=>(c._OrtCreateRunOptions=C.ka)(e,t,r,n),c._OrtAddRunConfigEntry=(e,t,r)=>(c._OrtAddRunConfigEntry=C.la)(e,t,r),c._OrtReleaseRunOptions=e=>(c._OrtReleaseRunOptions=C.ma)(e),c._OrtRun=(e,t,r,n,a,o,i,s)=>(c._OrtRun=C.na)(e,t,r,n,a,o,i,s),c._OrtEndProfiling=e=>(c._OrtEndProfiling=C.oa)(e);var dt=c._pthread_self=()=>(dt=c._pthread_self=C.pa)(),pt=c._malloc=e=>(pt=c._malloc=C.qa)(e);c._free=e=>(c._free=C.ra)(e),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=C.sa)();var gt=c.__emscripten_thread_init=(e,t,r,n,a,o)=>(gt=c.__emscripten_thread_init=C.ua)(e,t,r,n,a,o);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=C.va)();var ht,mt=(e,t,r,n)=>(mt=C.wa)(e,t,r,n),yt=e=>(yt=C.xa)(e),vt=c.__emscripten_thread_exit=e=>(vt=c.__emscripten_thread_exit=C.ya)(e),bt=c.__emscripten_check_mailbox=()=>(bt=c.__emscripten_check_mailbox=C.za)(),wt=e=>(wt=C.Aa)(e),_t=(e,t)=>(_t=C.Ba)(e,t),Ot=()=>(Ot=C.Ca)(),St=e=>(St=C.Da)(e),Et=e=>(Et=C.Ea)(e);function At(){function e(){if(!ht&&(ht=!0,c.calledRun=!0,!H)&&(b||he(N),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!b)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();B.unshift(e)}he(B)}}if(!(0<X))if(b)s(c),b||he(N),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)G.unshift(c.preRun.shift());he(G),0<X||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=q,c.wasmMemory=k,c.stackAlloc=Et,c.stackSave=Ot,c.stackRestore=St,c.UTF8ToString=fe,c.stringToUTF8=Ae,c.lengthBytesUTF8=Se,c.ExitStatus=oe,c.PThread=ge,Z=function e(){ht||At(),ht||(Z=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return At(),e.ready});e.exports=n},932:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,n,a=e;a.ready=new Promise(((e,r)=>{t=e,n=r}));var o,i,s,u=Object.assign({},a),c="./this.program",l=(e,t)=>{throw t},f="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(p){var h=r(384),m=r(908);g=d?m.dirname(g)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFileSync(e,t?void 0:"utf8")),s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!a.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t},a.inspect=()=>"[Emscripten Module object]"}else(f||d)&&(d?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),_scriptDir&&(g=_scriptDir),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var y,v=a.print||console.log.bind(console),b=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.thisProgram&&(c=a.thisProgram),a.quit&&(l=a.quit),a.wasmBinary&&(y=a.wasmBinary);var w=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&W("no native wasm support detected");var _,O,S,E,A,T,M=!1;function R(){var e=_.buffer;a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=E=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=T=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var F=[],k=[],C=[];function P(){var e=a.preRun.shift();F.unshift(e)}var D,x,I=0,U=null,L=null;function W(e){throw a.onAbort&&a.onAbort(e),b(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(D="ort-wasm.wasm")){var Y=D;D=a.locateFile?a.locateFile(Y,g):g+Y}function j(e){if(e==D&&y)return new Uint8Array(y);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}function z(e,t,r){return function(e){if(!y&&(f||d)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>j(e)));if(i)return new Promise(((t,r)=>{i(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>j(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{b("failed to asynchronously prepare wasm: "+e),W(e)}))}function G(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var N=e=>{for(;0<e.length;)e.shift()(a)};function B(e){this.qa=e-24,this.va=function(e){T[this.qa+4>>2>>>0]=e},this.ua=function(e){T[this.qa+8>>2>>>0]=e},this.sa=function(e,t){this.ta(),this.va(e),this.ua(t)},this.ta=function(){T[this.qa+16>>2>>>0]=0}}var $,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,V=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&q)return q.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},J=(e,t)=>(e>>>=0)?V(E,e,t):"",X=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},K=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Z=e=>0==e%4&&(0!=e%100||0==e%400),Q=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=e=>{var t=X(e)+1,r=le(t);return r&&K(e,E,r,t),r},re={},ne=()=>{if(!$){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in re)void 0===re[e]?delete t[e]:t[e]=re[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);$=r}return $},ae=[null,[],[]],oe=e=>(oe=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(p)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}W("initRandomDevice")})())(e),ie=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t,r,n){function a(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.ma;for(e=new Date(new Date(e.na+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Z(e.getFullYear())?ie:se)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0;var c=A[40+(n>>>=0)>>2>>>0];for(var l in n={ya:A[n>>2>>>0],xa:A[n+4>>2>>>0],oa:A[n+8>>2>>>0],ra:A[n+12>>2>>>0],pa:A[n+16>>2>>>0],na:A[n+20>>2>>>0],ha:A[n+24>>2>>>0],ma:A[n+28>>2>>>0],Aa:A[n+32>>2>>>0],wa:A[n+36>>2>>>0],za:c?J(c):""},r=J(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":e=>f[e.ha].substring(0,3),"%A":e=>f[e.ha],"%b":e=>d[e.pa].substring(0,3),"%B":e=>d[e.pa],"%C":e=>o((e.na+1900)/100|0,2),"%d":e=>o(e.ra,2),"%e":e=>a(e.ra,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.oa,2),"%I":e=>(0==(e=e.oa)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.pa-1;t+=(Z(e.na+1900)?ie:se)[r++]);return o(e.ra+t,3)},"%m":e=>o(e.pa+1,2),"%M":e=>o(e.xa,2),"%n":()=>"\\n","%p":e=>0<=e.oa&&12>e.oa?"AM":"PM","%S":e=>o(e.ya,2),"%t":()=>"\\t","%u":e=>e.ha||7,"%U":e=>o(Math.floor((e.ma+7-e.ha)/7),2),"%V":e=>{var t=Math.floor((e.ma+7-(e.ha+6)%7)/7);if(2>=(e.ha+371-e.ma-2)%7&&t++,t)53==t&&(4==(r=(e.ha+371-e.ma)%7)||3==r&&Z(e.na)||(t=1));else{t=52;var r=(e.ha+7-e.ma-1)%7;(4==r||5==r&&Z(e.na%400-1))&&t++}return o(t,2)},"%w":e=>e.ha,"%W":e=>o(Math.floor((e.ma+7-(e.ha+6)%7)/7),2),"%y":e=>(e.na+1900).toString().substring(2),"%Y":e=>e.na+1900,"%z":e=>{var t=0<=(e=e.wa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.za,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),c)r.includes(l)&&(r=r.replace(new RegExp(l,"g"),c[l](n)));return l=function(e){var t=Array(X(e)+1);return K(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var ce={a:function(e,t,r){throw new B(e>>>=0).sa(t>>>0,r>>>0),e},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getUTCSeconds(),A[r+4>>2>>>0]=e.getUTCMinutes(),A[r+8>>2>>>0]=e.getUTCHours(),A[r+12>>2>>>0]=e.getUTCDate(),A[r+16>>2>>>0]=e.getUTCMonth(),A[r+20>>2>>>0]=e.getUTCFullYear()-1900,A[r+24>>2>>>0]=e.getUTCDay(),A[r+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getSeconds(),A[r+4>>2>>>0]=e.getMinutes(),A[r+8>>2>>>0]=e.getHours(),A[r+12>>2>>>0]=e.getDate(),A[r+16>>2>>>0]=e.getMonth(),A[r+20>>2>>>0]=e.getFullYear()-1900,A[r+24>>2>>>0]=e.getDay(),A[r+28>>2>>>0]=(Z(e.getFullYear())?Q:ee)[e.getMonth()]+e.getDate()-1|0,A[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[r+32>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){e>>>=0;var t=new Date(A[e+20>>2>>>0]+1900,A[e+16>>2>>>0],A[e+12>>2>>>0],A[e+8>>2>>>0],A[e+4>>2>>>0],A[e>>2>>>0],0),r=A[e+32>>2>>>0],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>r?A[e+32>>2>>>0]=Number(a!=o&&i==n):0<r!=(i==n)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<r?i:a)-n))),A[e+24>>2>>>0]=t.getDay(),A[e+28>>2>>>0]=(Z(t.getFullYear())?Q:ee)[t.getMonth()]+t.getDate()-1|0,A[e>>2>>>0]=t.getSeconds(),A[e+4>>2>>>0]=t.getMinutes(),A[e+8>>2>>>0]=t.getHours(),A[e+12>>2>>>0]=t.getDate(),A[e+16>>2>>>0]=t.getMonth(),A[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,de((x=e,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)),e>>>0},l:function(){return-52},m:function(){},u:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}r>>>=0;var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();T[e>>>0>>2>>>0]=60*Math.max(a,s),A[t>>>0>>2>>>0]=Number(a!=s),e=n(o),t=n(i),e=te(e),t=te(t),s<a?(T[r>>2>>>0]=e,T[r+4>>2>>>0]=t):(T[r>>2>>>0]=t,T[r+4>>2>>>0]=e)},d:()=>{W("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(e,t,r){return t>>>=0,E.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0)},t:function(e){e>>>=0;var t=E.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math;n=Math.max(e,n);e:{a=a.min.call(a,4294901760,n+(65536-n%65536)%65536)-_.buffer.byteLength+65535>>>16;try{_.grow(a),R();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){e>>>=0,t>>>=0;var r=0;return ne().forEach((function(n,a){var o=t+r;for(a=T[e+4*a>>2>>>0]=o,o=0;o<n.length;++o)S[a++>>0>>>0]=n.charCodeAt(o);S[a>>0>>>0]=0,r+=n.length+1})),0},E:function(e,t){e>>>=0,t>>>=0;var r=ne();T[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),T[t>>2>>>0]=n,0},s:e=>{w||(a.onExit&&a.onExit(e),M=!0),l(e,new G(e))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var a=0,o=0;o<r;o++){var i=T[t>>2>>>0],s=T[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=E[i+u>>>0],l=ae[e];0===c||10===c?((1===e?v:b)(V(l,0)),l.length=0):l.push(c)}a+=s}return T[n>>2>>>0]=a,0},r:function(e,t){return e>>>=0,oe(E.subarray(e>>>0,e+(t>>>0)>>>0)),0},C:ue,c:function(e,t,r,n){return ue(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e){if(e=e.exports,O=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),_=O.L,R(),k.unshift(O.M),I--,a.monitorRunDependencies&&a.monitorRunDependencies(I),0==I&&(null!==U&&(clearInterval(U),U=null),L)){var t=L;L=null,t()}return e}var t={a:ce};if(I++,a.monitorRunDependencies&&a.monitorRunDependencies(I),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var r=D;return y||"function"!=typeof WebAssembly.instantiateStreaming||H(r)||r.startsWith("file://")||p||"function"!=typeof fetch?z(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return b("wasm streaming compile failed: "+n),b("falling back to ArrayBuffer instantiation"),z(r,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}(),a._OrtInit=(e,t)=>(a._OrtInit=O.N)(e,t),a._OrtGetLastError=(e,t)=>(a._OrtGetLastError=O.O)(e,t),a._OrtCreateSessionOptions=(e,t,r,n,o,i,s,u,c,l)=>(a._OrtCreateSessionOptions=O.P)(e,t,r,n,o,i,s,u,c,l),a._OrtAppendExecutionProvider=(e,t)=>(a._OrtAppendExecutionProvider=O.Q)(e,t),a._OrtAddSessionConfigEntry=(e,t,r)=>(a._OrtAddSessionConfigEntry=O.R)(e,t,r),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=O.S)(e),a._OrtCreateSession=(e,t,r)=>(a._OrtCreateSession=O.T)(e,t,r),a._OrtReleaseSession=e=>(a._OrtReleaseSession=O.U)(e),a._OrtGetInputOutputCount=(e,t,r)=>(a._OrtGetInputOutputCount=O.V)(e,t,r),a._OrtGetInputName=(e,t)=>(a._OrtGetInputName=O.W)(e,t),a._OrtGetOutputName=(e,t)=>(a._OrtGetOutputName=O.X)(e,t),a._OrtFree=e=>(a._OrtFree=O.Y)(e),a._OrtCreateTensor=(e,t,r,n,o)=>(a._OrtCreateTensor=O.Z)(e,t,r,n,o),a._OrtGetTensorData=(e,t,r,n,o)=>(a._OrtGetTensorData=O._)(e,t,r,n,o),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=O.$)(e),a._OrtCreateRunOptions=(e,t,r,n)=>(a._OrtCreateRunOptions=O.aa)(e,t,r,n),a._OrtAddRunConfigEntry=(e,t,r)=>(a._OrtAddRunConfigEntry=O.ba)(e,t,r),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=O.ca)(e),a._OrtRun=(e,t,r,n,o,i,s,u)=>(a._OrtRun=O.da)(e,t,r,n,o,i,s,u),a._OrtEndProfiling=e=>(a._OrtEndProfiling=O.ea)(e);var le=a._malloc=e=>(le=a._malloc=O.fa)(e);a._free=e=>(a._free=O.ga)(e);var fe,de=e=>(de=O.ia)(e),pe=()=>(pe=O.ja)(),ge=e=>(ge=O.ka)(e),he=e=>(he=O.la)(e);function me(){function e(){if(!fe&&(fe=!0,a.calledRun=!0,!M)){if(N(k),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var e=a.postRun.shift();C.unshift(e)}N(C)}}if(!(0<I)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)P();N(F),0<I||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e())}}if(a.stackAlloc=he,a.stackSave=pe,a.stackRestore=ge,a.UTF8ToString=J,a.stringToUTF8=(e,t,r)=>K(e,E,t,r),a.lengthBytesUTF8=X,L=function e(){fe||me(),fe||(L=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return me(),e.ready});e.exports=n},154:e=>{"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";const e=r(259),t=r(263);self.onmessage=r=>{switch(r.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(r.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(r.data.in).then((()=>postMessage({type:"init-ort"})),(e=>postMessage({type:"init-ort",err:e}))),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=r.data.in,n=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:n})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:n}=r.data.in,a=(0,e.createSessionFinalize)(t,n);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:n}=r.data.in,a=(0,e.createSession)(t,n);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=r.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:n,inputs:a,outputIndices:o,options:i}=r.data.in;(0,e.run)(t,n,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=r.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:et=>{et.exports=function(_,_e,tt,rt){var it=self||window;try{try{var st;try{st=new it.Blob([_])}catch{(st=new(it.BlobBuilder||it.WebKitBlobBuilder||it.MozBlobBuilder||it.MSBlobBuilder)).append(_),st=st.getBlob()}var At=it.URL||it.webkitURL,ut=At.createObjectURL(st),ct=new it[_e](ut,tt);return At.revokeObjectURL(ut),ct}catch{return new it[_e]("data:application/javascript,".concat(encodeURIComponent(_)),tt)}}catch{if(!rt)throw Error("Inline worker is not supported");return new it[_e](rt,tt)}}},2446:(et,_,_e)=>{var tt,rt,it,st=_e(2100),At=st.Reader,ut=st.Writer,ct=st.util,ht=st.roots.default||(st.roots.default={});ht.onnx=((it={}).Version=(tt={},(rt=Object.create(tt))[tt[0]="_START_VERSION"]=0,rt[tt[1]="IR_VERSION_2017_10_10"]=1,rt[tt[2]="IR_VERSION_2017_10_30"]=2,rt[tt[3]="IR_VERSION_2017_11_3"]=3,rt[tt[4]="IR_VERSION_2019_1_22"]=4,rt[tt[5]="IR_VERSION_2019_3_18"]=5,rt[tt[6]="IR_VERSION_2019_9_19"]=6,rt[tt[7]="IR_VERSION_2020_5_8"]=7,rt[tt[8]="IR_VERSION_2021_7_30"]=8,rt[tt[9]="IR_VERSION"]=9,rt),it.AttributeProto=function(){function ot(nt){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.name="",ot.prototype.refAttrName="",ot.prototype.docString="",ot.prototype.type=0,ot.prototype.f=0,ot.prototype.i=ct.Long?ct.Long.fromBits(0,0,!1):0,ot.prototype.s=ct.newBuffer([]),ot.prototype.t=null,ot.prototype.g=null,ot.prototype.sparseTensor=null,ot.prototype.tp=null,ot.prototype.floats=ct.emptyArray,ot.prototype.ints=ct.emptyArray,ot.prototype.strings=ct.emptyArray,ot.prototype.tensors=ct.emptyArray,ot.prototype.graphs=ct.emptyArray,ot.prototype.sparseTensors=ct.emptyArray,ot.prototype.typeProtos=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(10).string(nt.name),nt.f!=null&&Object.hasOwnProperty.call(nt,"f")&&at.uint32(21).float(nt.f),nt.i!=null&&Object.hasOwnProperty.call(nt,"i")&&at.uint32(24).int64(nt.i),nt.s!=null&&Object.hasOwnProperty.call(nt,"s")&&at.uint32(34).bytes(nt.s),nt.t!=null&&Object.hasOwnProperty.call(nt,"t")&&ht.onnx.TensorProto.encode(nt.t,at.uint32(42).fork()).ldelim(),nt.g!=null&&Object.hasOwnProperty.call(nt,"g")&&ht.onnx.GraphProto.encode(nt.g,at.uint32(50).fork()).ldelim(),nt.floats!=null&&nt.floats.length){at.uint32(58).fork();for(var lt=0;lt<nt.floats.length;++lt)at.float(nt.floats[lt]);at.ldelim()}if(nt.ints!=null&&nt.ints.length){for(at.uint32(66).fork(),lt=0;lt<nt.ints.length;++lt)at.int64(nt.ints[lt]);at.ldelim()}if(nt.strings!=null&&nt.strings.length)for(lt=0;lt<nt.strings.length;++lt)at.uint32(74).bytes(nt.strings[lt]);if(nt.tensors!=null&&nt.tensors.length)for(lt=0;lt<nt.tensors.length;++lt)ht.onnx.TensorProto.encode(nt.tensors[lt],at.uint32(82).fork()).ldelim();if(nt.graphs!=null&&nt.graphs.length)for(lt=0;lt<nt.graphs.length;++lt)ht.onnx.GraphProto.encode(nt.graphs[lt],at.uint32(90).fork()).ldelim();if(nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(106).string(nt.docString),nt.tp!=null&&Object.hasOwnProperty.call(nt,"tp")&&ht.onnx.TypeProto.encode(nt.tp,at.uint32(114).fork()).ldelim(),nt.typeProtos!=null&&nt.typeProtos.length)for(lt=0;lt<nt.typeProtos.length;++lt)ht.onnx.TypeProto.encode(nt.typeProtos[lt],at.uint32(122).fork()).ldelim();if(nt.type!=null&&Object.hasOwnProperty.call(nt,"type")&&at.uint32(160).int32(nt.type),nt.refAttrName!=null&&Object.hasOwnProperty.call(nt,"refAttrName")&&at.uint32(170).string(nt.refAttrName),nt.sparseTensor!=null&&Object.hasOwnProperty.call(nt,"sparseTensor")&&ht.onnx.SparseTensorProto.encode(nt.sparseTensor,at.uint32(178).fork()).ldelim(),nt.sparseTensors!=null&&nt.sparseTensors.length)for(lt=0;lt<nt.sparseTensors.length;++lt)ht.onnx.SparseTensorProto.encode(nt.sparseTensors[lt],at.uint32(186).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.AttributeProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.name=nt.string();break;case 21:dt.refAttrName=nt.string();break;case 13:dt.docString=nt.string();break;case 20:dt.type=nt.int32();break;case 2:dt.f=nt.float();break;case 3:dt.i=nt.int64();break;case 4:dt.s=nt.bytes();break;case 5:dt.t=ht.onnx.TensorProto.decode(nt,nt.uint32());break;case 6:dt.g=ht.onnx.GraphProto.decode(nt,nt.uint32());break;case 22:dt.sparseTensor=ht.onnx.SparseTensorProto.decode(nt,nt.uint32());break;case 14:dt.tp=ht.onnx.TypeProto.decode(nt,nt.uint32());break;case 7:if(dt.floats&&dt.floats.length||(dt.floats=[]),(7&ft)==2)for(var pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.floats.push(nt.float());else dt.floats.push(nt.float());break;case 8:if(dt.ints&&dt.ints.length||(dt.ints=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.ints.push(nt.int64());else dt.ints.push(nt.int64());break;case 9:dt.strings&&dt.strings.length||(dt.strings=[]),dt.strings.push(nt.bytes());break;case 10:dt.tensors&&dt.tensors.length||(dt.tensors=[]),dt.tensors.push(ht.onnx.TensorProto.decode(nt,nt.uint32()));break;case 11:dt.graphs&&dt.graphs.length||(dt.graphs=[]),dt.graphs.push(ht.onnx.GraphProto.decode(nt,nt.uint32()));break;case 23:dt.sparseTensors&&dt.sparseTensors.length||(dt.sparseTensors=[]),dt.sparseTensors.push(ht.onnx.SparseTensorProto.decode(nt,nt.uint32()));break;case 15:dt.typeProtos&&dt.typeProtos.length||(dt.typeProtos=[]),dt.typeProtos.push(ht.onnx.TypeProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.refAttrName!=null&&nt.hasOwnProperty("refAttrName")&&!ct.isString(nt.refAttrName))return"refAttrName: string expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString))return"docString: string expected";if(nt.type!=null&&nt.hasOwnProperty("type"))switch(nt.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(nt.f!=null&&nt.hasOwnProperty("f")&&typeof nt.f!="number")return"f: number expected";if(nt.i!=null&&nt.hasOwnProperty("i")&&!(ct.isInteger(nt.i)||nt.i&&ct.isInteger(nt.i.low)&&ct.isInteger(nt.i.high)))return"i: integer|Long expected";if(nt.s!=null&&nt.hasOwnProperty("s")&&!(nt.s&&typeof nt.s.length=="number"||ct.isString(nt.s)))return"s: buffer expected";if(nt.t!=null&&nt.hasOwnProperty("t")&&(lt=ht.onnx.TensorProto.verify(nt.t)))return"t."+lt;if(nt.g!=null&&nt.hasOwnProperty("g")&&(lt=ht.onnx.GraphProto.verify(nt.g)))return"g."+lt;if(nt.sparseTensor!=null&&nt.hasOwnProperty("sparseTensor")&&(lt=ht.onnx.SparseTensorProto.verify(nt.sparseTensor)))return"sparseTensor."+lt;if(nt.tp!=null&&nt.hasOwnProperty("tp")&&(lt=ht.onnx.TypeProto.verify(nt.tp)))return"tp."+lt;if(nt.floats!=null&&nt.hasOwnProperty("floats")){if(!Array.isArray(nt.floats))return"floats: array expected";for(var at=0;at<nt.floats.length;++at)if(typeof nt.floats[at]!="number")return"floats: number[] expected"}if(nt.ints!=null&&nt.hasOwnProperty("ints")){if(!Array.isArray(nt.ints))return"ints: array expected";for(at=0;at<nt.ints.length;++at)if(!(ct.isInteger(nt.ints[at])||nt.ints[at]&&ct.isInteger(nt.ints[at].low)&&ct.isInteger(nt.ints[at].high)))return"ints: integer|Long[] expected"}if(nt.strings!=null&&nt.hasOwnProperty("strings")){if(!Array.isArray(nt.strings))return"strings: array expected";for(at=0;at<nt.strings.length;++at)if(!(nt.strings[at]&&typeof nt.strings[at].length=="number"||ct.isString(nt.strings[at])))return"strings: buffer[] expected"}if(nt.tensors!=null&&nt.hasOwnProperty("tensors")){if(!Array.isArray(nt.tensors))return"tensors: array expected";for(at=0;at<nt.tensors.length;++at)if(lt=ht.onnx.TensorProto.verify(nt.tensors[at]))return"tensors."+lt}if(nt.graphs!=null&&nt.hasOwnProperty("graphs")){if(!Array.isArray(nt.graphs))return"graphs: array expected";for(at=0;at<nt.graphs.length;++at)if(lt=ht.onnx.GraphProto.verify(nt.graphs[at]))return"graphs."+lt}if(nt.sparseTensors!=null&&nt.hasOwnProperty("sparseTensors")){if(!Array.isArray(nt.sparseTensors))return"sparseTensors: array expected";for(at=0;at<nt.sparseTensors.length;++at)if(lt=ht.onnx.SparseTensorProto.verify(nt.sparseTensors[at]))return"sparseTensors."+lt}if(nt.typeProtos!=null&&nt.hasOwnProperty("typeProtos")){if(!Array.isArray(nt.typeProtos))return"typeProtos: array expected";for(at=0;at<nt.typeProtos.length;++at){var lt;if(lt=ht.onnx.TypeProto.verify(nt.typeProtos[at]))return"typeProtos."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.AttributeProto)return nt;var at=new ht.onnx.AttributeProto;switch(nt.name!=null&&(at.name=String(nt.name)),nt.refAttrName!=null&&(at.refAttrName=String(nt.refAttrName)),nt.docString!=null&&(at.docString=String(nt.docString)),nt.type){default:if(typeof nt.type=="number"){at.type=nt.type;break}break;case"UNDEFINED":case 0:at.type=0;break;case"FLOAT":case 1:at.type=1;break;case"INT":case 2:at.type=2;break;case"STRING":case 3:at.type=3;break;case"TENSOR":case 4:at.type=4;break;case"GRAPH":case 5:at.type=5;break;case"SPARSE_TENSOR":case 11:at.type=11;break;case"TYPE_PROTO":case 13:at.type=13;break;case"FLOATS":case 6:at.type=6;break;case"INTS":case 7:at.type=7;break;case"STRINGS":case 8:at.type=8;break;case"TENSORS":case 9:at.type=9;break;case"GRAPHS":case 10:at.type=10;break;case"SPARSE_TENSORS":case 12:at.type=12;break;case"TYPE_PROTOS":case 14:at.type=14}if(nt.f!=null&&(at.f=Number(nt.f)),nt.i!=null&&(ct.Long?(at.i=ct.Long.fromValue(nt.i)).unsigned=!1:typeof nt.i=="string"?at.i=parseInt(nt.i,10):typeof nt.i=="number"?at.i=nt.i:typeof nt.i=="object"&&(at.i=new ct.LongBits(nt.i.low>>>0,nt.i.high>>>0).toNumber())),nt.s!=null&&(typeof nt.s=="string"?ct.base64.decode(nt.s,at.s=ct.newBuffer(ct.base64.length(nt.s)),0):nt.s.length>=0&&(at.s=nt.s)),nt.t!=null){if(typeof nt.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");at.t=ht.onnx.TensorProto.fromObject(nt.t)}if(nt.g!=null){if(typeof nt.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");at.g=ht.onnx.GraphProto.fromObject(nt.g)}if(nt.sparseTensor!=null){if(typeof nt.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");at.sparseTensor=ht.onnx.SparseTensorProto.fromObject(nt.sparseTensor)}if(nt.tp!=null){if(typeof nt.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");at.tp=ht.onnx.TypeProto.fromObject(nt.tp)}if(nt.floats){if(!Array.isArray(nt.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");at.floats=[];for(var lt=0;lt<nt.floats.length;++lt)at.floats[lt]=Number(nt.floats[lt])}if(nt.ints){if(!Array.isArray(nt.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(at.ints=[],lt=0;lt<nt.ints.length;++lt)ct.Long?(at.ints[lt]=ct.Long.fromValue(nt.ints[lt])).unsigned=!1:typeof nt.ints[lt]=="string"?at.ints[lt]=parseInt(nt.ints[lt],10):typeof nt.ints[lt]=="number"?at.ints[lt]=nt.ints[lt]:typeof nt.ints[lt]=="object"&&(at.ints[lt]=new ct.LongBits(nt.ints[lt].low>>>0,nt.ints[lt].high>>>0).toNumber())}if(nt.strings){if(!Array.isArray(nt.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(at.strings=[],lt=0;lt<nt.strings.length;++lt)typeof nt.strings[lt]=="string"?ct.base64.decode(nt.strings[lt],at.strings[lt]=ct.newBuffer(ct.base64.length(nt.strings[lt])),0):nt.strings[lt].length>=0&&(at.strings[lt]=nt.strings[lt])}if(nt.tensors){if(!Array.isArray(nt.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(at.tensors=[],lt=0;lt<nt.tensors.length;++lt){if(typeof nt.tensors[lt]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");at.tensors[lt]=ht.onnx.TensorProto.fromObject(nt.tensors[lt])}}if(nt.graphs){if(!Array.isArray(nt.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(at.graphs=[],lt=0;lt<nt.graphs.length;++lt){if(typeof nt.graphs[lt]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");at.graphs[lt]=ht.onnx.GraphProto.fromObject(nt.graphs[lt])}}if(nt.sparseTensors){if(!Array.isArray(nt.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(at.sparseTensors=[],lt=0;lt<nt.sparseTensors.length;++lt){if(typeof nt.sparseTensors[lt]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");at.sparseTensors[lt]=ht.onnx.SparseTensorProto.fromObject(nt.sparseTensors[lt])}}if(nt.typeProtos){if(!Array.isArray(nt.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(at.typeProtos=[],lt=0;lt<nt.typeProtos.length;++lt){if(typeof nt.typeProtos[lt]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");at.typeProtos[lt]=ht.onnx.TypeProto.fromObject(nt.typeProtos[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.floats=[],lt.ints=[],lt.strings=[],lt.tensors=[],lt.graphs=[],lt.typeProtos=[],lt.sparseTensors=[]),at.defaults){if(lt.name="",lt.f=0,ct.Long){var dt=new ct.Long(0,0,!1);lt.i=at.longs===String?dt.toString():at.longs===Number?dt.toNumber():dt}else lt.i=at.longs===String?"0":0;at.bytes===String?lt.s="":(lt.s=[],at.bytes!==Array&&(lt.s=ct.newBuffer(lt.s))),lt.t=null,lt.g=null,lt.docString="",lt.tp=null,lt.type=at.enums===String?"UNDEFINED":0,lt.refAttrName="",lt.sparseTensor=null}if(nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.f!=null&&nt.hasOwnProperty("f")&&(lt.f=at.json&&!isFinite(nt.f)?String(nt.f):nt.f),nt.i!=null&&nt.hasOwnProperty("i")&&(typeof nt.i=="number"?lt.i=at.longs===String?String(nt.i):nt.i:lt.i=at.longs===String?ct.Long.prototype.toString.call(nt.i):at.longs===Number?new ct.LongBits(nt.i.low>>>0,nt.i.high>>>0).toNumber():nt.i),nt.s!=null&&nt.hasOwnProperty("s")&&(lt.s=at.bytes===String?ct.base64.encode(nt.s,0,nt.s.length):at.bytes===Array?Array.prototype.slice.call(nt.s):nt.s),nt.t!=null&&nt.hasOwnProperty("t")&&(lt.t=ht.onnx.TensorProto.toObject(nt.t,at)),nt.g!=null&&nt.hasOwnProperty("g")&&(lt.g=ht.onnx.GraphProto.toObject(nt.g,at)),nt.floats&&nt.floats.length){lt.floats=[];for(var ft=0;ft<nt.floats.length;++ft)lt.floats[ft]=at.json&&!isFinite(nt.floats[ft])?String(nt.floats[ft]):nt.floats[ft]}if(nt.ints&&nt.ints.length)for(lt.ints=[],ft=0;ft<nt.ints.length;++ft)typeof nt.ints[ft]=="number"?lt.ints[ft]=at.longs===String?String(nt.ints[ft]):nt.ints[ft]:lt.ints[ft]=at.longs===String?ct.Long.prototype.toString.call(nt.ints[ft]):at.longs===Number?new ct.LongBits(nt.ints[ft].low>>>0,nt.ints[ft].high>>>0).toNumber():nt.ints[ft];if(nt.strings&&nt.strings.length)for(lt.strings=[],ft=0;ft<nt.strings.length;++ft)lt.strings[ft]=at.bytes===String?ct.base64.encode(nt.strings[ft],0,nt.strings[ft].length):at.bytes===Array?Array.prototype.slice.call(nt.strings[ft]):nt.strings[ft];if(nt.tensors&&nt.tensors.length)for(lt.tensors=[],ft=0;ft<nt.tensors.length;++ft)lt.tensors[ft]=ht.onnx.TensorProto.toObject(nt.tensors[ft],at);if(nt.graphs&&nt.graphs.length)for(lt.graphs=[],ft=0;ft<nt.graphs.length;++ft)lt.graphs[ft]=ht.onnx.GraphProto.toObject(nt.graphs[ft],at);if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.tp!=null&&nt.hasOwnProperty("tp")&&(lt.tp=ht.onnx.TypeProto.toObject(nt.tp,at)),nt.typeProtos&&nt.typeProtos.length)for(lt.typeProtos=[],ft=0;ft<nt.typeProtos.length;++ft)lt.typeProtos[ft]=ht.onnx.TypeProto.toObject(nt.typeProtos[ft],at);if(nt.type!=null&&nt.hasOwnProperty("type")&&(lt.type=at.enums===String?ht.onnx.AttributeProto.AttributeType[nt.type]===void 0?nt.type:ht.onnx.AttributeProto.AttributeType[nt.type]:nt.type),nt.refAttrName!=null&&nt.hasOwnProperty("refAttrName")&&(lt.refAttrName=nt.refAttrName),nt.sparseTensor!=null&&nt.hasOwnProperty("sparseTensor")&&(lt.sparseTensor=ht.onnx.SparseTensorProto.toObject(nt.sparseTensor,at)),nt.sparseTensors&&nt.sparseTensors.length)for(lt.sparseTensors=[],ft=0;ft<nt.sparseTensors.length;++ft)lt.sparseTensors[ft]=ht.onnx.SparseTensorProto.toObject(nt.sparseTensors[ft],at);return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.AttributeProto"},ot.AttributeType=function(){var nt={},at=Object.create(nt);return at[nt[0]="UNDEFINED"]=0,at[nt[1]="FLOAT"]=1,at[nt[2]="INT"]=2,at[nt[3]="STRING"]=3,at[nt[4]="TENSOR"]=4,at[nt[5]="GRAPH"]=5,at[nt[11]="SPARSE_TENSOR"]=11,at[nt[13]="TYPE_PROTO"]=13,at[nt[6]="FLOATS"]=6,at[nt[7]="INTS"]=7,at[nt[8]="STRINGS"]=8,at[nt[9]="TENSORS"]=9,at[nt[10]="GRAPHS"]=10,at[nt[12]="SPARSE_TENSORS"]=12,at[nt[14]="TYPE_PROTOS"]=14,at}(),ot}(),it.ValueInfoProto=function(){function ot(nt){if(nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.name="",ot.prototype.type=null,ot.prototype.docString="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){return at||(at=ut.create()),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(10).string(nt.name),nt.type!=null&&Object.hasOwnProperty.call(nt,"type")&&ht.onnx.TypeProto.encode(nt.type,at.uint32(18).fork()).ldelim(),nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(26).string(nt.docString),at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.ValueInfoProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.name=nt.string();break;case 2:dt.type=ht.onnx.TypeProto.decode(nt,nt.uint32());break;case 3:dt.docString=nt.string();break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.type!=null&&nt.hasOwnProperty("type")){var at=ht.onnx.TypeProto.verify(nt.type);if(at)return"type."+at}return nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString)?"docString: string expected":null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.ValueInfoProto)return nt;var at=new ht.onnx.ValueInfoProto;if(nt.name!=null&&(at.name=String(nt.name)),nt.type!=null){if(typeof nt.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");at.type=ht.onnx.TypeProto.fromObject(nt.type)}return nt.docString!=null&&(at.docString=String(nt.docString)),at},ot.toObject=function(nt,at){at||(at={});var lt={};return at.defaults&&(lt.name="",lt.type=null,lt.docString=""),nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.type!=null&&nt.hasOwnProperty("type")&&(lt.type=ht.onnx.TypeProto.toObject(nt.type,at)),nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.ValueInfoProto"},ot}(),it.NodeProto=function(){function ot(nt){if(this.input=[],this.output=[],this.attribute=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.input=ct.emptyArray,ot.prototype.output=ct.emptyArray,ot.prototype.name="",ot.prototype.opType="",ot.prototype.domain="",ot.prototype.attribute=ct.emptyArray,ot.prototype.docString="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.input!=null&&nt.input.length)for(var lt=0;lt<nt.input.length;++lt)at.uint32(10).string(nt.input[lt]);if(nt.output!=null&&nt.output.length)for(lt=0;lt<nt.output.length;++lt)at.uint32(18).string(nt.output[lt]);if(nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(26).string(nt.name),nt.opType!=null&&Object.hasOwnProperty.call(nt,"opType")&&at.uint32(34).string(nt.opType),nt.attribute!=null&&nt.attribute.length)for(lt=0;lt<nt.attribute.length;++lt)ht.onnx.AttributeProto.encode(nt.attribute[lt],at.uint32(42).fork()).ldelim();return nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(50).string(nt.docString),nt.domain!=null&&Object.hasOwnProperty.call(nt,"domain")&&at.uint32(58).string(nt.domain),at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.NodeProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.input&&dt.input.length||(dt.input=[]),dt.input.push(nt.string());break;case 2:dt.output&&dt.output.length||(dt.output=[]),dt.output.push(nt.string());break;case 3:dt.name=nt.string();break;case 4:dt.opType=nt.string();break;case 7:dt.domain=nt.string();break;case 5:dt.attribute&&dt.attribute.length||(dt.attribute=[]),dt.attribute.push(ht.onnx.AttributeProto.decode(nt,nt.uint32()));break;case 6:dt.docString=nt.string();break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.input!=null&&nt.hasOwnProperty("input")){if(!Array.isArray(nt.input))return"input: array expected";for(var at=0;at<nt.input.length;++at)if(!ct.isString(nt.input[at]))return"input: string[] expected"}if(nt.output!=null&&nt.hasOwnProperty("output")){if(!Array.isArray(nt.output))return"output: array expected";for(at=0;at<nt.output.length;++at)if(!ct.isString(nt.output[at]))return"output: string[] expected"}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.opType!=null&&nt.hasOwnProperty("opType")&&!ct.isString(nt.opType))return"opType: string expected";if(nt.domain!=null&&nt.hasOwnProperty("domain")&&!ct.isString(nt.domain))return"domain: string expected";if(nt.attribute!=null&&nt.hasOwnProperty("attribute")){if(!Array.isArray(nt.attribute))return"attribute: array expected";for(at=0;at<nt.attribute.length;++at){var lt=ht.onnx.AttributeProto.verify(nt.attribute[at]);if(lt)return"attribute."+lt}}return nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString)?"docString: string expected":null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.NodeProto)return nt;var at=new ht.onnx.NodeProto;if(nt.input){if(!Array.isArray(nt.input))throw TypeError(".onnx.NodeProto.input: array expected");at.input=[];for(var lt=0;lt<nt.input.length;++lt)at.input[lt]=String(nt.input[lt])}if(nt.output){if(!Array.isArray(nt.output))throw TypeError(".onnx.NodeProto.output: array expected");for(at.output=[],lt=0;lt<nt.output.length;++lt)at.output[lt]=String(nt.output[lt])}if(nt.name!=null&&(at.name=String(nt.name)),nt.opType!=null&&(at.opType=String(nt.opType)),nt.domain!=null&&(at.domain=String(nt.domain)),nt.attribute){if(!Array.isArray(nt.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(at.attribute=[],lt=0;lt<nt.attribute.length;++lt){if(typeof nt.attribute[lt]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");at.attribute[lt]=ht.onnx.AttributeProto.fromObject(nt.attribute[lt])}}return nt.docString!=null&&(at.docString=String(nt.docString)),at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.input=[],lt.output=[],lt.attribute=[]),at.defaults&&(lt.name="",lt.opType="",lt.docString="",lt.domain=""),nt.input&&nt.input.length){lt.input=[];for(var dt=0;dt<nt.input.length;++dt)lt.input[dt]=nt.input[dt]}if(nt.output&&nt.output.length)for(lt.output=[],dt=0;dt<nt.output.length;++dt)lt.output[dt]=nt.output[dt];if(nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.opType!=null&&nt.hasOwnProperty("opType")&&(lt.opType=nt.opType),nt.attribute&&nt.attribute.length)for(lt.attribute=[],dt=0;dt<nt.attribute.length;++dt)lt.attribute[dt]=ht.onnx.AttributeProto.toObject(nt.attribute[dt],at);return nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.domain!=null&&nt.hasOwnProperty("domain")&&(lt.domain=nt.domain),lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.NodeProto"},ot}(),it.TrainingInfoProto=function(){function ot(nt){if(this.initializationBinding=[],this.updateBinding=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.initialization=null,ot.prototype.algorithm=null,ot.prototype.initializationBinding=ct.emptyArray,ot.prototype.updateBinding=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.initialization!=null&&Object.hasOwnProperty.call(nt,"initialization")&&ht.onnx.GraphProto.encode(nt.initialization,at.uint32(10).fork()).ldelim(),nt.algorithm!=null&&Object.hasOwnProperty.call(nt,"algorithm")&&ht.onnx.GraphProto.encode(nt.algorithm,at.uint32(18).fork()).ldelim(),nt.initializationBinding!=null&&nt.initializationBinding.length)for(var lt=0;lt<nt.initializationBinding.length;++lt)ht.onnx.StringStringEntryProto.encode(nt.initializationBinding[lt],at.uint32(26).fork()).ldelim();if(nt.updateBinding!=null&&nt.updateBinding.length)for(lt=0;lt<nt.updateBinding.length;++lt)ht.onnx.StringStringEntryProto.encode(nt.updateBinding[lt],at.uint32(34).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.TrainingInfoProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.initialization=ht.onnx.GraphProto.decode(nt,nt.uint32());break;case 2:dt.algorithm=ht.onnx.GraphProto.decode(nt,nt.uint32());break;case 3:dt.initializationBinding&&dt.initializationBinding.length||(dt.initializationBinding=[]),dt.initializationBinding.push(ht.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;case 4:dt.updateBinding&&dt.updateBinding.length||(dt.updateBinding=[]),dt.updateBinding.push(ht.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.initialization!=null&&nt.hasOwnProperty("initialization")&&(lt=ht.onnx.GraphProto.verify(nt.initialization)))return"initialization."+lt;if(nt.algorithm!=null&&nt.hasOwnProperty("algorithm")&&(lt=ht.onnx.GraphProto.verify(nt.algorithm)))return"algorithm."+lt;if(nt.initializationBinding!=null&&nt.hasOwnProperty("initializationBinding")){if(!Array.isArray(nt.initializationBinding))return"initializationBinding: array expected";for(var at=0;at<nt.initializationBinding.length;++at)if(lt=ht.onnx.StringStringEntryProto.verify(nt.initializationBinding[at]))return"initializationBinding."+lt}if(nt.updateBinding!=null&&nt.hasOwnProperty("updateBinding")){if(!Array.isArray(nt.updateBinding))return"updateBinding: array expected";for(at=0;at<nt.updateBinding.length;++at){var lt;if(lt=ht.onnx.StringStringEntryProto.verify(nt.updateBinding[at]))return"updateBinding."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.TrainingInfoProto)return nt;var at=new ht.onnx.TrainingInfoProto;if(nt.initialization!=null){if(typeof nt.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");at.initialization=ht.onnx.GraphProto.fromObject(nt.initialization)}if(nt.algorithm!=null){if(typeof nt.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");at.algorithm=ht.onnx.GraphProto.fromObject(nt.algorithm)}if(nt.initializationBinding){if(!Array.isArray(nt.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");at.initializationBinding=[];for(var lt=0;lt<nt.initializationBinding.length;++lt){if(typeof nt.initializationBinding[lt]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");at.initializationBinding[lt]=ht.onnx.StringStringEntryProto.fromObject(nt.initializationBinding[lt])}}if(nt.updateBinding){if(!Array.isArray(nt.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(at.updateBinding=[],lt=0;lt<nt.updateBinding.length;++lt){if(typeof nt.updateBinding[lt]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");at.updateBinding[lt]=ht.onnx.StringStringEntryProto.fromObject(nt.updateBinding[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.initializationBinding=[],lt.updateBinding=[]),at.defaults&&(lt.initialization=null,lt.algorithm=null),nt.initialization!=null&&nt.hasOwnProperty("initialization")&&(lt.initialization=ht.onnx.GraphProto.toObject(nt.initialization,at)),nt.algorithm!=null&&nt.hasOwnProperty("algorithm")&&(lt.algorithm=ht.onnx.GraphProto.toObject(nt.algorithm,at)),nt.initializationBinding&&nt.initializationBinding.length){lt.initializationBinding=[];for(var dt=0;dt<nt.initializationBinding.length;++dt)lt.initializationBinding[dt]=ht.onnx.StringStringEntryProto.toObject(nt.initializationBinding[dt],at)}if(nt.updateBinding&&nt.updateBinding.length)for(lt.updateBinding=[],dt=0;dt<nt.updateBinding.length;++dt)lt.updateBinding[dt]=ht.onnx.StringStringEntryProto.toObject(nt.updateBinding[dt],at);return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.TrainingInfoProto"},ot}(),it.ModelProto=function(){function ot(nt){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.irVersion=ct.Long?ct.Long.fromBits(0,0,!1):0,ot.prototype.opsetImport=ct.emptyArray,ot.prototype.producerName="",ot.prototype.producerVersion="",ot.prototype.domain="",ot.prototype.modelVersion=ct.Long?ct.Long.fromBits(0,0,!1):0,ot.prototype.docString="",ot.prototype.graph=null,ot.prototype.metadataProps=ct.emptyArray,ot.prototype.trainingInfo=ct.emptyArray,ot.prototype.functions=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.irVersion!=null&&Object.hasOwnProperty.call(nt,"irVersion")&&at.uint32(8).int64(nt.irVersion),nt.producerName!=null&&Object.hasOwnProperty.call(nt,"producerName")&&at.uint32(18).string(nt.producerName),nt.producerVersion!=null&&Object.hasOwnProperty.call(nt,"producerVersion")&&at.uint32(26).string(nt.producerVersion),nt.domain!=null&&Object.hasOwnProperty.call(nt,"domain")&&at.uint32(34).string(nt.domain),nt.modelVersion!=null&&Object.hasOwnProperty.call(nt,"modelVersion")&&at.uint32(40).int64(nt.modelVersion),nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(50).string(nt.docString),nt.graph!=null&&Object.hasOwnProperty.call(nt,"graph")&&ht.onnx.GraphProto.encode(nt.graph,at.uint32(58).fork()).ldelim(),nt.opsetImport!=null&&nt.opsetImport.length)for(var lt=0;lt<nt.opsetImport.length;++lt)ht.onnx.OperatorSetIdProto.encode(nt.opsetImport[lt],at.uint32(66).fork()).ldelim();if(nt.metadataProps!=null&&nt.metadataProps.length)for(lt=0;lt<nt.metadataProps.length;++lt)ht.onnx.StringStringEntryProto.encode(nt.metadataProps[lt],at.uint32(114).fork()).ldelim();if(nt.trainingInfo!=null&&nt.trainingInfo.length)for(lt=0;lt<nt.trainingInfo.length;++lt)ht.onnx.TrainingInfoProto.encode(nt.trainingInfo[lt],at.uint32(162).fork()).ldelim();if(nt.functions!=null&&nt.functions.length)for(lt=0;lt<nt.functions.length;++lt)ht.onnx.FunctionProto.encode(nt.functions[lt],at.uint32(202).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.ModelProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.irVersion=nt.int64();break;case 8:dt.opsetImport&&dt.opsetImport.length||(dt.opsetImport=[]),dt.opsetImport.push(ht.onnx.OperatorSetIdProto.decode(nt,nt.uint32()));break;case 2:dt.producerName=nt.string();break;case 3:dt.producerVersion=nt.string();break;case 4:dt.domain=nt.string();break;case 5:dt.modelVersion=nt.int64();break;case 6:dt.docString=nt.string();break;case 7:dt.graph=ht.onnx.GraphProto.decode(nt,nt.uint32());break;case 14:dt.metadataProps&&dt.metadataProps.length||(dt.metadataProps=[]),dt.metadataProps.push(ht.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;case 20:dt.trainingInfo&&dt.trainingInfo.length||(dt.trainingInfo=[]),dt.trainingInfo.push(ht.onnx.TrainingInfoProto.decode(nt,nt.uint32()));break;case 25:dt.functions&&dt.functions.length||(dt.functions=[]),dt.functions.push(ht.onnx.FunctionProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.irVersion!=null&&nt.hasOwnProperty("irVersion")&&!(ct.isInteger(nt.irVersion)||nt.irVersion&&ct.isInteger(nt.irVersion.low)&&ct.isInteger(nt.irVersion.high)))return"irVersion: integer|Long expected";if(nt.opsetImport!=null&&nt.hasOwnProperty("opsetImport")){if(!Array.isArray(nt.opsetImport))return"opsetImport: array expected";for(var at=0;at<nt.opsetImport.length;++at)if(lt=ht.onnx.OperatorSetIdProto.verify(nt.opsetImport[at]))return"opsetImport."+lt}if(nt.producerName!=null&&nt.hasOwnProperty("producerName")&&!ct.isString(nt.producerName))return"producerName: string expected";if(nt.producerVersion!=null&&nt.hasOwnProperty("producerVersion")&&!ct.isString(nt.producerVersion))return"producerVersion: string expected";if(nt.domain!=null&&nt.hasOwnProperty("domain")&&!ct.isString(nt.domain))return"domain: string expected";if(nt.modelVersion!=null&&nt.hasOwnProperty("modelVersion")&&!(ct.isInteger(nt.modelVersion)||nt.modelVersion&&ct.isInteger(nt.modelVersion.low)&&ct.isInteger(nt.modelVersion.high)))return"modelVersion: integer|Long expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString))return"docString: string expected";if(nt.graph!=null&&nt.hasOwnProperty("graph")&&(lt=ht.onnx.GraphProto.verify(nt.graph)))return"graph."+lt;if(nt.metadataProps!=null&&nt.hasOwnProperty("metadataProps")){if(!Array.isArray(nt.metadataProps))return"metadataProps: array expected";for(at=0;at<nt.metadataProps.length;++at)if(lt=ht.onnx.StringStringEntryProto.verify(nt.metadataProps[at]))return"metadataProps."+lt}if(nt.trainingInfo!=null&&nt.hasOwnProperty("trainingInfo")){if(!Array.isArray(nt.trainingInfo))return"trainingInfo: array expected";for(at=0;at<nt.trainingInfo.length;++at)if(lt=ht.onnx.TrainingInfoProto.verify(nt.trainingInfo[at]))return"trainingInfo."+lt}if(nt.functions!=null&&nt.hasOwnProperty("functions")){if(!Array.isArray(nt.functions))return"functions: array expected";for(at=0;at<nt.functions.length;++at){var lt;if(lt=ht.onnx.FunctionProto.verify(nt.functions[at]))return"functions."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.ModelProto)return nt;var at=new ht.onnx.ModelProto;if(nt.irVersion!=null&&(ct.Long?(at.irVersion=ct.Long.fromValue(nt.irVersion)).unsigned=!1:typeof nt.irVersion=="string"?at.irVersion=parseInt(nt.irVersion,10):typeof nt.irVersion=="number"?at.irVersion=nt.irVersion:typeof nt.irVersion=="object"&&(at.irVersion=new ct.LongBits(nt.irVersion.low>>>0,nt.irVersion.high>>>0).toNumber())),nt.opsetImport){if(!Array.isArray(nt.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");at.opsetImport=[];for(var lt=0;lt<nt.opsetImport.length;++lt){if(typeof nt.opsetImport[lt]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");at.opsetImport[lt]=ht.onnx.OperatorSetIdProto.fromObject(nt.opsetImport[lt])}}if(nt.producerName!=null&&(at.producerName=String(nt.producerName)),nt.producerVersion!=null&&(at.producerVersion=String(nt.producerVersion)),nt.domain!=null&&(at.domain=String(nt.domain)),nt.modelVersion!=null&&(ct.Long?(at.modelVersion=ct.Long.fromValue(nt.modelVersion)).unsigned=!1:typeof nt.modelVersion=="string"?at.modelVersion=parseInt(nt.modelVersion,10):typeof nt.modelVersion=="number"?at.modelVersion=nt.modelVersion:typeof nt.modelVersion=="object"&&(at.modelVersion=new ct.LongBits(nt.modelVersion.low>>>0,nt.modelVersion.high>>>0).toNumber())),nt.docString!=null&&(at.docString=String(nt.docString)),nt.graph!=null){if(typeof nt.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");at.graph=ht.onnx.GraphProto.fromObject(nt.graph)}if(nt.metadataProps){if(!Array.isArray(nt.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(at.metadataProps=[],lt=0;lt<nt.metadataProps.length;++lt){if(typeof nt.metadataProps[lt]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");at.metadataProps[lt]=ht.onnx.StringStringEntryProto.fromObject(nt.metadataProps[lt])}}if(nt.trainingInfo){if(!Array.isArray(nt.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(at.trainingInfo=[],lt=0;lt<nt.trainingInfo.length;++lt){if(typeof nt.trainingInfo[lt]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");at.trainingInfo[lt]=ht.onnx.TrainingInfoProto.fromObject(nt.trainingInfo[lt])}}if(nt.functions){if(!Array.isArray(nt.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(at.functions=[],lt=0;lt<nt.functions.length;++lt){if(typeof nt.functions[lt]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");at.functions[lt]=ht.onnx.FunctionProto.fromObject(nt.functions[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.opsetImport=[],lt.metadataProps=[],lt.trainingInfo=[],lt.functions=[]),at.defaults){if(ct.Long){var dt=new ct.Long(0,0,!1);lt.irVersion=at.longs===String?dt.toString():at.longs===Number?dt.toNumber():dt}else lt.irVersion=at.longs===String?"0":0;lt.producerName="",lt.producerVersion="",lt.domain="",ct.Long?(dt=new ct.Long(0,0,!1),lt.modelVersion=at.longs===String?dt.toString():at.longs===Number?dt.toNumber():dt):lt.modelVersion=at.longs===String?"0":0,lt.docString="",lt.graph=null}if(nt.irVersion!=null&&nt.hasOwnProperty("irVersion")&&(typeof nt.irVersion=="number"?lt.irVersion=at.longs===String?String(nt.irVersion):nt.irVersion:lt.irVersion=at.longs===String?ct.Long.prototype.toString.call(nt.irVersion):at.longs===Number?new ct.LongBits(nt.irVersion.low>>>0,nt.irVersion.high>>>0).toNumber():nt.irVersion),nt.producerName!=null&&nt.hasOwnProperty("producerName")&&(lt.producerName=nt.producerName),nt.producerVersion!=null&&nt.hasOwnProperty("producerVersion")&&(lt.producerVersion=nt.producerVersion),nt.domain!=null&&nt.hasOwnProperty("domain")&&(lt.domain=nt.domain),nt.modelVersion!=null&&nt.hasOwnProperty("modelVersion")&&(typeof nt.modelVersion=="number"?lt.modelVersion=at.longs===String?String(nt.modelVersion):nt.modelVersion:lt.modelVersion=at.longs===String?ct.Long.prototype.toString.call(nt.modelVersion):at.longs===Number?new ct.LongBits(nt.modelVersion.low>>>0,nt.modelVersion.high>>>0).toNumber():nt.modelVersion),nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.graph!=null&&nt.hasOwnProperty("graph")&&(lt.graph=ht.onnx.GraphProto.toObject(nt.graph,at)),nt.opsetImport&&nt.opsetImport.length){lt.opsetImport=[];for(var ft=0;ft<nt.opsetImport.length;++ft)lt.opsetImport[ft]=ht.onnx.OperatorSetIdProto.toObject(nt.opsetImport[ft],at)}if(nt.metadataProps&&nt.metadataProps.length)for(lt.metadataProps=[],ft=0;ft<nt.metadataProps.length;++ft)lt.metadataProps[ft]=ht.onnx.StringStringEntryProto.toObject(nt.metadataProps[ft],at);if(nt.trainingInfo&&nt.trainingInfo.length)for(lt.trainingInfo=[],ft=0;ft<nt.trainingInfo.length;++ft)lt.trainingInfo[ft]=ht.onnx.TrainingInfoProto.toObject(nt.trainingInfo[ft],at);if(nt.functions&&nt.functions.length)for(lt.functions=[],ft=0;ft<nt.functions.length;++ft)lt.functions[ft]=ht.onnx.FunctionProto.toObject(nt.functions[ft],at);return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.ModelProto"},ot}(),it.StringStringEntryProto=function(){function ot(nt){if(nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.key="",ot.prototype.value="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){return at||(at=ut.create()),nt.key!=null&&Object.hasOwnProperty.call(nt,"key")&&at.uint32(10).string(nt.key),nt.value!=null&&Object.hasOwnProperty.call(nt,"value")&&at.uint32(18).string(nt.value),at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.StringStringEntryProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.key=nt.string();break;case 2:dt.value=nt.string();break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.key!=null&&nt.hasOwnProperty("key")&&!ct.isString(nt.key)?"key: string expected":nt.value!=null&&nt.hasOwnProperty("value")&&!ct.isString(nt.value)?"value: string expected":null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.StringStringEntryProto)return nt;var at=new ht.onnx.StringStringEntryProto;return nt.key!=null&&(at.key=String(nt.key)),nt.value!=null&&(at.value=String(nt.value)),at},ot.toObject=function(nt,at){at||(at={});var lt={};return at.defaults&&(lt.key="",lt.value=""),nt.key!=null&&nt.hasOwnProperty("key")&&(lt.key=nt.key),nt.value!=null&&nt.hasOwnProperty("value")&&(lt.value=nt.value),lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.StringStringEntryProto"},ot}(),it.TensorAnnotation=function(){function ot(nt){if(this.quantParameterTensorNames=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.tensorName="",ot.prototype.quantParameterTensorNames=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.tensorName!=null&&Object.hasOwnProperty.call(nt,"tensorName")&&at.uint32(10).string(nt.tensorName),nt.quantParameterTensorNames!=null&&nt.quantParameterTensorNames.length)for(var lt=0;lt<nt.quantParameterTensorNames.length;++lt)ht.onnx.StringStringEntryProto.encode(nt.quantParameterTensorNames[lt],at.uint32(18).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.TensorAnnotation;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.tensorName=nt.string();break;case 2:dt.quantParameterTensorNames&&dt.quantParameterTensorNames.length||(dt.quantParameterTensorNames=[]),dt.quantParameterTensorNames.push(ht.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.tensorName!=null&&nt.hasOwnProperty("tensorName")&&!ct.isString(nt.tensorName))return"tensorName: string expected";if(nt.quantParameterTensorNames!=null&&nt.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(nt.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var at=0;at<nt.quantParameterTensorNames.length;++at){var lt=ht.onnx.StringStringEntryProto.verify(nt.quantParameterTensorNames[at]);if(lt)return"quantParameterTensorNames."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.TensorAnnotation)return nt;var at=new ht.onnx.TensorAnnotation;if(nt.tensorName!=null&&(at.tensorName=String(nt.tensorName)),nt.quantParameterTensorNames){if(!Array.isArray(nt.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");at.quantParameterTensorNames=[];for(var lt=0;lt<nt.quantParameterTensorNames.length;++lt){if(typeof nt.quantParameterTensorNames[lt]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");at.quantParameterTensorNames[lt]=ht.onnx.StringStringEntryProto.fromObject(nt.quantParameterTensorNames[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.quantParameterTensorNames=[]),at.defaults&&(lt.tensorName=""),nt.tensorName!=null&&nt.hasOwnProperty("tensorName")&&(lt.tensorName=nt.tensorName),nt.quantParameterTensorNames&&nt.quantParameterTensorNames.length){lt.quantParameterTensorNames=[];for(var dt=0;dt<nt.quantParameterTensorNames.length;++dt)lt.quantParameterTensorNames[dt]=ht.onnx.StringStringEntryProto.toObject(nt.quantParameterTensorNames[dt],at)}return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.TensorAnnotation"},ot}(),it.GraphProto=function(){function ot(nt){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.node=ct.emptyArray,ot.prototype.name="",ot.prototype.initializer=ct.emptyArray,ot.prototype.sparseInitializer=ct.emptyArray,ot.prototype.docString="",ot.prototype.input=ct.emptyArray,ot.prototype.output=ct.emptyArray,ot.prototype.valueInfo=ct.emptyArray,ot.prototype.quantizationAnnotation=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.node!=null&&nt.node.length)for(var lt=0;lt<nt.node.length;++lt)ht.onnx.NodeProto.encode(nt.node[lt],at.uint32(10).fork()).ldelim();if(nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(18).string(nt.name),nt.initializer!=null&&nt.initializer.length)for(lt=0;lt<nt.initializer.length;++lt)ht.onnx.TensorProto.encode(nt.initializer[lt],at.uint32(42).fork()).ldelim();if(nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(82).string(nt.docString),nt.input!=null&&nt.input.length)for(lt=0;lt<nt.input.length;++lt)ht.onnx.ValueInfoProto.encode(nt.input[lt],at.uint32(90).fork()).ldelim();if(nt.output!=null&&nt.output.length)for(lt=0;lt<nt.output.length;++lt)ht.onnx.ValueInfoProto.encode(nt.output[lt],at.uint32(98).fork()).ldelim();if(nt.valueInfo!=null&&nt.valueInfo.length)for(lt=0;lt<nt.valueInfo.length;++lt)ht.onnx.ValueInfoProto.encode(nt.valueInfo[lt],at.uint32(106).fork()).ldelim();if(nt.quantizationAnnotation!=null&&nt.quantizationAnnotation.length)for(lt=0;lt<nt.quantizationAnnotation.length;++lt)ht.onnx.TensorAnnotation.encode(nt.quantizationAnnotation[lt],at.uint32(114).fork()).ldelim();if(nt.sparseInitializer!=null&&nt.sparseInitializer.length)for(lt=0;lt<nt.sparseInitializer.length;++lt)ht.onnx.SparseTensorProto.encode(nt.sparseInitializer[lt],at.uint32(122).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.GraphProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.node&&dt.node.length||(dt.node=[]),dt.node.push(ht.onnx.NodeProto.decode(nt,nt.uint32()));break;case 2:dt.name=nt.string();break;case 5:dt.initializer&&dt.initializer.length||(dt.initializer=[]),dt.initializer.push(ht.onnx.TensorProto.decode(nt,nt.uint32()));break;case 15:dt.sparseInitializer&&dt.sparseInitializer.length||(dt.sparseInitializer=[]),dt.sparseInitializer.push(ht.onnx.SparseTensorProto.decode(nt,nt.uint32()));break;case 10:dt.docString=nt.string();break;case 11:dt.input&&dt.input.length||(dt.input=[]),dt.input.push(ht.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 12:dt.output&&dt.output.length||(dt.output=[]),dt.output.push(ht.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 13:dt.valueInfo&&dt.valueInfo.length||(dt.valueInfo=[]),dt.valueInfo.push(ht.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 14:dt.quantizationAnnotation&&dt.quantizationAnnotation.length||(dt.quantizationAnnotation=[]),dt.quantizationAnnotation.push(ht.onnx.TensorAnnotation.decode(nt,nt.uint32()));break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.node!=null&&nt.hasOwnProperty("node")){if(!Array.isArray(nt.node))return"node: array expected";for(var at=0;at<nt.node.length;++at)if(lt=ht.onnx.NodeProto.verify(nt.node[at]))return"node."+lt}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.initializer!=null&&nt.hasOwnProperty("initializer")){if(!Array.isArray(nt.initializer))return"initializer: array expected";for(at=0;at<nt.initializer.length;++at)if(lt=ht.onnx.TensorProto.verify(nt.initializer[at]))return"initializer."+lt}if(nt.sparseInitializer!=null&&nt.hasOwnProperty("sparseInitializer")){if(!Array.isArray(nt.sparseInitializer))return"sparseInitializer: array expected";for(at=0;at<nt.sparseInitializer.length;++at)if(lt=ht.onnx.SparseTensorProto.verify(nt.sparseInitializer[at]))return"sparseInitializer."+lt}if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString))return"docString: string expected";if(nt.input!=null&&nt.hasOwnProperty("input")){if(!Array.isArray(nt.input))return"input: array expected";for(at=0;at<nt.input.length;++at)if(lt=ht.onnx.ValueInfoProto.verify(nt.input[at]))return"input."+lt}if(nt.output!=null&&nt.hasOwnProperty("output")){if(!Array.isArray(nt.output))return"output: array expected";for(at=0;at<nt.output.length;++at)if(lt=ht.onnx.ValueInfoProto.verify(nt.output[at]))return"output."+lt}if(nt.valueInfo!=null&&nt.hasOwnProperty("valueInfo")){if(!Array.isArray(nt.valueInfo))return"valueInfo: array expected";for(at=0;at<nt.valueInfo.length;++at)if(lt=ht.onnx.ValueInfoProto.verify(nt.valueInfo[at]))return"valueInfo."+lt}if(nt.quantizationAnnotation!=null&&nt.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(nt.quantizationAnnotation))return"quantizationAnnotation: array expected";for(at=0;at<nt.quantizationAnnotation.length;++at){var lt;if(lt=ht.onnx.TensorAnnotation.verify(nt.quantizationAnnotation[at]))return"quantizationAnnotation."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.GraphProto)return nt;var at=new ht.onnx.GraphProto;if(nt.node){if(!Array.isArray(nt.node))throw TypeError(".onnx.GraphProto.node: array expected");at.node=[];for(var lt=0;lt<nt.node.length;++lt){if(typeof nt.node[lt]!="object")throw TypeError(".onnx.GraphProto.node: object expected");at.node[lt]=ht.onnx.NodeProto.fromObject(nt.node[lt])}}if(nt.name!=null&&(at.name=String(nt.name)),nt.initializer){if(!Array.isArray(nt.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(at.initializer=[],lt=0;lt<nt.initializer.length;++lt){if(typeof nt.initializer[lt]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");at.initializer[lt]=ht.onnx.TensorProto.fromObject(nt.initializer[lt])}}if(nt.sparseInitializer){if(!Array.isArray(nt.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(at.sparseInitializer=[],lt=0;lt<nt.sparseInitializer.length;++lt){if(typeof nt.sparseInitializer[lt]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");at.sparseInitializer[lt]=ht.onnx.SparseTensorProto.fromObject(nt.sparseInitializer[lt])}}if(nt.docString!=null&&(at.docString=String(nt.docString)),nt.input){if(!Array.isArray(nt.input))throw TypeError(".onnx.GraphProto.input: array expected");for(at.input=[],lt=0;lt<nt.input.length;++lt){if(typeof nt.input[lt]!="object")throw TypeError(".onnx.GraphProto.input: object expected");at.input[lt]=ht.onnx.ValueInfoProto.fromObject(nt.input[lt])}}if(nt.output){if(!Array.isArray(nt.output))throw TypeError(".onnx.GraphProto.output: array expected");for(at.output=[],lt=0;lt<nt.output.length;++lt){if(typeof nt.output[lt]!="object")throw TypeError(".onnx.GraphProto.output: object expected");at.output[lt]=ht.onnx.ValueInfoProto.fromObject(nt.output[lt])}}if(nt.valueInfo){if(!Array.isArray(nt.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(at.valueInfo=[],lt=0;lt<nt.valueInfo.length;++lt){if(typeof nt.valueInfo[lt]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");at.valueInfo[lt]=ht.onnx.ValueInfoProto.fromObject(nt.valueInfo[lt])}}if(nt.quantizationAnnotation){if(!Array.isArray(nt.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(at.quantizationAnnotation=[],lt=0;lt<nt.quantizationAnnotation.length;++lt){if(typeof nt.quantizationAnnotation[lt]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");at.quantizationAnnotation[lt]=ht.onnx.TensorAnnotation.fromObject(nt.quantizationAnnotation[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.node=[],lt.initializer=[],lt.input=[],lt.output=[],lt.valueInfo=[],lt.quantizationAnnotation=[],lt.sparseInitializer=[]),at.defaults&&(lt.name="",lt.docString=""),nt.node&&nt.node.length){lt.node=[];for(var dt=0;dt<nt.node.length;++dt)lt.node[dt]=ht.onnx.NodeProto.toObject(nt.node[dt],at)}if(nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.initializer&&nt.initializer.length)for(lt.initializer=[],dt=0;dt<nt.initializer.length;++dt)lt.initializer[dt]=ht.onnx.TensorProto.toObject(nt.initializer[dt],at);if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.input&&nt.input.length)for(lt.input=[],dt=0;dt<nt.input.length;++dt)lt.input[dt]=ht.onnx.ValueInfoProto.toObject(nt.input[dt],at);if(nt.output&&nt.output.length)for(lt.output=[],dt=0;dt<nt.output.length;++dt)lt.output[dt]=ht.onnx.ValueInfoProto.toObject(nt.output[dt],at);if(nt.valueInfo&&nt.valueInfo.length)for(lt.valueInfo=[],dt=0;dt<nt.valueInfo.length;++dt)lt.valueInfo[dt]=ht.onnx.ValueInfoProto.toObject(nt.valueInfo[dt],at);if(nt.quantizationAnnotation&&nt.quantizationAnnotation.length)for(lt.quantizationAnnotation=[],dt=0;dt<nt.quantizationAnnotation.length;++dt)lt.quantizationAnnotation[dt]=ht.onnx.TensorAnnotation.toObject(nt.quantizationAnnotation[dt],at);if(nt.sparseInitializer&&nt.sparseInitializer.length)for(lt.sparseInitializer=[],dt=0;dt<nt.sparseInitializer.length;++dt)lt.sparseInitializer[dt]=ht.onnx.SparseTensorProto.toObject(nt.sparseInitializer[dt],at);return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.GraphProto"},ot}(),it.TensorProto=function(){function ot(nt){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.dims=ct.emptyArray,ot.prototype.dataType=0,ot.prototype.segment=null,ot.prototype.floatData=ct.emptyArray,ot.prototype.int32Data=ct.emptyArray,ot.prototype.stringData=ct.emptyArray,ot.prototype.int64Data=ct.emptyArray,ot.prototype.name="",ot.prototype.docString="",ot.prototype.rawData=ct.newBuffer([]),ot.prototype.externalData=ct.emptyArray,ot.prototype.dataLocation=0,ot.prototype.doubleData=ct.emptyArray,ot.prototype.uint64Data=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.dims!=null&&nt.dims.length){at.uint32(10).fork();for(var lt=0;lt<nt.dims.length;++lt)at.int64(nt.dims[lt]);at.ldelim()}if(nt.dataType!=null&&Object.hasOwnProperty.call(nt,"dataType")&&at.uint32(16).int32(nt.dataType),nt.segment!=null&&Object.hasOwnProperty.call(nt,"segment")&&ht.onnx.TensorProto.Segment.encode(nt.segment,at.uint32(26).fork()).ldelim(),nt.floatData!=null&&nt.floatData.length){for(at.uint32(34).fork(),lt=0;lt<nt.floatData.length;++lt)at.float(nt.floatData[lt]);at.ldelim()}if(nt.int32Data!=null&&nt.int32Data.length){for(at.uint32(42).fork(),lt=0;lt<nt.int32Data.length;++lt)at.int32(nt.int32Data[lt]);at.ldelim()}if(nt.stringData!=null&&nt.stringData.length)for(lt=0;lt<nt.stringData.length;++lt)at.uint32(50).bytes(nt.stringData[lt]);if(nt.int64Data!=null&&nt.int64Data.length){for(at.uint32(58).fork(),lt=0;lt<nt.int64Data.length;++lt)at.int64(nt.int64Data[lt]);at.ldelim()}if(nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(66).string(nt.name),nt.rawData!=null&&Object.hasOwnProperty.call(nt,"rawData")&&at.uint32(74).bytes(nt.rawData),nt.doubleData!=null&&nt.doubleData.length){for(at.uint32(82).fork(),lt=0;lt<nt.doubleData.length;++lt)at.double(nt.doubleData[lt]);at.ldelim()}if(nt.uint64Data!=null&&nt.uint64Data.length){for(at.uint32(90).fork(),lt=0;lt<nt.uint64Data.length;++lt)at.uint64(nt.uint64Data[lt]);at.ldelim()}if(nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(98).string(nt.docString),nt.externalData!=null&&nt.externalData.length)for(lt=0;lt<nt.externalData.length;++lt)ht.onnx.StringStringEntryProto.encode(nt.externalData[lt],at.uint32(106).fork()).ldelim();return nt.dataLocation!=null&&Object.hasOwnProperty.call(nt,"dataLocation")&&at.uint32(112).int32(nt.dataLocation),at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.TensorProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:if(dt.dims&&dt.dims.length||(dt.dims=[]),(7&ft)==2)for(var pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.dims.push(nt.int64());else dt.dims.push(nt.int64());break;case 2:dt.dataType=nt.int32();break;case 3:dt.segment=ht.onnx.TensorProto.Segment.decode(nt,nt.uint32());break;case 4:if(dt.floatData&&dt.floatData.length||(dt.floatData=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.floatData.push(nt.float());else dt.floatData.push(nt.float());break;case 5:if(dt.int32Data&&dt.int32Data.length||(dt.int32Data=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.int32Data.push(nt.int32());else dt.int32Data.push(nt.int32());break;case 6:dt.stringData&&dt.stringData.length||(dt.stringData=[]),dt.stringData.push(nt.bytes());break;case 7:if(dt.int64Data&&dt.int64Data.length||(dt.int64Data=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.int64Data.push(nt.int64());else dt.int64Data.push(nt.int64());break;case 8:dt.name=nt.string();break;case 12:dt.docString=nt.string();break;case 9:dt.rawData=nt.bytes();break;case 13:dt.externalData&&dt.externalData.length||(dt.externalData=[]),dt.externalData.push(ht.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;case 14:dt.dataLocation=nt.int32();break;case 10:if(dt.doubleData&&dt.doubleData.length||(dt.doubleData=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.doubleData.push(nt.double());else dt.doubleData.push(nt.double());break;case 11:if(dt.uint64Data&&dt.uint64Data.length||(dt.uint64Data=[]),(7&ft)==2)for(pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.uint64Data.push(nt.uint64());else dt.uint64Data.push(nt.uint64());break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.dims!=null&&nt.hasOwnProperty("dims")){if(!Array.isArray(nt.dims))return"dims: array expected";for(var at=0;at<nt.dims.length;++at)if(!(ct.isInteger(nt.dims[at])||nt.dims[at]&&ct.isInteger(nt.dims[at].low)&&ct.isInteger(nt.dims[at].high)))return"dims: integer|Long[] expected"}if(nt.dataType!=null&&nt.hasOwnProperty("dataType")&&!ct.isInteger(nt.dataType))return"dataType: integer expected";if(nt.segment!=null&&nt.hasOwnProperty("segment")&&(lt=ht.onnx.TensorProto.Segment.verify(nt.segment)))return"segment."+lt;if(nt.floatData!=null&&nt.hasOwnProperty("floatData")){if(!Array.isArray(nt.floatData))return"floatData: array expected";for(at=0;at<nt.floatData.length;++at)if(typeof nt.floatData[at]!="number")return"floatData: number[] expected"}if(nt.int32Data!=null&&nt.hasOwnProperty("int32Data")){if(!Array.isArray(nt.int32Data))return"int32Data: array expected";for(at=0;at<nt.int32Data.length;++at)if(!ct.isInteger(nt.int32Data[at]))return"int32Data: integer[] expected"}if(nt.stringData!=null&&nt.hasOwnProperty("stringData")){if(!Array.isArray(nt.stringData))return"stringData: array expected";for(at=0;at<nt.stringData.length;++at)if(!(nt.stringData[at]&&typeof nt.stringData[at].length=="number"||ct.isString(nt.stringData[at])))return"stringData: buffer[] expected"}if(nt.int64Data!=null&&nt.hasOwnProperty("int64Data")){if(!Array.isArray(nt.int64Data))return"int64Data: array expected";for(at=0;at<nt.int64Data.length;++at)if(!(ct.isInteger(nt.int64Data[at])||nt.int64Data[at]&&ct.isInteger(nt.int64Data[at].low)&&ct.isInteger(nt.int64Data[at].high)))return"int64Data: integer|Long[] expected"}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString))return"docString: string expected";if(nt.rawData!=null&&nt.hasOwnProperty("rawData")&&!(nt.rawData&&typeof nt.rawData.length=="number"||ct.isString(nt.rawData)))return"rawData: buffer expected";if(nt.externalData!=null&&nt.hasOwnProperty("externalData")){if(!Array.isArray(nt.externalData))return"externalData: array expected";for(at=0;at<nt.externalData.length;++at){var lt;if(lt=ht.onnx.StringStringEntryProto.verify(nt.externalData[at]))return"externalData."+lt}}if(nt.dataLocation!=null&&nt.hasOwnProperty("dataLocation"))switch(nt.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(nt.doubleData!=null&&nt.hasOwnProperty("doubleData")){if(!Array.isArray(nt.doubleData))return"doubleData: array expected";for(at=0;at<nt.doubleData.length;++at)if(typeof nt.doubleData[at]!="number")return"doubleData: number[] expected"}if(nt.uint64Data!=null&&nt.hasOwnProperty("uint64Data")){if(!Array.isArray(nt.uint64Data))return"uint64Data: array expected";for(at=0;at<nt.uint64Data.length;++at)if(!(ct.isInteger(nt.uint64Data[at])||nt.uint64Data[at]&&ct.isInteger(nt.uint64Data[at].low)&&ct.isInteger(nt.uint64Data[at].high)))return"uint64Data: integer|Long[] expected"}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.TensorProto)return nt;var at=new ht.onnx.TensorProto;if(nt.dims){if(!Array.isArray(nt.dims))throw TypeError(".onnx.TensorProto.dims: array expected");at.dims=[];for(var lt=0;lt<nt.dims.length;++lt)ct.Long?(at.dims[lt]=ct.Long.fromValue(nt.dims[lt])).unsigned=!1:typeof nt.dims[lt]=="string"?at.dims[lt]=parseInt(nt.dims[lt],10):typeof nt.dims[lt]=="number"?at.dims[lt]=nt.dims[lt]:typeof nt.dims[lt]=="object"&&(at.dims[lt]=new ct.LongBits(nt.dims[lt].low>>>0,nt.dims[lt].high>>>0).toNumber())}if(nt.dataType!=null&&(at.dataType=0|nt.dataType),nt.segment!=null){if(typeof nt.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");at.segment=ht.onnx.TensorProto.Segment.fromObject(nt.segment)}if(nt.floatData){if(!Array.isArray(nt.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(at.floatData=[],lt=0;lt<nt.floatData.length;++lt)at.floatData[lt]=Number(nt.floatData[lt])}if(nt.int32Data){if(!Array.isArray(nt.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(at.int32Data=[],lt=0;lt<nt.int32Data.length;++lt)at.int32Data[lt]=0|nt.int32Data[lt]}if(nt.stringData){if(!Array.isArray(nt.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(at.stringData=[],lt=0;lt<nt.stringData.length;++lt)typeof nt.stringData[lt]=="string"?ct.base64.decode(nt.stringData[lt],at.stringData[lt]=ct.newBuffer(ct.base64.length(nt.stringData[lt])),0):nt.stringData[lt].length>=0&&(at.stringData[lt]=nt.stringData[lt])}if(nt.int64Data){if(!Array.isArray(nt.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(at.int64Data=[],lt=0;lt<nt.int64Data.length;++lt)ct.Long?(at.int64Data[lt]=ct.Long.fromValue(nt.int64Data[lt])).unsigned=!1:typeof nt.int64Data[lt]=="string"?at.int64Data[lt]=parseInt(nt.int64Data[lt],10):typeof nt.int64Data[lt]=="number"?at.int64Data[lt]=nt.int64Data[lt]:typeof nt.int64Data[lt]=="object"&&(at.int64Data[lt]=new ct.LongBits(nt.int64Data[lt].low>>>0,nt.int64Data[lt].high>>>0).toNumber())}if(nt.name!=null&&(at.name=String(nt.name)),nt.docString!=null&&(at.docString=String(nt.docString)),nt.rawData!=null&&(typeof nt.rawData=="string"?ct.base64.decode(nt.rawData,at.rawData=ct.newBuffer(ct.base64.length(nt.rawData)),0):nt.rawData.length>=0&&(at.rawData=nt.rawData)),nt.externalData){if(!Array.isArray(nt.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(at.externalData=[],lt=0;lt<nt.externalData.length;++lt){if(typeof nt.externalData[lt]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");at.externalData[lt]=ht.onnx.StringStringEntryProto.fromObject(nt.externalData[lt])}}switch(nt.dataLocation){default:if(typeof nt.dataLocation=="number"){at.dataLocation=nt.dataLocation;break}break;case"DEFAULT":case 0:at.dataLocation=0;break;case"EXTERNAL":case 1:at.dataLocation=1}if(nt.doubleData){if(!Array.isArray(nt.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(at.doubleData=[],lt=0;lt<nt.doubleData.length;++lt)at.doubleData[lt]=Number(nt.doubleData[lt])}if(nt.uint64Data){if(!Array.isArray(nt.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(at.uint64Data=[],lt=0;lt<nt.uint64Data.length;++lt)ct.Long?(at.uint64Data[lt]=ct.Long.fromValue(nt.uint64Data[lt])).unsigned=!0:typeof nt.uint64Data[lt]=="string"?at.uint64Data[lt]=parseInt(nt.uint64Data[lt],10):typeof nt.uint64Data[lt]=="number"?at.uint64Data[lt]=nt.uint64Data[lt]:typeof nt.uint64Data[lt]=="object"&&(at.uint64Data[lt]=new ct.LongBits(nt.uint64Data[lt].low>>>0,nt.uint64Data[lt].high>>>0).toNumber(!0))}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.dims=[],lt.floatData=[],lt.int32Data=[],lt.stringData=[],lt.int64Data=[],lt.doubleData=[],lt.uint64Data=[],lt.externalData=[]),at.defaults&&(lt.dataType=0,lt.segment=null,lt.name="",at.bytes===String?lt.rawData="":(lt.rawData=[],at.bytes!==Array&&(lt.rawData=ct.newBuffer(lt.rawData))),lt.docString="",lt.dataLocation=at.enums===String?"DEFAULT":0),nt.dims&&nt.dims.length){lt.dims=[];for(var dt=0;dt<nt.dims.length;++dt)typeof nt.dims[dt]=="number"?lt.dims[dt]=at.longs===String?String(nt.dims[dt]):nt.dims[dt]:lt.dims[dt]=at.longs===String?ct.Long.prototype.toString.call(nt.dims[dt]):at.longs===Number?new ct.LongBits(nt.dims[dt].low>>>0,nt.dims[dt].high>>>0).toNumber():nt.dims[dt]}if(nt.dataType!=null&&nt.hasOwnProperty("dataType")&&(lt.dataType=nt.dataType),nt.segment!=null&&nt.hasOwnProperty("segment")&&(lt.segment=ht.onnx.TensorProto.Segment.toObject(nt.segment,at)),nt.floatData&&nt.floatData.length)for(lt.floatData=[],dt=0;dt<nt.floatData.length;++dt)lt.floatData[dt]=at.json&&!isFinite(nt.floatData[dt])?String(nt.floatData[dt]):nt.floatData[dt];if(nt.int32Data&&nt.int32Data.length)for(lt.int32Data=[],dt=0;dt<nt.int32Data.length;++dt)lt.int32Data[dt]=nt.int32Data[dt];if(nt.stringData&&nt.stringData.length)for(lt.stringData=[],dt=0;dt<nt.stringData.length;++dt)lt.stringData[dt]=at.bytes===String?ct.base64.encode(nt.stringData[dt],0,nt.stringData[dt].length):at.bytes===Array?Array.prototype.slice.call(nt.stringData[dt]):nt.stringData[dt];if(nt.int64Data&&nt.int64Data.length)for(lt.int64Data=[],dt=0;dt<nt.int64Data.length;++dt)typeof nt.int64Data[dt]=="number"?lt.int64Data[dt]=at.longs===String?String(nt.int64Data[dt]):nt.int64Data[dt]:lt.int64Data[dt]=at.longs===String?ct.Long.prototype.toString.call(nt.int64Data[dt]):at.longs===Number?new ct.LongBits(nt.int64Data[dt].low>>>0,nt.int64Data[dt].high>>>0).toNumber():nt.int64Data[dt];if(nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.rawData!=null&&nt.hasOwnProperty("rawData")&&(lt.rawData=at.bytes===String?ct.base64.encode(nt.rawData,0,nt.rawData.length):at.bytes===Array?Array.prototype.slice.call(nt.rawData):nt.rawData),nt.doubleData&&nt.doubleData.length)for(lt.doubleData=[],dt=0;dt<nt.doubleData.length;++dt)lt.doubleData[dt]=at.json&&!isFinite(nt.doubleData[dt])?String(nt.doubleData[dt]):nt.doubleData[dt];if(nt.uint64Data&&nt.uint64Data.length)for(lt.uint64Data=[],dt=0;dt<nt.uint64Data.length;++dt)typeof nt.uint64Data[dt]=="number"?lt.uint64Data[dt]=at.longs===String?String(nt.uint64Data[dt]):nt.uint64Data[dt]:lt.uint64Data[dt]=at.longs===String?ct.Long.prototype.toString.call(nt.uint64Data[dt]):at.longs===Number?new ct.LongBits(nt.uint64Data[dt].low>>>0,nt.uint64Data[dt].high>>>0).toNumber(!0):nt.uint64Data[dt];if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.externalData&&nt.externalData.length)for(lt.externalData=[],dt=0;dt<nt.externalData.length;++dt)lt.externalData[dt]=ht.onnx.StringStringEntryProto.toObject(nt.externalData[dt],at);return nt.dataLocation!=null&&nt.hasOwnProperty("dataLocation")&&(lt.dataLocation=at.enums===String?ht.onnx.TensorProto.DataLocation[nt.dataLocation]===void 0?nt.dataLocation:ht.onnx.TensorProto.DataLocation[nt.dataLocation]:nt.dataLocation),lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.TensorProto"},ot.DataType=function(){var nt={},at=Object.create(nt);return at[nt[0]="UNDEFINED"]=0,at[nt[1]="FLOAT"]=1,at[nt[2]="UINT8"]=2,at[nt[3]="INT8"]=3,at[nt[4]="UINT16"]=4,at[nt[5]="INT16"]=5,at[nt[6]="INT32"]=6,at[nt[7]="INT64"]=7,at[nt[8]="STRING"]=8,at[nt[9]="BOOL"]=9,at[nt[10]="FLOAT16"]=10,at[nt[11]="DOUBLE"]=11,at[nt[12]="UINT32"]=12,at[nt[13]="UINT64"]=13,at[nt[14]="COMPLEX64"]=14,at[nt[15]="COMPLEX128"]=15,at[nt[16]="BFLOAT16"]=16,at[nt[17]="FLOAT8E4M3FN"]=17,at[nt[18]="FLOAT8E4M3FNUZ"]=18,at[nt[19]="FLOAT8E5M2"]=19,at[nt[20]="FLOAT8E5M2FNUZ"]=20,at}(),ot.Segment=function(){function nt(at){if(at)for(var lt=Object.keys(at),dt=0;dt<lt.length;++dt)at[lt[dt]]!=null&&(this[lt[dt]]=at[lt[dt]])}return nt.prototype.begin=ct.Long?ct.Long.fromBits(0,0,!1):0,nt.prototype.end=ct.Long?ct.Long.fromBits(0,0,!1):0,nt.create=function(at){return new nt(at)},nt.encode=function(at,lt){return lt||(lt=ut.create()),at.begin!=null&&Object.hasOwnProperty.call(at,"begin")&&lt.uint32(8).int64(at.begin),at.end!=null&&Object.hasOwnProperty.call(at,"end")&&lt.uint32(16).int64(at.end),lt},nt.encodeDelimited=function(at,lt){return this.encode(at,lt).ldelim()},nt.decode=function(at,lt){at instanceof At||(at=At.create(at));for(var dt=lt===void 0?at.len:at.pos+lt,ft=new ht.onnx.TensorProto.Segment;at.pos<dt;){var pt=at.uint32();switch(pt>>>3){case 1:ft.begin=at.int64();break;case 2:ft.end=at.int64();break;default:at.skipType(7&pt)}}return ft},nt.decodeDelimited=function(at){return at instanceof At||(at=new At(at)),this.decode(at,at.uint32())},nt.verify=function(at){return typeof at!="object"||at===null?"object expected":at.begin!=null&&at.hasOwnProperty("begin")&&!(ct.isInteger(at.begin)||at.begin&&ct.isInteger(at.begin.low)&&ct.isInteger(at.begin.high))?"begin: integer|Long expected":at.end!=null&&at.hasOwnProperty("end")&&!(ct.isInteger(at.end)||at.end&&ct.isInteger(at.end.low)&&ct.isInteger(at.end.high))?"end: integer|Long expected":null},nt.fromObject=function(at){if(at instanceof ht.onnx.TensorProto.Segment)return at;var lt=new ht.onnx.TensorProto.Segment;return at.begin!=null&&(ct.Long?(lt.begin=ct.Long.fromValue(at.begin)).unsigned=!1:typeof at.begin=="string"?lt.begin=parseInt(at.begin,10):typeof at.begin=="number"?lt.begin=at.begin:typeof at.begin=="object"&&(lt.begin=new ct.LongBits(at.begin.low>>>0,at.begin.high>>>0).toNumber())),at.end!=null&&(ct.Long?(lt.end=ct.Long.fromValue(at.end)).unsigned=!1:typeof at.end=="string"?lt.end=parseInt(at.end,10):typeof at.end=="number"?lt.end=at.end:typeof at.end=="object"&&(lt.end=new ct.LongBits(at.end.low>>>0,at.end.high>>>0).toNumber())),lt},nt.toObject=function(at,lt){lt||(lt={});var dt={};if(lt.defaults){if(ct.Long){var ft=new ct.Long(0,0,!1);dt.begin=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft}else dt.begin=lt.longs===String?"0":0;ct.Long?(ft=new ct.Long(0,0,!1),dt.end=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft):dt.end=lt.longs===String?"0":0}return at.begin!=null&&at.hasOwnProperty("begin")&&(typeof at.begin=="number"?dt.begin=lt.longs===String?String(at.begin):at.begin:dt.begin=lt.longs===String?ct.Long.prototype.toString.call(at.begin):lt.longs===Number?new ct.LongBits(at.begin.low>>>0,at.begin.high>>>0).toNumber():at.begin),at.end!=null&&at.hasOwnProperty("end")&&(typeof at.end=="number"?dt.end=lt.longs===String?String(at.end):at.end:dt.end=lt.longs===String?ct.Long.prototype.toString.call(at.end):lt.longs===Number?new ct.LongBits(at.end.low>>>0,at.end.high>>>0).toNumber():at.end),dt},nt.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},nt.getTypeUrl=function(at){return at===void 0&&(at="type.googleapis.com"),at+"/onnx.TensorProto.Segment"},nt}(),ot.DataLocation=function(){var nt={},at=Object.create(nt);return at[nt[0]="DEFAULT"]=0,at[nt[1]="EXTERNAL"]=1,at}(),ot}(),it.SparseTensorProto=function(){function ot(nt){if(this.dims=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.values=null,ot.prototype.indices=null,ot.prototype.dims=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.values!=null&&Object.hasOwnProperty.call(nt,"values")&&ht.onnx.TensorProto.encode(nt.values,at.uint32(10).fork()).ldelim(),nt.indices!=null&&Object.hasOwnProperty.call(nt,"indices")&&ht.onnx.TensorProto.encode(nt.indices,at.uint32(18).fork()).ldelim(),nt.dims!=null&&nt.dims.length){at.uint32(26).fork();for(var lt=0;lt<nt.dims.length;++lt)at.int64(nt.dims[lt]);at.ldelim()}return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.SparseTensorProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.values=ht.onnx.TensorProto.decode(nt,nt.uint32());break;case 2:dt.indices=ht.onnx.TensorProto.decode(nt,nt.uint32());break;case 3:if(dt.dims&&dt.dims.length||(dt.dims=[]),(7&ft)==2)for(var pt=nt.uint32()+nt.pos;nt.pos<pt;)dt.dims.push(nt.int64());else dt.dims.push(nt.int64());break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";var at;if(nt.values!=null&&nt.hasOwnProperty("values")&&(at=ht.onnx.TensorProto.verify(nt.values)))return"values."+at;if(nt.indices!=null&&nt.hasOwnProperty("indices")&&(at=ht.onnx.TensorProto.verify(nt.indices)))return"indices."+at;if(nt.dims!=null&&nt.hasOwnProperty("dims")){if(!Array.isArray(nt.dims))return"dims: array expected";for(var lt=0;lt<nt.dims.length;++lt)if(!(ct.isInteger(nt.dims[lt])||nt.dims[lt]&&ct.isInteger(nt.dims[lt].low)&&ct.isInteger(nt.dims[lt].high)))return"dims: integer|Long[] expected"}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.SparseTensorProto)return nt;var at=new ht.onnx.SparseTensorProto;if(nt.values!=null){if(typeof nt.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");at.values=ht.onnx.TensorProto.fromObject(nt.values)}if(nt.indices!=null){if(typeof nt.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");at.indices=ht.onnx.TensorProto.fromObject(nt.indices)}if(nt.dims){if(!Array.isArray(nt.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");at.dims=[];for(var lt=0;lt<nt.dims.length;++lt)ct.Long?(at.dims[lt]=ct.Long.fromValue(nt.dims[lt])).unsigned=!1:typeof nt.dims[lt]=="string"?at.dims[lt]=parseInt(nt.dims[lt],10):typeof nt.dims[lt]=="number"?at.dims[lt]=nt.dims[lt]:typeof nt.dims[lt]=="object"&&(at.dims[lt]=new ct.LongBits(nt.dims[lt].low>>>0,nt.dims[lt].high>>>0).toNumber())}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.dims=[]),at.defaults&&(lt.values=null,lt.indices=null),nt.values!=null&&nt.hasOwnProperty("values")&&(lt.values=ht.onnx.TensorProto.toObject(nt.values,at)),nt.indices!=null&&nt.hasOwnProperty("indices")&&(lt.indices=ht.onnx.TensorProto.toObject(nt.indices,at)),nt.dims&&nt.dims.length){lt.dims=[];for(var dt=0;dt<nt.dims.length;++dt)typeof nt.dims[dt]=="number"?lt.dims[dt]=at.longs===String?String(nt.dims[dt]):nt.dims[dt]:lt.dims[dt]=at.longs===String?ct.Long.prototype.toString.call(nt.dims[dt]):at.longs===Number?new ct.LongBits(nt.dims[dt].low>>>0,nt.dims[dt].high>>>0).toNumber():nt.dims[dt]}return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.SparseTensorProto"},ot}(),it.TensorShapeProto=function(){function ot(nt){if(this.dim=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.dim=ct.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.dim!=null&&nt.dim.length)for(var lt=0;lt<nt.dim.length;++lt)ht.onnx.TensorShapeProto.Dimension.encode(nt.dim[lt],at.uint32(10).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.TensorShapeProto;nt.pos<lt;){var ft=nt.uint32();ft>>>3==1?(dt.dim&&dt.dim.length||(dt.dim=[]),dt.dim.push(ht.onnx.TensorShapeProto.Dimension.decode(nt,nt.uint32()))):nt.skipType(7&ft)}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.dim!=null&&nt.hasOwnProperty("dim")){if(!Array.isArray(nt.dim))return"dim: array expected";for(var at=0;at<nt.dim.length;++at){var lt=ht.onnx.TensorShapeProto.Dimension.verify(nt.dim[at]);if(lt)return"dim."+lt}}return null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.TensorShapeProto)return nt;var at=new ht.onnx.TensorShapeProto;if(nt.dim){if(!Array.isArray(nt.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");at.dim=[];for(var lt=0;lt<nt.dim.length;++lt){if(typeof nt.dim[lt]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");at.dim[lt]=ht.onnx.TensorShapeProto.Dimension.fromObject(nt.dim[lt])}}return at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.dim=[]),nt.dim&&nt.dim.length){lt.dim=[];for(var dt=0;dt<nt.dim.length;++dt)lt.dim[dt]=ht.onnx.TensorShapeProto.Dimension.toObject(nt.dim[dt],at)}return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.TensorShapeProto"},ot.Dimension=function(){function nt(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}var at;return nt.prototype.dimValue=null,nt.prototype.dimParam=null,nt.prototype.denotation="",Object.defineProperty(nt.prototype,"value",{get:ct.oneOfGetter(at=["dimValue","dimParam"]),set:ct.oneOfSetter(at)}),nt.create=function(lt){return new nt(lt)},nt.encode=function(lt,dt){return dt||(dt=ut.create()),lt.dimValue!=null&&Object.hasOwnProperty.call(lt,"dimValue")&&dt.uint32(8).int64(lt.dimValue),lt.dimParam!=null&&Object.hasOwnProperty.call(lt,"dimParam")&&dt.uint32(18).string(lt.dimParam),lt.denotation!=null&&Object.hasOwnProperty.call(lt,"denotation")&&dt.uint32(26).string(lt.denotation),dt},nt.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},nt.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TensorShapeProto.Dimension;lt.pos<ft;){var gt=lt.uint32();switch(gt>>>3){case 1:pt.dimValue=lt.int64();break;case 2:pt.dimParam=lt.string();break;case 3:pt.denotation=lt.string();break;default:lt.skipType(7&gt)}}return pt},nt.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},nt.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";var dt={};if(lt.dimValue!=null&&lt.hasOwnProperty("dimValue")&&(dt.value=1,!(ct.isInteger(lt.dimValue)||lt.dimValue&&ct.isInteger(lt.dimValue.low)&&ct.isInteger(lt.dimValue.high))))return"dimValue: integer|Long expected";if(lt.dimParam!=null&&lt.hasOwnProperty("dimParam")){if(dt.value===1)return"value: multiple values";if(dt.value=1,!ct.isString(lt.dimParam))return"dimParam: string expected"}return lt.denotation!=null&&lt.hasOwnProperty("denotation")&&!ct.isString(lt.denotation)?"denotation: string expected":null},nt.fromObject=function(lt){if(lt instanceof ht.onnx.TensorShapeProto.Dimension)return lt;var dt=new ht.onnx.TensorShapeProto.Dimension;return lt.dimValue!=null&&(ct.Long?(dt.dimValue=ct.Long.fromValue(lt.dimValue)).unsigned=!1:typeof lt.dimValue=="string"?dt.dimValue=parseInt(lt.dimValue,10):typeof lt.dimValue=="number"?dt.dimValue=lt.dimValue:typeof lt.dimValue=="object"&&(dt.dimValue=new ct.LongBits(lt.dimValue.low>>>0,lt.dimValue.high>>>0).toNumber())),lt.dimParam!=null&&(dt.dimParam=String(lt.dimParam)),lt.denotation!=null&&(dt.denotation=String(lt.denotation)),dt},nt.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.denotation=""),lt.dimValue!=null&&lt.hasOwnProperty("dimValue")&&(typeof lt.dimValue=="number"?ft.dimValue=dt.longs===String?String(lt.dimValue):lt.dimValue:ft.dimValue=dt.longs===String?ct.Long.prototype.toString.call(lt.dimValue):dt.longs===Number?new ct.LongBits(lt.dimValue.low>>>0,lt.dimValue.high>>>0).toNumber():lt.dimValue,dt.oneofs&&(ft.value="dimValue")),lt.dimParam!=null&&lt.hasOwnProperty("dimParam")&&(ft.dimParam=lt.dimParam,dt.oneofs&&(ft.value="dimParam")),lt.denotation!=null&&lt.hasOwnProperty("denotation")&&(ft.denotation=lt.denotation),ft},nt.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},nt.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TensorShapeProto.Dimension"},nt}(),ot}(),it.TypeProto=function(){function ot(at){if(at)for(var lt=Object.keys(at),dt=0;dt<lt.length;++dt)at[lt[dt]]!=null&&(this[lt[dt]]=at[lt[dt]])}var nt;return ot.prototype.tensorType=null,ot.prototype.sequenceType=null,ot.prototype.mapType=null,ot.prototype.optionalType=null,ot.prototype.sparseTensorType=null,ot.prototype.denotation="",Object.defineProperty(ot.prototype,"value",{get:ct.oneOfGetter(nt=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:ct.oneOfSetter(nt)}),ot.create=function(at){return new ot(at)},ot.encode=function(at,lt){return lt||(lt=ut.create()),at.tensorType!=null&&Object.hasOwnProperty.call(at,"tensorType")&&ht.onnx.TypeProto.Tensor.encode(at.tensorType,lt.uint32(10).fork()).ldelim(),at.sequenceType!=null&&Object.hasOwnProperty.call(at,"sequenceType")&&ht.onnx.TypeProto.Sequence.encode(at.sequenceType,lt.uint32(34).fork()).ldelim(),at.mapType!=null&&Object.hasOwnProperty.call(at,"mapType")&&ht.onnx.TypeProto.Map.encode(at.mapType,lt.uint32(42).fork()).ldelim(),at.denotation!=null&&Object.hasOwnProperty.call(at,"denotation")&&lt.uint32(50).string(at.denotation),at.sparseTensorType!=null&&Object.hasOwnProperty.call(at,"sparseTensorType")&&ht.onnx.TypeProto.SparseTensor.encode(at.sparseTensorType,lt.uint32(66).fork()).ldelim(),at.optionalType!=null&&Object.hasOwnProperty.call(at,"optionalType")&&ht.onnx.TypeProto.Optional.encode(at.optionalType,lt.uint32(74).fork()).ldelim(),lt},ot.encodeDelimited=function(at,lt){return this.encode(at,lt).ldelim()},ot.decode=function(at,lt){at instanceof At||(at=At.create(at));for(var dt=lt===void 0?at.len:at.pos+lt,ft=new ht.onnx.TypeProto;at.pos<dt;){var pt=at.uint32();switch(pt>>>3){case 1:ft.tensorType=ht.onnx.TypeProto.Tensor.decode(at,at.uint32());break;case 4:ft.sequenceType=ht.onnx.TypeProto.Sequence.decode(at,at.uint32());break;case 5:ft.mapType=ht.onnx.TypeProto.Map.decode(at,at.uint32());break;case 9:ft.optionalType=ht.onnx.TypeProto.Optional.decode(at,at.uint32());break;case 8:ft.sparseTensorType=ht.onnx.TypeProto.SparseTensor.decode(at,at.uint32());break;case 6:ft.denotation=at.string();break;default:at.skipType(7&pt)}}return ft},ot.decodeDelimited=function(at){return at instanceof At||(at=new At(at)),this.decode(at,at.uint32())},ot.verify=function(at){if(typeof at!="object"||at===null)return"object expected";var lt={};if(at.tensorType!=null&&at.hasOwnProperty("tensorType")&&(lt.value=1,dt=ht.onnx.TypeProto.Tensor.verify(at.tensorType)))return"tensorType."+dt;if(at.sequenceType!=null&&at.hasOwnProperty("sequenceType")){if(lt.value===1)return"value: multiple values";if(lt.value=1,dt=ht.onnx.TypeProto.Sequence.verify(at.sequenceType))return"sequenceType."+dt}if(at.mapType!=null&&at.hasOwnProperty("mapType")){if(lt.value===1)return"value: multiple values";if(lt.value=1,dt=ht.onnx.TypeProto.Map.verify(at.mapType))return"mapType."+dt}if(at.optionalType!=null&&at.hasOwnProperty("optionalType")){if(lt.value===1)return"value: multiple values";if(lt.value=1,dt=ht.onnx.TypeProto.Optional.verify(at.optionalType))return"optionalType."+dt}if(at.sparseTensorType!=null&&at.hasOwnProperty("sparseTensorType")){if(lt.value===1)return"value: multiple values";var dt;if(lt.value=1,dt=ht.onnx.TypeProto.SparseTensor.verify(at.sparseTensorType))return"sparseTensorType."+dt}return at.denotation!=null&&at.hasOwnProperty("denotation")&&!ct.isString(at.denotation)?"denotation: string expected":null},ot.fromObject=function(at){if(at instanceof ht.onnx.TypeProto)return at;var lt=new ht.onnx.TypeProto;if(at.tensorType!=null){if(typeof at.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");lt.tensorType=ht.onnx.TypeProto.Tensor.fromObject(at.tensorType)}if(at.sequenceType!=null){if(typeof at.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");lt.sequenceType=ht.onnx.TypeProto.Sequence.fromObject(at.sequenceType)}if(at.mapType!=null){if(typeof at.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");lt.mapType=ht.onnx.TypeProto.Map.fromObject(at.mapType)}if(at.optionalType!=null){if(typeof at.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");lt.optionalType=ht.onnx.TypeProto.Optional.fromObject(at.optionalType)}if(at.sparseTensorType!=null){if(typeof at.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");lt.sparseTensorType=ht.onnx.TypeProto.SparseTensor.fromObject(at.sparseTensorType)}return at.denotation!=null&&(lt.denotation=String(at.denotation)),lt},ot.toObject=function(at,lt){lt||(lt={});var dt={};return lt.defaults&&(dt.denotation=""),at.tensorType!=null&&at.hasOwnProperty("tensorType")&&(dt.tensorType=ht.onnx.TypeProto.Tensor.toObject(at.tensorType,lt),lt.oneofs&&(dt.value="tensorType")),at.sequenceType!=null&&at.hasOwnProperty("sequenceType")&&(dt.sequenceType=ht.onnx.TypeProto.Sequence.toObject(at.sequenceType,lt),lt.oneofs&&(dt.value="sequenceType")),at.mapType!=null&&at.hasOwnProperty("mapType")&&(dt.mapType=ht.onnx.TypeProto.Map.toObject(at.mapType,lt),lt.oneofs&&(dt.value="mapType")),at.denotation!=null&&at.hasOwnProperty("denotation")&&(dt.denotation=at.denotation),at.sparseTensorType!=null&&at.hasOwnProperty("sparseTensorType")&&(dt.sparseTensorType=ht.onnx.TypeProto.SparseTensor.toObject(at.sparseTensorType,lt),lt.oneofs&&(dt.value="sparseTensorType")),at.optionalType!=null&&at.hasOwnProperty("optionalType")&&(dt.optionalType=ht.onnx.TypeProto.Optional.toObject(at.optionalType,lt),lt.oneofs&&(dt.value="optionalType")),dt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(at){return at===void 0&&(at="type.googleapis.com"),at+"/onnx.TypeProto"},ot.Tensor=function(){function at(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}return at.prototype.elemType=0,at.prototype.shape=null,at.create=function(lt){return new at(lt)},at.encode=function(lt,dt){return dt||(dt=ut.create()),lt.elemType!=null&&Object.hasOwnProperty.call(lt,"elemType")&&dt.uint32(8).int32(lt.elemType),lt.shape!=null&&Object.hasOwnProperty.call(lt,"shape")&&ht.onnx.TensorShapeProto.encode(lt.shape,dt.uint32(18).fork()).ldelim(),dt},at.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},at.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TypeProto.Tensor;lt.pos<ft;){var gt=lt.uint32();switch(gt>>>3){case 1:pt.elemType=lt.int32();break;case 2:pt.shape=ht.onnx.TensorShapeProto.decode(lt,lt.uint32());break;default:lt.skipType(7&gt)}}return pt},at.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},at.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.elemType!=null&&lt.hasOwnProperty("elemType")&&!ct.isInteger(lt.elemType))return"elemType: integer expected";if(lt.shape!=null&&lt.hasOwnProperty("shape")){var dt=ht.onnx.TensorShapeProto.verify(lt.shape);if(dt)return"shape."+dt}return null},at.fromObject=function(lt){if(lt instanceof ht.onnx.TypeProto.Tensor)return lt;var dt=new ht.onnx.TypeProto.Tensor;if(lt.elemType!=null&&(dt.elemType=0|lt.elemType),lt.shape!=null){if(typeof lt.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");dt.shape=ht.onnx.TensorShapeProto.fromObject(lt.shape)}return dt},at.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.elemType=0,ft.shape=null),lt.elemType!=null&&lt.hasOwnProperty("elemType")&&(ft.elemType=lt.elemType),lt.shape!=null&&lt.hasOwnProperty("shape")&&(ft.shape=ht.onnx.TensorShapeProto.toObject(lt.shape,dt)),ft},at.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},at.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TypeProto.Tensor"},at}(),ot.Sequence=function(){function at(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}return at.prototype.elemType=null,at.create=function(lt){return new at(lt)},at.encode=function(lt,dt){return dt||(dt=ut.create()),lt.elemType!=null&&Object.hasOwnProperty.call(lt,"elemType")&&ht.onnx.TypeProto.encode(lt.elemType,dt.uint32(10).fork()).ldelim(),dt},at.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},at.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TypeProto.Sequence;lt.pos<ft;){var gt=lt.uint32();gt>>>3==1?pt.elemType=ht.onnx.TypeProto.decode(lt,lt.uint32()):lt.skipType(7&gt)}return pt},at.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},at.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.elemType!=null&&lt.hasOwnProperty("elemType")){var dt=ht.onnx.TypeProto.verify(lt.elemType);if(dt)return"elemType."+dt}return null},at.fromObject=function(lt){if(lt instanceof ht.onnx.TypeProto.Sequence)return lt;var dt=new ht.onnx.TypeProto.Sequence;if(lt.elemType!=null){if(typeof lt.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");dt.elemType=ht.onnx.TypeProto.fromObject(lt.elemType)}return dt},at.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.elemType=null),lt.elemType!=null&&lt.hasOwnProperty("elemType")&&(ft.elemType=ht.onnx.TypeProto.toObject(lt.elemType,dt)),ft},at.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},at.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TypeProto.Sequence"},at}(),ot.Map=function(){function at(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}return at.prototype.keyType=0,at.prototype.valueType=null,at.create=function(lt){return new at(lt)},at.encode=function(lt,dt){return dt||(dt=ut.create()),lt.keyType!=null&&Object.hasOwnProperty.call(lt,"keyType")&&dt.uint32(8).int32(lt.keyType),lt.valueType!=null&&Object.hasOwnProperty.call(lt,"valueType")&&ht.onnx.TypeProto.encode(lt.valueType,dt.uint32(18).fork()).ldelim(),dt},at.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},at.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TypeProto.Map;lt.pos<ft;){var gt=lt.uint32();switch(gt>>>3){case 1:pt.keyType=lt.int32();break;case 2:pt.valueType=ht.onnx.TypeProto.decode(lt,lt.uint32());break;default:lt.skipType(7&gt)}}return pt},at.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},at.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.keyType!=null&&lt.hasOwnProperty("keyType")&&!ct.isInteger(lt.keyType))return"keyType: integer expected";if(lt.valueType!=null&&lt.hasOwnProperty("valueType")){var dt=ht.onnx.TypeProto.verify(lt.valueType);if(dt)return"valueType."+dt}return null},at.fromObject=function(lt){if(lt instanceof ht.onnx.TypeProto.Map)return lt;var dt=new ht.onnx.TypeProto.Map;if(lt.keyType!=null&&(dt.keyType=0|lt.keyType),lt.valueType!=null){if(typeof lt.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");dt.valueType=ht.onnx.TypeProto.fromObject(lt.valueType)}return dt},at.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.keyType=0,ft.valueType=null),lt.keyType!=null&&lt.hasOwnProperty("keyType")&&(ft.keyType=lt.keyType),lt.valueType!=null&&lt.hasOwnProperty("valueType")&&(ft.valueType=ht.onnx.TypeProto.toObject(lt.valueType,dt)),ft},at.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},at.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TypeProto.Map"},at}(),ot.Optional=function(){function at(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}return at.prototype.elemType=null,at.create=function(lt){return new at(lt)},at.encode=function(lt,dt){return dt||(dt=ut.create()),lt.elemType!=null&&Object.hasOwnProperty.call(lt,"elemType")&&ht.onnx.TypeProto.encode(lt.elemType,dt.uint32(10).fork()).ldelim(),dt},at.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},at.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TypeProto.Optional;lt.pos<ft;){var gt=lt.uint32();gt>>>3==1?pt.elemType=ht.onnx.TypeProto.decode(lt,lt.uint32()):lt.skipType(7&gt)}return pt},at.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},at.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.elemType!=null&&lt.hasOwnProperty("elemType")){var dt=ht.onnx.TypeProto.verify(lt.elemType);if(dt)return"elemType."+dt}return null},at.fromObject=function(lt){if(lt instanceof ht.onnx.TypeProto.Optional)return lt;var dt=new ht.onnx.TypeProto.Optional;if(lt.elemType!=null){if(typeof lt.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");dt.elemType=ht.onnx.TypeProto.fromObject(lt.elemType)}return dt},at.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.elemType=null),lt.elemType!=null&&lt.hasOwnProperty("elemType")&&(ft.elemType=ht.onnx.TypeProto.toObject(lt.elemType,dt)),ft},at.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},at.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TypeProto.Optional"},at}(),ot.SparseTensor=function(){function at(lt){if(lt)for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)lt[dt[ft]]!=null&&(this[dt[ft]]=lt[dt[ft]])}return at.prototype.elemType=0,at.prototype.shape=null,at.create=function(lt){return new at(lt)},at.encode=function(lt,dt){return dt||(dt=ut.create()),lt.elemType!=null&&Object.hasOwnProperty.call(lt,"elemType")&&dt.uint32(8).int32(lt.elemType),lt.shape!=null&&Object.hasOwnProperty.call(lt,"shape")&&ht.onnx.TensorShapeProto.encode(lt.shape,dt.uint32(18).fork()).ldelim(),dt},at.encodeDelimited=function(lt,dt){return this.encode(lt,dt).ldelim()},at.decode=function(lt,dt){lt instanceof At||(lt=At.create(lt));for(var ft=dt===void 0?lt.len:lt.pos+dt,pt=new ht.onnx.TypeProto.SparseTensor;lt.pos<ft;){var gt=lt.uint32();switch(gt>>>3){case 1:pt.elemType=lt.int32();break;case 2:pt.shape=ht.onnx.TensorShapeProto.decode(lt,lt.uint32());break;default:lt.skipType(7&gt)}}return pt},at.decodeDelimited=function(lt){return lt instanceof At||(lt=new At(lt)),this.decode(lt,lt.uint32())},at.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.elemType!=null&&lt.hasOwnProperty("elemType")&&!ct.isInteger(lt.elemType))return"elemType: integer expected";if(lt.shape!=null&&lt.hasOwnProperty("shape")){var dt=ht.onnx.TensorShapeProto.verify(lt.shape);if(dt)return"shape."+dt}return null},at.fromObject=function(lt){if(lt instanceof ht.onnx.TypeProto.SparseTensor)return lt;var dt=new ht.onnx.TypeProto.SparseTensor;if(lt.elemType!=null&&(dt.elemType=0|lt.elemType),lt.shape!=null){if(typeof lt.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");dt.shape=ht.onnx.TensorShapeProto.fromObject(lt.shape)}return dt},at.toObject=function(lt,dt){dt||(dt={});var ft={};return dt.defaults&&(ft.elemType=0,ft.shape=null),lt.elemType!=null&&lt.hasOwnProperty("elemType")&&(ft.elemType=lt.elemType),lt.shape!=null&&lt.hasOwnProperty("shape")&&(ft.shape=ht.onnx.TensorShapeProto.toObject(lt.shape,dt)),ft},at.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},at.getTypeUrl=function(lt){return lt===void 0&&(lt="type.googleapis.com"),lt+"/onnx.TypeProto.SparseTensor"},at}(),ot}(),it.OperatorSetIdProto=function(){function ot(nt){if(nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.domain="",ot.prototype.version=ct.Long?ct.Long.fromBits(0,0,!1):0,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){return at||(at=ut.create()),nt.domain!=null&&Object.hasOwnProperty.call(nt,"domain")&&at.uint32(10).string(nt.domain),nt.version!=null&&Object.hasOwnProperty.call(nt,"version")&&at.uint32(16).int64(nt.version),at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.OperatorSetIdProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.domain=nt.string();break;case 2:dt.version=nt.int64();break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.domain!=null&&nt.hasOwnProperty("domain")&&!ct.isString(nt.domain)?"domain: string expected":nt.version!=null&&nt.hasOwnProperty("version")&&!(ct.isInteger(nt.version)||nt.version&&ct.isInteger(nt.version.low)&&ct.isInteger(nt.version.high))?"version: integer|Long expected":null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.OperatorSetIdProto)return nt;var at=new ht.onnx.OperatorSetIdProto;return nt.domain!=null&&(at.domain=String(nt.domain)),nt.version!=null&&(ct.Long?(at.version=ct.Long.fromValue(nt.version)).unsigned=!1:typeof nt.version=="string"?at.version=parseInt(nt.version,10):typeof nt.version=="number"?at.version=nt.version:typeof nt.version=="object"&&(at.version=new ct.LongBits(nt.version.low>>>0,nt.version.high>>>0).toNumber())),at},ot.toObject=function(nt,at){at||(at={});var lt={};if(at.defaults)if(lt.domain="",ct.Long){var dt=new ct.Long(0,0,!1);lt.version=at.longs===String?dt.toString():at.longs===Number?dt.toNumber():dt}else lt.version=at.longs===String?"0":0;return nt.domain!=null&&nt.hasOwnProperty("domain")&&(lt.domain=nt.domain),nt.version!=null&&nt.hasOwnProperty("version")&&(typeof nt.version=="number"?lt.version=at.longs===String?String(nt.version):nt.version:lt.version=at.longs===String?ct.Long.prototype.toString.call(nt.version):at.longs===Number?new ct.LongBits(nt.version.low>>>0,nt.version.high>>>0).toNumber():nt.version),lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.OperatorSetIdProto"},ot}(),it.OperatorStatus=function(){var ot={},nt=Object.create(ot);return nt[ot[0]="EXPERIMENTAL"]=0,nt[ot[1]="STABLE"]=1,nt}(),it.FunctionProto=function(){function ot(nt){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)nt[at[lt]]!=null&&(this[at[lt]]=nt[at[lt]])}return ot.prototype.name="",ot.prototype.input=ct.emptyArray,ot.prototype.output=ct.emptyArray,ot.prototype.attribute=ct.emptyArray,ot.prototype.attributeProto=ct.emptyArray,ot.prototype.node=ct.emptyArray,ot.prototype.docString="",ot.prototype.opsetImport=ct.emptyArray,ot.prototype.domain="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,at){if(at||(at=ut.create()),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&at.uint32(10).string(nt.name),nt.input!=null&&nt.input.length)for(var lt=0;lt<nt.input.length;++lt)at.uint32(34).string(nt.input[lt]);if(nt.output!=null&&nt.output.length)for(lt=0;lt<nt.output.length;++lt)at.uint32(42).string(nt.output[lt]);if(nt.attribute!=null&&nt.attribute.length)for(lt=0;lt<nt.attribute.length;++lt)at.uint32(50).string(nt.attribute[lt]);if(nt.node!=null&&nt.node.length)for(lt=0;lt<nt.node.length;++lt)ht.onnx.NodeProto.encode(nt.node[lt],at.uint32(58).fork()).ldelim();if(nt.docString!=null&&Object.hasOwnProperty.call(nt,"docString")&&at.uint32(66).string(nt.docString),nt.opsetImport!=null&&nt.opsetImport.length)for(lt=0;lt<nt.opsetImport.length;++lt)ht.onnx.OperatorSetIdProto.encode(nt.opsetImport[lt],at.uint32(74).fork()).ldelim();if(nt.domain!=null&&Object.hasOwnProperty.call(nt,"domain")&&at.uint32(82).string(nt.domain),nt.attributeProto!=null&&nt.attributeProto.length)for(lt=0;lt<nt.attributeProto.length;++lt)ht.onnx.AttributeProto.encode(nt.attributeProto[lt],at.uint32(90).fork()).ldelim();return at},ot.encodeDelimited=function(nt,at){return this.encode(nt,at).ldelim()},ot.decode=function(nt,at){nt instanceof At||(nt=At.create(nt));for(var lt=at===void 0?nt.len:nt.pos+at,dt=new ht.onnx.FunctionProto;nt.pos<lt;){var ft=nt.uint32();switch(ft>>>3){case 1:dt.name=nt.string();break;case 4:dt.input&&dt.input.length||(dt.input=[]),dt.input.push(nt.string());break;case 5:dt.output&&dt.output.length||(dt.output=[]),dt.output.push(nt.string());break;case 6:dt.attribute&&dt.attribute.length||(dt.attribute=[]),dt.attribute.push(nt.string());break;case 11:dt.attributeProto&&dt.attributeProto.length||(dt.attributeProto=[]),dt.attributeProto.push(ht.onnx.AttributeProto.decode(nt,nt.uint32()));break;case 7:dt.node&&dt.node.length||(dt.node=[]),dt.node.push(ht.onnx.NodeProto.decode(nt,nt.uint32()));break;case 8:dt.docString=nt.string();break;case 9:dt.opsetImport&&dt.opsetImport.length||(dt.opsetImport=[]),dt.opsetImport.push(ht.onnx.OperatorSetIdProto.decode(nt,nt.uint32()));break;case 10:dt.domain=nt.string();break;default:nt.skipType(7&ft)}}return dt},ot.decodeDelimited=function(nt){return nt instanceof At||(nt=new At(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!ct.isString(nt.name))return"name: string expected";if(nt.input!=null&&nt.hasOwnProperty("input")){if(!Array.isArray(nt.input))return"input: array expected";for(var at=0;at<nt.input.length;++at)if(!ct.isString(nt.input[at]))return"input: string[] expected"}if(nt.output!=null&&nt.hasOwnProperty("output")){if(!Array.isArray(nt.output))return"output: array expected";for(at=0;at<nt.output.length;++at)if(!ct.isString(nt.output[at]))return"output: string[] expected"}if(nt.attribute!=null&&nt.hasOwnProperty("attribute")){if(!Array.isArray(nt.attribute))return"attribute: array expected";for(at=0;at<nt.attribute.length;++at)if(!ct.isString(nt.attribute[at]))return"attribute: string[] expected"}if(nt.attributeProto!=null&&nt.hasOwnProperty("attributeProto")){if(!Array.isArray(nt.attributeProto))return"attributeProto: array expected";for(at=0;at<nt.attributeProto.length;++at)if(lt=ht.onnx.AttributeProto.verify(nt.attributeProto[at]))return"attributeProto."+lt}if(nt.node!=null&&nt.hasOwnProperty("node")){if(!Array.isArray(nt.node))return"node: array expected";for(at=0;at<nt.node.length;++at)if(lt=ht.onnx.NodeProto.verify(nt.node[at]))return"node."+lt}if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ct.isString(nt.docString))return"docString: string expected";if(nt.opsetImport!=null&&nt.hasOwnProperty("opsetImport")){if(!Array.isArray(nt.opsetImport))return"opsetImport: array expected";for(at=0;at<nt.opsetImport.length;++at){var lt;if(lt=ht.onnx.OperatorSetIdProto.verify(nt.opsetImport[at]))return"opsetImport."+lt}}return nt.domain!=null&&nt.hasOwnProperty("domain")&&!ct.isString(nt.domain)?"domain: string expected":null},ot.fromObject=function(nt){if(nt instanceof ht.onnx.FunctionProto)return nt;var at=new ht.onnx.FunctionProto;if(nt.name!=null&&(at.name=String(nt.name)),nt.input){if(!Array.isArray(nt.input))throw TypeError(".onnx.FunctionProto.input: array expected");at.input=[];for(var lt=0;lt<nt.input.length;++lt)at.input[lt]=String(nt.input[lt])}if(nt.output){if(!Array.isArray(nt.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(at.output=[],lt=0;lt<nt.output.length;++lt)at.output[lt]=String(nt.output[lt])}if(nt.attribute){if(!Array.isArray(nt.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(at.attribute=[],lt=0;lt<nt.attribute.length;++lt)at.attribute[lt]=String(nt.attribute[lt])}if(nt.attributeProto){if(!Array.isArray(nt.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(at.attributeProto=[],lt=0;lt<nt.attributeProto.length;++lt){if(typeof nt.attributeProto[lt]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");at.attributeProto[lt]=ht.onnx.AttributeProto.fromObject(nt.attributeProto[lt])}}if(nt.node){if(!Array.isArray(nt.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(at.node=[],lt=0;lt<nt.node.length;++lt){if(typeof nt.node[lt]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");at.node[lt]=ht.onnx.NodeProto.fromObject(nt.node[lt])}}if(nt.docString!=null&&(at.docString=String(nt.docString)),nt.opsetImport){if(!Array.isArray(nt.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(at.opsetImport=[],lt=0;lt<nt.opsetImport.length;++lt){if(typeof nt.opsetImport[lt]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");at.opsetImport[lt]=ht.onnx.OperatorSetIdProto.fromObject(nt.opsetImport[lt])}}return nt.domain!=null&&(at.domain=String(nt.domain)),at},ot.toObject=function(nt,at){at||(at={});var lt={};if((at.arrays||at.defaults)&&(lt.input=[],lt.output=[],lt.attribute=[],lt.node=[],lt.opsetImport=[],lt.attributeProto=[]),at.defaults&&(lt.name="",lt.docString="",lt.domain=""),nt.name!=null&&nt.hasOwnProperty("name")&&(lt.name=nt.name),nt.input&&nt.input.length){lt.input=[];for(var dt=0;dt<nt.input.length;++dt)lt.input[dt]=nt.input[dt]}if(nt.output&&nt.output.length)for(lt.output=[],dt=0;dt<nt.output.length;++dt)lt.output[dt]=nt.output[dt];if(nt.attribute&&nt.attribute.length)for(lt.attribute=[],dt=0;dt<nt.attribute.length;++dt)lt.attribute[dt]=nt.attribute[dt];if(nt.node&&nt.node.length)for(lt.node=[],dt=0;dt<nt.node.length;++dt)lt.node[dt]=ht.onnx.NodeProto.toObject(nt.node[dt],at);if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(lt.docString=nt.docString),nt.opsetImport&&nt.opsetImport.length)for(lt.opsetImport=[],dt=0;dt<nt.opsetImport.length;++dt)lt.opsetImport[dt]=ht.onnx.OperatorSetIdProto.toObject(nt.opsetImport[dt],at);if(nt.domain!=null&&nt.hasOwnProperty("domain")&&(lt.domain=nt.domain),nt.attributeProto&&nt.attributeProto.length)for(lt.attributeProto=[],dt=0;dt<nt.attributeProto.length;++dt)lt.attributeProto[dt]=ht.onnx.AttributeProto.toObject(nt.attributeProto[dt],at);return lt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/onnx.FunctionProto"},ot}(),it),et.exports=ht},3474:(et,_,_e)=>{var tt,rt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(tt=tt||__filename),function(it={}){function st(){return Lt.buffer!=Gt.buffer&&Ar(),Gt}function At(){return Lt.buffer!=Gt.buffer&&Ar(),Wt}function ut(){return Lt.buffer!=Gt.buffer&&Ar(),Xt}function ct(){return Lt.buffer!=Gt.buffer&&Ar(),Yt}function ht(){return Lt.buffer!=Gt.buffer&&Ar(),Zt}var ot,nt,at=it;at.ready=new Promise((Et,Pt)=>{ot=Et,nt=Pt});var lt,dt,ft,pt=Object.assign({},at),gt="./this.program",mt=(Et,Pt)=>{throw Pt},yt=typeof window=="object",vt=typeof importScripts=="function",wt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",bt=at.ENVIRONMENT_IS_PTHREAD||!1,Bt="";function Tt(Et){return at.locateFile?at.locateFile(Et,Bt):Bt+Et}if(wt){var It=_e(1384),Dt=_e(908);let Et;Bt=vt?Dt.dirname(Bt)+"/":__dirname+"/",lt=(Pt,kt)=>(Pt=Pt.startsWith("file://")?new URL(Pt):Dt.normalize(Pt),It.readFileSync(Pt,kt?void 0:"utf8")),ft=Pt=>((Pt=lt(Pt,!0)).buffer||(Pt=new Uint8Array(Pt)),Pt),dt=(Pt,kt,$t,Vt=!0)=>{Pt=Pt.startsWith("file://")?new URL(Pt):Dt.normalize(Pt),It.readFile(Pt,Vt?void 0:"utf8",(Jt,nr)=>{Jt?$t(Jt):kt(Vt?nr.buffer:nr)})},!at.thisProgram&&1<process.argv.length&&(gt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),mt=(Pt,kt)=>{throw process.exitCode=Pt,kt},at.inspect=()=>"[Emscripten Module object]";try{Et=_e(9925)}catch(Pt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Pt}commonjsGlobal.Worker=Et.Worker}else(yt||vt)&&(vt?Bt=self.location.href:typeof document<"u"&&document.currentScript&&(Bt=document.currentScript.src),tt&&(Bt=tt),Bt=Bt.indexOf("blob:")!==0?Bt.substr(0,Bt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",wt||(lt=Et=>{var Pt=new XMLHttpRequest;return Pt.open("GET",Et,!1),Pt.send(null),Pt.responseText},vt&&(ft=Et=>{var Pt=new XMLHttpRequest;return Pt.open("GET",Et,!1),Pt.responseType="arraybuffer",Pt.send(null),new Uint8Array(Pt.response)}),dt=(Et,Pt,kt)=>{var $t=new XMLHttpRequest;$t.open("GET",Et,!0),$t.responseType="arraybuffer",$t.onload=()=>{$t.status==200||$t.status==0&&$t.response?Pt($t.response):kt()},$t.onerror=kt,$t.send(null)}));wt&&typeof performance>"u"&&(commonjsGlobal.performance=_e(6953).performance);var Ut=console.log.bind(console),_t=console.error.bind(console);wt&&(Ut=(...Et)=>It.writeSync(1,Et.join(" ")+`
`),_t=(...Et)=>It.writeSync(2,Et.join(" ")+`
`));var St,xt=at.print||Ut,Ct=at.printErr||_t;Object.assign(at,pt),pt=null,at.thisProgram&&(gt=at.thisProgram),at.quit&&(mt=at.quit),at.wasmBinary&&(St=at.wasmBinary);var Ft=at.noExitRuntime||!0;typeof WebAssembly!="object"&&Cr("no native wasm support detected");var Lt,Mt,Rt,Nt,Gt,Wt,Xt,Yt,Zt,er=!1;function Ar(){var Et=Lt.buffer;at.HEAP8=Gt=new Int8Array(Et),at.HEAP16=new Int16Array(Et),at.HEAP32=Xt=new Int32Array(Et),at.HEAPU8=Wt=new Uint8Array(Et),at.HEAPU16=new Uint16Array(Et),at.HEAPU32=Yt=new Uint32Array(Et),at.HEAPF32=new Float32Array(Et),at.HEAPF64=Zt=new Float64Array(Et)}var hr=at.INITIAL_MEMORY||16777216;if(5242880<=hr||Cr("INITIAL_MEMORY should be larger than STACK_SIZE, was "+hr+"! (STACK_SIZE=5242880)"),bt)Lt=at.wasmMemory;else if(at.wasmMemory)Lt=at.wasmMemory;else if(!((Lt=new WebAssembly.Memory({initial:hr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Ct("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),wt&&Ct("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ar(),hr=Lt.buffer.byteLength;var dr,ar=[],ur=[],or=[],fr=0;function pr(){return Ft||0<fr}var yr,Tr,Br=0,Fr=null;function Qr(){Br++,at.monitorRunDependencies&&at.monitorRunDependencies(Br)}function kr(){if(Br--,at.monitorRunDependencies&&at.monitorRunDependencies(Br),Br==0&&Fr){var Et=Fr;Fr=null,Et()}}function Cr(Et){throw at.onAbort&&at.onAbort(Et),Ct(Et="Aborted("+Et+")"),er=!0,Nt=1,Et=new WebAssembly.RuntimeError(Et+". Build with -sASSERTIONS for more info."),nt(Et),Et}function Dr(Et){return Et.startsWith("data:application/octet-stream;base64,")}function qr(Et){if(Et==yr&&St)return new Uint8Array(St);if(ft)return ft(Et);throw"both async and sync fetching of the wasm failed"}function hn(Et,Pt,kt){return function($t){if(!St&&(yt||vt)){if(typeof fetch=="function"&&!$t.startsWith("file://"))return fetch($t,{credentials:"same-origin"}).then(Vt=>{if(!Vt.ok)throw"failed to load wasm binary file at '"+$t+"'";return Vt.arrayBuffer()}).catch(()=>qr($t));if(dt)return new Promise((Vt,Jt)=>{dt($t,nr=>Vt(new Uint8Array(nr)),Jt)})}return Promise.resolve().then(()=>qr($t))}(Et).then($t=>WebAssembly.instantiate($t,Pt)).then($t=>$t).then(kt,$t=>{Ct("failed to asynchronously prepare wasm: "+$t),Cr($t)})}function $r(Et){this.name="ExitStatus",this.message=`Program terminated with exit(${Et})`,this.status=Et}function Vr(Et){Et.terminate(),Et.onmessage=()=>{}}function Jr(Et){(Et=ir.Fa[Et])||Cr(),ir.fb(Et)}function Zr(Et){var Pt=ir.Za();if(!Pt)return 6;ir.Ia.push(Pt),ir.Fa[Et.Ha]=Pt,Pt.Ha=Et.Ha;var kt={cmd:"run",start_routine:Et.gb,arg:Et.Ya,pthread_ptr:Et.Ha};return wt&&Pt.unref(),Pt.postMessage(kt,Et.mb),0}Dr(yr="ort-wasm-threaded.wasm")||(yr=Tt(yr));var dn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,en=(Et,Pt,kt)=>{var $t=(Pt>>>=0)+kt;for(kt=Pt;Et[kt]&&!(kt>=$t);)++kt;if(16<kt-Pt&&Et.buffer&&dn)return dn.decode(Et.buffer instanceof SharedArrayBuffer?Et.slice(Pt,kt):Et.subarray(Pt,kt));for($t="";Pt<kt;){var Vt=Et[Pt++];if(128&Vt){var Jt=63&Et[Pt++];if((224&Vt)==192)$t+=String.fromCharCode((31&Vt)<<6|Jt);else{var nr=63&Et[Pt++];65536>(Vt=(240&Vt)==224?(15&Vt)<<12|Jt<<6|nr:(7&Vt)<<18|Jt<<12|nr<<6|63&Et[Pt++])?$t+=String.fromCharCode(Vt):(Vt-=65536,$t+=String.fromCharCode(55296|Vt>>10,56320|1023&Vt))}}else $t+=String.fromCharCode(Vt)}return $t},Nr=(Et,Pt)=>(Et>>>=0)?en(At(),Et,Pt):"";function tn(Et){if(bt)return mr(1,1,Et);Nt=Et,pr()||(ir.hb(),at.onExit&&at.onExit(Et),er=!0),mt(Et,new $r(Et))}var jr=Et=>{if(Nt=Et,bt)throw rn(Et),"unwind";tn(Et)},ir={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){bt?ir.ab():ir.$a()},$a:function(){ar.unshift(()=>{Qr(),ir.bb(()=>kr())})},ab:function(){ir.receiveObjectTransfer=ir.eb,ir.threadInitTLS=ir.Sa,ir.setExitStatus=ir.Ra,Ft=!1},Ra:function(Et){Nt=Et},rb:["$terminateWorker"],hb:function(){for(var Et of ir.Ia)Vr(Et);for(Et of ir.La)Vr(Et);ir.La=[],ir.Ia=[],ir.Fa=[]},fb:function(Et){var Pt=Et.Ha;delete ir.Fa[Pt],ir.La.push(Et),ir.Ia.splice(ir.Ia.indexOf(Et),1),Et.Ha=0,Sn(Pt)},eb:function(){},Sa:function(){ir.Ta.forEach(Et=>Et())},cb:Et=>new Promise(Pt=>{Et.onmessage=Vt=>{var Jt=(Vt=Vt.data).cmd;if(Vt.targetThread&&Vt.targetThread!=pn()){var nr=ir.Fa[Vt.qb];nr?nr.postMessage(Vt,Vt.transferList):Ct('Internal error! Worker sent a message "'+Jt+'" to target pthread '+Vt.targetThread+", but that thread no longer exists!")}else Jt==="checkMailbox"?fn():Jt==="spawnThread"?Zr(Vt):Jt==="cleanupThread"?Jr(Vt.thread):Jt==="killThread"?(Vt=Vt.thread,Jt=ir.Fa[Vt],delete ir.Fa[Vt],Vr(Jt),Sn(Vt),ir.Ia.splice(ir.Ia.indexOf(Jt),1),Jt.Ha=0):Jt==="cancelThread"?ir.Fa[Vt.thread].postMessage({cmd:"cancel"}):Jt==="loaded"?(Et.loaded=!0,Pt(Et)):Jt==="alert"?alert("Thread "+Vt.threadId+": "+Vt.text):Vt.target==="setimmediate"?Et.postMessage(Vt):Jt==="callHandler"?at[Vt.handler](...Vt.args):Jt&&Ct("worker sent an unknown command "+Jt)},Et.onerror=Vt=>{throw Ct("worker sent an error! "+Vt.filename+":"+Vt.lineno+": "+Vt.message),Vt},wt&&(Et.on("message",function(Vt){Et.onmessage({data:Vt})}),Et.on("error",function(Vt){Et.onerror(Vt)}));var kt,$t=[];for(kt of["onExit","onAbort","print","printErr"])at.hasOwnProperty(kt)&&$t.push(kt);Et.postMessage({cmd:"load",handlers:$t,urlOrBlob:at.mainScriptUrlOrBlob||tt,wasmMemory:Lt,wasmModule:Rt})}),bb:function(Et){Et()},Xa:function(){var Et=Tt("ort-wasm-threaded.worker.js");Et=new Worker(Et),ir.La.push(Et)},Za:function(){return ir.La.length==0&&(ir.Xa(),ir.cb(ir.La[0])),ir.La.pop()}};at.PThread=ir;var Hr=Et=>{for(;0<Et.length;)Et.shift()(at)};function rn(Et){if(bt)return mr(2,0,Et);jr(Et)}at.establishStackSpace=function(){var Et=pn(),Pt=ut()[Et+52>>2>>>0];Et=ut()[Et+56>>2>>>0],os(Pt,Pt-Et),mn(Pt)};var Ot=[];function Qt(Et){this.Oa=Et-24,this.Wa=function(Pt){ct()[this.Oa+4>>2>>>0]=Pt},this.Va=function(Pt){ct()[this.Oa+8>>2>>>0]=Pt},this.Pa=function(Pt,kt){this.Ua(),this.Wa(Pt),this.Va(kt)},this.Ua=function(){ct()[this.Oa+16>>2>>>0]=0}}function Ht(Et,Pt,kt,$t){return bt?mr(3,1,Et,Pt,kt,$t):zt(Et,Pt,kt,$t)}function zt(Et,Pt,kt,$t){if(Et>>>=0,Pt>>>=0,kt>>>=0,$t>>>=0,typeof SharedArrayBuffer>"u")return Ct("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Vt=[];return bt&&Vt.length===0?Ht(Et,Pt,kt,$t):(Et={gb:kt,Ha:Et,Ya:$t,mb:Vt},bt?(Et.ob="spawnThread",postMessage(Et,Vt),0):Zr(Et))}function qt(Et,Pt,kt){return bt?mr(4,1,Et,Pt,kt):0}function rr(Et,Pt){if(bt)return mr(5,1,Et,Pt)}at.invokeEntryPoint=function(Et,Pt){var kt=Ot[Et];kt||(Et>=Ot.length&&(Ot.length=Et+1),Ot[Et]=kt=dr.get(Et)),Et=kt(Pt),pr()?ir.Ra(Et):Cn(Et)};var sr=Et=>{for(var Pt=0,kt=0;kt<Et.length;++kt){var $t=Et.charCodeAt(kt);127>=$t?Pt++:2047>=$t?Pt+=2:55296<=$t&&57343>=$t?(Pt+=4,++kt):Pt+=3}return Pt},br=(Et,Pt,kt,$t)=>{if(!(0<$t))return 0;var Vt=kt>>>=0;$t=kt+$t-1;for(var Jt=0;Jt<Et.length;++Jt){var nr=Et.charCodeAt(Jt);if(55296<=nr&&57343>=nr&&(nr=65536+((1023&nr)<<10)|1023&Et.charCodeAt(++Jt)),127>=nr){if(kt>=$t)break;Pt[kt++>>>0]=nr}else{if(2047>=nr){if(kt+1>=$t)break;Pt[kt++>>>0]=192|nr>>6}else{if(65535>=nr){if(kt+2>=$t)break;Pt[kt++>>>0]=224|nr>>12}else{if(kt+3>=$t)break;Pt[kt++>>>0]=240|nr>>18,Pt[kt++>>>0]=128|nr>>12&63}Pt[kt++>>>0]=128|nr>>6&63}Pt[kt++>>>0]=128|63&nr}}return Pt[kt>>>0]=0,kt-Vt},xr=(Et,Pt,kt)=>br(Et,At(),Pt,kt);function Sr(Et,Pt){if(bt)return mr(6,1,Et,Pt)}function _r(Et,Pt,kt){if(bt)return mr(7,1,Et,Pt,kt)}function nn(Et,Pt,kt){return bt?mr(8,1,Et,Pt,kt):0}function sn(Et,Pt){if(bt)return mr(9,1,Et,Pt)}function jt(Et,Pt,kt){if(bt)return mr(10,1,Et,Pt,kt)}function lr(Et,Pt,kt,$t){if(bt)return mr(11,1,Et,Pt,kt,$t)}function gr(Et,Pt,kt,$t){if(bt)return mr(12,1,Et,Pt,kt,$t)}function Lr(Et,Pt,kt,$t){if(bt)return mr(13,1,Et,Pt,kt,$t)}function on(Et){if(bt)return mr(14,1,Et)}function kn(Et,Pt){if(bt)return mr(15,1,Et,Pt)}function Nn(Et,Pt,kt){if(bt)return mr(16,1,Et,Pt,kt)}var ps=Et=>{if(!er)try{if(Et(),!pr())try{bt?Cn(Nt):jr(Nt)}catch(Pt){Pt instanceof $r||Pt=="unwind"||mt(1,Pt)}}catch(Pt){Pt instanceof $r||Pt=="unwind"||mt(1,Pt)}};function xn(Et){Et>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(ut(),Et>>2,Et).value.then(fn),Et+=128,Atomics.store(ut(),Et>>2,1))}function fn(){var Et=pn();Et&&(xn(Et),ps(()=>is()))}at.__emscripten_thread_mailbox_await=xn,at.checkMailbox=fn;var Kr=Et=>Et%4==0&&(Et%100!=0||Et%400==0),Qn=[0,31,60,91,121,152,182,213,244,274,305,335],$n=[0,31,59,90,120,151,181,212,243,273,304,334];function Hn(Et,Pt,kt,$t,Vt,Jt,nr,vr){return bt?mr(17,1,Et,Pt,kt,$t,Vt,Jt,nr,vr):-52}function Gn(Et,Pt,kt,$t,Vt,Jt,nr){if(bt)return mr(18,1,Et,Pt,kt,$t,Vt,Jt,nr)}var Vn=Et=>{var Pt=sr(Et)+1,kt=ts(Pt);return kt&&xr(Et,kt,Pt),kt},gs=Et=>{var Pt=In();return Et=Et(),mn(Pt),Et};function mr(Et,Pt){var kt=arguments.length-2,$t=arguments;return gs(()=>{for(var Vt=Fn(8*kt),Jt=Vt>>3,nr=0;nr<kt;nr++){var vr=$t[2+nr];ht()[Jt+nr>>>0]=vr}return ns(Et,kt,Vt,Pt)})}var _n,En=[],Tn={},jn=()=>{if(!_n){var Et,Pt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:gt||"./this.program"};for(Et in Tn)Tn[Et]===void 0?delete Pt[Et]:Pt[Et]=Tn[Et];var kt=[];for(Et in Pt)kt.push(`${Et}=${Pt[Et]}`);_n=kt}return _n};function Kn(Et,Pt){if(bt)return mr(19,1,Et,Pt);Et>>>=0,Pt>>>=0;var kt=0;return jn().forEach(function($t,Vt){var Jt=Pt+kt;for(Vt=ct()[Et+4*Vt>>2>>>0]=Jt,Jt=0;Jt<$t.length;++Jt)st()[Vt++>>0>>>0]=$t.charCodeAt(Jt);st()[Vt>>0>>>0]=0,kt+=$t.length+1}),0}function zn(Et,Pt){if(bt)return mr(20,1,Et,Pt);Et>>>=0,Pt>>>=0;var kt=jn();ct()[Et>>2>>>0]=kt.length;var $t=0;return kt.forEach(function(Vt){$t+=Vt.length+1}),ct()[Pt>>2>>>0]=$t,0}function Wn(Et){return bt?mr(21,1,Et):52}function Xn(Et,Pt,kt,$t){return bt?mr(22,1,Et,Pt,kt,$t):52}function Yn(Et,Pt,kt,$t,Vt){return bt?mr(23,1,Et,Pt,kt,$t,Vt):70}var ms=[null,[],[]];function qn(Et,Pt,kt,$t){if(bt)return mr(24,1,Et,Pt,kt,$t);Pt>>>=0,kt>>>=0,$t>>>=0;for(var Vt=0,Jt=0;Jt<kt;Jt++){var nr=ct()[Pt>>2>>>0],vr=ct()[Pt+4>>2>>>0];Pt+=8;for(var Ur=0;Ur<vr;Ur++){var Er=At()[nr+Ur>>>0],Pr=ms[Et];Er===0||Er===10?((Et===1?xt:Ct)(en(Pr,0)),Pr.length=0):Pr.push(Er)}Vt+=vr}return ct()[$t>>2>>>0]=Vt,0}var Jn=Et=>(Jn=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return $t=>($t.set(crypto.getRandomValues(new Uint8Array($t.byteLength))),$t);if(wt)try{var Pt=_e(760);if(Pt.randomFillSync)return $t=>Pt.randomFillSync($t);var kt=Pt.randomBytes;return $t=>($t.set(kt($t.byteLength)),$t)}catch{}Cr("initRandomDevice")})())(Et),Zn=[31,29,31,30,31,30,31,31,30,31,30,31],_i=[31,28,31,30,31,30,31,31,30,31,30,31],ys=(Et,Pt)=>{st().set(Et,Pt>>>0)};function es(Et,Pt,kt,$t){function Vt(Kt,cr,wr){for(Kt=typeof Kt=="number"?Kt.toString():Kt||"";Kt.length<cr;)Kt=wr[0]+Kt;return Kt}function Jt(Kt,cr){return Vt(Kt,cr,"0")}function nr(Kt,cr){function wr(us){return 0>us?-1:0<us?1:0}var Gr;return(Gr=wr(Kt.getFullYear()-cr.getFullYear()))===0&&(Gr=wr(Kt.getMonth()-cr.getMonth()))===0&&(Gr=wr(Kt.getDate()-cr.getDate())),Gr}function vr(Kt){switch(Kt.getDay()){case 0:return new Date(Kt.getFullYear()-1,11,29);case 1:return Kt;case 2:return new Date(Kt.getFullYear(),0,3);case 3:return new Date(Kt.getFullYear(),0,2);case 4:return new Date(Kt.getFullYear(),0,1);case 5:return new Date(Kt.getFullYear()-1,11,31);case 6:return new Date(Kt.getFullYear()-1,11,30)}}function Ur(Kt){var cr=Kt.Ja;for(Kt=new Date(new Date(Kt.Ka+1900,0,1).getTime());0<cr;){var wr=Kt.getMonth(),Gr=(Kr(Kt.getFullYear())?Zn:_i)[wr];if(!(cr>Gr-Kt.getDate())){Kt.setDate(Kt.getDate()+cr);break}cr-=Gr-Kt.getDate()+1,Kt.setDate(1),11>wr?Kt.setMonth(wr+1):(Kt.setMonth(0),Kt.setFullYear(Kt.getFullYear()+1))}return wr=new Date(Kt.getFullYear()+1,0,4),cr=vr(new Date(Kt.getFullYear(),0,4)),wr=vr(wr),0>=nr(cr,Kt)?0>=nr(wr,Kt)?Kt.getFullYear()+1:Kt.getFullYear():Kt.getFullYear()-1}Et>>>=0,Pt>>>=0,kt>>>=0,$t>>>=0;var Er=ut()[$t+40>>2>>>0];for(var Pr in $t={kb:ut()[$t>>2>>>0],jb:ut()[$t+4>>2>>>0],Ma:ut()[$t+8>>2>>>0],Qa:ut()[$t+12>>2>>>0],Na:ut()[$t+16>>2>>>0],Ka:ut()[$t+20>>2>>>0],Ga:ut()[$t+24>>2>>>0],Ja:ut()[$t+28>>2>>>0],sb:ut()[$t+32>>2>>>0],ib:ut()[$t+36>>2>>>0],lb:Er?Nr(Er):""},kt=Nr(kt),Er={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})kt=kt.replace(new RegExp(Pr,"g"),Er[Pr]);var As="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ls="January February March April May June July August September October November December".split(" ");for(Pr in Er={"%a":Kt=>As[Kt.Ga].substring(0,3),"%A":Kt=>As[Kt.Ga],"%b":Kt=>ls[Kt.Na].substring(0,3),"%B":Kt=>ls[Kt.Na],"%C":Kt=>Jt((Kt.Ka+1900)/100|0,2),"%d":Kt=>Jt(Kt.Qa,2),"%e":Kt=>Vt(Kt.Qa,2," "),"%g":Kt=>Ur(Kt).toString().substring(2),"%G":Kt=>Ur(Kt),"%H":Kt=>Jt(Kt.Ma,2),"%I":Kt=>((Kt=Kt.Ma)==0?Kt=12:12<Kt&&(Kt-=12),Jt(Kt,2)),"%j":Kt=>{for(var cr=0,wr=0;wr<=Kt.Na-1;cr+=(Kr(Kt.Ka+1900)?Zn:_i)[wr++]);return Jt(Kt.Qa+cr,3)},"%m":Kt=>Jt(Kt.Na+1,2),"%M":Kt=>Jt(Kt.jb,2),"%n":()=>`
`,"%p":Kt=>0<=Kt.Ma&&12>Kt.Ma?"AM":"PM","%S":Kt=>Jt(Kt.kb,2),"%t":()=>"	","%u":Kt=>Kt.Ga||7,"%U":Kt=>Jt(Math.floor((Kt.Ja+7-Kt.Ga)/7),2),"%V":Kt=>{var cr=Math.floor((Kt.Ja+7-(Kt.Ga+6)%7)/7);if(2>=(Kt.Ga+371-Kt.Ja-2)%7&&cr++,cr)cr==53&&((wr=(Kt.Ga+371-Kt.Ja)%7)==4||wr==3&&Kr(Kt.Ka)||(cr=1));else{cr=52;var wr=(Kt.Ga+7-Kt.Ja-1)%7;(wr==4||wr==5&&Kr(Kt.Ka%400-1))&&cr++}return Jt(cr,2)},"%w":Kt=>Kt.Ga,"%W":Kt=>Jt(Math.floor((Kt.Ja+7-(Kt.Ga+6)%7)/7),2),"%y":Kt=>(Kt.Ka+1900).toString().substring(2),"%Y":Kt=>Kt.Ka+1900,"%z":Kt=>{var cr=0<=(Kt=Kt.ib);return Kt=Math.abs(Kt)/60,(cr?"+":"-")+("0000"+(Kt/60*100+Kt%60)).slice(-4)},"%Z":Kt=>Kt.lb,"%%":()=>"%"},kt=kt.replace(/%%/g,"\0\0"),Er)kt.includes(Pr)&&(kt=kt.replace(new RegExp(Pr,"g"),Er[Pr]($t)));return Pr=function(Kt){var cr=Array(sr(Kt)+1);return br(Kt,cr,0,cr.length),cr}(kt=kt.replace(/\0\0/g,"%")),Pr.length>Pt?0:(ys(Pr,Et),Pr.length-1)}ir.Pa();var vs=[null,tn,rn,Ht,qt,rr,Sr,_r,nn,sn,jt,lr,gr,Lr,on,kn,Nn,Hn,Gn,Kn,zn,Wn,Xn,Yn,qn],ws={b:function(Et,Pt,kt){throw new Qt(Et>>>=0).Pa(Pt>>>0,kt>>>0),Et},N:function(Et){rs(Et>>>0,!vt,1,!yt,131072,!1),ir.Sa()},k:function(Et){Et>>>=0,bt?postMessage({cmd:"cleanupThread",thread:Et}):Jr(Et)},I:zt,h:qt,T:rr,E:Sr,G:_r,U:nn,R:sn,J:jt,Q:lr,o:gr,F:Lr,C:on,S:kn,D:Nn,q:()=>!0,A:function(Et,Pt){(Et>>>=0)==Pt>>>0?setTimeout(()=>fn()):bt?postMessage({targetThread:Et,cmd:"checkMailbox"}):(Et=ir.Fa[Et])&&Et.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:xn,p:function(Et){wt&&ir.Fa[Et>>>0].ref()},t:function(Et,Pt,kt){Et=Pt+2097152>>>0<4194305-!!Et?(Et>>>0)+4294967296*Pt:NaN,kt>>>=0,Et=new Date(1e3*Et),ut()[kt>>2>>>0]=Et.getUTCSeconds(),ut()[kt+4>>2>>>0]=Et.getUTCMinutes(),ut()[kt+8>>2>>>0]=Et.getUTCHours(),ut()[kt+12>>2>>>0]=Et.getUTCDate(),ut()[kt+16>>2>>>0]=Et.getUTCMonth(),ut()[kt+20>>2>>>0]=Et.getUTCFullYear()-1900,ut()[kt+24>>2>>>0]=Et.getUTCDay(),Et=(Et.getTime()-Date.UTC(Et.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ut()[kt+28>>2>>>0]=Et},u:function(Et,Pt,kt){Et=Pt+2097152>>>0<4194305-!!Et?(Et>>>0)+4294967296*Pt:NaN,kt>>>=0,Et=new Date(1e3*Et),ut()[kt>>2>>>0]=Et.getSeconds(),ut()[kt+4>>2>>>0]=Et.getMinutes(),ut()[kt+8>>2>>>0]=Et.getHours(),ut()[kt+12>>2>>>0]=Et.getDate(),ut()[kt+16>>2>>>0]=Et.getMonth(),ut()[kt+20>>2>>>0]=Et.getFullYear()-1900,ut()[kt+24>>2>>>0]=Et.getDay(),Pt=(Kr(Et.getFullYear())?Qn:$n)[Et.getMonth()]+Et.getDate()-1|0,ut()[kt+28>>2>>>0]=Pt,ut()[kt+36>>2>>>0]=-60*Et.getTimezoneOffset(),Pt=new Date(Et.getFullYear(),6,1).getTimezoneOffset();var $t=new Date(Et.getFullYear(),0,1).getTimezoneOffset();Et=0|(Pt!=$t&&Et.getTimezoneOffset()==Math.min($t,Pt)),ut()[kt+32>>2>>>0]=Et},v:function(Et){Et>>>=0;var Pt=new Date(ut()[Et+20>>2>>>0]+1900,ut()[Et+16>>2>>>0],ut()[Et+12>>2>>>0],ut()[Et+8>>2>>>0],ut()[Et+4>>2>>>0],ut()[Et>>2>>>0],0),kt=ut()[Et+32>>2>>>0],$t=Pt.getTimezoneOffset(),Vt=new Date(Pt.getFullYear(),6,1).getTimezoneOffset(),Jt=new Date(Pt.getFullYear(),0,1).getTimezoneOffset(),nr=Math.min(Jt,Vt);return 0>kt?ut()[Et+32>>2>>>0]=+(Vt!=Jt&&nr==$t):0<kt!=(nr==$t)&&(Vt=Math.max(Jt,Vt),Pt.setTime(Pt.getTime()+6e4*((0<kt?nr:Vt)-$t))),ut()[Et+24>>2>>>0]=Pt.getDay(),kt=(Kr(Pt.getFullYear())?Qn:$n)[Pt.getMonth()]+Pt.getDate()-1|0,ut()[Et+28>>2>>>0]=kt,ut()[Et>>2>>>0]=Pt.getSeconds(),ut()[Et+4>>2>>>0]=Pt.getMinutes(),ut()[Et+8>>2>>>0]=Pt.getHours(),ut()[Et+12>>2>>>0]=Pt.getDate(),ut()[Et+16>>2>>>0]=Pt.getMonth(),ut()[Et+20>>2>>>0]=Pt.getYear(),Et=Pt.getTime()/1e3,ss((Tr=Et,1<=+Math.abs(Tr)?0<Tr?+Math.floor(Tr/4294967296)>>>0:~~+Math.ceil((Tr-+(~~Tr>>>0))/4294967296)>>>0:0)),Et>>>0},r:Hn,s:Gn,z:function(Et,Pt,kt){function $t(Er){return(Er=Er.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Er[1]:"GMT"}Et>>>=0,Pt>>>=0,kt>>>=0;var Vt=new Date().getFullYear(),Jt=new Date(Vt,0,1),nr=new Date(Vt,6,1);Vt=Jt.getTimezoneOffset();var vr=nr.getTimezoneOffset(),Ur=Math.max(Vt,vr);ct()[Et>>2>>>0]=60*Ur,ut()[Pt>>2>>>0]=+(Vt!=vr),Et=$t(Jt),Pt=$t(nr),Et=Vn(Et),Pt=Vn(Pt),vr<Vt?(ct()[kt>>2>>>0]=Et,ct()[kt+4>>2>>>0]=Pt):(ct()[kt>>2>>>0]=Pt,ct()[kt+4>>2>>>0]=Et)},c:()=>{Cr("")},l:function(){},i:function(){return Date.now()},V:()=>{throw fr+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return wt?_e(3993).cpus().length:navigator.hardwareConcurrency},K:function(Et,Pt,kt,$t){for(ir.pb=Pt>>>0,En.length=kt,Pt=$t>>>0>>3,$t=0;$t<kt;$t++)En[$t]=ht()[Pt+$t>>>0];return vs[Et].apply(null,En)},y:function(Et){Et>>>=0;var Pt=At().length;if(Et<=Pt||4294901760<Et)return!1;for(var kt=1;4>=kt;kt*=2){var $t=Pt*(1+.2/kt);$t=Math.min($t,Et+100663296);var Vt=Math;$t=Math.max(Et,$t);e:{Vt=Vt.min.call(Vt,4294901760,$t+(65536-$t%65536)%65536)-Lt.buffer.byteLength+65535>>>16;try{Lt.grow(Vt),Ar();var Jt=1;break e}catch{}Jt=void 0}if(Jt)return!0}return!1},O:Kn,P:zn,j:jr,g:Wn,n:Xn,w:Yn,m:qn,x:function(Et,Pt){return Et>>>=0,Pt>>>=0,Jn(At().subarray(Et>>>0,Et+Pt>>>0)),0},a:Lt||at.wasmMemory,H:es,d:function(Et,Pt,kt,$t){return es(Et>>>0,Pt>>>0,kt>>>0,$t>>>0)}};(function(){function Et(kt,$t){return kt=kt.exports,Mt=kt=function(Vt){var Jt=vr=>()=>vr()>>>0,nr=vr=>Ur=>vr(Ur)>>>0;return(Vt=Object.assign({},Vt)).__errno_location=Jt(Vt.__errno_location),Vt.pthread_self=Jt(Vt.pthread_self),Vt.malloc=nr(Vt.malloc),Vt.stackSave=Jt(Vt.stackSave),Vt.stackAlloc=nr(Vt.stackAlloc),Vt}(kt),ir.Ta.push(Mt.sa),dr=Mt.ta,ur.unshift(Mt.W),Rt=$t,kr(),kt}var Pt={a:ws};if(Qr(),at.instantiateWasm)try{return at.instantiateWasm(Pt,Et)}catch(kt){Ct("Module.instantiateWasm callback failed with error: "+kt),nt(kt)}(function(kt,$t){var Vt=yr;return St||typeof WebAssembly.instantiateStreaming!="function"||Dr(Vt)||Vt.startsWith("file://")||wt||typeof fetch!="function"?hn(Vt,kt,$t):fetch(Vt,{credentials:"same-origin"}).then(Jt=>WebAssembly.instantiateStreaming(Jt,kt).then($t,function(nr){return Ct("wasm streaming compile failed: "+nr),Ct("falling back to ArrayBuffer instantiation"),hn(Vt,kt,$t)}))})(Pt,function(kt){Et(kt.instance,kt.module)}).catch(nt)})(),at._OrtInit=(Et,Pt)=>(at._OrtInit=Mt.X)(Et,Pt),at._OrtGetLastError=(Et,Pt)=>(at._OrtGetLastError=Mt.Y)(Et,Pt),at._OrtCreateSessionOptions=(Et,Pt,kt,$t,Vt,Jt,nr,vr,Ur,Er)=>(at._OrtCreateSessionOptions=Mt.Z)(Et,Pt,kt,$t,Vt,Jt,nr,vr,Ur,Er),at._OrtAppendExecutionProvider=(Et,Pt)=>(at._OrtAppendExecutionProvider=Mt._)(Et,Pt),at._OrtAddSessionConfigEntry=(Et,Pt,kt)=>(at._OrtAddSessionConfigEntry=Mt.$)(Et,Pt,kt),at._OrtReleaseSessionOptions=Et=>(at._OrtReleaseSessionOptions=Mt.aa)(Et),at._OrtCreateSession=(Et,Pt,kt)=>(at._OrtCreateSession=Mt.ba)(Et,Pt,kt),at._OrtReleaseSession=Et=>(at._OrtReleaseSession=Mt.ca)(Et),at._OrtGetInputOutputCount=(Et,Pt,kt)=>(at._OrtGetInputOutputCount=Mt.da)(Et,Pt,kt),at._OrtGetInputName=(Et,Pt)=>(at._OrtGetInputName=Mt.ea)(Et,Pt),at._OrtGetOutputName=(Et,Pt)=>(at._OrtGetOutputName=Mt.fa)(Et,Pt),at._OrtFree=Et=>(at._OrtFree=Mt.ga)(Et),at._OrtCreateTensor=(Et,Pt,kt,$t,Vt)=>(at._OrtCreateTensor=Mt.ha)(Et,Pt,kt,$t,Vt),at._OrtGetTensorData=(Et,Pt,kt,$t,Vt)=>(at._OrtGetTensorData=Mt.ia)(Et,Pt,kt,$t,Vt),at._OrtReleaseTensor=Et=>(at._OrtReleaseTensor=Mt.ja)(Et),at._OrtCreateRunOptions=(Et,Pt,kt,$t)=>(at._OrtCreateRunOptions=Mt.ka)(Et,Pt,kt,$t),at._OrtAddRunConfigEntry=(Et,Pt,kt)=>(at._OrtAddRunConfigEntry=Mt.la)(Et,Pt,kt),at._OrtReleaseRunOptions=Et=>(at._OrtReleaseRunOptions=Mt.ma)(Et),at._OrtRun=(Et,Pt,kt,$t,Vt,Jt,nr,vr)=>(at._OrtRun=Mt.na)(Et,Pt,kt,$t,Vt,Jt,nr,vr),at._OrtEndProfiling=Et=>(at._OrtEndProfiling=Mt.oa)(Et);var pn=at._pthread_self=()=>(pn=at._pthread_self=Mt.pa)(),ts=at._malloc=Et=>(ts=at._malloc=Mt.qa)(Et);at._free=Et=>(at._free=Mt.ra)(Et),at.__emscripten_tls_init=()=>(at.__emscripten_tls_init=Mt.sa)();var rs=at.__emscripten_thread_init=(Et,Pt,kt,$t,Vt,Jt)=>(rs=at.__emscripten_thread_init=Mt.ua)(Et,Pt,kt,$t,Vt,Jt);at.__emscripten_thread_crashed=()=>(at.__emscripten_thread_crashed=Mt.va)();var gn,ns=(Et,Pt,kt,$t)=>(ns=Mt.wa)(Et,Pt,kt,$t),Sn=Et=>(Sn=Mt.xa)(Et),Cn=at.__emscripten_thread_exit=Et=>(Cn=at.__emscripten_thread_exit=Mt.ya)(Et),is=at.__emscripten_check_mailbox=()=>(is=at.__emscripten_check_mailbox=Mt.za)(),ss=Et=>(ss=Mt.Aa)(Et),os=(Et,Pt)=>(os=Mt.Ba)(Et,Pt),In=()=>(In=Mt.Ca)(),mn=Et=>(mn=Mt.Da)(Et),Fn=Et=>(Fn=Mt.Ea)(Et);function as(){function Et(){if(!gn&&(gn=!0,at.calledRun=!0,!er)&&(bt||Hr(ur),ot(at),at.onRuntimeInitialized&&at.onRuntimeInitialized(),!bt)){if(at.postRun)for(typeof at.postRun=="function"&&(at.postRun=[at.postRun]);at.postRun.length;){var Pt=at.postRun.shift();or.unshift(Pt)}Hr(or)}}if(!(0<Br))if(bt)ot(at),bt||Hr(ur),startWorker(at);else{if(at.preRun)for(typeof at.preRun=="function"&&(at.preRun=[at.preRun]);at.preRun.length;)ar.unshift(at.preRun.shift());Hr(ar),0<Br||(at.setStatus?(at.setStatus("Running..."),setTimeout(function(){setTimeout(function(){at.setStatus("")},1),Et()},1)):Et())}}if(at.keepRuntimeAlive=pr,at.wasmMemory=Lt,at.stackAlloc=Fn,at.stackSave=In,at.stackRestore=mn,at.UTF8ToString=Nr,at.stringToUTF8=xr,at.lengthBytesUTF8=sr,at.ExitStatus=$r,at.PThread=ir,Fr=function Et(){gn||as(),gn||(Fr=Et)},at.preInit)for(typeof at.preInit=="function"&&(at.preInit=[at.preInit]);0<at.preInit.length;)at.preInit.pop()();return as(),it.ready});et.exports=rt},932:(et,_,_e)=>{var tt,rt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(tt=tt||__filename),function(it={}){var st,At,ut=it;ut.ready=new Promise((Ot,Qt)=>{st=Ot,At=Qt});var ct,ht,ot,nt=Object.assign({},ut),at="./this.program",lt=(Ot,Qt)=>{throw Qt},dt=typeof window=="object",ft=typeof importScripts=="function",pt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",gt="";if(pt){var mt=_e(1384),yt=_e(908);gt=ft?yt.dirname(gt)+"/":__dirname+"/",ct=(Ot,Qt)=>(Ot=Ot.startsWith("file://")?new URL(Ot):yt.normalize(Ot),mt.readFileSync(Ot,Qt?void 0:"utf8")),ot=Ot=>((Ot=ct(Ot,!0)).buffer||(Ot=new Uint8Array(Ot)),Ot),ht=(Ot,Qt,Ht,zt=!0)=>{Ot=Ot.startsWith("file://")?new URL(Ot):yt.normalize(Ot),mt.readFile(Ot,zt?void 0:"utf8",(qt,rr)=>{qt?Ht(qt):Qt(zt?rr.buffer:rr)})},!ut.thisProgram&&1<process.argv.length&&(at=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),lt=(Ot,Qt)=>{throw process.exitCode=Ot,Qt},ut.inspect=()=>"[Emscripten Module object]"}else(dt||ft)&&(ft?gt=self.location.href:typeof document<"u"&&document.currentScript&&(gt=document.currentScript.src),tt&&(gt=tt),gt=gt.indexOf("blob:")!==0?gt.substr(0,gt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ct=Ot=>{var Qt=new XMLHttpRequest;return Qt.open("GET",Ot,!1),Qt.send(null),Qt.responseText},ft&&(ot=Ot=>{var Qt=new XMLHttpRequest;return Qt.open("GET",Ot,!1),Qt.responseType="arraybuffer",Qt.send(null),new Uint8Array(Qt.response)}),ht=(Ot,Qt,Ht)=>{var zt=new XMLHttpRequest;zt.open("GET",Ot,!0),zt.responseType="arraybuffer",zt.onload=()=>{zt.status==200||zt.status==0&&zt.response?Qt(zt.response):Ht()},zt.onerror=Ht,zt.send(null)});var vt,wt=ut.print||console.log.bind(console),bt=ut.printErr||console.error.bind(console);Object.assign(ut,nt),nt=null,ut.thisProgram&&(at=ut.thisProgram),ut.quit&&(lt=ut.quit),ut.wasmBinary&&(vt=ut.wasmBinary);var Bt=ut.noExitRuntime||!0;typeof WebAssembly!="object"&&Yt("no native wasm support detected");var Tt,It,Dt,Ut,_t,St,xt=!1;function Ct(){var Ot=Tt.buffer;ut.HEAP8=Dt=new Int8Array(Ot),ut.HEAP16=new Int16Array(Ot),ut.HEAP32=_t=new Int32Array(Ot),ut.HEAPU8=Ut=new Uint8Array(Ot),ut.HEAPU16=new Uint16Array(Ot),ut.HEAPU32=St=new Uint32Array(Ot),ut.HEAPF32=new Float32Array(Ot),ut.HEAPF64=new Float64Array(Ot)}var Ft=[],Lt=[],Mt=[];function Rt(){var Ot=ut.preRun.shift();Ft.unshift(Ot)}var Nt,Gt,Wt=0,Xt=null;function Yt(Ot){throw ut.onAbort&&ut.onAbort(Ot),bt(Ot="Aborted("+Ot+")"),xt=!0,Ot=new WebAssembly.RuntimeError(Ot+". Build with -sASSERTIONS for more info."),At(Ot),Ot}function Zt(Ot){return Ot.startsWith("data:application/octet-stream;base64,")}if(!Zt(Nt="ort-wasm.wasm")){var er=Nt;Nt=ut.locateFile?ut.locateFile(er,gt):gt+er}function Ar(Ot){if(Ot==Nt&&vt)return new Uint8Array(vt);if(ot)return ot(Ot);throw"both async and sync fetching of the wasm failed"}function hr(Ot,Qt,Ht){return function(zt){if(!vt&&(dt||ft)){if(typeof fetch=="function"&&!zt.startsWith("file://"))return fetch(zt,{credentials:"same-origin"}).then(qt=>{if(!qt.ok)throw"failed to load wasm binary file at '"+zt+"'";return qt.arrayBuffer()}).catch(()=>Ar(zt));if(ht)return new Promise((qt,rr)=>{ht(zt,sr=>qt(new Uint8Array(sr)),rr)})}return Promise.resolve().then(()=>Ar(zt))}(Ot).then(zt=>WebAssembly.instantiate(zt,Qt)).then(zt=>zt).then(Ht,zt=>{bt("failed to asynchronously prepare wasm: "+zt),Yt(zt)})}function dr(Ot){this.name="ExitStatus",this.message=`Program terminated with exit(${Ot})`,this.status=Ot}var ar=Ot=>{for(;0<Ot.length;)Ot.shift()(ut)};function ur(Ot){this.qa=Ot-24,this.va=function(Qt){St[this.qa+4>>2>>>0]=Qt},this.ua=function(Qt){St[this.qa+8>>2>>>0]=Qt},this.sa=function(Qt,Ht){this.ta(),this.va(Qt),this.ua(Ht)},this.ta=function(){St[this.qa+16>>2>>>0]=0}}var or,fr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,pr=(Ot,Qt,Ht)=>{var zt=(Qt>>>=0)+Ht;for(Ht=Qt;Ot[Ht]&&!(Ht>=zt);)++Ht;if(16<Ht-Qt&&Ot.buffer&&fr)return fr.decode(Ot.subarray(Qt,Ht));for(zt="";Qt<Ht;){var qt=Ot[Qt++];if(128&qt){var rr=63&Ot[Qt++];if((224&qt)==192)zt+=String.fromCharCode((31&qt)<<6|rr);else{var sr=63&Ot[Qt++];65536>(qt=(240&qt)==224?(15&qt)<<12|rr<<6|sr:(7&qt)<<18|rr<<12|sr<<6|63&Ot[Qt++])?zt+=String.fromCharCode(qt):(qt-=65536,zt+=String.fromCharCode(55296|qt>>10,56320|1023&qt))}}else zt+=String.fromCharCode(qt)}return zt},yr=(Ot,Qt)=>(Ot>>>=0)?pr(Ut,Ot,Qt):"",Tr=Ot=>{for(var Qt=0,Ht=0;Ht<Ot.length;++Ht){var zt=Ot.charCodeAt(Ht);127>=zt?Qt++:2047>=zt?Qt+=2:55296<=zt&&57343>=zt?(Qt+=4,++Ht):Qt+=3}return Qt},Br=(Ot,Qt,Ht,zt)=>{if(!(0<zt))return 0;var qt=Ht>>>=0;zt=Ht+zt-1;for(var rr=0;rr<Ot.length;++rr){var sr=Ot.charCodeAt(rr);if(55296<=sr&&57343>=sr&&(sr=65536+((1023&sr)<<10)|1023&Ot.charCodeAt(++rr)),127>=sr){if(Ht>=zt)break;Qt[Ht++>>>0]=sr}else{if(2047>=sr){if(Ht+1>=zt)break;Qt[Ht++>>>0]=192|sr>>6}else{if(65535>=sr){if(Ht+2>=zt)break;Qt[Ht++>>>0]=224|sr>>12}else{if(Ht+3>=zt)break;Qt[Ht++>>>0]=240|sr>>18,Qt[Ht++>>>0]=128|sr>>12&63}Qt[Ht++>>>0]=128|sr>>6&63}Qt[Ht++>>>0]=128|63&sr}}return Qt[Ht>>>0]=0,Ht-qt},Fr=Ot=>Ot%4==0&&(Ot%100!=0||Ot%400==0),Qr=[0,31,60,91,121,152,182,213,244,274,305,335],kr=[0,31,59,90,120,151,181,212,243,273,304,334],Cr=Ot=>{var Qt=Tr(Ot)+1,Ht=en(Qt);return Ht&&Br(Ot,Ut,Ht,Qt),Ht},Dr={},qr=()=>{if(!or){var Ot,Qt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:at||"./this.program"};for(Ot in Dr)Dr[Ot]===void 0?delete Qt[Ot]:Qt[Ot]=Dr[Ot];var Ht=[];for(Ot in Qt)Ht.push(`${Ot}=${Qt[Ot]}`);or=Ht}return or},hn=[null,[],[]],$r=Ot=>($r=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return zt=>crypto.getRandomValues(zt);if(pt)try{var Qt=_e(760);if(Qt.randomFillSync)return zt=>Qt.randomFillSync(zt);var Ht=Qt.randomBytes;return zt=>(zt.set(Ht(zt.byteLength)),zt)}catch{}Yt("initRandomDevice")})())(Ot),Vr=[31,29,31,30,31,30,31,31,30,31,30,31],Jr=[31,28,31,30,31,30,31,31,30,31,30,31];function Zr(Ot,Qt,Ht,zt){function qt(jt,lr,gr){for(jt=typeof jt=="number"?jt.toString():jt||"";jt.length<lr;)jt=gr[0]+jt;return jt}function rr(jt,lr){return qt(jt,lr,"0")}function sr(jt,lr){function gr(on){return 0>on?-1:0<on?1:0}var Lr;return(Lr=gr(jt.getFullYear()-lr.getFullYear()))===0&&(Lr=gr(jt.getMonth()-lr.getMonth()))===0&&(Lr=gr(jt.getDate()-lr.getDate())),Lr}function br(jt){switch(jt.getDay()){case 0:return new Date(jt.getFullYear()-1,11,29);case 1:return jt;case 2:return new Date(jt.getFullYear(),0,3);case 3:return new Date(jt.getFullYear(),0,2);case 4:return new Date(jt.getFullYear(),0,1);case 5:return new Date(jt.getFullYear()-1,11,31);case 6:return new Date(jt.getFullYear()-1,11,30)}}function xr(jt){var lr=jt.ma;for(jt=new Date(new Date(jt.na+1900,0,1).getTime());0<lr;){var gr=jt.getMonth(),Lr=(Fr(jt.getFullYear())?Vr:Jr)[gr];if(!(lr>Lr-jt.getDate())){jt.setDate(jt.getDate()+lr);break}lr-=Lr-jt.getDate()+1,jt.setDate(1),11>gr?jt.setMonth(gr+1):(jt.setMonth(0),jt.setFullYear(jt.getFullYear()+1))}return gr=new Date(jt.getFullYear()+1,0,4),lr=br(new Date(jt.getFullYear(),0,4)),gr=br(gr),0>=sr(lr,jt)?0>=sr(gr,jt)?jt.getFullYear()+1:jt.getFullYear():jt.getFullYear()-1}Ot>>>=0,Qt>>>=0,Ht>>>=0;var Sr=_t[40+(zt>>>=0)>>2>>>0];for(var _r in zt={ya:_t[zt>>2>>>0],xa:_t[zt+4>>2>>>0],oa:_t[zt+8>>2>>>0],ra:_t[zt+12>>2>>>0],pa:_t[zt+16>>2>>>0],na:_t[zt+20>>2>>>0],ha:_t[zt+24>>2>>>0],ma:_t[zt+28>>2>>>0],Aa:_t[zt+32>>2>>>0],wa:_t[zt+36>>2>>>0],za:Sr?yr(Sr):""},Ht=yr(Ht),Sr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ht=Ht.replace(new RegExp(_r,"g"),Sr[_r]);var nn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),sn="January February March April May June July August September October November December".split(" ");for(_r in Sr={"%a":jt=>nn[jt.ha].substring(0,3),"%A":jt=>nn[jt.ha],"%b":jt=>sn[jt.pa].substring(0,3),"%B":jt=>sn[jt.pa],"%C":jt=>rr((jt.na+1900)/100|0,2),"%d":jt=>rr(jt.ra,2),"%e":jt=>qt(jt.ra,2," "),"%g":jt=>xr(jt).toString().substring(2),"%G":jt=>xr(jt),"%H":jt=>rr(jt.oa,2),"%I":jt=>((jt=jt.oa)==0?jt=12:12<jt&&(jt-=12),rr(jt,2)),"%j":jt=>{for(var lr=0,gr=0;gr<=jt.pa-1;lr+=(Fr(jt.na+1900)?Vr:Jr)[gr++]);return rr(jt.ra+lr,3)},"%m":jt=>rr(jt.pa+1,2),"%M":jt=>rr(jt.xa,2),"%n":()=>`
`,"%p":jt=>0<=jt.oa&&12>jt.oa?"AM":"PM","%S":jt=>rr(jt.ya,2),"%t":()=>"	","%u":jt=>jt.ha||7,"%U":jt=>rr(Math.floor((jt.ma+7-jt.ha)/7),2),"%V":jt=>{var lr=Math.floor((jt.ma+7-(jt.ha+6)%7)/7);if(2>=(jt.ha+371-jt.ma-2)%7&&lr++,lr)lr==53&&((gr=(jt.ha+371-jt.ma)%7)==4||gr==3&&Fr(jt.na)||(lr=1));else{lr=52;var gr=(jt.ha+7-jt.ma-1)%7;(gr==4||gr==5&&Fr(jt.na%400-1))&&lr++}return rr(lr,2)},"%w":jt=>jt.ha,"%W":jt=>rr(Math.floor((jt.ma+7-(jt.ha+6)%7)/7),2),"%y":jt=>(jt.na+1900).toString().substring(2),"%Y":jt=>jt.na+1900,"%z":jt=>{var lr=0<=(jt=jt.wa);return jt=Math.abs(jt)/60,(lr?"+":"-")+("0000"+(jt/60*100+jt%60)).slice(-4)},"%Z":jt=>jt.za,"%%":()=>"%"},Ht=Ht.replace(/%%/g,"\0\0"),Sr)Ht.includes(_r)&&(Ht=Ht.replace(new RegExp(_r,"g"),Sr[_r](zt)));return _r=function(jt){var lr=Array(Tr(jt)+1);return Br(jt,lr,0,lr.length),lr}(Ht=Ht.replace(/\0\0/g,"%")),_r.length>Qt?0:(Dt.set(_r,Ot>>>0),_r.length-1)}var dn={a:function(Ot,Qt,Ht){throw new ur(Ot>>>=0).sa(Qt>>>0,Ht>>>0),Ot},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(Ot,Qt,Ht){Ot=Qt+2097152>>>0<4194305-!!Ot?(Ot>>>0)+4294967296*Qt:NaN,Ht>>>=0,Ot=new Date(1e3*Ot),_t[Ht>>2>>>0]=Ot.getUTCSeconds(),_t[Ht+4>>2>>>0]=Ot.getUTCMinutes(),_t[Ht+8>>2>>>0]=Ot.getUTCHours(),_t[Ht+12>>2>>>0]=Ot.getUTCDate(),_t[Ht+16>>2>>>0]=Ot.getUTCMonth(),_t[Ht+20>>2>>>0]=Ot.getUTCFullYear()-1900,_t[Ht+24>>2>>>0]=Ot.getUTCDay(),_t[Ht+28>>2>>>0]=(Ot.getTime()-Date.UTC(Ot.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(Ot,Qt,Ht){Ot=Qt+2097152>>>0<4194305-!!Ot?(Ot>>>0)+4294967296*Qt:NaN,Ht>>>=0,Ot=new Date(1e3*Ot),_t[Ht>>2>>>0]=Ot.getSeconds(),_t[Ht+4>>2>>>0]=Ot.getMinutes(),_t[Ht+8>>2>>>0]=Ot.getHours(),_t[Ht+12>>2>>>0]=Ot.getDate(),_t[Ht+16>>2>>>0]=Ot.getMonth(),_t[Ht+20>>2>>>0]=Ot.getFullYear()-1900,_t[Ht+24>>2>>>0]=Ot.getDay(),_t[Ht+28>>2>>>0]=(Fr(Ot.getFullYear())?Qr:kr)[Ot.getMonth()]+Ot.getDate()-1|0,_t[Ht+36>>2>>>0]=-60*Ot.getTimezoneOffset(),Qt=new Date(Ot.getFullYear(),6,1).getTimezoneOffset();var zt=new Date(Ot.getFullYear(),0,1).getTimezoneOffset();_t[Ht+32>>2>>>0]=0|(Qt!=zt&&Ot.getTimezoneOffset()==Math.min(zt,Qt))},p:function(Ot){Ot>>>=0;var Qt=new Date(_t[Ot+20>>2>>>0]+1900,_t[Ot+16>>2>>>0],_t[Ot+12>>2>>>0],_t[Ot+8>>2>>>0],_t[Ot+4>>2>>>0],_t[Ot>>2>>>0],0),Ht=_t[Ot+32>>2>>>0],zt=Qt.getTimezoneOffset(),qt=new Date(Qt.getFullYear(),6,1).getTimezoneOffset(),rr=new Date(Qt.getFullYear(),0,1).getTimezoneOffset(),sr=Math.min(rr,qt);return 0>Ht?_t[Ot+32>>2>>>0]=+(qt!=rr&&sr==zt):0<Ht!=(sr==zt)&&(qt=Math.max(rr,qt),Qt.setTime(Qt.getTime()+6e4*((0<Ht?sr:qt)-zt))),_t[Ot+24>>2>>>0]=Qt.getDay(),_t[Ot+28>>2>>>0]=(Fr(Qt.getFullYear())?Qr:kr)[Qt.getMonth()]+Qt.getDate()-1|0,_t[Ot>>2>>>0]=Qt.getSeconds(),_t[Ot+4>>2>>>0]=Qt.getMinutes(),_t[Ot+8>>2>>>0]=Qt.getHours(),_t[Ot+12>>2>>>0]=Qt.getDate(),_t[Ot+16>>2>>>0]=Qt.getMonth(),_t[Ot+20>>2>>>0]=Qt.getYear(),Ot=Qt.getTime()/1e3,tn((Gt=Ot,1<=+Math.abs(Gt)?0<Gt?+Math.floor(Gt/4294967296)>>>0:~~+Math.ceil((Gt-+(~~Gt>>>0))/4294967296)>>>0:0)),Ot>>>0},l:function(){return-52},m:function(){},u:function(Ot,Qt,Ht){function zt(xr){return(xr=xr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?xr[1]:"GMT"}Ht>>>=0;var qt=new Date().getFullYear(),rr=new Date(qt,0,1),sr=new Date(qt,6,1);qt=rr.getTimezoneOffset();var br=sr.getTimezoneOffset();St[Ot>>>0>>2>>>0]=60*Math.max(qt,br),_t[Qt>>>0>>2>>>0]=+(qt!=br),Ot=zt(rr),Qt=zt(sr),Ot=Cr(Ot),Qt=Cr(Qt),br<qt?(St[Ht>>2>>>0]=Ot,St[Ht+4>>2>>>0]=Qt):(St[Ht>>2>>>0]=Qt,St[Ht+4>>2>>>0]=Ot)},d:()=>{Yt("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(Ot,Qt,Ht){return Qt>>>=0,Ut.copyWithin(Ot>>>0>>>0,Qt>>>0,Qt+(Ht>>>0)>>>0)},t:function(Ot){Ot>>>=0;var Qt=Ut.length;if(4294901760<Ot)return!1;for(var Ht=1;4>=Ht;Ht*=2){var zt=Qt*(1+.2/Ht);zt=Math.min(zt,Ot+100663296);var qt=Math;zt=Math.max(Ot,zt);e:{qt=qt.min.call(qt,4294901760,zt+(65536-zt%65536)%65536)-Tt.buffer.byteLength+65535>>>16;try{Tt.grow(qt),Ct();var rr=1;break e}catch{}rr=void 0}if(rr)return!0}return!1},D:function(Ot,Qt){Ot>>>=0,Qt>>>=0;var Ht=0;return qr().forEach(function(zt,qt){var rr=Qt+Ht;for(qt=St[Ot+4*qt>>2>>>0]=rr,rr=0;rr<zt.length;++rr)Dt[qt++>>0>>>0]=zt.charCodeAt(rr);Dt[qt>>0>>>0]=0,Ht+=zt.length+1}),0},E:function(Ot,Qt){Ot>>>=0,Qt>>>=0;var Ht=qr();St[Ot>>2>>>0]=Ht.length;var zt=0;return Ht.forEach(function(qt){zt+=qt.length+1}),St[Qt>>2>>>0]=zt,0},s:Ot=>{Bt||(ut.onExit&&ut.onExit(Ot),xt=!0),lt(Ot,new dr(Ot))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(Ot,Qt,Ht,zt){Qt>>>=0,Ht>>>=0,zt>>>=0;for(var qt=0,rr=0;rr<Ht;rr++){var sr=St[Qt>>2>>>0],br=St[Qt+4>>2>>>0];Qt+=8;for(var xr=0;xr<br;xr++){var Sr=Ut[sr+xr>>>0],_r=hn[Ot];Sr===0||Sr===10?((Ot===1?wt:bt)(pr(_r,0)),_r.length=0):_r.push(Sr)}qt+=br}return St[zt>>2>>>0]=qt,0},r:function(Ot,Qt){return Ot>>>=0,$r(Ut.subarray(Ot>>>0,Ot+(Qt>>>0)>>>0)),0},C:Zr,c:function(Ot,Qt,Ht,zt){return Zr(Ot>>>0,Qt>>>0,Ht>>>0,zt>>>0)}};(function(){function Ot(Ht){if(Ht=Ht.exports,It=Ht=function(qt){var rr=br=>()=>br()>>>0,sr=br=>xr=>br(xr)>>>0;return(qt=Object.assign({},qt)).__errno_location=rr(qt.__errno_location),qt.malloc=sr(qt.malloc),qt.stackSave=rr(qt.stackSave),qt.stackAlloc=sr(qt.stackAlloc),qt}(Ht),Tt=It.L,Ct(),Lt.unshift(It.M),Wt--,ut.monitorRunDependencies&&ut.monitorRunDependencies(Wt),Wt==0&&Xt){var zt=Xt;Xt=null,zt()}return Ht}var Qt={a:dn};if(Wt++,ut.monitorRunDependencies&&ut.monitorRunDependencies(Wt),ut.instantiateWasm)try{return ut.instantiateWasm(Qt,Ot)}catch(Ht){bt("Module.instantiateWasm callback failed with error: "+Ht),At(Ht)}(function(Ht,zt){var qt=Nt;return vt||typeof WebAssembly.instantiateStreaming!="function"||Zt(qt)||qt.startsWith("file://")||pt||typeof fetch!="function"?hr(qt,Ht,zt):fetch(qt,{credentials:"same-origin"}).then(rr=>WebAssembly.instantiateStreaming(rr,Ht).then(zt,function(sr){return bt("wasm streaming compile failed: "+sr),bt("falling back to ArrayBuffer instantiation"),hr(qt,Ht,zt)}))})(Qt,function(Ht){Ot(Ht.instance)}).catch(At)})(),ut._OrtInit=(Ot,Qt)=>(ut._OrtInit=It.N)(Ot,Qt),ut._OrtGetLastError=(Ot,Qt)=>(ut._OrtGetLastError=It.O)(Ot,Qt),ut._OrtCreateSessionOptions=(Ot,Qt,Ht,zt,qt,rr,sr,br,xr,Sr)=>(ut._OrtCreateSessionOptions=It.P)(Ot,Qt,Ht,zt,qt,rr,sr,br,xr,Sr),ut._OrtAppendExecutionProvider=(Ot,Qt)=>(ut._OrtAppendExecutionProvider=It.Q)(Ot,Qt),ut._OrtAddSessionConfigEntry=(Ot,Qt,Ht)=>(ut._OrtAddSessionConfigEntry=It.R)(Ot,Qt,Ht),ut._OrtReleaseSessionOptions=Ot=>(ut._OrtReleaseSessionOptions=It.S)(Ot),ut._OrtCreateSession=(Ot,Qt,Ht)=>(ut._OrtCreateSession=It.T)(Ot,Qt,Ht),ut._OrtReleaseSession=Ot=>(ut._OrtReleaseSession=It.U)(Ot),ut._OrtGetInputOutputCount=(Ot,Qt,Ht)=>(ut._OrtGetInputOutputCount=It.V)(Ot,Qt,Ht),ut._OrtGetInputName=(Ot,Qt)=>(ut._OrtGetInputName=It.W)(Ot,Qt),ut._OrtGetOutputName=(Ot,Qt)=>(ut._OrtGetOutputName=It.X)(Ot,Qt),ut._OrtFree=Ot=>(ut._OrtFree=It.Y)(Ot),ut._OrtCreateTensor=(Ot,Qt,Ht,zt,qt)=>(ut._OrtCreateTensor=It.Z)(Ot,Qt,Ht,zt,qt),ut._OrtGetTensorData=(Ot,Qt,Ht,zt,qt)=>(ut._OrtGetTensorData=It._)(Ot,Qt,Ht,zt,qt),ut._OrtReleaseTensor=Ot=>(ut._OrtReleaseTensor=It.$)(Ot),ut._OrtCreateRunOptions=(Ot,Qt,Ht,zt)=>(ut._OrtCreateRunOptions=It.aa)(Ot,Qt,Ht,zt),ut._OrtAddRunConfigEntry=(Ot,Qt,Ht)=>(ut._OrtAddRunConfigEntry=It.ba)(Ot,Qt,Ht),ut._OrtReleaseRunOptions=Ot=>(ut._OrtReleaseRunOptions=It.ca)(Ot),ut._OrtRun=(Ot,Qt,Ht,zt,qt,rr,sr,br)=>(ut._OrtRun=It.da)(Ot,Qt,Ht,zt,qt,rr,sr,br),ut._OrtEndProfiling=Ot=>(ut._OrtEndProfiling=It.ea)(Ot);var en=ut._malloc=Ot=>(en=ut._malloc=It.fa)(Ot);ut._free=Ot=>(ut._free=It.ga)(Ot);var Nr,tn=Ot=>(tn=It.ia)(Ot),jr=()=>(jr=It.ja)(),ir=Ot=>(ir=It.ka)(Ot),Hr=Ot=>(Hr=It.la)(Ot);function rn(){function Ot(){if(!Nr&&(Nr=!0,ut.calledRun=!0,!xt)){if(ar(Lt),st(ut),ut.onRuntimeInitialized&&ut.onRuntimeInitialized(),ut.postRun)for(typeof ut.postRun=="function"&&(ut.postRun=[ut.postRun]);ut.postRun.length;){var Qt=ut.postRun.shift();Mt.unshift(Qt)}ar(Mt)}}if(!(0<Wt)){if(ut.preRun)for(typeof ut.preRun=="function"&&(ut.preRun=[ut.preRun]);ut.preRun.length;)Rt();ar(Ft),0<Wt||(ut.setStatus?(ut.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ut.setStatus("")},1),Ot()},1)):Ot())}}if(ut.stackAlloc=Hr,ut.stackSave=jr,ut.stackRestore=ir,ut.UTF8ToString=yr,ut.stringToUTF8=(Ot,Qt,Ht)=>Br(Ot,Ut,Qt,Ht),ut.lengthBytesUTF8=Tr,Xt=function Ot(){Nr||rn(),Nr||(Xt=Ot)},ut.preInit)for(typeof ut.preInit=="function"&&(ut.preInit=[ut.preInit]);0<ut.preInit.length;)ut.preInit.pop()();return rn(),it.ready});et.exports=rt},4537:et=>{et.exports=function(_,_e){for(var tt=new Array(arguments.length-1),rt=0,it=2,st=!0;it<arguments.length;)tt[rt++]=arguments[it++];return new Promise(function(At,ut){tt[rt]=function(ct){if(st)if(st=!1,ct)ut(ct);else{for(var ht=new Array(arguments.length-1),ot=0;ot<ht.length;)ht[ot++]=arguments[ot];At.apply(null,ht)}};try{_.apply(_e||null,tt)}catch(ct){st&&(st=!1,ut(ct))}})}},7419:(et,_)=>{var _e=_;_e.length=function(At){var ut=At.length;if(!ut)return 0;for(var ct=0;--ut%4>1&&At.charAt(ut)==="=";)++ct;return Math.ceil(3*At.length)/4-ct};for(var tt=new Array(64),rt=new Array(123),it=0;it<64;)rt[tt[it]=it<26?it+65:it<52?it+71:it<62?it-4:it-59|43]=it++;_e.encode=function(At,ut,ct){for(var ht,ot=null,nt=[],at=0,lt=0;ut<ct;){var dt=At[ut++];switch(lt){case 0:nt[at++]=tt[dt>>2],ht=(3&dt)<<4,lt=1;break;case 1:nt[at++]=tt[ht|dt>>4],ht=(15&dt)<<2,lt=2;break;case 2:nt[at++]=tt[ht|dt>>6],nt[at++]=tt[63&dt],lt=0}at>8191&&((ot||(ot=[])).push(String.fromCharCode.apply(String,nt)),at=0)}return lt&&(nt[at++]=tt[ht],nt[at++]=61,lt===1&&(nt[at++]=61)),ot?(at&&ot.push(String.fromCharCode.apply(String,nt.slice(0,at))),ot.join("")):String.fromCharCode.apply(String,nt.slice(0,at))};var st="invalid encoding";_e.decode=function(At,ut,ct){for(var ht,ot=ct,nt=0,at=0;at<At.length;){var lt=At.charCodeAt(at++);if(lt===61&&nt>1)break;if((lt=rt[lt])===void 0)throw Error(st);switch(nt){case 0:ht=lt,nt=1;break;case 1:ut[ct++]=ht<<2|(48&lt)>>4,ht=lt,nt=2;break;case 2:ut[ct++]=(15&ht)<<4|(60&lt)>>2,ht=lt,nt=3;break;case 3:ut[ct++]=(3&ht)<<6|lt,nt=0}}if(nt===1)throw Error(st);return ct-ot},_e.test=function(At){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(At)}},9211:et=>{function _(){this._listeners={}}et.exports=_,_.prototype.on=function(_e,tt,rt){return(this._listeners[_e]||(this._listeners[_e]=[])).push({fn:tt,ctx:rt||this}),this},_.prototype.off=function(_e,tt){if(_e===void 0)this._listeners={};else if(tt===void 0)this._listeners[_e]=[];else for(var rt=this._listeners[_e],it=0;it<rt.length;)rt[it].fn===tt?rt.splice(it,1):++it;return this},_.prototype.emit=function(_e){var tt=this._listeners[_e];if(tt){for(var rt=[],it=1;it<arguments.length;)rt.push(arguments[it++]);for(it=0;it<tt.length;)tt[it].fn.apply(tt[it++].ctx,rt)}return this}},945:et=>{function _(st){return typeof Float32Array<"u"?function(){var At=new Float32Array([-0]),ut=new Uint8Array(At.buffer),ct=ut[3]===128;function ht(lt,dt,ft){At[0]=lt,dt[ft]=ut[0],dt[ft+1]=ut[1],dt[ft+2]=ut[2],dt[ft+3]=ut[3]}function ot(lt,dt,ft){At[0]=lt,dt[ft]=ut[3],dt[ft+1]=ut[2],dt[ft+2]=ut[1],dt[ft+3]=ut[0]}function nt(lt,dt){return ut[0]=lt[dt],ut[1]=lt[dt+1],ut[2]=lt[dt+2],ut[3]=lt[dt+3],At[0]}function at(lt,dt){return ut[3]=lt[dt],ut[2]=lt[dt+1],ut[1]=lt[dt+2],ut[0]=lt[dt+3],At[0]}st.writeFloatLE=ct?ht:ot,st.writeFloatBE=ct?ot:ht,st.readFloatLE=ct?nt:at,st.readFloatBE=ct?at:nt}():function(){function At(ct,ht,ot,nt){var at=ht<0?1:0;if(at&&(ht=-ht),ht===0)ct(1/ht>0?0:2147483648,ot,nt);else if(isNaN(ht))ct(2143289344,ot,nt);else if(ht>34028234663852886e22)ct((at<<31|2139095040)>>>0,ot,nt);else if(ht<11754943508222875e-54)ct((at<<31|Math.round(ht/1401298464324817e-60))>>>0,ot,nt);else{var lt=Math.floor(Math.log(ht)/Math.LN2);ct((at<<31|lt+127<<23|8388607&Math.round(ht*Math.pow(2,-lt)*8388608))>>>0,ot,nt)}}function ut(ct,ht,ot){var nt=ct(ht,ot),at=2*(nt>>31)+1,lt=nt>>>23&255,dt=8388607&nt;return lt===255?dt?NaN:at*(1/0):lt===0?1401298464324817e-60*at*dt:at*Math.pow(2,lt-150)*(dt+8388608)}st.writeFloatLE=At.bind(null,_e),st.writeFloatBE=At.bind(null,tt),st.readFloatLE=ut.bind(null,rt),st.readFloatBE=ut.bind(null,it)}(),typeof Float64Array<"u"?function(){var At=new Float64Array([-0]),ut=new Uint8Array(At.buffer),ct=ut[7]===128;function ht(lt,dt,ft){At[0]=lt,dt[ft]=ut[0],dt[ft+1]=ut[1],dt[ft+2]=ut[2],dt[ft+3]=ut[3],dt[ft+4]=ut[4],dt[ft+5]=ut[5],dt[ft+6]=ut[6],dt[ft+7]=ut[7]}function ot(lt,dt,ft){At[0]=lt,dt[ft]=ut[7],dt[ft+1]=ut[6],dt[ft+2]=ut[5],dt[ft+3]=ut[4],dt[ft+4]=ut[3],dt[ft+5]=ut[2],dt[ft+6]=ut[1],dt[ft+7]=ut[0]}function nt(lt,dt){return ut[0]=lt[dt],ut[1]=lt[dt+1],ut[2]=lt[dt+2],ut[3]=lt[dt+3],ut[4]=lt[dt+4],ut[5]=lt[dt+5],ut[6]=lt[dt+6],ut[7]=lt[dt+7],At[0]}function at(lt,dt){return ut[7]=lt[dt],ut[6]=lt[dt+1],ut[5]=lt[dt+2],ut[4]=lt[dt+3],ut[3]=lt[dt+4],ut[2]=lt[dt+5],ut[1]=lt[dt+6],ut[0]=lt[dt+7],At[0]}st.writeDoubleLE=ct?ht:ot,st.writeDoubleBE=ct?ot:ht,st.readDoubleLE=ct?nt:at,st.readDoubleBE=ct?at:nt}():function(){function At(ct,ht,ot,nt,at,lt){var dt=nt<0?1:0;if(dt&&(nt=-nt),nt===0)ct(0,at,lt+ht),ct(1/nt>0?0:2147483648,at,lt+ot);else if(isNaN(nt))ct(0,at,lt+ht),ct(2146959360,at,lt+ot);else if(nt>17976931348623157e292)ct(0,at,lt+ht),ct((dt<<31|2146435072)>>>0,at,lt+ot);else{var ft;if(nt<22250738585072014e-324)ct((ft=nt/5e-324)>>>0,at,lt+ht),ct((dt<<31|ft/4294967296)>>>0,at,lt+ot);else{var pt=Math.floor(Math.log(nt)/Math.LN2);pt===1024&&(pt=1023),ct(4503599627370496*(ft=nt*Math.pow(2,-pt))>>>0,at,lt+ht),ct((dt<<31|pt+1023<<20|1048576*ft&1048575)>>>0,at,lt+ot)}}}function ut(ct,ht,ot,nt,at){var lt=ct(nt,at+ht),dt=ct(nt,at+ot),ft=2*(dt>>31)+1,pt=dt>>>20&2047,gt=4294967296*(1048575&dt)+lt;return pt===2047?gt?NaN:ft*(1/0):pt===0?5e-324*ft*gt:ft*Math.pow(2,pt-1075)*(gt+4503599627370496)}st.writeDoubleLE=At.bind(null,_e,0,4),st.writeDoubleBE=At.bind(null,tt,4,0),st.readDoubleLE=ut.bind(null,rt,0,4),st.readDoubleBE=ut.bind(null,it,4,0)}(),st}function _e(st,At,ut){At[ut]=255&st,At[ut+1]=st>>>8&255,At[ut+2]=st>>>16&255,At[ut+3]=st>>>24}function tt(st,At,ut){At[ut]=st>>>24,At[ut+1]=st>>>16&255,At[ut+2]=st>>>8&255,At[ut+3]=255&st}function rt(st,At){return(st[At]|st[At+1]<<8|st[At+2]<<16|st[At+3]<<24)>>>0}function it(st,At){return(st[At]<<24|st[At+1]<<16|st[At+2]<<8|st[At+3])>>>0}et.exports=_(_)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(et){}return null}module.exports=inquire},6662:et=>{et.exports=function(_,_e,tt){var rt=tt||8192,it=rt>>>1,st=null,At=rt;return function(ut){if(ut<1||ut>it)return _(ut);At+ut>rt&&(st=_(rt),At=0);var ct=_e.call(st,At,At+=ut);return 7&At&&(At=1+(7|At)),ct}}},4997:(et,_)=>{var _e=_;_e.length=function(tt){for(var rt=0,it=0,st=0;st<tt.length;++st)(it=tt.charCodeAt(st))<128?rt+=1:it<2048?rt+=2:(64512&it)==55296&&(64512&tt.charCodeAt(st+1))==56320?(++st,rt+=4):rt+=3;return rt},_e.read=function(tt,rt,it){if(it-rt<1)return"";for(var st,At=null,ut=[],ct=0;rt<it;)(st=tt[rt++])<128?ut[ct++]=st:st>191&&st<224?ut[ct++]=(31&st)<<6|63&tt[rt++]:st>239&&st<365?(st=((7&st)<<18|(63&tt[rt++])<<12|(63&tt[rt++])<<6|63&tt[rt++])-65536,ut[ct++]=55296+(st>>10),ut[ct++]=56320+(1023&st)):ut[ct++]=(15&st)<<12|(63&tt[rt++])<<6|63&tt[rt++],ct>8191&&((At||(At=[])).push(String.fromCharCode.apply(String,ut)),ct=0);return At?(ct&&At.push(String.fromCharCode.apply(String,ut.slice(0,ct))),At.join("")):String.fromCharCode.apply(String,ut.slice(0,ct))},_e.write=function(tt,rt,it){for(var st,At,ut=it,ct=0;ct<tt.length;++ct)(st=tt.charCodeAt(ct))<128?rt[it++]=st:st<2048?(rt[it++]=st>>6|192,rt[it++]=63&st|128):(64512&st)==55296&&(64512&(At=tt.charCodeAt(ct+1)))==56320?(st=65536+((1023&st)<<10)+(1023&At),++ct,rt[it++]=st>>18|240,rt[it++]=st>>12&63|128,rt[it++]=st>>6&63|128,rt[it++]=63&st|128):(rt[it++]=st>>12|224,rt[it++]=st>>6&63|128,rt[it++]=63&st|128);return it-ut}},3442:(et,_)=>{_.__esModule=!0;var _e=function(){function tt(rt){if(!rt)throw new TypeError("Invalid argument; `value` has no value.");this.value=tt.EMPTY,rt&&tt.isGuid(rt)&&(this.value=rt)}return tt.isGuid=function(rt){var it=rt.toString();return rt&&(rt instanceof tt||tt.validator.test(it))},tt.create=function(){return new tt([tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-"))},tt.createEmpty=function(){return new tt("emptyguid")},tt.parse=function(rt){return new tt(rt)},tt.raw=function(){return[tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-")},tt.gen=function(rt){for(var it="",st=0;st<rt;st++)it+=(65536*(1+Math.random())|0).toString(16).substring(1);return it},tt.prototype.equals=function(rt){return tt.isGuid(rt)&&this.value===rt.toString()},tt.prototype.isEmpty=function(){return this.value===tt.EMPTY},tt.prototype.toString=function(){return this.value},tt.prototype.toJSON=function(){return{value:this.value}},tt.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),tt.EMPTY="00000000-0000-0000-0000-000000000000",tt}();_.Guid=_e},2100:(et,_,_e)=>{et.exports=_e(9482)},9482:(et,_,_e)=>{var tt=_;function rt(){tt.util._configure(),tt.Writer._configure(tt.BufferWriter),tt.Reader._configure(tt.BufferReader)}tt.build="minimal",tt.Writer=_e(1173),tt.BufferWriter=_e(3155),tt.Reader=_e(1408),tt.BufferReader=_e(593),tt.util=_e(9693),tt.rpc=_e(5994),tt.roots=_e(5054),tt.configure=rt,rt()},1408:(et,_,_e)=>{et.exports=ut;var tt,rt=_e(9693),it=rt.LongBits,st=rt.utf8;function At(dt,ft){return RangeError("index out of range: "+dt.pos+" + "+(ft||1)+" > "+dt.len)}function ut(dt){this.buf=dt,this.pos=0,this.len=dt.length}var ct,ht=typeof Uint8Array<"u"?function(dt){if(dt instanceof Uint8Array||Array.isArray(dt))return new ut(dt);throw Error("illegal buffer")}:function(dt){if(Array.isArray(dt))return new ut(dt);throw Error("illegal buffer")},ot=function(){return rt.Buffer?function(dt){return(ut.create=function(ft){return rt.Buffer.isBuffer(ft)?new tt(ft):ht(ft)})(dt)}:ht};function nt(){var dt=new it(0,0),ft=0;if(!(this.len-this.pos>4)){for(;ft<3;++ft){if(this.pos>=this.len)throw At(this);if(dt.lo=(dt.lo|(127&this.buf[this.pos])<<7*ft)>>>0,this.buf[this.pos++]<128)return dt}return dt.lo=(dt.lo|(127&this.buf[this.pos++])<<7*ft)>>>0,dt}for(;ft<4;++ft)if(dt.lo=(dt.lo|(127&this.buf[this.pos])<<7*ft)>>>0,this.buf[this.pos++]<128)return dt;if(dt.lo=(dt.lo|(127&this.buf[this.pos])<<28)>>>0,dt.hi=(dt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return dt;if(ft=0,this.len-this.pos>4){for(;ft<5;++ft)if(dt.hi=(dt.hi|(127&this.buf[this.pos])<<7*ft+3)>>>0,this.buf[this.pos++]<128)return dt}else for(;ft<5;++ft){if(this.pos>=this.len)throw At(this);if(dt.hi=(dt.hi|(127&this.buf[this.pos])<<7*ft+3)>>>0,this.buf[this.pos++]<128)return dt}throw Error("invalid varint encoding")}function at(dt,ft){return(dt[ft-4]|dt[ft-3]<<8|dt[ft-2]<<16|dt[ft-1]<<24)>>>0}function lt(){if(this.pos+8>this.len)throw At(this,8);return new it(at(this.buf,this.pos+=4),at(this.buf,this.pos+=4))}ut.create=ot(),ut.prototype._slice=rt.Array.prototype.subarray||rt.Array.prototype.slice,ut.prototype.uint32=(ct=4294967295,function(){if(ct=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ct=(ct|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ct;if((this.pos+=5)>this.len)throw this.pos=this.len,At(this,10);return ct}),ut.prototype.int32=function(){return 0|this.uint32()},ut.prototype.sint32=function(){var dt=this.uint32();return dt>>>1^-(1&dt)|0},ut.prototype.bool=function(){return this.uint32()!==0},ut.prototype.fixed32=function(){if(this.pos+4>this.len)throw At(this,4);return at(this.buf,this.pos+=4)},ut.prototype.sfixed32=function(){if(this.pos+4>this.len)throw At(this,4);return 0|at(this.buf,this.pos+=4)},ut.prototype.float=function(){if(this.pos+4>this.len)throw At(this,4);var dt=rt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,dt},ut.prototype.double=function(){if(this.pos+8>this.len)throw At(this,4);var dt=rt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,dt},ut.prototype.bytes=function(){var dt=this.uint32(),ft=this.pos,pt=this.pos+dt;if(pt>this.len)throw At(this,dt);return this.pos+=dt,Array.isArray(this.buf)?this.buf.slice(ft,pt):ft===pt?new this.buf.constructor(0):this._slice.call(this.buf,ft,pt)},ut.prototype.string=function(){var dt=this.bytes();return st.read(dt,0,dt.length)},ut.prototype.skip=function(dt){if(typeof dt=="number"){if(this.pos+dt>this.len)throw At(this,dt);this.pos+=dt}else do if(this.pos>=this.len)throw At(this);while(128&this.buf[this.pos++]);return this},ut.prototype.skipType=function(dt){switch(dt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(dt=7&this.uint32())!=4;)this.skipType(dt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+dt+" at offset "+this.pos)}return this},ut._configure=function(dt){tt=dt,ut.create=ot(),tt._configure();var ft=rt.Long?"toLong":"toNumber";rt.merge(ut.prototype,{int64:function(){return nt.call(this)[ft](!1)},uint64:function(){return nt.call(this)[ft](!0)},sint64:function(){return nt.call(this).zzDecode()[ft](!1)},fixed64:function(){return lt.call(this)[ft](!0)},sfixed64:function(){return lt.call(this)[ft](!1)}})}},593:(et,_,_e)=>{et.exports=it;var tt=_e(1408);(it.prototype=Object.create(tt.prototype)).constructor=it;var rt=_e(9693);function it(st){tt.call(this,st)}it._configure=function(){rt.Buffer&&(it.prototype._slice=rt.Buffer.prototype.slice)},it.prototype.string=function(){var st=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+st,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+st,this.len))},it._configure()},5054:et=>{et.exports={}},5994:(et,_,_e)=>{_.Service=_e(7948)},7948:(et,_,_e)=>{et.exports=rt;var tt=_e(9693);function rt(it,st,At){if(typeof it!="function")throw TypeError("rpcImpl must be a function");tt.EventEmitter.call(this),this.rpcImpl=it,this.requestDelimited=!!st,this.responseDelimited=!!At}(rt.prototype=Object.create(tt.EventEmitter.prototype)).constructor=rt,rt.prototype.rpcCall=function it(st,At,ut,ct,ht){if(!ct)throw TypeError("request must be specified");var ot=this;if(!ht)return tt.asPromise(it,ot,st,At,ut,ct);if(ot.rpcImpl)try{return ot.rpcImpl(st,At[ot.requestDelimited?"encodeDelimited":"encode"](ct).finish(),function(nt,at){if(nt)return ot.emit("error",nt,st),ht(nt);if(at!==null){if(!(at instanceof ut))try{at=ut[ot.responseDelimited?"decodeDelimited":"decode"](at)}catch(lt){return ot.emit("error",lt,st),ht(lt)}return ot.emit("data",at,st),ht(null,at)}ot.end(!0)})}catch(nt){return ot.emit("error",nt,st),void setTimeout(function(){ht(nt)},0)}else setTimeout(function(){ht(Error("already ended"))},0)},rt.prototype.end=function(it){return this.rpcImpl&&(it||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(et,_,_e)=>{et.exports=rt;var tt=_e(9693);function rt(ut,ct){this.lo=ut>>>0,this.hi=ct>>>0}var it=rt.zero=new rt(0,0);it.toNumber=function(){return 0},it.zzEncode=it.zzDecode=function(){return this},it.length=function(){return 1};var st=rt.zeroHash="\0\0\0\0\0\0\0\0";rt.fromNumber=function(ut){if(ut===0)return it;var ct=ut<0;ct&&(ut=-ut);var ht=ut>>>0,ot=(ut-ht)/4294967296>>>0;return ct&&(ot=~ot>>>0,ht=~ht>>>0,++ht>4294967295&&(ht=0,++ot>4294967295&&(ot=0))),new rt(ht,ot)},rt.from=function(ut){if(typeof ut=="number")return rt.fromNumber(ut);if(tt.isString(ut)){if(!tt.Long)return rt.fromNumber(parseInt(ut,10));ut=tt.Long.fromString(ut)}return ut.low||ut.high?new rt(ut.low>>>0,ut.high>>>0):it},rt.prototype.toNumber=function(ut){if(!ut&&this.hi>>>31){var ct=1+~this.lo>>>0,ht=~this.hi>>>0;return ct||(ht=ht+1>>>0),-(ct+4294967296*ht)}return this.lo+4294967296*this.hi},rt.prototype.toLong=function(ut){return tt.Long?new tt.Long(0|this.lo,0|this.hi,!!ut):{low:0|this.lo,high:0|this.hi,unsigned:!!ut}};var At=String.prototype.charCodeAt;rt.fromHash=function(ut){return ut===st?it:new rt((At.call(ut,0)|At.call(ut,1)<<8|At.call(ut,2)<<16|At.call(ut,3)<<24)>>>0,(At.call(ut,4)|At.call(ut,5)<<8|At.call(ut,6)<<16|At.call(ut,7)<<24)>>>0)},rt.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},rt.prototype.zzEncode=function(){var ut=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ut)>>>0,this.lo=(this.lo<<1^ut)>>>0,this},rt.prototype.zzDecode=function(){var ut=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^ut)>>>0,this.hi=(this.hi>>>1^ut)>>>0,this},rt.prototype.length=function(){var ut=this.lo,ct=(this.lo>>>28|this.hi<<4)>>>0,ht=this.hi>>>24;return ht===0?ct===0?ut<16384?ut<128?1:2:ut<2097152?3:4:ct<16384?ct<128?5:6:ct<2097152?7:8:ht<128?9:10}},9693:function(et,_,_e){var tt=_;function rt(st,At,ut){for(var ct=Object.keys(At),ht=0;ht<ct.length;++ht)st[ct[ht]]!==void 0&&ut||(st[ct[ht]]=At[ct[ht]]);return st}function it(st){function At(ut,ct){if(!(this instanceof At))return new At(ut,ct);Object.defineProperty(this,"message",{get:function(){return ut}}),Error.captureStackTrace?Error.captureStackTrace(this,At):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ct&&rt(this,ct)}return At.prototype=Object.create(Error.prototype,{constructor:{value:At,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return st},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),At}tt.asPromise=_e(4537),tt.base64=_e(7419),tt.EventEmitter=_e(9211),tt.float=_e(945),tt.inquire=_e(7199),tt.utf8=_e(4997),tt.pool=_e(6662),tt.LongBits=_e(1945),tt.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),tt.global=tt.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||this,tt.emptyArray=Object.freeze?Object.freeze([]):[],tt.emptyObject=Object.freeze?Object.freeze({}):{},tt.isInteger=Number.isInteger||function(st){return typeof st=="number"&&isFinite(st)&&Math.floor(st)===st},tt.isString=function(st){return typeof st=="string"||st instanceof String},tt.isObject=function(st){return st&&typeof st=="object"},tt.isset=tt.isSet=function(st,At){var ut=st[At];return!(ut==null||!st.hasOwnProperty(At))&&(typeof ut!="object"||(Array.isArray(ut)?ut.length:Object.keys(ut).length)>0)},tt.Buffer=function(){try{var st=tt.inquire("buffer").Buffer;return st.prototype.utf8Write?st:null}catch{return null}}(),tt._Buffer_from=null,tt._Buffer_allocUnsafe=null,tt.newBuffer=function(st){return typeof st=="number"?tt.Buffer?tt._Buffer_allocUnsafe(st):new tt.Array(st):tt.Buffer?tt._Buffer_from(st):typeof Uint8Array>"u"?st:new Uint8Array(st)},tt.Array=typeof Uint8Array<"u"?Uint8Array:Array,tt.Long=tt.global.dcodeIO&&tt.global.dcodeIO.Long||tt.global.Long||tt.inquire("long"),tt.key2Re=/^true|false|0|1$/,tt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tt.longToHash=function(st){return st?tt.LongBits.from(st).toHash():tt.LongBits.zeroHash},tt.longFromHash=function(st,At){var ut=tt.LongBits.fromHash(st);return tt.Long?tt.Long.fromBits(ut.lo,ut.hi,At):ut.toNumber(!!At)},tt.merge=rt,tt.lcFirst=function(st){return st.charAt(0).toLowerCase()+st.substring(1)},tt.newError=it,tt.ProtocolError=it("ProtocolError"),tt.oneOfGetter=function(st){for(var At={},ut=0;ut<st.length;++ut)At[st[ut]]=1;return function(){for(var ct=Object.keys(this),ht=ct.length-1;ht>-1;--ht)if(At[ct[ht]]===1&&this[ct[ht]]!==void 0&&this[ct[ht]]!==null)return ct[ht]}},tt.oneOfSetter=function(st){return function(At){for(var ut=0;ut<st.length;++ut)st[ut]!==At&&delete this[st[ut]]}},tt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tt._configure=function(){var st=tt.Buffer;st?(tt._Buffer_from=st.from!==Uint8Array.from&&st.from||function(At,ut){return new st(At,ut)},tt._Buffer_allocUnsafe=st.allocUnsafe||function(At){return new st(At)}):tt._Buffer_from=tt._Buffer_allocUnsafe=null}},1173:(et,_,_e)=>{et.exports=ot;var tt,rt=_e(9693),it=rt.LongBits,st=rt.base64,At=rt.utf8;function ut(gt,mt,yt){this.fn=gt,this.len=mt,this.next=void 0,this.val=yt}function ct(){}function ht(gt){this.head=gt.head,this.tail=gt.tail,this.len=gt.len,this.next=gt.states}function ot(){this.len=0,this.head=new ut(ct,0,0),this.tail=this.head,this.states=null}var nt=function(){return rt.Buffer?function(){return(ot.create=function(){return new tt})()}:function(){return new ot}};function at(gt,mt,yt){mt[yt]=255&gt}function lt(gt,mt){this.len=gt,this.next=void 0,this.val=mt}function dt(gt,mt,yt){for(;gt.hi;)mt[yt++]=127&gt.lo|128,gt.lo=(gt.lo>>>7|gt.hi<<25)>>>0,gt.hi>>>=7;for(;gt.lo>127;)mt[yt++]=127&gt.lo|128,gt.lo=gt.lo>>>7;mt[yt++]=gt.lo}function ft(gt,mt,yt){mt[yt]=255&gt,mt[yt+1]=gt>>>8&255,mt[yt+2]=gt>>>16&255,mt[yt+3]=gt>>>24}ot.create=nt(),ot.alloc=function(gt){return new rt.Array(gt)},rt.Array!==Array&&(ot.alloc=rt.pool(ot.alloc,rt.Array.prototype.subarray)),ot.prototype._push=function(gt,mt,yt){return this.tail=this.tail.next=new ut(gt,mt,yt),this.len+=mt,this},lt.prototype=Object.create(ut.prototype),lt.prototype.fn=function(gt,mt,yt){for(;gt>127;)mt[yt++]=127&gt|128,gt>>>=7;mt[yt]=gt},ot.prototype.uint32=function(gt){return this.len+=(this.tail=this.tail.next=new lt((gt>>>=0)<128?1:gt<16384?2:gt<2097152?3:gt<268435456?4:5,gt)).len,this},ot.prototype.int32=function(gt){return gt<0?this._push(dt,10,it.fromNumber(gt)):this.uint32(gt)},ot.prototype.sint32=function(gt){return this.uint32((gt<<1^gt>>31)>>>0)},ot.prototype.uint64=function(gt){var mt=it.from(gt);return this._push(dt,mt.length(),mt)},ot.prototype.int64=ot.prototype.uint64,ot.prototype.sint64=function(gt){var mt=it.from(gt).zzEncode();return this._push(dt,mt.length(),mt)},ot.prototype.bool=function(gt){return this._push(at,1,gt?1:0)},ot.prototype.fixed32=function(gt){return this._push(ft,4,gt>>>0)},ot.prototype.sfixed32=ot.prototype.fixed32,ot.prototype.fixed64=function(gt){var mt=it.from(gt);return this._push(ft,4,mt.lo)._push(ft,4,mt.hi)},ot.prototype.sfixed64=ot.prototype.fixed64,ot.prototype.float=function(gt){return this._push(rt.float.writeFloatLE,4,gt)},ot.prototype.double=function(gt){return this._push(rt.float.writeDoubleLE,8,gt)};var pt=rt.Array.prototype.set?function(gt,mt,yt){mt.set(gt,yt)}:function(gt,mt,yt){for(var vt=0;vt<gt.length;++vt)mt[yt+vt]=gt[vt]};ot.prototype.bytes=function(gt){var mt=gt.length>>>0;if(!mt)return this._push(at,1,0);if(rt.isString(gt)){var yt=ot.alloc(mt=st.length(gt));st.decode(gt,yt,0),gt=yt}return this.uint32(mt)._push(pt,mt,gt)},ot.prototype.string=function(gt){var mt=At.length(gt);return mt?this.uint32(mt)._push(At.write,mt,gt):this._push(at,1,0)},ot.prototype.fork=function(){return this.states=new ht(this),this.head=this.tail=new ut(ct,0,0),this.len=0,this},ot.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ut(ct,0,0),this.len=0),this},ot.prototype.ldelim=function(){var gt=this.head,mt=this.tail,yt=this.len;return this.reset().uint32(yt),yt&&(this.tail.next=gt.next,this.tail=mt,this.len+=yt),this},ot.prototype.finish=function(){for(var gt=this.head.next,mt=this.constructor.alloc(this.len),yt=0;gt;)gt.fn(gt.val,mt,yt),yt+=gt.len,gt=gt.next;return mt},ot._configure=function(gt){tt=gt,ot.create=nt(),tt._configure()}},3155:(et,_,_e)=>{et.exports=it;var tt=_e(1173);(it.prototype=Object.create(tt.prototype)).constructor=it;var rt=_e(9693);function it(){tt.call(this)}function st(At,ut,ct){At.length<40?rt.utf8.write(At,ut,ct):ut.utf8Write?ut.utf8Write(At,ct):ut.write(At,ct)}it._configure=function(){it.alloc=rt._Buffer_allocUnsafe,it.writeBytesBuffer=rt.Buffer&&rt.Buffer.prototype instanceof Uint8Array&&rt.Buffer.prototype.set.name==="set"?function(At,ut,ct){ut.set(At,ct)}:function(At,ut,ct){if(At.copy)At.copy(ut,ct,0,At.length);else for(var ht=0;ht<At.length;)ut[ct++]=At[ht++]}},it.prototype.bytes=function(At){rt.isString(At)&&(At=rt._Buffer_from(At,"base64"));var ut=At.length>>>0;return this.uint32(ut),ut&&this._push(it.writeBytesBuffer,ut,At),this},it.prototype.string=function(At){var ut=rt.Buffer.byteLength(At);return this.uint32(ut),ut&&this._push(st,ut,At),this},it._configure()},4154:et=>{et.exports=`"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},685:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.registerBackend=void 0;const _e={},tt=[];_.registerBackend=(rt,it,st)=>{if(!it||typeof it.init!="function"||typeof it.createSessionHandler!="function")throw new TypeError("not a valid backend");{const At=_e[rt];if(At===void 0)_e[rt]={backend:it,priority:st};else{if(At.priority>st)return;if(At.priority===st&&At.backend!==it)throw new Error(`cannot register backend "${rt}" using priority ${st}`)}if(st>=0){const ut=tt.indexOf(rt);ut!==-1&&tt.splice(ut,1);for(let ct=0;ct<tt.length;ct++)if(_e[tt[ct]].priority<=st)return void tt.splice(ct,0,rt);tt.push(rt)}}},_.resolveBackend=async rt=>{const it=rt.length===0?tt:rt,st=[];for(const At of it){const ut=_e[At];if(ut){if(ut.initialized)return ut.backend;if(ut.aborted)continue;const ct=!!ut.initPromise;try{return ct||(ut.initPromise=ut.backend.init()),await ut.initPromise,ut.initialized=!0,ut.backend}catch(ht){ct||st.push({name:At,err:ht}),ut.aborted=!0}finally{delete ut.initPromise}}}throw new Error(`no available backend found. ERR: ${st.map(At=>`[${At.name}] ${At.err}`).join(", ")}`)}},4798:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.registerBackend=void 0;var tt=_e(685);Object.defineProperty(_,"registerBackend",{enumerable:!0,get:function(){return tt.registerBackend}})},3121:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.env=void 0;const tt=_e(9104);let rt="warning";_.env={wasm:{},webgl:{},webgpu:{},versions:{common:tt.version},set logLevel(it){if(it!==void 0){if(typeof it!="string"||["verbose","info","warning","error","fatal"].indexOf(it)===-1)throw new Error(`Unsupported logging level: ${it}`);rt=it}},get logLevel(){return rt}},Object.defineProperty(_.env,"logLevel",{enumerable:!0})},2457:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.env=void 0;const tt=_e(3121);_.env=tt.env},2235:function(et,_,_e){var tt=this&&this.__createBinding||(Object.create?function(it,st,At,ut){ut===void 0&&(ut=At);var ct=Object.getOwnPropertyDescriptor(st,At);ct&&!("get"in ct?!st.__esModule:ct.writable||ct.configurable)||(ct={enumerable:!0,get:function(){return st[At]}}),Object.defineProperty(it,ut,ct)}:function(it,st,At,ut){ut===void 0&&(ut=At),it[ut]=st[At]}),rt=this&&this.__exportStar||function(it,st){for(var At in it)At==="default"||Object.prototype.hasOwnProperty.call(st,At)||tt(st,it,At)};Object.defineProperty(_,"__esModule",{value:!0}),rt(_e(4798),_),rt(_e(2457),_),rt(_e(3974),_),rt(_e(963),_),rt(_e(7852),_)},8036:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.InferenceSession=void 0;const tt=_e(685),rt=_e(963);class it{constructor(At){this.handler=At}async run(At,ut,ct){const ht={};let ot={};if(typeof At!="object"||At===null||At instanceof rt.Tensor||Array.isArray(At))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let nt=!0;if(typeof ut=="object"){if(ut===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(ut instanceof rt.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(ut)){if(ut.length===0)throw new TypeError("'fetches' cannot be an empty array.");nt=!1;for(const dt of ut){if(typeof dt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(dt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${dt}.`);ht[dt]=null}if(typeof ct=="object"&&ct!==null)ot=ct;else if(ct!==void 0)throw new TypeError("'options' must be an object.")}else{let dt=!1;const ft=Object.getOwnPropertyNames(ut);for(const pt of this.outputNames)if(ft.indexOf(pt)!==-1){const gt=ut[pt];(gt===null||gt instanceof rt.Tensor)&&(dt=!0,nt=!1,ht[pt]=gt)}if(dt){if(typeof ct=="object"&&ct!==null)ot=ct;else if(ct!==void 0)throw new TypeError("'options' must be an object.")}else ot=ut}}else if(ut!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const dt of this.inputNames)if(At[dt]===void 0)throw new Error(`input '${dt}' is missing in 'feeds'.`);if(nt)for(const dt of this.outputNames)ht[dt]=null;const at=await this.handler.run(At,ht,ot),lt={};for(const dt in at)Object.hasOwnProperty.call(at,dt)&&(lt[dt]=new rt.Tensor(at[dt].type,at[dt].data,at[dt].dims));return lt}async release(){return this.handler.dispose()}static async create(At,ut,ct,ht){let ot,nt={};if(typeof At=="string"){if(ot=At,typeof ut=="object"&&ut!==null)nt=ut;else if(ut!==void 0)throw new TypeError("'options' must be an object.")}else if(At instanceof Uint8Array){if(ot=At,typeof ut=="object"&&ut!==null)nt=ut;else if(ut!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(At instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&At instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const ft=At;let pt=0,gt=At.byteLength;if(typeof ut=="object"&&ut!==null)nt=ut;else if(typeof ut=="number"){if(pt=ut,!Number.isSafeInteger(pt))throw new RangeError("'byteOffset' must be an integer.");if(pt<0||pt>=ft.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${ft.byteLength}).`);if(gt=At.byteLength-pt,typeof ct=="number"){if(gt=ct,!Number.isSafeInteger(gt))throw new RangeError("'byteLength' must be an integer.");if(gt<=0||pt+gt>ft.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${ft.byteLength-pt}].`);if(typeof ht=="object"&&ht!==null)nt=ht;else if(ht!==void 0)throw new TypeError("'options' must be an object.")}else if(ct!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(ut!==void 0)throw new TypeError("'options' must be an object.");ot=new Uint8Array(ft,pt,gt)}}const at=(nt.executionProviders||[]).map(ft=>typeof ft=="string"?ft:ft.name),lt=await(0,tt.resolveBackend)(at),dt=await lt.createSessionHandler(ot,nt);return new it(dt)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}_.InferenceSession=it},3974:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.InferenceSession=void 0;const tt=_e(8036);_.InferenceSession=tt.InferenceSession},7852:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0})},2350:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tensorToImageData=_.tensorToDataURL=void 0,_.tensorToDataURL=(_e,tt)=>{const rt=document.createElement("canvas");rt.width=_e.dims[3],rt.height=_e.dims[2];const it=rt.getContext("2d");if(it!=null){let st,At;(tt==null?void 0:tt.tensorLayout)!==void 0&&tt.tensorLayout==="NHWC"?(st=_e.dims[2],At=_e.dims[3]):(st=_e.dims[3],At=_e.dims[2]);const ut=(tt==null?void 0:tt.format)!==void 0?tt.format:"RGB",ct=tt==null?void 0:tt.norm;let ht,ot;ct===void 0||ct.mean===void 0?ht=[255,255,255,255]:typeof ct.mean=="number"?ht=[ct.mean,ct.mean,ct.mean,ct.mean]:(ht=[ct.mean[0],ct.mean[1],ct.mean[2],0],ct.mean[3]!==void 0&&(ht[3]=ct.mean[3])),ct===void 0||ct.bias===void 0?ot=[0,0,0,0]:typeof ct.bias=="number"?ot=[ct.bias,ct.bias,ct.bias,ct.bias]:(ot=[ct.bias[0],ct.bias[1],ct.bias[2],0],ct.bias[3]!==void 0&&(ot[3]=ct.bias[3]));const nt=At*st;let at=0,lt=nt,dt=2*nt,ft=-1;ut==="RGBA"?(at=0,lt=nt,dt=2*nt,ft=3*nt):ut==="RGB"?(at=0,lt=nt,dt=2*nt):ut==="RBG"&&(at=0,dt=nt,lt=2*nt);for(let pt=0;pt<At;pt++)for(let gt=0;gt<st;gt++){const mt=(_e.data[at++]-ot[0])*ht[0],yt=(_e.data[lt++]-ot[1])*ht[1],vt=(_e.data[dt++]-ot[2])*ht[2],wt=ft===-1?255:(_e.data[ft++]-ot[3])*ht[3];it.fillStyle="rgba("+mt+","+yt+","+vt+","+wt+")",it.fillRect(gt,pt,1,1)}return rt.toDataURL()}throw new Error("Can not access image data")},_.tensorToImageData=(_e,tt)=>{const rt=document.createElement("canvas").getContext("2d");let it;if(rt==null)throw new Error("Can not access image data");{let st,At,ut;(tt==null?void 0:tt.tensorLayout)!==void 0&&tt.tensorLayout==="NHWC"?(st=_e.dims[2],At=_e.dims[1],ut=_e.dims[3]):(st=_e.dims[3],At=_e.dims[2],ut=_e.dims[1]);const ct=tt!==void 0&&tt.format!==void 0?tt.format:"RGB",ht=tt==null?void 0:tt.norm;let ot,nt;ht===void 0||ht.mean===void 0?ot=[255,255,255,255]:typeof ht.mean=="number"?ot=[ht.mean,ht.mean,ht.mean,ht.mean]:(ot=[ht.mean[0],ht.mean[1],ht.mean[2],255],ht.mean[3]!==void 0&&(ot[3]=ht.mean[3])),ht===void 0||ht.bias===void 0?nt=[0,0,0,0]:typeof ht.bias=="number"?nt=[ht.bias,ht.bias,ht.bias,ht.bias]:(nt=[ht.bias[0],ht.bias[1],ht.bias[2],0],ht.bias[3]!==void 0&&(nt[3]=ht.bias[3]));const at=At*st;if(tt!==void 0&&(tt.format!==void 0&&ut===4&&tt.format!=="RGBA"||ut===3&&tt.format!=="RGB"&&tt.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const lt=4;let dt=0,ft=1,pt=2,gt=3,mt=0,yt=at,vt=2*at,wt=-1;ct==="RGBA"?(mt=0,yt=at,vt=2*at,wt=3*at):ct==="RGB"?(mt=0,yt=at,vt=2*at):ct==="RBG"&&(mt=0,vt=at,yt=2*at),it=rt.createImageData(st,At);for(let bt=0;bt<At*st;dt+=lt,ft+=lt,pt+=lt,gt+=lt,bt++)it.data[dt]=(_e.data[mt++]-nt[0])*ot[0],it.data[ft]=(_e.data[yt++]-nt[1])*ot[1],it.data[pt]=(_e.data[vt++]-nt[2])*ot[2],it.data[gt]=wt===-1?255:(_e.data[wt++]-nt[3])*ot[3]}return it}},4866:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tensorFromImage=_.bufferToTensor=void 0;const tt=_e(963);_.bufferToTensor=(rt,it)=>{if(rt===void 0)throw new Error("Image buffer must be defined");if(it.height===void 0||it.width===void 0)throw new Error("Image height and width must be defined");if(it.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:st,width:At}=it,ut=it.norm??{mean:255,bias:0};let ct,ht;ct=typeof ut.mean=="number"?[ut.mean,ut.mean,ut.mean,ut.mean]:[ut.mean[0],ut.mean[1],ut.mean[2],ut.mean[3]??255],ht=typeof ut.bias=="number"?[ut.bias,ut.bias,ut.bias,ut.bias]:[ut.bias[0],ut.bias[1],ut.bias[2],ut.bias[3]??0];const ot=it.format!==void 0?it.format:"RGBA",nt=it.tensorFormat!==void 0&&it.tensorFormat!==void 0?it.tensorFormat:"RGB",at=st*At,lt=nt==="RGBA"?new Float32Array(4*at):new Float32Array(3*at);let dt=4,ft=0,pt=1,gt=2,mt=3,yt=0,vt=at,wt=2*at,bt=-1;ot==="RGB"&&(dt=3,ft=0,pt=1,gt=2,mt=-1),nt==="RGBA"?bt=3*at:nt==="RBG"?(yt=0,wt=at,vt=2*at):nt==="BGR"&&(wt=0,vt=at,yt=2*at);for(let Bt=0;Bt<at;Bt++,ft+=dt,gt+=dt,pt+=dt,mt+=dt)lt[yt++]=(rt[ft]+ht[0])/ct[0],lt[vt++]=(rt[pt]+ht[1])/ct[1],lt[wt++]=(rt[gt]+ht[2])/ct[2],bt!==-1&&mt!==-1&&(lt[bt++]=(rt[mt]+ht[3])/ct[3]);return nt==="RGBA"?new tt.Tensor("float32",lt,[1,4,st,At]):new tt.Tensor("float32",lt,[1,3,st,At])},_.tensorFromImage=async(rt,it)=>{const st=typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement,At=typeof ImageData<"u"&&rt instanceof ImageData,ut=typeof ImageBitmap<"u"&&rt instanceof ImageBitmap,ct=typeof rt=="string";let ht,ot=it??{};if(st){const nt=document.createElement("canvas");nt.width=rt.width,nt.height=rt.height;const at=nt.getContext("2d");if(at==null)throw new Error("Can not access image data");{let lt=rt.height,dt=rt.width;if(it!==void 0&&it.resizedHeight!==void 0&&it.resizedWidth!==void 0&&(lt=it.resizedHeight,dt=it.resizedWidth),it!==void 0){if(ot=it,it.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");ot.tensorFormat="RGBA",ot.height=lt,ot.width=dt}else ot.tensorFormat="RGBA",ot.height=lt,ot.width=dt;at.drawImage(rt,0,0),ht=at.getImageData(0,0,dt,lt).data}}else{if(!At){if(ut){if(it===void 0)throw new Error("Please provide image config with format for Imagebitmap");const nt=document.createElement("canvas");nt.width=rt.width,nt.height=rt.height;const at=nt.getContext("2d");if(at!=null){const lt=rt.height,dt=rt.width;return at.drawImage(rt,0,0,dt,lt),ht=at.getImageData(0,0,dt,lt).data,ot.height=lt,ot.width=dt,(0,_.bufferToTensor)(ht,ot)}throw new Error("Can not access image data")}if(ct)return new Promise((nt,at)=>{const lt=document.createElement("canvas"),dt=lt.getContext("2d");if(!rt||!dt)return at();const ft=new Image;ft.crossOrigin="Anonymous",ft.src=rt,ft.onload=()=>{lt.width=ft.width,lt.height=ft.height,dt.drawImage(ft,0,0,lt.width,lt.height);const pt=dt.getImageData(0,0,lt.width,lt.height);ot.height=lt.height,ot.width=lt.width,nt((0,_.bufferToTensor)(pt.data,ot))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let nt,at;if(it!==void 0&&it.resizedWidth!==void 0&&it.resizedHeight!==void 0?(nt=it.resizedHeight,at=it.resizedWidth):(nt=rt.height,at=rt.width),it!==void 0&&(ot=it),ot.format="RGBA",ot.height=nt,ot.width=at,it!==void 0){const lt=document.createElement("canvas");lt.width=at,lt.height=nt;const dt=lt.getContext("2d");if(dt==null)throw new Error("Can not access image data");dt.putImageData(rt,0,0),ht=dt.getImageData(0,0,at,nt).data}else ht=rt.data}}if(ht!==void 0)return(0,_.bufferToTensor)(ht,ot);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const tt=_e(2350),rt=_e(4866),it=_e(106),st=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),At=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let ut=!1;_.Tensor=class{constructor(ct,ht,ot){let nt,at,lt;if((()=>{if(!ut){ut=!0;const ft=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",pt=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";ft&&(st.set("int64",BigInt64Array),At.set(BigInt64Array,"int64")),pt&&(st.set("uint64",BigUint64Array),At.set(BigUint64Array,"uint64"))}})(),typeof ct=="string")if(nt=ct,lt=ot,ct==="string"){if(!Array.isArray(ht))throw new TypeError("A string tensor's data must be a string array.");at=ht}else{const ft=st.get(ct);if(ft===void 0)throw new TypeError(`Unsupported tensor type: ${ct}.`);if(Array.isArray(ht)){if(ct==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");at=ct==="uint64"||ct==="int64"?ft.from(ht,BigInt):ft.from(ht)}else{if(!(ht instanceof ft))throw new TypeError(`A ${nt} tensor's data must be type of ${ft}`);at=ht}}else if(lt=ht,Array.isArray(ct)){if(ct.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const ft=typeof ct[0];if(ft==="string")nt="string",at=ct;else{if(ft!=="boolean")throw new TypeError(`Invalid element type of data array: ${ft}.`);nt="bool",at=Uint8Array.from(ct)}}else{const ft=At.get(ct.constructor);if(ft===void 0)throw new TypeError(`Unsupported type for tensor data: ${ct.constructor}.`);nt=ft,at=ct}if(lt===void 0)lt=[at.length];else if(!Array.isArray(lt))throw new TypeError("A tensor's dims must be a number array");const dt=(0,it.calculateSize)(lt);if(dt!==at.length)throw new Error(`Tensor's size(${dt}) does not match data length(${at.length}).`);this.dims=lt,this.type=nt,this.data=at,this.size=dt}static async fromImage(ct,ht){return(0,rt.tensorFromImage)(ct,ht)}toDataURL(ct){return(0,tt.tensorToDataURL)(this,ct)}toImageData(ct){return(0,tt.tensorToImageData)(this,ct)}reshape(ct){return(0,it.tensorReshape)(this,ct)}}},106:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tensorReshape=_.calculateSize=void 0;const tt=_e(963);_.calculateSize=rt=>{let it=1;for(let st=0;st<rt.length;st++){const At=rt[st];if(typeof At!="number"||!Number.isSafeInteger(At))throw new TypeError(`dims[${st}] must be an integer, got: ${At}`);if(At<0)throw new RangeError(`dims[${st}] must be a non-negative integer, got: ${At}`);it*=At}return it},_.tensorReshape=(rt,it)=>new tt.Tensor(rt.type,rt.data,it)},963:(et,_,_e)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const tt=_e(5957);_.Tensor=tt.Tensor},9104:(et,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.version=void 0,_.version="1.16.3"},1583:(et,_)=>{var _e,tt=function(rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=void 0;var it=null;try{it=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function st(xt,Ct,Ft){this.low=0|xt,this.high=0|Ct,this.unsigned=!!Ft}function At(xt){return(xt&&xt.__isLong__)===!0}function ut(xt){var Ct=Math.clz32(xt&-xt);return xt?31-Ct:Ct}st.prototype.__isLong__,Object.defineProperty(st.prototype,"__isLong__",{value:!0}),st.isLong=At;var ct={},ht={};function ot(xt,Ct){var Ft,Lt,Mt;return Ct?(Mt=0<=(xt>>>=0)&&xt<256)&&(Lt=ht[xt])?Lt:(Ft=at(xt,0,!0),Mt&&(ht[xt]=Ft),Ft):(Mt=-128<=(xt|=0)&&xt<128)&&(Lt=ct[xt])?Lt:(Ft=at(xt,xt<0?-1:0,!1),Mt&&(ct[xt]=Ft),Ft)}function nt(xt,Ct){if(isNaN(xt))return Ct?wt:vt;if(Ct){if(xt<0)return wt;if(xt>=gt)return Dt}else{if(xt<=-mt)return Ut;if(xt+1>=mt)return It}return xt<0?nt(-xt,Ct).neg():at(xt%pt|0,xt/pt|0,Ct)}function at(xt,Ct,Ft){return new st(xt,Ct,Ft)}st.fromInt=ot,st.fromNumber=nt,st.fromBits=at;var lt=Math.pow;function dt(xt,Ct,Ft){if(xt.length===0)throw Error("empty string");if(typeof Ct=="number"?(Ft=Ct,Ct=!1):Ct=!!Ct,xt==="NaN"||xt==="Infinity"||xt==="+Infinity"||xt==="-Infinity")return Ct?wt:vt;if((Ft=Ft||10)<2||36<Ft)throw RangeError("radix");var Lt;if((Lt=xt.indexOf("-"))>0)throw Error("interior hyphen");if(Lt===0)return dt(xt.substring(1),Ct,Ft).neg();for(var Mt=nt(lt(Ft,8)),Rt=vt,Nt=0;Nt<xt.length;Nt+=8){var Gt=Math.min(8,xt.length-Nt),Wt=parseInt(xt.substring(Nt,Nt+Gt),Ft);if(Gt<8){var Xt=nt(lt(Ft,Gt));Rt=Rt.mul(Xt).add(nt(Wt))}else Rt=(Rt=Rt.mul(Mt)).add(nt(Wt))}return Rt.unsigned=Ct,Rt}function ft(xt,Ct){return typeof xt=="number"?nt(xt,Ct):typeof xt=="string"?dt(xt,Ct):at(xt.low,xt.high,typeof Ct=="boolean"?Ct:xt.unsigned)}st.fromString=dt,st.fromValue=ft;var pt=4294967296,gt=pt*pt,mt=gt/2,yt=ot(1<<24),vt=ot(0);st.ZERO=vt;var wt=ot(0,!0);st.UZERO=wt;var bt=ot(1);st.ONE=bt;var Bt=ot(1,!0);st.UONE=Bt;var Tt=ot(-1);st.NEG_ONE=Tt;var It=at(-1,2147483647,!1);st.MAX_VALUE=It;var Dt=at(-1,-1,!0);st.MAX_UNSIGNED_VALUE=Dt;var Ut=at(0,-2147483648,!1);st.MIN_VALUE=Ut;var _t=st.prototype;_t.toInt=function(){return this.unsigned?this.low>>>0:this.low},_t.toNumber=function(){return this.unsigned?(this.high>>>0)*pt+(this.low>>>0):this.high*pt+(this.low>>>0)},_t.toString=function(xt){if((xt=xt||10)<2||36<xt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ut)){var Ct=nt(xt),Ft=this.div(Ct),Lt=Ft.mul(Ct).sub(this);return Ft.toString(xt)+Lt.toInt().toString(xt)}return"-"+this.neg().toString(xt)}for(var Mt=nt(lt(xt,6),this.unsigned),Rt=this,Nt="";;){var Gt=Rt.div(Mt),Wt=(Rt.sub(Gt.mul(Mt)).toInt()>>>0).toString(xt);if((Rt=Gt).isZero())return Wt+Nt;for(;Wt.length<6;)Wt="0"+Wt;Nt=""+Wt+Nt}},_t.getHighBits=function(){return this.high},_t.getHighBitsUnsigned=function(){return this.high>>>0},_t.getLowBits=function(){return this.low},_t.getLowBitsUnsigned=function(){return this.low>>>0},_t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ut)?64:this.neg().getNumBitsAbs();for(var xt=this.high!=0?this.high:this.low,Ct=31;Ct>0&&!(xt&1<<Ct);Ct--);return this.high!=0?Ct+33:Ct+1},_t.isZero=function(){return this.high===0&&this.low===0},_t.eqz=_t.isZero,_t.isNegative=function(){return!this.unsigned&&this.high<0},_t.isPositive=function(){return this.unsigned||this.high>=0},_t.isOdd=function(){return(1&this.low)==1},_t.isEven=function(){return(1&this.low)==0},_t.equals=function(xt){return At(xt)||(xt=ft(xt)),(this.unsigned===xt.unsigned||this.high>>>31!=1||xt.high>>>31!=1)&&this.high===xt.high&&this.low===xt.low},_t.eq=_t.equals,_t.notEquals=function(xt){return!this.eq(xt)},_t.neq=_t.notEquals,_t.ne=_t.notEquals,_t.lessThan=function(xt){return this.comp(xt)<0},_t.lt=_t.lessThan,_t.lessThanOrEqual=function(xt){return this.comp(xt)<=0},_t.lte=_t.lessThanOrEqual,_t.le=_t.lessThanOrEqual,_t.greaterThan=function(xt){return this.comp(xt)>0},_t.gt=_t.greaterThan,_t.greaterThanOrEqual=function(xt){return this.comp(xt)>=0},_t.gte=_t.greaterThanOrEqual,_t.ge=_t.greaterThanOrEqual,_t.compare=function(xt){if(At(xt)||(xt=ft(xt)),this.eq(xt))return 0;var Ct=this.isNegative(),Ft=xt.isNegative();return Ct&&!Ft?-1:!Ct&&Ft?1:this.unsigned?xt.high>>>0>this.high>>>0||xt.high===this.high&&xt.low>>>0>this.low>>>0?-1:1:this.sub(xt).isNegative()?-1:1},_t.comp=_t.compare,_t.negate=function(){return!this.unsigned&&this.eq(Ut)?Ut:this.not().add(bt)},_t.neg=_t.negate,_t.add=function(xt){At(xt)||(xt=ft(xt));var Ct=this.high>>>16,Ft=65535&this.high,Lt=this.low>>>16,Mt=65535&this.low,Rt=xt.high>>>16,Nt=65535&xt.high,Gt=xt.low>>>16,Wt=0,Xt=0,Yt=0,Zt=0;return Yt+=(Zt+=Mt+(65535&xt.low))>>>16,Xt+=(Yt+=Lt+Gt)>>>16,Wt+=(Xt+=Ft+Nt)>>>16,Wt+=Ct+Rt,at((Yt&=65535)<<16|(Zt&=65535),(Wt&=65535)<<16|(Xt&=65535),this.unsigned)},_t.subtract=function(xt){return At(xt)||(xt=ft(xt)),this.add(xt.neg())},_t.sub=_t.subtract,_t.multiply=function(xt){if(this.isZero())return this;if(At(xt)||(xt=ft(xt)),it)return at(it.mul(this.low,this.high,xt.low,xt.high),it.get_high(),this.unsigned);if(xt.isZero())return this.unsigned?wt:vt;if(this.eq(Ut))return xt.isOdd()?Ut:vt;if(xt.eq(Ut))return this.isOdd()?Ut:vt;if(this.isNegative())return xt.isNegative()?this.neg().mul(xt.neg()):this.neg().mul(xt).neg();if(xt.isNegative())return this.mul(xt.neg()).neg();if(this.lt(yt)&&xt.lt(yt))return nt(this.toNumber()*xt.toNumber(),this.unsigned);var Ct=this.high>>>16,Ft=65535&this.high,Lt=this.low>>>16,Mt=65535&this.low,Rt=xt.high>>>16,Nt=65535&xt.high,Gt=xt.low>>>16,Wt=65535&xt.low,Xt=0,Yt=0,Zt=0,er=0;return Zt+=(er+=Mt*Wt)>>>16,Yt+=(Zt+=Lt*Wt)>>>16,Zt&=65535,Yt+=(Zt+=Mt*Gt)>>>16,Xt+=(Yt+=Ft*Wt)>>>16,Yt&=65535,Xt+=(Yt+=Lt*Gt)>>>16,Yt&=65535,Xt+=(Yt+=Mt*Nt)>>>16,Xt+=Ct*Wt+Ft*Gt+Lt*Nt+Mt*Rt,at((Zt&=65535)<<16|(er&=65535),(Xt&=65535)<<16|(Yt&=65535),this.unsigned)},_t.mul=_t.multiply,_t.divide=function(xt){if(At(xt)||(xt=ft(xt)),xt.isZero())throw Error("division by zero");var Ct,Ft,Lt;if(it)return this.unsigned||this.high!==-2147483648||xt.low!==-1||xt.high!==-1?at((this.unsigned?it.div_u:it.div_s)(this.low,this.high,xt.low,xt.high),it.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?wt:vt;if(this.unsigned){if(xt.unsigned||(xt=xt.toUnsigned()),xt.gt(this))return wt;if(xt.gt(this.shru(1)))return Bt;Lt=wt}else{if(this.eq(Ut))return xt.eq(bt)||xt.eq(Tt)?Ut:xt.eq(Ut)?bt:(Ct=this.shr(1).div(xt).shl(1)).eq(vt)?xt.isNegative()?bt:Tt:(Ft=this.sub(xt.mul(Ct)),Lt=Ct.add(Ft.div(xt)));if(xt.eq(Ut))return this.unsigned?wt:vt;if(this.isNegative())return xt.isNegative()?this.neg().div(xt.neg()):this.neg().div(xt).neg();if(xt.isNegative())return this.div(xt.neg()).neg();Lt=vt}for(Ft=this;Ft.gte(xt);){Ct=Math.max(1,Math.floor(Ft.toNumber()/xt.toNumber()));for(var Mt=Math.ceil(Math.log(Ct)/Math.LN2),Rt=Mt<=48?1:lt(2,Mt-48),Nt=nt(Ct),Gt=Nt.mul(xt);Gt.isNegative()||Gt.gt(Ft);)Gt=(Nt=nt(Ct-=Rt,this.unsigned)).mul(xt);Nt.isZero()&&(Nt=bt),Lt=Lt.add(Nt),Ft=Ft.sub(Gt)}return Lt},_t.div=_t.divide,_t.modulo=function(xt){return At(xt)||(xt=ft(xt)),it?at((this.unsigned?it.rem_u:it.rem_s)(this.low,this.high,xt.low,xt.high),it.get_high(),this.unsigned):this.sub(this.div(xt).mul(xt))},_t.mod=_t.modulo,_t.rem=_t.modulo,_t.not=function(){return at(~this.low,~this.high,this.unsigned)},_t.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_t.clz=_t.countLeadingZeros,_t.countTrailingZeros=function(){return this.low?ut(this.low):ut(this.high)+32},_t.ctz=_t.countTrailingZeros,_t.and=function(xt){return At(xt)||(xt=ft(xt)),at(this.low&xt.low,this.high&xt.high,this.unsigned)},_t.or=function(xt){return At(xt)||(xt=ft(xt)),at(this.low|xt.low,this.high|xt.high,this.unsigned)},_t.xor=function(xt){return At(xt)||(xt=ft(xt)),at(this.low^xt.low,this.high^xt.high,this.unsigned)},_t.shiftLeft=function(xt){return At(xt)&&(xt=xt.toInt()),(xt&=63)==0?this:xt<32?at(this.low<<xt,this.high<<xt|this.low>>>32-xt,this.unsigned):at(0,this.low<<xt-32,this.unsigned)},_t.shl=_t.shiftLeft,_t.shiftRight=function(xt){return At(xt)&&(xt=xt.toInt()),(xt&=63)==0?this:xt<32?at(this.low>>>xt|this.high<<32-xt,this.high>>xt,this.unsigned):at(this.high>>xt-32,this.high>=0?0:-1,this.unsigned)},_t.shr=_t.shiftRight,_t.shiftRightUnsigned=function(xt){return At(xt)&&(xt=xt.toInt()),(xt&=63)==0?this:xt<32?at(this.low>>>xt|this.high<<32-xt,this.high>>>xt,this.unsigned):at(xt===32?this.high:this.high>>>xt-32,0,this.unsigned)},_t.shru=_t.shiftRightUnsigned,_t.shr_u=_t.shiftRightUnsigned,_t.rotateLeft=function(xt){var Ct;return At(xt)&&(xt=xt.toInt()),(xt&=63)==0?this:xt===32?at(this.high,this.low,this.unsigned):xt<32?(Ct=32-xt,at(this.low<<xt|this.high>>>Ct,this.high<<xt|this.low>>>Ct,this.unsigned)):(Ct=32-(xt-=32),at(this.high<<xt|this.low>>>Ct,this.low<<xt|this.high>>>Ct,this.unsigned))},_t.rotl=_t.rotateLeft,_t.rotateRight=function(xt){var Ct;return At(xt)&&(xt=xt.toInt()),(xt&=63)==0?this:xt===32?at(this.high,this.low,this.unsigned):xt<32?(Ct=32-xt,at(this.high<<Ct|this.low>>>xt,this.low<<Ct|this.high>>>xt,this.unsigned)):(Ct=32-(xt-=32),at(this.low<<Ct|this.high>>>xt,this.high<<Ct|this.low>>>xt,this.unsigned))},_t.rotr=_t.rotateRight,_t.toSigned=function(){return this.unsigned?at(this.low,this.high,!1):this},_t.toUnsigned=function(){return this.unsigned?this:at(this.low,this.high,!0)},_t.toBytes=function(xt){return xt?this.toBytesLE():this.toBytesBE()},_t.toBytesLE=function(){var xt=this.high,Ct=this.low;return[255&Ct,Ct>>>8&255,Ct>>>16&255,Ct>>>24,255&xt,xt>>>8&255,xt>>>16&255,xt>>>24]},_t.toBytesBE=function(){var xt=this.high,Ct=this.low;return[xt>>>24,xt>>>16&255,xt>>>8&255,255&xt,Ct>>>24,Ct>>>16&255,Ct>>>8&255,255&Ct]},st.fromBytes=function(xt,Ct,Ft){return Ft?st.fromBytesLE(xt,Ct):st.fromBytesBE(xt,Ct)},st.fromBytesLE=function(xt,Ct){return new st(xt[0]|xt[1]<<8|xt[2]<<16|xt[3]<<24,xt[4]|xt[5]<<8|xt[6]<<16|xt[7]<<24,Ct)},st.fromBytesBE=function(xt,Ct){return new st(xt[4]<<24|xt[5]<<16|xt[6]<<8|xt[7],xt[0]<<24|xt[1]<<16|xt[2]<<8|xt[3],Ct)};var St=st;return rt.default=St,"default"in rt?rt.default:rt}({});(_e=(function(){return tt}).apply(_,[]))===void 0||(et.exports=_e)},5686:(et,_,_e)=>{_e.r(_),_e.d(_,{flatbuffers:()=>tt});var tt={};tt.Offset,tt.Table,tt.SIZEOF_SHORT=2,tt.SIZEOF_INT=4,tt.FILE_IDENTIFIER_LENGTH=4,tt.SIZE_PREFIX_LENGTH=4,tt.Encoding={UTF8_BYTES:1,UTF16_STRING:2},tt.int32=new Int32Array(2),tt.float32=new Float32Array(tt.int32.buffer),tt.float64=new Float64Array(tt.int32.buffer),tt.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,tt.Long=function(rt,it){this.low=0|rt,this.high=0|it},tt.Long.create=function(rt,it){return rt==0&&it==0?tt.Long.ZERO:new tt.Long(rt,it)},tt.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},tt.Long.prototype.equals=function(rt){return this.low==rt.low&&this.high==rt.high},tt.Long.ZERO=new tt.Long(0,0),tt.Builder=function(rt){if(rt)it=rt;else var it=1024;this.bb=tt.ByteBuffer.allocate(it),this.space=it,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.forceDefaults=function(rt){this.force_defaults=rt},tt.Builder.prototype.dataBuffer=function(){return this.bb},tt.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},tt.Builder.prototype.prep=function(rt,it){rt>this.minalign&&(this.minalign=rt);for(var st=1+~(this.bb.capacity()-this.space+it)&rt-1;this.space<st+rt+it;){var At=this.bb.capacity();this.bb=tt.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-At}this.pad(st)},tt.Builder.prototype.pad=function(rt){for(var it=0;it<rt;it++)this.bb.writeInt8(--this.space,0)},tt.Builder.prototype.writeInt8=function(rt){this.bb.writeInt8(this.space-=1,rt)},tt.Builder.prototype.writeInt16=function(rt){this.bb.writeInt16(this.space-=2,rt)},tt.Builder.prototype.writeInt32=function(rt){this.bb.writeInt32(this.space-=4,rt)},tt.Builder.prototype.writeInt64=function(rt){this.bb.writeInt64(this.space-=8,rt)},tt.Builder.prototype.writeFloat32=function(rt){this.bb.writeFloat32(this.space-=4,rt)},tt.Builder.prototype.writeFloat64=function(rt){this.bb.writeFloat64(this.space-=8,rt)},tt.Builder.prototype.addInt8=function(rt){this.prep(1,0),this.writeInt8(rt)},tt.Builder.prototype.addInt16=function(rt){this.prep(2,0),this.writeInt16(rt)},tt.Builder.prototype.addInt32=function(rt){this.prep(4,0),this.writeInt32(rt)},tt.Builder.prototype.addInt64=function(rt){this.prep(8,0),this.writeInt64(rt)},tt.Builder.prototype.addFloat32=function(rt){this.prep(4,0),this.writeFloat32(rt)},tt.Builder.prototype.addFloat64=function(rt){this.prep(8,0),this.writeFloat64(rt)},tt.Builder.prototype.addFieldInt8=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt8(it),this.slot(rt))},tt.Builder.prototype.addFieldInt16=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt16(it),this.slot(rt))},tt.Builder.prototype.addFieldInt32=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt32(it),this.slot(rt))},tt.Builder.prototype.addFieldInt64=function(rt,it,st){!this.force_defaults&&it.equals(st)||(this.addInt64(it),this.slot(rt))},tt.Builder.prototype.addFieldFloat32=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addFloat32(it),this.slot(rt))},tt.Builder.prototype.addFieldFloat64=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addFloat64(it),this.slot(rt))},tt.Builder.prototype.addFieldOffset=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addOffset(it),this.slot(rt))},tt.Builder.prototype.addFieldStruct=function(rt,it,st){it!=st&&(this.nested(it),this.slot(rt))},tt.Builder.prototype.nested=function(rt){if(rt!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},tt.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},tt.Builder.prototype.slot=function(rt){this.vtable[rt]=this.offset()},tt.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},tt.Builder.growByteBuffer=function(rt){var it=rt.capacity();if(3221225472&it)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var st=it<<1,At=tt.ByteBuffer.allocate(st);return At.setPosition(st-it),At.bytes().set(rt.bytes(),st-it),At},tt.Builder.prototype.addOffset=function(rt){this.prep(tt.SIZEOF_INT,0),this.writeInt32(this.offset()-rt+tt.SIZEOF_INT)},tt.Builder.prototype.startObject=function(rt){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=rt;for(var it=0;it<rt;it++)this.vtable[it]=0;this.isNested=!0,this.object_start=this.offset()},tt.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var rt=this.offset(),it=this.vtable_in_use-1;it>=0&&this.vtable[it]==0;it--);for(var st=it+1;it>=0;it--)this.addInt16(this.vtable[it]!=0?rt-this.vtable[it]:0);this.addInt16(rt-this.object_start);var At=(st+2)*tt.SIZEOF_SHORT;this.addInt16(At);var ut=0,ct=this.space;e:for(it=0;it<this.vtables.length;it++){var ht=this.bb.capacity()-this.vtables[it];if(At==this.bb.readInt16(ht)){for(var ot=tt.SIZEOF_SHORT;ot<At;ot+=tt.SIZEOF_SHORT)if(this.bb.readInt16(ct+ot)!=this.bb.readInt16(ht+ot))continue e;ut=this.vtables[it];break}}return ut?(this.space=this.bb.capacity()-rt,this.bb.writeInt32(this.space,ut-rt)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-rt,this.offset()-rt)),this.isNested=!1,rt},tt.Builder.prototype.finish=function(rt,it,st){var At=st?tt.SIZE_PREFIX_LENGTH:0;if(it){var ut=it;if(this.prep(this.minalign,tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH+At),ut.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var ct=tt.FILE_IDENTIFIER_LENGTH-1;ct>=0;ct--)this.writeInt8(ut.charCodeAt(ct))}this.prep(this.minalign,tt.SIZEOF_INT+At),this.addOffset(rt),At&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},tt.Builder.prototype.finishSizePrefixed=function(rt,it){this.finish(rt,it,!0)},tt.Builder.prototype.requiredField=function(rt,it){var st=this.bb.capacity()-rt,At=st-this.bb.readInt32(st);if(this.bb.readInt16(At+it)==0)throw new Error("FlatBuffers: field "+it+" must be set")},tt.Builder.prototype.startVector=function(rt,it,st){this.notNested(),this.vector_num_elems=it,this.prep(tt.SIZEOF_INT,rt*it),this.prep(st,rt*it)},tt.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},tt.Builder.prototype.createString=function(rt){if(rt instanceof Uint8Array)var it=rt;else{it=[];for(var st=0;st<rt.length;){var At,ut=rt.charCodeAt(st++);(At=ut<55296||ut>=56320?ut:(ut<<10)+rt.charCodeAt(st++)+-56613888)<128?it.push(At):(At<2048?it.push(At>>6&31|192):(At<65536?it.push(At>>12&15|224):it.push(At>>18&7|240,At>>12&63|128),it.push(At>>6&63|128)),it.push(63&At|128))}}this.addInt8(0),this.startVector(1,it.length,1),this.bb.setPosition(this.space-=it.length),st=0;for(var ct=this.space,ht=this.bb.bytes();st<it.length;st++)ht[ct++]=it[st];return this.endVector()},tt.Builder.prototype.createLong=function(rt,it){return tt.Long.create(rt,it)},tt.ByteBuffer=function(rt){this.bytes_=rt,this.position_=0},tt.ByteBuffer.allocate=function(rt){return new tt.ByteBuffer(new Uint8Array(rt))},tt.ByteBuffer.prototype.clear=function(){this.position_=0},tt.ByteBuffer.prototype.bytes=function(){return this.bytes_},tt.ByteBuffer.prototype.position=function(){return this.position_},tt.ByteBuffer.prototype.setPosition=function(rt){this.position_=rt},tt.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},tt.ByteBuffer.prototype.readInt8=function(rt){return this.readUint8(rt)<<24>>24},tt.ByteBuffer.prototype.readUint8=function(rt){return this.bytes_[rt]},tt.ByteBuffer.prototype.readInt16=function(rt){return this.readUint16(rt)<<16>>16},tt.ByteBuffer.prototype.readUint16=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8},tt.ByteBuffer.prototype.readInt32=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8|this.bytes_[rt+2]<<16|this.bytes_[rt+3]<<24},tt.ByteBuffer.prototype.readUint32=function(rt){return this.readInt32(rt)>>>0},tt.ByteBuffer.prototype.readInt64=function(rt){return new tt.Long(this.readInt32(rt),this.readInt32(rt+4))},tt.ByteBuffer.prototype.readUint64=function(rt){return new tt.Long(this.readUint32(rt),this.readUint32(rt+4))},tt.ByteBuffer.prototype.readFloat32=function(rt){return tt.int32[0]=this.readInt32(rt),tt.float32[0]},tt.ByteBuffer.prototype.readFloat64=function(rt){return tt.int32[tt.isLittleEndian?0:1]=this.readInt32(rt),tt.int32[tt.isLittleEndian?1:0]=this.readInt32(rt+4),tt.float64[0]},tt.ByteBuffer.prototype.writeInt8=function(rt,it){this.bytes_[rt]=it},tt.ByteBuffer.prototype.writeUint8=function(rt,it){this.bytes_[rt]=it},tt.ByteBuffer.prototype.writeInt16=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8},tt.ByteBuffer.prototype.writeUint16=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8},tt.ByteBuffer.prototype.writeInt32=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8,this.bytes_[rt+2]=it>>16,this.bytes_[rt+3]=it>>24},tt.ByteBuffer.prototype.writeUint32=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8,this.bytes_[rt+2]=it>>16,this.bytes_[rt+3]=it>>24},tt.ByteBuffer.prototype.writeInt64=function(rt,it){this.writeInt32(rt,it.low),this.writeInt32(rt+4,it.high)},tt.ByteBuffer.prototype.writeUint64=function(rt,it){this.writeUint32(rt,it.low),this.writeUint32(rt+4,it.high)},tt.ByteBuffer.prototype.writeFloat32=function(rt,it){tt.float32[0]=it,this.writeInt32(rt,tt.int32[0])},tt.ByteBuffer.prototype.writeFloat64=function(rt,it){tt.float64[0]=it,this.writeInt32(rt,tt.int32[tt.isLittleEndian?0:1]),this.writeInt32(rt+4,tt.int32[tt.isLittleEndian?1:0])},tt.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var rt="",it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)rt+=String.fromCharCode(this.readInt8(this.position_+tt.SIZEOF_INT+it));return rt},tt.ByteBuffer.prototype.__offset=function(rt,it){var st=rt-this.readInt32(rt);return it<this.readInt16(st)?this.readInt16(st+it):0},tt.ByteBuffer.prototype.__union=function(rt,it){return rt.bb_pos=it+this.readInt32(it),rt.bb=this,rt},tt.ByteBuffer.prototype.__string=function(rt,it){rt+=this.readInt32(rt);var st=this.readInt32(rt),At="",ut=0;if(rt+=tt.SIZEOF_INT,it===tt.Encoding.UTF8_BYTES)return this.bytes_.subarray(rt,rt+st);for(;ut<st;){var ct,ht=this.readUint8(rt+ut++);if(ht<192)ct=ht;else{var ot=this.readUint8(rt+ut++);if(ht<224)ct=(31&ht)<<6|63&ot;else{var nt=this.readUint8(rt+ut++);ct=ht<240?(15&ht)<<12|(63&ot)<<6|63&nt:(7&ht)<<18|(63&ot)<<12|(63&nt)<<6|63&this.readUint8(rt+ut++)}}ct<65536?At+=String.fromCharCode(ct):(ct-=65536,At+=String.fromCharCode(55296+(ct>>10),56320+(1023&ct)))}return At},tt.ByteBuffer.prototype.__indirect=function(rt){return rt+this.readInt32(rt)},tt.ByteBuffer.prototype.__vector=function(rt){return rt+this.readInt32(rt)+tt.SIZEOF_INT},tt.ByteBuffer.prototype.__vector_len=function(rt){return this.readInt32(rt+this.readInt32(rt))},tt.ByteBuffer.prototype.__has_identifier=function(rt){if(rt.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)if(rt.charCodeAt(it)!=this.readInt8(this.position_+tt.SIZEOF_INT+it))return!1;return!0},tt.ByteBuffer.prototype.createLong=function(rt,it){return tt.Long.create(rt,it)}}},__webpack_module_cache__={};function __webpack_require__(et){var _=__webpack_module_cache__[et];if(_!==void 0)return _.exports;var _e=__webpack_module_cache__[et]={exports:{}};return __webpack_modules__[et].call(_e.exports,_e,_e.exports,__webpack_require__),_e.exports}__webpack_require__.n=et=>{var _=et&&et.__esModule?()=>et.default:()=>et;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(et,_)=>{for(var _e in _)__webpack_require__.o(_,_e)&&!__webpack_require__.o(et,_e)&&Object.defineProperty(et,_e,{enumerable:!0,get:_[_e]})},__webpack_require__.o=(et,_)=>Object.prototype.hasOwnProperty.call(et,_),__webpack_require__.r=et=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(et,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__})())})(ort_min);var ort_minExports=ort_min.exports,browserPonyfill={exports:{}};(function(et,_){var _e=typeof self<"u"?self:commonjsGlobal,tt=function(){function it(){this.fetch=!1,this.DOMException=_e.DOMException}return it.prototype=_e,new it}();(function(it){(function(st){var At={searchParams:"URLSearchParams"in it,iterable:"Symbol"in it&&"iterator"in Symbol,blob:"FileReader"in it&&"Blob"in it&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in it,arrayBuffer:"ArrayBuffer"in it};function ut(St){return St&&DataView.prototype.isPrototypeOf(St)}if(At.arrayBuffer)var ct=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ht=ArrayBuffer.isView||function(St){return St&&ct.indexOf(Object.prototype.toString.call(St))>-1};function ot(St){if(typeof St!="string"&&(St=String(St)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(St))throw new TypeError("Invalid character in header field name");return St.toLowerCase()}function nt(St){return typeof St!="string"&&(St=String(St)),St}function at(St){var xt={next:function(){var Ct=St.shift();return{done:Ct===void 0,value:Ct}}};return At.iterable&&(xt[Symbol.iterator]=function(){return xt}),xt}function lt(St){this.map={},St instanceof lt?St.forEach(function(xt,Ct){this.append(Ct,xt)},this):Array.isArray(St)?St.forEach(function(xt){this.append(xt[0],xt[1])},this):St&&Object.getOwnPropertyNames(St).forEach(function(xt){this.append(xt,St[xt])},this)}lt.prototype.append=function(St,xt){St=ot(St),xt=nt(xt);var Ct=this.map[St];this.map[St]=Ct?Ct+", "+xt:xt},lt.prototype.delete=function(St){delete this.map[ot(St)]},lt.prototype.get=function(St){return St=ot(St),this.has(St)?this.map[St]:null},lt.prototype.has=function(St){return this.map.hasOwnProperty(ot(St))},lt.prototype.set=function(St,xt){this.map[ot(St)]=nt(xt)},lt.prototype.forEach=function(St,xt){for(var Ct in this.map)this.map.hasOwnProperty(Ct)&&St.call(xt,this.map[Ct],Ct,this)},lt.prototype.keys=function(){var St=[];return this.forEach(function(xt,Ct){St.push(Ct)}),at(St)},lt.prototype.values=function(){var St=[];return this.forEach(function(xt){St.push(xt)}),at(St)},lt.prototype.entries=function(){var St=[];return this.forEach(function(xt,Ct){St.push([Ct,xt])}),at(St)},At.iterable&&(lt.prototype[Symbol.iterator]=lt.prototype.entries);function dt(St){if(St.bodyUsed)return Promise.reject(new TypeError("Already read"));St.bodyUsed=!0}function ft(St){return new Promise(function(xt,Ct){St.onload=function(){xt(St.result)},St.onerror=function(){Ct(St.error)}})}function pt(St){var xt=new FileReader,Ct=ft(xt);return xt.readAsArrayBuffer(St),Ct}function gt(St){var xt=new FileReader,Ct=ft(xt);return xt.readAsText(St),Ct}function mt(St){for(var xt=new Uint8Array(St),Ct=new Array(xt.length),Ft=0;Ft<xt.length;Ft++)Ct[Ft]=String.fromCharCode(xt[Ft]);return Ct.join("")}function yt(St){if(St.slice)return St.slice(0);var xt=new Uint8Array(St.byteLength);return xt.set(new Uint8Array(St)),xt.buffer}function vt(){return this.bodyUsed=!1,this._initBody=function(St){this._bodyInit=St,St?typeof St=="string"?this._bodyText=St:At.blob&&Blob.prototype.isPrototypeOf(St)?this._bodyBlob=St:At.formData&&FormData.prototype.isPrototypeOf(St)?this._bodyFormData=St:At.searchParams&&URLSearchParams.prototype.isPrototypeOf(St)?this._bodyText=St.toString():At.arrayBuffer&&At.blob&&ut(St)?(this._bodyArrayBuffer=yt(St.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):At.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(St)||ht(St))?this._bodyArrayBuffer=yt(St):this._bodyText=St=Object.prototype.toString.call(St):this._bodyText="",this.headers.get("content-type")||(typeof St=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):At.searchParams&&URLSearchParams.prototype.isPrototypeOf(St)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},At.blob&&(this.blob=function(){var St=dt(this);if(St)return St;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?dt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(pt)}),this.text=function(){var St=dt(this);if(St)return St;if(this._bodyBlob)return gt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(mt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},At.formData&&(this.formData=function(){return this.text().then(Tt)}),this.json=function(){return this.text().then(JSON.parse)},this}var wt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function bt(St){var xt=St.toUpperCase();return wt.indexOf(xt)>-1?xt:St}function Bt(St,xt){xt=xt||{};var Ct=xt.body;if(St instanceof Bt){if(St.bodyUsed)throw new TypeError("Already read");this.url=St.url,this.credentials=St.credentials,xt.headers||(this.headers=new lt(St.headers)),this.method=St.method,this.mode=St.mode,this.signal=St.signal,!Ct&&St._bodyInit!=null&&(Ct=St._bodyInit,St.bodyUsed=!0)}else this.url=String(St);if(this.credentials=xt.credentials||this.credentials||"same-origin",(xt.headers||!this.headers)&&(this.headers=new lt(xt.headers)),this.method=bt(xt.method||this.method||"GET"),this.mode=xt.mode||this.mode||null,this.signal=xt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Ct)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Ct)}Bt.prototype.clone=function(){return new Bt(this,{body:this._bodyInit})};function Tt(St){var xt=new FormData;return St.trim().split("&").forEach(function(Ct){if(Ct){var Ft=Ct.split("="),Lt=Ft.shift().replace(/\+/g," "),Mt=Ft.join("=").replace(/\+/g," ");xt.append(decodeURIComponent(Lt),decodeURIComponent(Mt))}}),xt}function It(St){var xt=new lt,Ct=St.replace(/\r?\n[\t ]+/g," ");return Ct.split(/\r?\n/).forEach(function(Ft){var Lt=Ft.split(":"),Mt=Lt.shift().trim();if(Mt){var Rt=Lt.join(":").trim();xt.append(Mt,Rt)}}),xt}vt.call(Bt.prototype);function Dt(St,xt){xt||(xt={}),this.type="default",this.status=xt.status===void 0?200:xt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in xt?xt.statusText:"OK",this.headers=new lt(xt.headers),this.url=xt.url||"",this._initBody(St)}vt.call(Dt.prototype),Dt.prototype.clone=function(){return new Dt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new lt(this.headers),url:this.url})},Dt.error=function(){var St=new Dt(null,{status:0,statusText:""});return St.type="error",St};var Ut=[301,302,303,307,308];Dt.redirect=function(St,xt){if(Ut.indexOf(xt)===-1)throw new RangeError("Invalid status code");return new Dt(null,{status:xt,headers:{location:St}})},st.DOMException=it.DOMException;try{new st.DOMException}catch{st.DOMException=function(xt,Ct){this.message=xt,this.name=Ct;var Ft=Error(xt);this.stack=Ft.stack},st.DOMException.prototype=Object.create(Error.prototype),st.DOMException.prototype.constructor=st.DOMException}function _t(St,xt){return new Promise(function(Ct,Ft){var Lt=new Bt(St,xt);if(Lt.signal&&Lt.signal.aborted)return Ft(new st.DOMException("Aborted","AbortError"));var Mt=new XMLHttpRequest;function Rt(){Mt.abort()}Mt.onload=function(){var Nt={status:Mt.status,statusText:Mt.statusText,headers:It(Mt.getAllResponseHeaders()||"")};Nt.url="responseURL"in Mt?Mt.responseURL:Nt.headers.get("X-Request-URL");var Gt="response"in Mt?Mt.response:Mt.responseText;Ct(new Dt(Gt,Nt))},Mt.onerror=function(){Ft(new TypeError("Network request failed"))},Mt.ontimeout=function(){Ft(new TypeError("Network request failed"))},Mt.onabort=function(){Ft(new st.DOMException("Aborted","AbortError"))},Mt.open(Lt.method,Lt.url,!0),Lt.credentials==="include"?Mt.withCredentials=!0:Lt.credentials==="omit"&&(Mt.withCredentials=!1),"responseType"in Mt&&At.blob&&(Mt.responseType="blob"),Lt.headers.forEach(function(Nt,Gt){Mt.setRequestHeader(Gt,Nt)}),Lt.signal&&(Lt.signal.addEventListener("abort",Rt),Mt.onreadystatechange=function(){Mt.readyState===4&&Lt.signal.removeEventListener("abort",Rt)}),Mt.send(typeof Lt._bodyInit>"u"?null:Lt._bodyInit)})}return _t.polyfill=!0,it.fetch||(it.fetch=_t,it.Headers=lt,it.Request=Bt,it.Response=Dt),st.Headers=lt,st.Request=Bt,st.Response=Dt,st.fetch=_t,Object.defineProperty(st,"__esModule",{value:!0}),st})({})})(tt),tt.fetch.ponyfill=!0,delete tt.fetch.polyfill;var rt=tt;_=rt.fetch,_.default=rt.fetch,_.fetch=rt.fetch,_.Headers=rt.Headers,_.Request=rt.Request,_.Response=rt.Response,et.exports=_})(browserPonyfill,browserPonyfill.exports);var browserPonyfillExports=browserPonyfill.exports;const fetch$1=getDefaultExportFromCjs(browserPonyfillExports);class npyjs{constructor(_){_&&console.error(["No arguments accepted to npyjs constructor.","For usage, go to https://github.com/jhuapl-boss/npyjs."].join(" ")),this.dtypes={"<u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"|u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"<u2":{name:"uint16",size:16,arrayConstructor:Uint16Array},"|i1":{name:"int8",size:8,arrayConstructor:Int8Array},"<i2":{name:"int16",size:16,arrayConstructor:Int16Array},"<u4":{name:"uint32",size:32,arrayConstructor:Int32Array},"<i4":{name:"int32",size:32,arrayConstructor:Int32Array},"<u8":{name:"uint64",size:64,arrayConstructor:BigUint64Array},"<i8":{name:"int64",size:64,arrayConstructor:BigInt64Array},"<f4":{name:"float32",size:32,arrayConstructor:Float32Array},"<f8":{name:"float64",size:64,arrayConstructor:Float64Array}}}parse(_){const _e=new DataView(_.slice(8,10)).getUint8(0),tt=10+_e,rt=new TextDecoder("utf-8").decode(new Uint8Array(_.slice(10,10+_e))),it=JSON.parse(rt.toLowerCase().replace(/'/g,'"').replace("(","[").replace(/,*\),*/g,"]")),st=it.shape,At=this.dtypes[it.descr],ut=new At.arrayConstructor(_,tt);return{dtype:At.name,data:ut,shape:st,fortranOrder:it.fortran_order}}async load(_,_e,tt){tt=tt||{};let rt;_ instanceof ArrayBuffer?rt=_:rt=await(await fetch$1(_,{...tt})).arrayBuffer();const it=this.parse(rt);return _e?_e(it):it}}const getTensorFromBase64String=async et=>{const _=window.atob(et),_e=new Uint8Array(_.length);for(let st=0;st<_.length;st++)_e[st]=_.charCodeAt(st);const rt=await new npyjs().load(_e.buffer);return new ort_minExports.Tensor("float32",rt.data,rt.shape)},getSamModelData=({clicks:et,embedding:_,modelScale:_e})=>{let tt,rt,it,st;if(et){let ht=et.length;tt=new Float32Array(2*(ht+1)),rt=new Float32Array(ht+1);for(let ot=0;ot<ht;ot++)tt[2*ot]=et[ot].x*_e.samScale,tt[2*ot+1]=et[ot].y*_e.samScale,rt[ot]=et[ot].clickType;tt[2*ht]=0,tt[2*ht+1]=0,rt[ht]=-1,it=new ort_minExports.Tensor("float32",tt,[1,ht+1,2]),st=new ort_minExports.Tensor("float32",rt,[1,ht+1])}const At=new ort_minExports.Tensor("float32",[_e.height,_e.width]);if(it===void 0||st===void 0)return;const ut=new ort_minExports.Tensor("float32",new Float32Array(256*256),[1,1,256,256]),ct=new ort_minExports.Tensor("float32",[0]);return{image_embeddings:_,point_coords:it,point_labels:st,orig_im_size:At,mask_input:ut,has_mask_input:ct}},handleImageScale=(et,_)=>{const tt=1024/Math.max(_,et);return{height:_,width:et,samScale:tt}},registerSamPromptDecoder=({modelUrl:et="simulated_neural_tissue/sam_q.onnx",state:_})=>{let _e;return(async()=>{_e=await ort_minExports.InferenceSession.create(et,{backendHint:"webgl"})})(),{runSamPrompt:async({clicks:it,width:st,height:At,embedding:ut})=>{const ct=handleImageScale(st,At),ht=getSamModelData({clicks:it,embedding:ut,modelScale:ct});return ht===void 0?void 0:(await _e.run(ht))[_e.outputNames[0]]}}},POLL_MS=2e3,registerEmbeddingSingleton=(et,_,_e,tt)=>{const rt={};let it=null;const st=lt=>{const dt=getSelectedItemBounds(tt);if(tt.size>0&&et.interactiveState===null){const ft=Array.from(tt)[0];if(ft instanceof ImageItem){if(ft.getTextureCacheId()!==lt)return;_(et.floatingMenuBarRef,dt),_e(dt.x-165+dt.width/2,dt.y-30);return}}},At=async()=>{const lt=TextureCache;for(let dt in lt)if(!rt[dt]&&lt[dt].embed&&lt[dt].embed==="should"){rt[dt]={done:!1};const{jobID:ft}=await postEmbeddingJob(lt[dt]);rt[dt].jobID=ft}!it&&Object.keys(rt).some(dt=>!rt[dt].done)&&(ct(),it=setInterval(ct,POLL_MS))},ut=()=>Object.values(rt).every(lt=>lt.done),ct=async()=>{const lt=await getDoneJobs();for(const dt of lt)for(let ft in rt)if(rt[ft].jobID===dt&&!rt[ft].done){const pt=await getJobResult(rt[ft].jobID),gt=await getTensorFromBase64String(pt.result);rt[ft]={...rt[ft],done:!0,tensor:gt},st(ft)}ut()&&(clearTimeout(it),it=null)};return{generateEmbeddings:At,isJobDone:lt=>rt[lt]&&rt[lt].done,getEmbedding:lt=>rt[lt]&&rt[lt].tensor,displayObjectWithTextureIsEmbedded:lt=>{var ft;if(!lt.texture)return!1;const dt=lt.texture.textureCacheIds[0];if(!(!dt||!rt))return(ft=rt[dt])==null?void 0:ft.done},willNeverBeSniped:lt=>lt.texture?lt.texture.embed!=="should":!0}},getBitmapFromUrl=async et=>{const _=await(await fetch(et)).blob();return await createImageBitmap(_,{colorSpaceConversion:"none"})},getBitmapFromBlobButDownscale=async et=>{const _=await createImageBitmap(et);if(_.width<=1080&&_.height<=1920)return _;const _e=_.width/_.height;let tt,rt;_e>1080/1920?(tt=1080,rt=1080/_e):(rt=1920,tt=1920*_e);const it=new OffscreenCanvas(tt,rt);return it.getContext("2d").drawImage(_,0,0,tt,rt),it.transferToImageBitmap()},registerDragDrop=(et,_)=>{const _e=async rt=>{const it=await getBitmapFromBlobButDownscale(rt),st=et.width/2-it.width/2,At=et.height/2-it.height/2;_.createItemWithSource(st,At,it)};(()=>{et.addEventListener("dragover",rt=>rt.preventDefault()),et.addEventListener("drop",async rt=>{rt.preventDefault();const it=rt.dataTransfer.files;it&&it.length>0&&await _e(it[0])})})()},shellCasingManager=et=>{let _=[];return et.ticker.add(tt=>{for(let rt=_.length-1;rt>=0;rt--)_[rt](tt)===!1&&_.splice(rt,1)}),{simulateShellCasing:async(tt,rt)=>{const it=await Assets.load("/assets/sprites/casing.png"),st=new Sprite(it);st.width=20,st.height=35,st.x=tt,st.y=rt,st.rotation=-.2,et.stage.addChild(st);let At={x:-Math.random()*3,y:-20+Math.random()*5};const ut=.75;let ct=-.03;function ht(){return st.x+=At.x,st.y+=At.y,At.y+=ut,st.rotation+=ct,st.y>et.screen.height?(st.destroy(),!1):!0}_.push(ht)}}},registerGrabby=({state:et})=>{const _=ut=>{if(ut){et.interactiveState="grabpan";return}et.interactiveState=null},_e=()=>et.interactiveState==="grabpan",tt=[{id:"grabby",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>_e(),isLoading:()=>!1,onClick:()=>st(),textureSvgSourcePath:"assets/svg/grab.svg"}],rt=()=>{const ut=et.screen.width-45,ct=et.screen.height-45;At.update({x:ut,y:ct})},it=()=>{if(_e())return _(!0);_(!1)},st=()=>{_(!_e()),it()},At=createFloatingMenuBar(tt,et.stage);rt(),et.stage.on("pointerdown",()=>{setTimeout(()=>{et.stage.cursor=_e()?"grabbing":"default"},0)}),et.stage.on("pointerup",()=>{setTimeout(()=>{et.stage.cursor=_e()?"grab":"default"},0)}),et.renderer.on("resize",rt),it()},registerUndoRedoBar=(et,_,_e,tt)=>{const rt=[{id:"undo",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>tt.onUndo(),textureSvgSourcePath:"assets/svg/undo.svg"},{id:"redo",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>tt.onRedo(),textureSvgSourcePath:"assets/svg/redo.svg"}],it=()=>{const At=et.width-173,ut=et.height-45;st.update({x:At,y:ut})},st=createFloatingMenuBar(rt,_);it(),_e.on("resize",it)},registerUpload=(et,_,_e)=>{const tt=document.createElement("input");tt.type="file",tt.style.display="none",tt.onchange=async ut=>{const ct=ut.target.files;if(ct&&ct.length>0){const ht=ct[0],ot=await getBitmapFromBlobButDownscale(ht),nt=et.width/2-ot.width/2,at=et.height/2-ot.height/2;_.createItemWithSource(nt,at,ot),tt.value=""}},document.body.appendChild(tt);const rt=()=>{tt.click()},it=[{id:"upload",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>rt(),textureSvgSourcePath:"assets/svg/upload.svg"}],st=()=>{const ut=et.width-90,ct=et.height-45;At.update({x:ut,y:ct})},At=createFloatingMenuBar(it,_e.stage);st(),_e.renderer.on("resize",st)},createItemFactory=(et,_,_e)=>{const tt=_e;return{createLiveItemFromCopy:At=>{const{eraseAt:ut,texture:ct,x:ht,y:ot,rotation:nt,scale:at,mask:lt}=At.props,dt=new ImageItem(ct,_,et);for(const ft of ut)dt.eraseAt(ft);for(const ft of lt)dt.eraseWithSegment(ft.mask,ft.negative);dt.updateHitmap(),at&&(dt.scale=at),ht&&ot&&(dt.x=ht,dt.y=ot),nt&&(dt.rotation=nt);for(const ft of _e)ft(dt);return dt},createItem:(At,ut,ct,ht)=>{let ot;ct instanceof Texture&&(ct.embed||(ct.embed="should"),ot=new ImageItem(ct,_,et)),ot.scale.set(ht||1),ot.x=At,ot.y=ut;for(const nt of _e)nt(ot);return ot},addItemEventRegister:At=>{tt.push(At)}}},registerItemsManager=(et,_,_e,tt)=>{const rt=tt,it=yt=>{et.addChild(yt)},st=yt=>et.getChildIndex(yt),At=()=>et.children.filter(vt=>vt.ding&&vt.ding.type==="item"),ut=yt=>et.children.filter(wt=>wt.ding.type==="item")[yt],ct=yt=>{rt.push(yt)},ht=(yt,vt,wt,bt,Bt)=>{const Tt=_.createItem(yt,vt,wt,bt,Bt);for(const It of rt)It(Tt);return it(Tt),Tt};return{getItems:At,addOnUpdateHandler:ct,createItem:ht,createItemFromCopy:(yt,vt=!1)=>{const wt=_.createLiveItemFromCopy(yt,_e);if(!vt)for(const bt of rt)bt(wt);return it(wt),wt},getChildIndex:yt=>et.getChildIndex(yt),addChildAt:(yt,vt)=>{for(const wt of rt)wt(yt);et.addChildAt(yt,vt)},createItemWithSource:(yt=50,vt=50,wt,bt)=>{const Bt=Texture.from(wt);return bt&&(Bt.embed="should_not"),ht(yt,vt,Bt,1,0)},removeChildren:yt=>{et.removeChild(...yt);for(const vt of rt)vt()},moveToBack:yt=>{yt.forEach(vt=>{et.removeChild(vt),et.addChildAt(vt,0)});for(const vt of rt)vt()},createItemsFromCopies:yt=>{const vt=yt.map(wt=>_.createLiveItemFromCopy(wt,_e));vt.forEach(it);for(const wt of rt)wt();return vt},replaceItemsWithSource:(yt=50,vt=50,wt,bt)=>{const Bt=Texture.from(wt),Tt=_.createItem(yt,vt,Bt,1,0);et.removeChild(...bt),it(Tt);for(const It of rt)It();return Tt},getItemIndex:st,getItemAt:ut,copyItems:(yt,vt=30)=>{const wt=yt.map(bt=>_.createLiveItemFromCopy(bt.getCopy(),_e));wt.forEach(bt=>{it(bt),bt.x=bt.x+vt,bt.y=bt.y+vt});for(const bt of rt)bt();return wt}}},noDraggyRules=(et,_)=>_.button!==0||_.touches&&_.touches.length>1?!0:et.interactiveState!==null,registerItemPointerDownEvent=(et,_,_e)=>{let tt=null;const rt=(ut,ct)=>{const ht=ct.x-ut.x,ot=ct.y-ut.y;return Math.sqrt(ht*ht+ot*ot)},it=(ut,ct)=>{const ht=(ut.x+ct.x)/2,ot=(ut.y+ct.y)/2;return{x:ht,y:ot}},st=(ut,ct,ht,ot,nt)=>{const at=(ot-et.x)/et.scale.x,lt=(nt-et.y)/et.scale.y;et.scale.x*=ht,et.scale.y*=ht,et.x=ot-at*et.scale.x,et.y=nt-lt*et.scale.y,et.x+=ut,et.y+=ct};_e.registerTouchMoveListener((ut,ct)=>{if(ut.target!==et)return;const ht=Object.keys(ct).map(ot=>ct[ot]).filter(ot=>{var nt,at;return((at=(nt=ot.target)==null?void 0:nt.ding)==null?void 0:at.type)==="item"});if(ht.length===2){const ot=rt(ht[0],ht[1]);if(tt!==null){const nt=ot/tt,at=it(ht[0],ht[1]),{x:lt,y:dt}=at;st(0,0,nt,lt,dt)}tt=ot}}),_e.registerTouchUpListener((ut,ct)=>{Object.keys(ct).map(ot=>ct[ot]).filter(ot=>ot.target.ding.type==="item").length===0&&(tt=null)});const At=ut=>{if(Object.keys(_e.touchTracker).length>1||noDraggyRules(_,ut))return;_.isDragging=!0,_.keys.Shift||_.keys.Ctrl||_.selectedItems.has(et)||_.selectedItems.clear(),_.selectedItems.add(et);const ct=ut.data.global;for(const ht of _.selectedItems)ht.ding.pointerDownOffset={x:ct.x-ht.getGlobalPosition().x,y:ct.y-ht.getGlobalPosition().y}};et.on("pointerdown",At)},registerEraserPointerEvent=(et,_,_e)=>{let tt=_.touches,rt=!1;const it=(ut,ct)=>ct.touches&&ct.touches.length>1?!1:ut.interactiveState!=="erase",st=ut=>{if(Object.keys(tt).length>1||it(_,ut))return;const ct=Array.from(_.selectedItems).some(pt=>{const gt=pt.getBounds();return new Rectangle(gt.x-50,gt.y-50,gt.width+100,gt.height+100).contains(ut.data.global.x,ut.data.global.y)}),ht=_.selectedItems.has(et);if(!ct||!ht)return;rt===!1&&(rt=v4());const ot=ut.data.global,{x:nt,y:at}=et.toLocal(ot),lt=et.toLocal({x:_.eraser.sliderSize,y:0}),dt=et.toLocal({x:0,y:0}),ft=Math.sqrt(Math.pow(dt.x-lt.x,2)+Math.pow(dt.y-lt.y,2));et.eraseAt({x:nt,y:at,radius:ft,id:rt}),ut.stopPropagation()},At=()=>{rt=!1,et.updateHitmap(),_e()};_.stage.on("pointerdown",ut=>st(ut)),_.stage.on("pointermove",ut=>rt&&st(ut)),_.stage.on("pointerup",()=>rt&&At()),_.stage.on("pointerupoutside",()=>rt&&At())},onDownload=async(et,_,_e)=>{const tt=document.createElement("a");document.body.append(tt);const rt=["esteemed","valued","honored","preferred","cherished","loyal","respected","distinguished","exceptional","revered"],it=["customer","client","user","patron","member","homie","guest","human","bigdoggydog","gangster","broski","anon"],st=rt[Math.floor(Math.random()*rt.length)],At=it[Math.floor(Math.random()*it.length)],ut=await _e.renderItems(_.children.filter(ct=>et.has(ct)));tt.download=`for_${st}_${At}`,tt.href=ut,tt.click(),tt.remove()},registerDownloadTool=(et,_,_e)=>({id:"download",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>onDownload(et,_,_e),textureSvgSourcePath:"assets/svg/download.svg",tooltip:"download items"}),getContainerRect=(et,_)=>{const _e=new Point(et.x,et.y),tt=new Point(et.x+et.width,et.y+et.height),rt=_.toLocal(_e),it=_.toLocal(tt);return new Rectangle(rt.x,rt.y,it.x-rt.x,it.y-rt.y)},registerRasterEngine=(et,_)=>{const _e=ut=>et.extract.base64(ut,"webp"),tt=(ut,ct)=>{const ht=_.children.filter(nt=>!ut.includes(nt));ht.forEach(nt=>nt.visible=!1);const ot=et.generateTexture(_,{region:ct});for(const nt of ht)nt.visible=!0;return ot},rt=(ut,ct)=>{const ht=new Point(ct.x,ct.y),ot=ut.toLocal(ht),nt=new Point(ct.x+ct.width,ct.y+ct.height),at=ut.toLocal(nt),lt=at.x-ot.x,dt=at.y-ot.y,ft=new Rectangle(ot.x,ot.y,lt,dt);return et.generateTexture(ut,{region:ft})},it=ut=>et.generateTexture(ut);return{renderItems:async(ut,ct)=>{ut.forEach(gt=>{gt.updateTransform()});const ht=ut.map(gt=>it(gt)),ot=new Container;let nt=1/0,at=1/0,lt=-1/0,dt=-1/0;ht.forEach((gt,mt)=>{const yt=new Sprite(gt),{x:vt,width:wt,y:bt,height:Bt}=ut[mt].getNonTransparentBounds();nt=Math.min(vt,nt),at=Math.min(bt,at),lt=Math.max(vt+wt,lt),dt=Math.max(bt+Bt,dt),yt.position.set(ut[mt].x,ut[mt].y),yt.scale.set(ut[mt].scale.x,ut[mt].scale.y),yt.rotation=ut[mt].rotation,ot.addChild(yt)}),et.render(ot);const ft=getContainerRect(new Rectangle(nt,at,lt-nt,dt-at),_),pt=et.extract.base64(ot,ct||void 0,1,ft);return ht.forEach(gt=>gt.destroy(!0)),pt},renderItemPixels:async ut=>{const ct=ut.position.x,ht=ut.position.y,ot=ut.scale.x,nt=ut.scale.y,at=ut.rotation;ut.rotation=0,ut.position.x=0,ut.position.y=0,ut.scale.x=1,ut.scale.y=1,ut.rotation=0;const lt=RenderTexture.create({width:ut.width,height:ut.height});et.render(ut,{renderTexture:lt}),ut.rotation=at,ut.rotation=at,ut.position.x=ct,ut.position.y=ht,ut.scale.x=ot,ut.scale.y=nt;const dt=et.extract.canvas(lt),ft=dt.getContext("2d");if(!ft)throw new Error("Could not get the 2D context from the canvas");const pt=ft.getImageData(0,0,dt.width,dt.height);return lt.destroy(),{pixels:pt.data,width:dt.width,height:dt.height,canvas:dt}},renderItemsGivenBounds:tt,renderDisplayObjectGivenBoundsToTexture:rt,renderTextureToBase64:_e}},onDelete=(et,_)=>{_.removeChildren(Array.from(et)),et.clear()},registerDeleteTool=(et,_)=>({id:"delete",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>onDelete(et,_),textureSvgSourcePath:"assets/svg/trash-solid.svg",iconSize:21,hotkeyLabel:"d",tooltip:"delete"}),onSnipe=(et,_,_e)=>{if(et.interactiveState==="snipe"){et.interactiveState=null;return}Array.from(_e).some(tt=>!_.displayObjectWithTextureIsEmbedded(tt))||(et.interactiveState="snipe")},registerSnipeTool=(et,_,_e)=>({id:"sniper",visibleWhen:()=>!_||_e.size===1&&Array.from(_e).some(tt=>!_.willNeverBeSniped(tt)),disabledWhen:()=>Array.from(_e).some(tt=>!_.displayObjectWithTextureIsEmbedded(tt)),isActive:()=>et.interactiveState==="snipe",isLoading:()=>!1,onClick:()=>onSnipe(et,_,_e),textureSvgSourcePath:"assets/svg/rifle.svg",hotkeyLabel:"s",tooltip:"segmentation tool: cut your image with AI",disabledtip:{text:"processing image..",color:colorPalette.light_background}}),onErase=({state:et})=>{if(et.interactiveState==="erase"){et.interactiveState=null;return}et.interactiveState="erase"},registerEraseTool=et=>({id:"eraser",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>et.interactiveState==="erase",isLoading:()=>!1,onClick:()=>onErase({state:et}),textureSvgSourcePath:"assets/svg/eraser.svg",hotkeyLabel:"e",tooltip:"erase selected items"}),onInpaint=et=>{if(et.interactiveState==="inpaint"){et.interactiveState=null;return}et.interactiveState="inpaint"},registerInpaintTool=et=>({id:"inpaint",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>et.interactiveState==="inpaint",isLoading:()=>!1,onClick:()=>onInpaint(et),textureSvgSourcePath:"assets/svg/inpaint.svg",hotkeyLabel:"f",tooltip:"magical fix button: fixes janky seams"}),moveToBack=(et,_)=>{const _e=Array.from(et).sort((tt,rt)=>_.getChildIndex(rt)-_.getChildIndex(tt));_.moveToBack(_e)},registerMoveToBackTool=(et,_)=>({id:"movetoback",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>moveToBack(et,_),textureSvgSourcePath:"assets/svg/arrow_down_short_wide.svg",tooltip:"move item to back"}),onGroup=async(et,_,_e,tt)=>{const rt=_e.children.filter(ht=>tt.has(ht)),it=await et.renderItems(rt),{x:st,y:At}=_e.toLocal(getSelectedItemBounds(tt)),ut=await getBitmapFromUrl(it),ct=_.replaceItemsWithSource(st,At,ut,Array.from(tt));tt.clear(),tt.add(ct)},registerGroupTool=(et,_,_e,tt)=>({id:"group",visibleWhen:()=>tt.size>1,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>onGroup(et,_,_e,tt),textureSvgSourcePath:"assets/svg/group.svg",hotkeyLabel:"g",tooltip:"group objects together"}),onDuplicate=async(et,_)=>{const _e=et.copyItems(Array.from(_));_.clear();for(const tt of _e)_.add(tt)},registerDuplicateTool=(et,_)=>({id:"copy",visibleWhen:()=>_.size>0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>onDuplicate(et,_),textureSvgSourcePath:"assets/svg/copy.svg",tooltip:"copy item(s)"}),grabItemSideEffect=(et,_,_e,tt)=>createStateSideEffect({state:_,stateDependency:"interactiveState",interactiveState:"grabpan",onInteractiveStateOff:()=>{et.getItems().forEach(rt=>rt.eventMode="static")},onInteractiveStateOn:()=>{et.getItems().forEach(rt=>rt.eventMode="none"),clearSelectionBoxGraphic(_e),tt.hide()},diffObserver:rt=>rt,sideEffect:()=>{},effectName:"GRABBY_MODE"}),registerGrabpanSideEffect=(et,_,_e,tt,rt)=>{_.add(grabItemSideEffect(_e,et,tt,rt))},registerSniperItemPointerEvents=(et,_,_e,tt)=>{const rt=tt==null?void 0:tt.runSamPrompt,it=_e==null?void 0:_e.getEmbedding;let st=_.touches;const At=(at,lt,dt)=>{let ft=new Graphics;ft.beginFill(colorPalette.comment,.6),ft.drawCircle(at,lt,2),ft.endFill(),dt.addChild(ft),_.snipe.circleGraphics.push(ft)},ut=(at,lt)=>lt.touches&&lt.touches.length>1?!1:at.interactiveState!=="snipe";let ct=!1;const ht=async at=>{if(ut(_,at)||_.snipe.clicks.length>0)return;const lt=Array.from(_.selectedItems).some(wt=>wt.getBounds().contains(at.data.global.x,at.data.global.y)),dt=_.selectedItems.has(et);if(!lt||!dt)return;const{x:ft,y:pt}=et.toLocal(at.data.global),{width:gt,height:mt}=et.getRealDims(),yt=it(et.texture.baseTexture.textureCacheIds[0]);if(!yt||ct)return;ct=!0;const vt=await rt({clicks:[{x:ft,y:pt}],width:gt,height:mt,embedding:yt});et.updateSniper(vt),ct=!1,at.stopPropagation()},ot=async at=>{if(Object.keys(st).length>1||ut(_,at))return;const lt=Array.from(_.selectedItems).some(wt=>wt.getBounds().contains(at.data.global.x,at.data.global.y)),dt=_.selectedItems.has(et);if(!lt||!dt)return;const{x:ft,y:pt}=et.toLocal(at.data.global),{width:gt,height:mt}=et.getRealDims();_.snipe.clicks.push({x:ft,y:pt}),At(ft,pt,et);const yt=it(et.texture.baseTexture.textureCacheIds[0]);if(!yt)return;const vt=await rt({clicks:_.snipe.clicks,width:gt,height:mt,embedding:yt});et.updateSniper(vt),at.stopPropagation()};et.on("pointerdown",ot),_.stage.on("pointermove",at=>ht(at));const nt=at=>{at.pointerType==="touch"&&delete st[at.pointerId]};_.stage.on("pointerup",at=>nt(at))};let MAX_RETRY_COUNT=40;const registerDiffusion=(et=200,_=2e3)=>{let _e=[];const tt=(it,st,At)=>new Promise(async(ut,ct)=>{let ht=await it(),ot=st,nt=0;for(;!ht;)if(nt++,await new Promise(at=>setTimeout(at,ot)),ht=await it(),ot=Math.min(ot*1.1,At),ot===At&&!ht&&nt>MAX_RETRY_COUNT)return ct("Job not done");ut(ht)});return{diffuseGaps:(it,st)=>new Promise(async At=>{const{jobID:ut}=await postDiffusionJob(it,st),ct=async()=>(await getDoneJobs()).includes(ut);await Promise.allSettled(_e);const ht=tt(ct,et,_).then(()=>getJobResult(ut));_e.push(ht);try{const ot=await ht;_e=_e.filter(nt=>nt!==ht),At(ot)}catch(ot){console.error(ot)}})}},isStage=et=>et.ding&&et.ding.id==="stage",createDrawingTexture=(et,_,_e)=>{let tt=RenderTexture.create({width:et,height:_}),rt=new Sprite(tt);rt.eventMode="none";let it=null,st="",At=null;const ut=new Graphics,ct=new Graphics;let ht=1/0,ot=1/0,nt=-1/0,at=-1/0;return{draw:(ft,pt,gt,mt)=>{ft-gt>=0&&ft+gt<=et&&pt-gt>=0&&pt+gt<=_&&(ht=Math.min(ht,ft-gt),nt=Math.max(nt,ft+gt),ot=Math.min(ot,pt-gt),at=Math.max(at,pt+gt)),At!==gt&&(ut.clear(),ut.beginFill(colorPalette.pink,1),ut.drawCircle(0,0,gt),ut.endFill(),At=gt),ut.position.set(ft,pt),_e.render(ut,{renderTexture:tt,clear:!1}),st!==mt?(st=mt,ut.position.set(ft,pt),_e.render(ut,{renderTexture:tt,clear:!1}),it=new Point(ft,pt)):(ct.clear().lineStyle({width:gt*2,color:colorPalette.pink}).moveTo(it.x,it.y).lineTo(ft,pt),_e.render(ct,{renderTexture:tt,clear:!1}),it.set(ft,pt))},maskSprite:rt,getBoundary:()=>new Rectangle(ht,ot,nt-ht,at-ot),bounds:new Rectangle}},base64ToImageBitmap=async et=>{const _=atob(et),_e=new Array(_.length);for(let st=0;st<_.length;st++)_e[st]=_.charCodeAt(st);const tt=new Uint8Array(_e),rt=new Blob([tt],{type:"image/webp"});return await createImageBitmap(rt)},registerInpaint=(et,_,_e,tt,rt,it,st,At,ut)=>{const ct=pt=>_.interactiveState==="inpaint"&&isStage(pt.target)&&!positionIsInSelectedItemsBounds({position:pt.data.global,selectedItems:_.selectedItems,leeway:20});et.on("pointerdown",pt=>{ct(pt)&&(_.interactiveState=null)});const ht={};let ot;const nt=(pt,gt)=>gt.touches&&gt.touches.length>1?!1:pt.interactiveState!=="inpaint",at=pt=>Array.from(_e).some(gt=>{const mt=gt.getBounds();return new Rectangle(mt.x-50,mt.y-50,mt.width+100,mt.height+100).contains(pt.data.global.x,pt.data.global.y)}),lt=async pt=>{if(nt(_,pt)||(pt.stopPropagation(),!at(pt)||!ot))return;const{x:gt,y:mt}=pt.data.global,yt=_.eraser.sliderSize;ht[ot].draw(gt-ht[ot].bounds.x,mt-ht[ot].bounds.y,yt,ot)},dt=async pt=>{if(!ot||nt(_,pt))return;const gt=ot,{getBoundary:mt,bounds:yt,maskSprite:vt}=ht[ot],wt=mt(),bt=Math.max(Math.max(wt.height,wt.width),Math.min(512,yt.width)),Bt=new Rectangle(yt.x+wt.x-bt/2+wt.width/2,yt.y+wt.y-bt/2+wt.height/2,bt,bt);if(ot=null,!isNaN(Bt.x)){const Tt=getContainerRect(Bt,At),It=it.renderDisplayObjectGivenBoundsToTexture(vt,Bt),Dt=it.renderItemsGivenBounds(Array.from(st.getItems()),Bt);let Ut;try{const _t=await it.renderTextureToBase64(Dt),St=await it.renderTextureToBase64(It);ut(vt,.1,100,colorPalette.pink,3);const Ct=(await rt.diffuseGaps(_t,St)).result.diffusion_result,Ft=await base64ToImageBitmap(Ct);Ut=st.createItemWithSource(0,0,Ft,!0),Ut.x=Tt.x,Ut.y=Tt.y,Ut.width=Tt.width,Ut.height=Tt.height}catch(_t){console.error(_t)}It.destroy(),Dt.destroy(),Ut&&(ut(Ut,.2,1,colorPalette.pink),_e.add(Ut))}et.removeChild(vt),delete ht[gt]},ft=async pt=>{if(pt.button!==0||nt(_,pt)||!at(pt))return;ot=v4();const gt=getSelectedItemBoundsAsRect(_e),mt=createDrawingTexture(gt.width,gt.height,tt);ht[ot]=mt,ht[ot].maskSprite.x=gt.x,ht[ot].maskSprite.y=gt.y,ht[ot].bounds=gt,et.addChild(ht[ot].maskSprite)};_.stage.on("pointerdown",pt=>ft(pt)),_.stage.on("pointermove",pt=>ot&&lt(pt)),_.stage.on("pointerup",pt=>ot&&dt(pt)),_.stage.on("pointerupoutside",pt=>ot&&dt(pt))};var u$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,c$1=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterClamp;

uniform float uAlpha;
uniform vec2 uThickness;
uniform vec4 uColor;
uniform bool uKnockout;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${angleStep};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture2D(uSampler, vTextureCoord);
    vec4 contentColor = sourceColor * float(!uKnockout);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    gl_FragColor = contentColor + outlineColor;
}
`;const r=class extends Filter{constructor(et=1,_=0,_e=.1,tt=1,rt=!1){super(u$2,c$1.replace(/\$\{angleStep\}/,r.getAngleStep(_e))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=tt,this.uniforms.uKnockout=rt,Object.assign(this,{thickness:et,color:_,quality:_e,alpha:tt,knockout:rt})}static getAngleStep(et){const _=Math.max(et*r.MAX_SAMPLES,r.MIN_SAMPLES);return(Math.PI*2/_).toFixed(7)}apply(et,_,_e,tt){this.uniforms.uThickness[0]=this._thickness/_._frame.width,this.uniforms.uThickness[1]=this._thickness/_._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,et.applyFilter(this,_,_e,tt)}get alpha(){return this._alpha}set alpha(et){this._alpha=et}get color(){return rgb2hex(this.uniforms.uColor)}set color(et){hex2rgb(et,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(et){this._knockout=et}get thickness(){return this._thickness}set thickness(et){this._thickness=et,this.padding=et}};let i$5=r;i$5.MIN_SAMPLES=1,i$5.MAX_SAMPLES=100;const hexStringToNumber=et=>(et.startsWith("#")&&(et=et.slice(1)),parseInt(et,16)),highlightItemManager=(et,_=5)=>{let _e=[];return et.ticker.add(rt=>{for(let it=_e.length-1;it>=0;it--)_e[it](rt)===!1&&_e.splice(it,1)}),async(rt,it,st,At,ut)=>{let ct=0,ht=!0;const ot=hexStringToNumber(At),nt=new i$5(1,ot,1,1,!1),at=rt.filters||[];rt.filters=[...at,nt];const lt=dt=>{ct+=dt*it;const ft=Math.sin(ct),pt=(1+ft)*.5*(ut||_);if(nt.thickness=pt,ht&&ft>.9)ht=!1;else if(!ht&&ft<-.9&&(ht=!0,st--,st<=0))return rt.filters&&(rt.filters=rt.filters.filter(gt=>gt!==nt)),!1;return!0};_e.push(lt)}},floatManager=et=>{let _=[];return et.ticker.add(tt=>{for(let rt=_.length-1;rt>=0;rt--)_[rt](tt)===!1&&_.splice(rt,1)}),{simulateFloating:(tt,rt=5,it=.002)=>{let st=tt.y;function At(){return tt.y=st+rt*Math.sin(it*et.ticker.lastTime),!0}_.push(At)}}},landingstring=`
<div id="landing" style="max-width: 90vh; max-height: 90vh; padding: 10px;" >
<h1 style="margin-top: 10px;">DINGBOARD</h1>
<p>Dingboard is a free AI powered meme image editor <strong>that doesn't suck</strong>.
I've added diffusion AI tools that make it possible to make photoshop level memes in <a href="https://twitter.com/yacineMTB/status/1734384773169094927/video/1" target="_blank">in seconds.</a></p>
      <h2>start slinging memes by signing in</h2>
      <a href="/login" target="_blank">
      <button class="gsi-material-button" style="display: block; margin: auto;">
        <div class="gsi-material-button-state"></div>
        <div class="gsi-material-button-content-wrapper">
          <div class="gsi-material-button-icon">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"
              xmlns:xlink="http://www.w3.org/1999/xlink" style="display: block;">
              <path fill="#EA4335"
                d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z">
              </path>
              <path fill="#4285F4"
                d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z">
              </path>
              <path fill="#FBBC05"
                d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z">
              </path>
              <path fill="#34A853"
                d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z">
              </path>
              <path fill="none" d="M0 0h48v48H0z"></path>
            </svg>
          </div>
          <span class="gsi-material-button-contents">Continue with Google</span>
          <span style="display: none;">Continue with Google</span>
        </div>
      </button>
    </a>
    <section id="quotes">
      <h2>what the people are saying</h2>
      <blockquote>
        <p>"A good image editor for phones is sorely needed." <strong>— Elon Musk <a
              href="https://twitter.com/elonmusk/status/1728233225703903710" target="_blank">(link)</a></strong></p>
        <strong>
       </strong>
      </blockquote>

      <blockquote>
        <p>"I started using dingboard for my work presentations, it's really easy to use!" <strong> — my mom </strong> (you'll have to believe me)</p>
      </blockquote>
      <p style="margin-bottom: 0;">By using dingboard, you agree to the following:</p>
<p style="margin-top: 0;"><a href="/terms">Terms</a> and <a href="/privacy">Privacy</a></p>
      <h3 style="margin-bottom: 0;">early access</h3>
      <p>dingboard AI features are in early access - I am bootstrapping this product /wo funding as a single engineer so I can't scale too quickly. DM <a href="https://twitter.com/yacineMTB" target="_blank">me</a> on twitter for an invite code - I usually respond within a day!</p>
      
    <a href="mailto:yacine@dingboard.com">email contact.</a> made by <a href="https://twitter.com/yacineMTB" target="_blank">@yacineMTB</a>

    </section>

  </div>
`,createLandingModal=et=>{const _=et,_e=document.createElement("span");_e.innerHTML="&times;",_e.style.cursor="pointer",_e.onclick=()=>_.remove(),_e.style.position="absolute",_e.style.top="0",_e.style.right="0",_e.style.fontSize="30px",_e.style.fontWeight="bold",_e.style.padding="0px 7px",_.style.position="fixed",_.style.top="50%",_.style.left="50%",_.style.transform="translate(-50%, -50%)",_.style.width="500px",_.style.maxWidth="90vw",_.style.maxHeight="90vh",_.style.overflowY="auto";const tt=colorPalette.pink;return _.style.border=`2px solid ${tt}`,_.style.padding="10px",_.style.backgroundColor="white",_.appendChild(_e),document.body.appendChild(_),_},createUserInfoModal=()=>{const et=document.createElement("div");return et.style.position="fixed",et.style.top="50%",et.style.left="50%",et.style.transform="translate(-50%, -50%)",et.style.width="300px",et.style.border="2px solid black",et.style.padding="20px",et.style.backgroundColor="white",et.style.zIndex="1000",et.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)",et},createClosedButton=et=>{const _=document.createElement("span");return _.innerHTML="&times;",_.style.cursor="pointer",_.style.position="absolute",_.style.top="10px",_.style.right="15px",_.style.fontSize="20px",_.style.fontWeight="bold",_.onclick=_e=>{_e.stopPropagation(),et.remove()},et.appendChild(_),_},createInputField=()=>{const et=document.createElement("input");return et.type="text",et.id="code",et.name="code",et.style.marginBottom="10px",et.addEventListener("keydown",_=>{_.stopPropagation()}),et},createLabel=()=>{const et=document.createElement("p");return et.innerHTML='Enter Code (DM <a target="_blank" href="https://twitter.com/yacineMTB">@yacineMTB</a> on Twitter for one! Also, this button will stick around if you already hit the invite. Ah, slapdash):',et},createSubmitButton=()=>{const et=document.createElement("button");return et.type="submit",et.style.cursor="pointer",et.textContent="Submit",et},createForm=()=>{const et=document.createElement("form");et.id="json-post-form";const _=createLabel(),_e=createInputField(),tt=createSubmitButton();return tt.style.display="block",tt.style.marginTop="10px",et.appendChild(_),et.appendChild(_e),et.appendChild(tt),et},handleFormSubmission=async(et,_,_e,tt)=>{et.addEventListener("submit",async rt=>{rt.preventDefault();const st=new FormData(et).get("code");try{const ut=await(await fetch("/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:st})})).json();ut.ok?_e(ut,tt):(_.style.backgroundColor="pink",_.textContent="wrong code! try again")}catch(At){console.error("There has been a problem with your fetch operation:",At)}})},createWelcomeMessage=()=>{const et=document.createElement("div");et.style.border="1px solid #ccc",et.style.borderRadius="8px",et.style.padding="20px",et.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)",et.style.backgroundColor="#fff",et.style.maxWidth="300px",et.style.margin="auto";const _=document.createElement("p");_.textContent="You've been invited to Dingboard! Welcome!",_.style.margin="0",_.style.padding="0",_.style.fontWeight="bold",_.style.color="#333",_.style.fontSize="18px",_.style.textAlign="center",et.appendChild(_);const _e=document.createElement("a");return _e.textContent="support dingboard with a subscription",_e.href="https://yacine.ca/sub",_e.target="_blank",_e.style.display="block",_e.style.marginTop="15px",_e.style.fontWeight="bold",_e.style.color="#007bff",_e.style.textDecoration="none",_e.style.textAlign="center",et.appendChild(_e),et},createUserModal=async(et,_)=>{const _e=await _;console.log(_e);const tt=createUserInfoModal();if(createClosedButton(tt),_e.level>0){const rt=createWelcomeMessage();tt.appendChild(rt)}else{const rt=createForm();tt.appendChild(rt);const it=rt.querySelector('button[type="submit"]');handleFormSubmission(rt,it,et,{destroyModal:()=>tt.remove()})}document.body.appendChild(tt)},registerUserButton=async(et,_,_e,tt)=>{const rt=new Container;et.stage.addChild(rt);const{drawToolTip:it,rectangle:st,hideToolTip:At}=createTooltip(rt),{simulateFloating:ut}=floatManager(_);if(ut(st,3),_e.email){let ct=!1;const ht=pt=>{const{level:gt,paysub:{subscribed:mt}}=pt;(gt>0||mt)&&(tt(),ct=!0,At()),ot()},ot=()=>{const pt=et.screen.width-220,gt=et.screen.height-45;lt.update({x:pt,y:gt}),ct||it(lt.menuBar,"enter invite code",colorPalette.orange,colorPalette.dark_background,5)};let nt=getUserInfo();const lt=createFloatingMenuBar([{id:"user",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>{createUserModal(async(pt,gt)=>{pt.ok&&(getUserInfo().then(ht),tt(),gt.destroyModal(),nt=getUserInfo())},nt)},tooltip:"user settings",textureSvgSourcePath:"assets/svg/user.svg"}],et.stage);et.renderer.on("resize",ot);const dt=et.screen.width-220,ft=et.screen.height-45;lt.update({x:dt,y:ft}),nt.then(ht)}else{const ht=createFloatingMenuBar([{id:"sign in",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>{window.open("/login","_blank")},textureSvgSourcePath:"assets/svg/google.svg"}],et.stage),ot=()=>{const nt=et.screen.width-220,at=et.screen.height-45;ht.update({x:nt,y:at}),it(ht.menuBar,"sign in",colorPalette.comment,colorPalette.dark_background)};et.renderer.on("resize",ot),ot()}},getPreloaded=()=>window.PRELOADED||{email:null},registerTouchManager=et=>{const _={};let _e=[],tt=[],rt=[];const it=ot=>{if(ot.data.pointerType==="touch"){const nt=ot.data.pointerId;_[nt]={x:ot.data.global.x,y:ot.data.global.y,target:ot.target},_e.forEach(at=>at(ot,_))}},st=ot=>{if(ot.data.pointerType==="touch"){const nt=ot.data.pointerId;if(_[nt]){delete _[nt];const at={..._};tt.forEach(lt=>lt(ot,at))}}},At=ot=>{if(ot.data.pointerType==="touch"){const nt=ot.data.pointerId;_[nt]&&(_[nt].x=ot.data.global.x,_[nt].y=ot.data.global.y,rt.forEach(at=>at(ot,_)))}};return et.stage.interactive=!0,et.stage.on("pointerdown",it),et.stage.on("pointerup",st),et.stage.on("pointerupoutside",st),et.stage.on("pointermove",At),{touchTracker:_,registerTouchDownListener:ot=>{_e.push(ot)},registerTouchUpListener:ot=>{tt.push(ot)},registerTouchMoveListener:ot=>{rt.push(ot)}}},registerExport=(et,_,_e,tt,rt,it)=>{const st=()=>{const ht=_e.getItems();onDownload(new Set(ht),rt,it)},At=[{id:"download",visibleWhen:()=>!0,disabledWhen:()=>!1,isActive:()=>!1,isLoading:()=>!1,onClick:()=>st(),textureSvgSourcePath:"assets/svg/download.svg",tooltip:"download scene"}],ut=()=>{const ht=et.width-265,ot=et.height-45;ct.update({x:ht,y:ot})},ct=createFloatingMenuBar(At,tt);ut(),_.on("resize",ut)},strapScene=async()=>{const et=getPreloaded(),_=!!et.email;if(!_){const Rt=document.createElement("div");Rt.innerHTML=landingstring,createLandingModal(Rt)}const{app:_e,viewportContainer:tt,stage:rt}=setupApp(),it=new Set([]),st={view:_e.view,selectedItems:it,viewportContainer:tt,touches:{},ticker:_e.ticker,screen:_e.screen,stage:rt,renderer:_e.renderer,neural:{runSamPrompt:null},simulationManagers:{},isDragging:!1,globalMousePosition:{x:0,y:0},viewportPerspective:{x:0,y:0,scale:1},selectedItemsBoxGraphicRef:null,floatingMenuBarRef:null,menuBarRefs:{grabbyRef:null},handlesRef:null,keys:{},items:{},history:{currentState:null,undostack:[],redostack:[]},interactiveState:null,rotation:{fauxRotationButtonRef:null,selectionBoxGraphicRef:null,selectedStartRotations:null},eraser:{cachedBounds:{},scrubRef:null,sliderRef:null,sliderSize:10}},At=registerTouchManager(_e),ut=registerSamPromptDecoder({state:st});st.neural=ut;const{simulateShellCasing:ct}=shellCasingManager(_e);st.simulationManagers.simulateShellCasing=ct;const ht=highlightItemManager(_e),ot=createSelectionBoxGraphic(rt);st.selectionBoxGraphicRef=ot,st.rotation.selectionBoxGraphicRef=createSelectionBoxGraphic(rt),st.rotation.fauxRotationButtonRef=createFauxRotationButton({stage:rt});const{sliderRef:nt,scrubRef:at}=createSlider({stage:rt,onSizeChange:Rt=>{st.eraser.sliderSize=Rt}});st.eraser.sliderRef=nt,st.eraser.scrubRef=at;const{handles:lt}=createHandleContainer(rt);st.handlesRef=lt;const dt=registerRasterEngine(_e.renderer,tt),ft=createItemFactory(dt,_e.renderer,[]);ft.addItemEventRegister(Rt=>registerItemPointerDownEvent(Rt,st,At));const pt=registerItemsManager(tt,ft,_e.renderer,[]),gt=registerDiffusion(200,2e3),mt=registerHistoryEvents(tt,pt,it),{onUndo:yt,onRedo:vt,updateHistory:wt}=mt;pt.addOnUpdateHandler(()=>wt()),ft.addItemEventRegister(Rt=>registerEraserPointerEvent(Rt,st,wt));let bt,Bt=[];bt=registerEmbeddingSingleton(st,updateFloatingMenuBarRef,ct,it),ft.addItemEventRegister(Rt=>registerSniperItemPointerEvents(Rt,st,bt,ut)),Bt=[{id:"sniper",visibleWhen:()=>!0,disabledWhen:()=>!0,isActive:()=>!1,isLoading:()=>!1,onClick:()=>{},textureSvgSourcePath:"assets/svg/rifle.svg",hotkeyLabel:"s",tooltip:"segmentation tool: cut your image with AI",disabledtip:{text:"sign in & invite code required",color:colorPalette.red,fill:"black"}},{id:"inpaint",visibleWhen:()=>!0,disabledWhen:()=>!0,isActive:()=>!1,isLoading:()=>!1,onClick:()=>{},textureSvgSourcePath:"assets/svg/inpaint.svg",hotkeyLabel:"f",tooltip:"magical fix button: fixes janky seams",disabledtip:{text:"sign in & invite code required",color:colorPalette.red,fill:"black"}}];const Tt=[...Bt,...registerTools(st,wt),registerGroupTool(dt,pt,tt,it),registerDuplicateTool(pt,it),registerEraseTool(st),registerMoveToBackTool(it,pt),registerDownloadTool(it,tt,dt),registerDeleteTool(it,pt)],It=createFloatingMenuBar(Tt,rt,_e.screen);st.floatingMenuBarRef=It,registerHandleEvents({state:st,handles:lt,app:_e,viewportContainer:tt,onDragEnd:wt}),stageItemEvents({stage:rt,state:st,onDragEnd:wt}),registerDraggingSelectionEvents({stage:rt,state:st,itemsManager:pt}),registerViewportPanAndZoomEvents(tt,rt,st,At);const Dt=registerSnipe({state:st,embeddings:bt,neural:ut,itemsManager:pt,selectedItems:it});st.snipe=Dt;const Ut=[{check:Rt=>(Rt.metaKey||Rt.ctrlKey)&&Rt.shiftKey&&Rt.code==="KeyZ",action:()=>{vt()}},{check:Rt=>(Rt.metaKey||Rt.ctrlKey)&&Rt.code==="KeyZ",action:()=>{Dt.endSnipe(),yt()}},{check:Rt=>(Rt.metaKey||Rt.ctrlKey)&&Rt.code==="KeyA",action:Rt=>{Rt.preventDefault();const Nt=pt.getItems();st.interactiveState=null;for(const Gt of Nt)it.add(Gt)}},{check:Rt=>(Rt.metaKey||Rt.ctrlKey)&&Rt.code==="KeyY",action:vt},{check:Rt=>Rt.code==="KeyD"||Rt.code==="Backspace"||Rt.code==="Delete",action:()=>onDelete(it,pt)},{check:Rt=>Rt.code==="KeyS",action:()=>onSnipe(st,bt,it)},{check:Rt=>Rt.code==="KeyE",action:()=>onErase({state:st})},{check:Rt=>Rt.code==="KeyF",action:()=>_&&onInpaint(st)},{check:Rt=>Rt.code==="Escape",action:()=>{if(st.interactiveState!==null){Dt.endSnipe(),st.interactiveState=null;return}it.clear()}},{check:Rt=>Rt.code==="Space",action:()=>{st.interactiveState==="snipe"&&(Dt.onCompleteSnipe(),st.interactiveState=null)}},{check:Rt=>Rt.code==="KeyJ",action:()=>{const Rt=Array.from(it)[0]||pt.getItems()[0];if(!Rt)return;const Nt=pt.getChildIndex(Rt),Wt=pt.getItems().length,Xt=(Wt+Nt-1)%Wt,Yt=pt.getItemAt(Xt);it.clear(),it.add(Yt)}},{check:Rt=>Rt.code==="KeyK",action:()=>{const Rt=Array.from(it)[0]||pt.getItems()[0];if(!Rt)return;const Nt=pt.getChildIndex(Rt),Wt=pt.getItems().length,Xt=(Wt+Nt+1)%Wt,Yt=pt.getItemAt(Xt);it.clear(),it.add(Yt)}},{check:Rt=>Rt.code==="KeyG",action:()=>{it.size<2||onGroup(dt,pt,tt,it)}},{check:Rt=>Rt.shiftKey&&Rt.code==="Equal"||Rt.code==="NumpadAdd",action:()=>{(st.interactiveState==="erase"||st.interactiveState==="inpaint")&&(st.eraser.sliderSize+=5,st.eraser.scrubRef.draw(st.globalMousePosition,st.eraser.sliderSize))}},{check:Rt=>Rt.code=="Minus"||Rt.code=="NumpadSubtract",action:()=>{(st.interactiveState==="erase"||st.interactiveState==="inpaint")&&(st.eraser.sliderSize-=5,st.eraser.scrubRef.draw(st.globalMousePosition,st.eraser.sliderSize))}}],{registerKeyHandlers:_t}=keyPressEventsManager(st);_t(Ut),registerClipboardEvents(it,tt,pt,dt,st),registerGlobalMouseEvents({state:st,stage:rt}),registerEraserStageEvents(rt,st),registerInpaint(rt,st,it,_e.renderer,gt,dt,pt,tt,ht),registerGrabby({state:st}),registerUpload(_e.screen,pt,st),registerExport(_e.screen,_e.renderer,pt,rt,tt,dt),registerUserButton(st,_e,et,()=>{bt.generateEmbeddings(),pt.addOnUpdateHandler(()=>bt.generateEmbeddings()),It.updateTool(registerSnipeTool(st,bt,it),"sniper"),It.updateTool(registerInpaintTool(st),"inpaint")}),registerUndoRedoBar(_e.screen,rt,_e.renderer,mt),registerDragDrop(_e.view,pt),registerSideEffects({app:_e,state:st}),registerGrabpanSideEffect(st,_e.ticker,pt,ot,It),wt();const xt=await createInitialObjects(_e.view,pt);return st.selectedItems.add(xt[2]),{app:_e,onTextInput:()=>{},onTextChange:Rt=>{},onToolChange:()=>{},onCaptureTextButtonPress:Rt=>{pt.createItemWithSource(50,50,Rt)}}};function u$1(){return(u$1=Object.assign||function(et){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(et[tt]=_e[tt])}return et}).apply(this,arguments)}function c(et,_){if(et==null)return{};var _e,tt,rt={},it=Object.keys(et);for(tt=0;tt<it.length;tt++)_.indexOf(_e=it[tt])>=0||(rt[_e]=et[_e]);return rt}function i$4(et){var _=reactExports.useRef(et),_e=reactExports.useRef(function(tt){_.current&&_.current(tt)});return _.current=et,_e.current}var s=function(et,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=1),et>_e?_e:et<_?_:et},f$1=function(et){return"touches"in et},v=function(et){return et&&et.ownerDocument.defaultView||self},d=function(et,_,_e){var tt=et.getBoundingClientRect(),rt=f$1(_)?function(it,st){for(var At=0;At<it.length;At++)if(it[At].identifier===st)return it[At];return it[0]}(_.touches,_e):_;return{left:s((rt.pageX-(tt.left+v(et).pageXOffset))/tt.width),top:s((rt.pageY-(tt.top+v(et).pageYOffset))/tt.height)}},h=function(et){!f$1(et)&&et.preventDefault()},m=e$2.memo(function(et){var _=et.onMove,_e=et.onKey,tt=c(et,["onMove","onKey"]),rt=reactExports.useRef(null),it=i$4(_),st=i$4(_e),At=reactExports.useRef(null),ut=reactExports.useRef(!1),ct=reactExports.useMemo(function(){var at=function(ft){h(ft),(f$1(ft)?ft.touches.length>0:ft.buttons>0)&&rt.current?it(d(rt.current,ft,At.current)):dt(!1)},lt=function(){return dt(!1)};function dt(ft){var pt=ut.current,gt=v(rt.current),mt=ft?gt.addEventListener:gt.removeEventListener;mt(pt?"touchmove":"mousemove",at),mt(pt?"touchend":"mouseup",lt)}return[function(ft){var pt=ft.nativeEvent,gt=rt.current;if(gt&&(h(pt),!function(yt,vt){return vt&&!f$1(yt)}(pt,ut.current)&&gt)){if(f$1(pt)){ut.current=!0;var mt=pt.changedTouches||[];mt.length&&(At.current=mt[0].identifier)}gt.focus(),it(d(gt,pt,At.current)),dt(!0)}},function(ft){var pt=ft.which||ft.keyCode;pt<37||pt>40||(ft.preventDefault(),st({left:pt===39?.05:pt===37?-.05:0,top:pt===40?.05:pt===38?-.05:0}))},dt]},[st,it]),ht=ct[0],ot=ct[1],nt=ct[2];return reactExports.useEffect(function(){return nt},[nt]),e$2.createElement("div",u$1({},tt,{onTouchStart:ht,onMouseDown:ht,className:"react-colorful__interactive",ref:rt,onKeyDown:ot,tabIndex:0,role:"slider"}))}),g=function(et){return et.filter(Boolean).join(" ")},p=function(et){var _=et.color,_e=et.left,tt=et.top,rt=tt===void 0?.5:tt,it=g(["react-colorful__pointer",et.className]);return e$2.createElement("div",{className:it,style:{top:100*rt+"%",left:100*_e+"%"}},e$2.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:_}}))},b=function(et,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=Math.pow(10,_)),Math.round(_e*et)/_e},x=function(et){return L$1(C(et))},C=function(et){return et[0]==="#"&&(et=et.substring(1)),et.length<6?{r:parseInt(et[0]+et[0],16),g:parseInt(et[1]+et[1],16),b:parseInt(et[2]+et[2],16),a:et.length===4?b(parseInt(et[3]+et[3],16)/255,2):1}:{r:parseInt(et.substring(0,2),16),g:parseInt(et.substring(2,4),16),b:parseInt(et.substring(4,6),16),a:et.length===8?b(parseInt(et.substring(6,8),16)/255,2):1}},w=function(et){return K(I(et))},y=function(et){var _=et.s,_e=et.v,tt=et.a,rt=(200-_)*_e/100;return{h:b(et.h),s:b(rt>0&&rt<200?_*_e/100/(rt<=100?rt:200-rt)*100:0),l:b(rt/2),a:b(tt,2)}},q=function(et){var _=y(et);return"hsl("+_.h+", "+_.s+"%, "+_.l+"%)"},I=function(et){var _=et.h,_e=et.s,tt=et.v,rt=et.a;_=_/360*6,_e/=100,tt/=100;var it=Math.floor(_),st=tt*(1-_e),At=tt*(1-(_-it)*_e),ut=tt*(1-(1-_+it)*_e),ct=it%6;return{r:b(255*[tt,At,st,st,ut,tt][ct]),g:b(255*[ut,tt,tt,At,st,st][ct]),b:b(255*[st,st,ut,tt,tt,At][ct]),a:b(rt,2)}},D=function(et){var _=et.toString(16);return _.length<2?"0"+_:_},K=function(et){var _=et.r,_e=et.g,tt=et.b,rt=et.a,it=rt<1?D(b(255*rt)):"";return"#"+D(_)+D(_e)+D(tt)+it},L$1=function(et){var _=et.r,_e=et.g,tt=et.b,rt=et.a,it=Math.max(_,_e,tt),st=it-Math.min(_,_e,tt),At=st?it===_?(_e-tt)/st:it===_e?2+(tt-_)/st:4+(_-_e)/st:0;return{h:b(60*(At<0?At+6:At)),s:b(it?st/it*100:0),v:b(it/255*100),a:rt}},S=e$2.memo(function(et){var _=et.hue,_e=et.onChange,tt=g(["react-colorful__hue",et.className]);return e$2.createElement("div",{className:tt},e$2.createElement(m,{onMove:function(rt){_e({h:360*rt.left})},onKey:function(rt){_e({h:s(_+360*rt.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(_),"aria-valuemax":"360","aria-valuemin":"0"},e$2.createElement(p,{className:"react-colorful__hue-pointer",left:_/360,color:q({h:_,s:100,v:100,a:1})})))}),T$1=e$2.memo(function(et){var _=et.hsva,_e=et.onChange,tt={backgroundColor:q({h:_.h,s:100,v:100,a:1})};return e$2.createElement("div",{className:"react-colorful__saturation",style:tt},e$2.createElement(m,{onMove:function(rt){_e({s:100*rt.left,v:100-100*rt.top})},onKey:function(rt){_e({s:s(_.s+100*rt.left,0,100),v:s(_.v-100*rt.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(_.s)+"%, Brightness "+b(_.v)+"%"},e$2.createElement(p,{className:"react-colorful__saturation-pointer",top:1-_.v/100,left:_.s/100,color:q(_)})))}),F$1=function(et,_){if(et===_)return!0;for(var _e in et)if(et[_e]!==_[_e])return!1;return!0},X=function(et,_){return et.toLowerCase()===_.toLowerCase()||F$1(C(et),C(_))};function Y(et,_,_e){var tt=i$4(_e),rt=reactExports.useState(function(){return et.toHsva(_)}),it=rt[0],st=rt[1],At=reactExports.useRef({color:_,hsva:it});reactExports.useEffect(function(){if(!et.equal(_,At.current.color)){var ct=et.toHsva(_);At.current={hsva:ct,color:_},st(ct)}},[_,et]),reactExports.useEffect(function(){var ct;F$1(it,At.current.hsva)||et.equal(ct=et.fromHsva(it),At.current.color)||(At.current={hsva:it,color:ct},tt(ct))},[it,et,tt]);var ut=reactExports.useCallback(function(ct){st(function(ht){return Object.assign({},ht,ct)})},[]);return[it,ut]}var V$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},J=new Map,Q=function(et){V$1(function(){var _=et.current?et.current.ownerDocument:document;if(_!==void 0&&!J.has(_)){var _e=_.createElement("style");_e.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,J.set(_,_e);var tt=$();tt&&_e.setAttribute("nonce",tt),_.head.appendChild(_e)}},[])},U$1=function(et){var _=et.className,_e=et.colorModel,tt=et.color,rt=tt===void 0?_e.defaultColor:tt,it=et.onChange,st=c(et,["className","colorModel","color","onChange"]),At=reactExports.useRef(null);Q(At);var ut=Y(_e,rt,it),ct=ut[0],ht=ut[1],ot=g(["react-colorful",_]);return e$2.createElement("div",u$1({},st,{ref:At,className:ot}),e$2.createElement(T$1,{hsva:ct,onChange:ht}),e$2.createElement(S,{hue:ct.h,onChange:ht,className:"react-colorful__last-control"}))},W={defaultColor:"000",toHsva:x,fromHsva:function(et){return w({h:et.h,s:et.s,v:et.v,a:1})},equal:X},Z$1=function(et){return e$2.createElement(U$1,u$1({},et,{colorModel:W}))};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(et,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,tt){_e.__proto__=tt}||function(_e,tt){for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])},extendStatics(et,_)};function __extends(et,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(et,_);function _e(){this.constructor=et}et.prototype=_===null?Object.create(_):(_e.prototype=_.prototype,new _e)}var __assign=function(){return __assign=Object.assign||function(_){for(var _e,tt=1,rt=arguments.length;tt<rt;tt++){_e=arguments[tt];for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&(_[it]=_e[it])}return _},__assign.apply(this,arguments)};function __awaiter(et,_,_e,tt){function rt(it){return it instanceof _e?it:new _e(function(st){st(it)})}return new(_e||(_e=Promise))(function(it,st){function At(ht){try{ct(tt.next(ht))}catch(ot){st(ot)}}function ut(ht){try{ct(tt.throw(ht))}catch(ot){st(ot)}}function ct(ht){ht.done?it(ht.value):rt(ht.value).then(At,ut)}ct((tt=tt.apply(et,_||[])).next())})}function __generator(et,_){var _e={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},tt,rt,it,st;return st={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function At(ct){return function(ht){return ut([ct,ht])}}function ut(ct){if(tt)throw new TypeError("Generator is already executing.");for(;_e;)try{if(tt=1,rt&&(it=ct[0]&2?rt.return:ct[0]?rt.throw||((it=rt.return)&&it.call(rt),0):rt.next)&&!(it=it.call(rt,ct[1])).done)return it;switch(rt=0,it&&(ct=[ct[0]&2,it.value]),ct[0]){case 0:case 1:it=ct;break;case 4:return _e.label++,{value:ct[1],done:!1};case 5:_e.label++,rt=ct[1],ct=[0];continue;case 7:ct=_e.ops.pop(),_e.trys.pop();continue;default:if(it=_e.trys,!(it=it.length>0&&it[it.length-1])&&(ct[0]===6||ct[0]===2)){_e=0;continue}if(ct[0]===3&&(!it||ct[1]>it[0]&&ct[1]<it[3])){_e.label=ct[1];break}if(ct[0]===6&&_e.label<it[1]){_e.label=it[1],it=ct;break}if(it&&_e.label<it[2]){_e.label=it[2],_e.ops.push(ct);break}it[2]&&_e.ops.pop(),_e.trys.pop();continue}ct=_.call(et,_e)}catch(ht){ct=[6,ht],rt=0}finally{tt=it=0}if(ct[0]&5)throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}}function __spreadArray(et,_,_e){if(_e||arguments.length===2)for(var tt=0,rt=_.length,it;tt<rt;tt++)(it||!(tt in _))&&(it||(it=Array.prototype.slice.call(_,0,tt)),it[tt]=_[tt]);return et.concat(it||_)}var Bounds=function(){function et(_,_e,tt,rt){this.left=_,this.top=_e,this.width=tt,this.height=rt}return et.prototype.add=function(_,_e,tt,rt){return new et(this.left+_,this.top+_e,this.width+tt,this.height+rt)},et.fromClientRect=function(_,_e){return new et(_e.left+_.windowBounds.left,_e.top+_.windowBounds.top,_e.width,_e.height)},et.fromDOMRectList=function(_,_e){var tt=Array.from(_e).find(function(rt){return rt.width!==0});return tt?new et(tt.left+_.windowBounds.left,tt.top+_.windowBounds.top,tt.width,tt.height):et.EMPTY},et.EMPTY=new et(0,0,0,0),et}(),parseBounds=function(et,_){return Bounds.fromClientRect(et,_.getBoundingClientRect())},parseDocumentSize=function(et){var _=et.body,_e=et.documentElement;if(!_||!_e)throw new Error("Unable to get document size");var tt=Math.max(Math.max(_.scrollWidth,_e.scrollWidth),Math.max(_.offsetWidth,_e.offsetWidth),Math.max(_.clientWidth,_e.clientWidth)),rt=Math.max(Math.max(_.scrollHeight,_e.scrollHeight),Math.max(_.offsetHeight,_e.offsetHeight),Math.max(_.clientHeight,_e.clientHeight));return new Bounds(0,0,tt,rt)},toCodePoints$1=function(et){for(var _=[],_e=0,tt=et.length;_e<tt;){var rt=et.charCodeAt(_e++);if(rt>=55296&&rt<=56319&&_e<tt){var it=et.charCodeAt(_e++);(it&64512)===56320?_.push(((rt&1023)<<10)+(it&1023)+65536):(_.push(rt),_e--)}else _.push(rt)}return _},fromCodePoint$1=function(){for(var et=[],_=0;_<arguments.length;_++)et[_]=arguments[_];if(String.fromCodePoint)return String.fromCodePoint.apply(String,et);var _e=et.length;if(!_e)return"";for(var tt=[],rt=-1,it="";++rt<_e;){var st=et[rt];st<=65535?tt.push(st):(st-=65536,tt.push((st>>10)+55296,st%1024+56320)),(rt+1===_e||tt.length>16384)&&(it+=String.fromCharCode.apply(String,tt),tt.length=0)}return it},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(et){var _=et.length*.75,_e=et.length,tt,rt=0,it,st,At,ut;et[et.length-1]==="="&&(_--,et[et.length-2]==="="&&_--);var ct=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(_):new Array(_),ht=Array.isArray(ct)?ct:new Uint8Array(ct);for(tt=0;tt<_e;tt+=4)it=lookup$1$1[et.charCodeAt(tt)],st=lookup$1$1[et.charCodeAt(tt+1)],At=lookup$1$1[et.charCodeAt(tt+2)],ut=lookup$1$1[et.charCodeAt(tt+3)],ht[rt++]=it<<2|st>>4,ht[rt++]=(st&15)<<4|At>>2,ht[rt++]=(At&3)<<6|ut&63;return ct},polyUint16Array$1=function(et){for(var _=et.length,_e=[],tt=0;tt<_;tt+=2)_e.push(et[tt+1]<<8|et[tt]);return _e},polyUint32Array$1=function(et){for(var _=et.length,_e=[],tt=0;tt<_;tt+=4)_e.push(et[tt+3]<<24|et[tt+2]<<16|et[tt+1]<<8|et[tt]);return _e},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(et,_,_e){return et.slice?et.slice(_,_e):new Uint16Array(Array.prototype.slice.call(et,_,_e))},slice32$1=function(et,_,_e){return et.slice?et.slice(_,_e):new Uint32Array(Array.prototype.slice.call(et,_,_e))},createTrieFromBase64$1=function(et,_){var _e=decode$1(et),tt=Array.isArray(_e)?polyUint32Array$1(_e):new Uint32Array(_e),rt=Array.isArray(_e)?polyUint16Array$1(_e):new Uint16Array(_e),it=24,st=slice16$1(rt,it/2,tt[4]/2),At=tt[5]===2?slice16$1(rt,(it+tt[4])/2):slice32$1(tt,Math.ceil((it+tt[4])/4));return new Trie$1(tt[0],tt[1],tt[2],tt[3],st,At)},Trie$1=function(){function et(_,_e,tt,rt,it,st){this.initialValue=_,this.errorValue=_e,this.highStart=tt,this.highValueIndex=rt,this.index=it,this.data=st}return et.prototype.get=function(_){var _e;if(_>=0){if(_<55296||_>56319&&_<=65535)return _e=this.index[_>>UTRIE2_SHIFT_2$1],_e=(_e<<UTRIE2_INDEX_SHIFT$1)+(_&UTRIE2_DATA_MASK$1),this.data[_e];if(_<=65535)return _e=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(_-55296>>UTRIE2_SHIFT_2$1)],_e=(_e<<UTRIE2_INDEX_SHIFT$1)+(_&UTRIE2_DATA_MASK$1),this.data[_e];if(_<this.highStart)return _e=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(_>>UTRIE2_SHIFT_1$1),_e=this.index[_e],_e+=_>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,_e=this.index[_e],_e=(_e<<UTRIE2_INDEX_SHIFT$1)+(_&UTRIE2_DATA_MASK$1),this.data[_e];if(_<=1114111)return this.data[this.highValueIndex]}return this.errorValue},et}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="×",BREAK_ALLOWED$1="÷",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(et,_){_===void 0&&(_="strict");var _e=[],tt=[],rt=[];return et.forEach(function(it,st){var At=UnicodeTrie$1.get(it);if(At>LETTER_NUMBER_MODIFIER?(rt.push(!0),At-=LETTER_NUMBER_MODIFIER):rt.push(!1),["normal","auto","loose"].indexOf(_)!==-1&&[8208,8211,12316,12448].indexOf(it)!==-1)return tt.push(st),_e.push(CB);if(At===CM||At===ZWJ$1){if(st===0)return tt.push(st),_e.push(AL);var ut=_e[st-1];return LINE_BREAKS.indexOf(ut)===-1?(tt.push(tt[st-1]),_e.push(ut)):(tt.push(st),_e.push(AL))}if(tt.push(st),At===CJ)return _e.push(_==="strict"?NS:ID);if(At===SA||At===AI)return _e.push(AL);if(At===XX)return it>=131072&&it<=196605||it>=196608&&it<=262141?_e.push(ID):_e.push(AL);_e.push(At)}),[tt,_e,rt]},isAdjacentWithSpaceIgnored=function(et,_,_e,tt){var rt=tt[_e];if(Array.isArray(et)?et.indexOf(rt)!==-1:et===rt)for(var it=_e;it<=tt.length;){it++;var st=tt[it];if(st===_)return!0;if(st!==SP)break}if(rt===SP)for(var it=_e;it>0;){it--;var At=tt[it];if(Array.isArray(et)?et.indexOf(At)!==-1:et===At)for(var ut=_e;ut<=tt.length;){ut++;var st=tt[ut];if(st===_)return!0;if(st!==SP)break}if(At!==SP)break}return!1},previousNonSpaceClassType=function(et,_){for(var _e=et;_e>=0;){var tt=_[_e];if(tt===SP)_e--;else return tt}return 0},_lineBreakAtIndex=function(et,_,_e,tt,rt){if(_e[tt]===0)return BREAK_NOT_ALLOWED$1;var it=tt-1;if(Array.isArray(rt)&&rt[it]===!0)return BREAK_NOT_ALLOWED$1;var st=it-1,At=it+1,ut=_[it],ct=st>=0?_[st]:0,ht=_[At];if(ut===CR$1&&ht===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(ut)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(ht)!==-1||SPACE$1.indexOf(ht)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(it,_)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(et[it])===ZWJ$1||(ut===EB||ut===EM)&&UnicodeTrie$1.get(et[At])===ZWJ$1||ut===WJ||ht===WJ||ut===GL||[SP,BA,HY].indexOf(ut)===-1&&ht===GL||[CL,CP,EX,IS,SY].indexOf(ht)!==-1||previousNonSpaceClassType(it,_)===OP||isAdjacentWithSpaceIgnored(QU,OP,it,_)||isAdjacentWithSpaceIgnored([CL,CP],NS,it,_)||isAdjacentWithSpaceIgnored(B2,B2,it,_))return BREAK_NOT_ALLOWED$1;if(ut===SP)return BREAK_ALLOWED$1;if(ut===QU||ht===QU)return BREAK_NOT_ALLOWED$1;if(ht===CB||ut===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(ht)!==-1||ut===BB||ct===HL&&HYPHEN.indexOf(ut)!==-1||ut===SY&&ht===HL||ht===IN||ALPHABETICS.indexOf(ht)!==-1&&ut===NU||ALPHABETICS.indexOf(ut)!==-1&&ht===NU||ut===PR&&[ID,EB,EM].indexOf(ht)!==-1||[ID,EB,EM].indexOf(ut)!==-1&&ht===PO||ALPHABETICS.indexOf(ut)!==-1&&PREFIX_POSTFIX.indexOf(ht)!==-1||PREFIX_POSTFIX.indexOf(ut)!==-1&&ALPHABETICS.indexOf(ht)!==-1||[PR,PO].indexOf(ut)!==-1&&(ht===NU||[OP,HY].indexOf(ht)!==-1&&_[At+1]===NU)||[OP,HY].indexOf(ut)!==-1&&ht===NU||ut===NU&&[NU,SY,IS].indexOf(ht)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(ht)!==-1)for(var ot=it;ot>=0;){var nt=_[ot];if(nt===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(nt)!==-1)ot--;else break}if([PR,PO].indexOf(ht)!==-1)for(var ot=[CL,CP].indexOf(ut)!==-1?st:it;ot>=0;){var nt=_[ot];if(nt===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(nt)!==-1)ot--;else break}if(JL===ut&&[JL,JV,H2,H3].indexOf(ht)!==-1||[JV,H2].indexOf(ut)!==-1&&[JV,JT].indexOf(ht)!==-1||[JT,H3].indexOf(ut)!==-1&&ht===JT||KOREAN_SYLLABLE_BLOCK.indexOf(ut)!==-1&&[IN,PO].indexOf(ht)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(ht)!==-1&&ut===PR||ALPHABETICS.indexOf(ut)!==-1&&ALPHABETICS.indexOf(ht)!==-1||ut===IS&&ALPHABETICS.indexOf(ht)!==-1||ALPHABETICS.concat(NU).indexOf(ut)!==-1&&ht===OP&&ea_OP.indexOf(et[At])===-1||ALPHABETICS.concat(NU).indexOf(ht)!==-1&&ut===CP)return BREAK_NOT_ALLOWED$1;if(ut===RI$1&&ht===RI$1){for(var at=_e[it],lt=1;at>0&&(at--,_[at]===RI$1);)lt++;if(lt%2!==0)return BREAK_NOT_ALLOWED$1}return ut===EB&&ht===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(et,_){_||(_={lineBreak:"normal",wordBreak:"normal"});var _e=codePointsToCharacterClasses(et,_.lineBreak),tt=_e[0],rt=_e[1],it=_e[2];(_.wordBreak==="break-all"||_.wordBreak==="break-word")&&(rt=rt.map(function(At){return[NU,AL,SA].indexOf(At)!==-1?ID:At}));var st=_.wordBreak==="keep-all"?it.map(function(At,ut){return At&&et[ut]>=19968&&et[ut]<=40959}):void 0;return[tt,rt,st]},Break=function(){function et(_,_e,tt,rt){this.codePoints=_,this.required=_e===BREAK_MANDATORY,this.start=tt,this.end=rt}return et.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},et}(),LineBreaker=function(et,_){var _e=toCodePoints$1(et),tt=cssFormattedClasses(_e,_),rt=tt[0],it=tt[1],st=tt[2],At=_e.length,ut=0,ct=0;return{next:function(){if(ct>=At)return{done:!0,value:null};for(var ht=BREAK_NOT_ALLOWED$1;ct<At&&(ht=_lineBreakAtIndex(_e,it,rt,++ct,st))===BREAK_NOT_ALLOWED$1;);if(ht!==BREAK_NOT_ALLOWED$1||ct===At){var ot=new Break(_e,ht,ut,ct);return ut=ct,{value:ot,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a=97,e=101,f=102,u=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(et){return et>=ZERO&&et<=57},isSurrogateCodePoint=function(et){return et>=55296&&et<=57343},isHex=function(et){return isDigit(et)||et>=A&&et<=F||et>=a&&et<=f},isLowerCaseLetter=function(et){return et>=a&&et<=z},isUpperCaseLetter=function(et){return et>=A&&et<=Z},isLetter=function(et){return isLowerCaseLetter(et)||isUpperCaseLetter(et)},isNonASCIICodePoint=function(et){return et>=CONTROL},isWhiteSpace=function(et){return et===LINE_FEED||et===CHARACTER_TABULATION||et===SPACE},isNameStartCodePoint=function(et){return isLetter(et)||isNonASCIICodePoint(et)||et===LOW_LINE},isNameCodePoint=function(et){return isNameStartCodePoint(et)||isDigit(et)||et===HYPHEN_MINUS},isNonPrintableCodePoint=function(et){return et>=NULL&&et<=BACKSPACE||et===LINE_TABULATION||et>=SHIFT_OUT&&et<=INFORMATION_SEPARATOR_ONE||et===DELETE},isValidEscape=function(et,_){return et!==REVERSE_SOLIDUS?!1:_!==LINE_FEED},isIdentifierStart=function(et,_,_e){return et===HYPHEN_MINUS?isNameStartCodePoint(_)||isValidEscape(_,_e):isNameStartCodePoint(et)?!0:!!(et===REVERSE_SOLIDUS&&isValidEscape(et,_))},isNumberStart=function(et,_,_e){return et===PLUS_SIGN||et===HYPHEN_MINUS?isDigit(_)?!0:_===FULL_STOP&&isDigit(_e):isDigit(et===FULL_STOP?_:et)},stringToNumber=function(et){var _=0,_e=1;(et[_]===PLUS_SIGN||et[_]===HYPHEN_MINUS)&&(et[_]===HYPHEN_MINUS&&(_e=-1),_++);for(var tt=[];isDigit(et[_]);)tt.push(et[_++]);var rt=tt.length?parseInt(fromCodePoint$1.apply(void 0,tt),10):0;et[_]===FULL_STOP&&_++;for(var it=[];isDigit(et[_]);)it.push(et[_++]);var st=it.length,At=st?parseInt(fromCodePoint$1.apply(void 0,it),10):0;(et[_]===E||et[_]===e)&&_++;var ut=1;(et[_]===PLUS_SIGN||et[_]===HYPHEN_MINUS)&&(et[_]===HYPHEN_MINUS&&(ut=-1),_++);for(var ct=[];isDigit(et[_]);)ct.push(et[_++]);var ht=ct.length?parseInt(fromCodePoint$1.apply(void 0,ct),10):0;return _e*(rt+At*Math.pow(10,-st))*Math.pow(10,ut*ht)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function et(){this._value=[]}return et.prototype.write=function(_){this._value=this._value.concat(toCodePoints$1(_))},et.prototype.read=function(){for(var _=[],_e=this.consumeToken();_e!==EOF_TOKEN;)_.push(_e),_e=this.consumeToken();return _},et.prototype.consumeToken=function(){var _=this.consumeCodePoint();switch(_){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var _e=this.peekCodePoint(0),tt=this.peekCodePoint(1),rt=this.peekCodePoint(2);if(isNameCodePoint(_e)||isValidEscape(tt,rt)){var it=isIdentifierStart(_e,tt,rt)?FLAG_ID:FLAG_UNRESTRICTED,st=this.consumeName();return{type:5,value:st,flags:it}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(_,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(_),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var At=_,ut=this.peekCodePoint(0),ct=this.peekCodePoint(1);if(isNumberStart(At,ut,ct))return this.reconsumeCodePoint(_),this.consumeNumericToken();if(isIdentifierStart(At,ut,ct))return this.reconsumeCodePoint(_),this.consumeIdentLikeToken();if(ut===HYPHEN_MINUS&&ct===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(_,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(_),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var ht=this.consumeCodePoint();if(ht===ASTERISK&&(ht=this.consumeCodePoint(),ht===SOLIDUS))return this.consumeToken();if(ht===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var ot=this.peekCodePoint(0),nt=this.peekCodePoint(1),at=this.peekCodePoint(2);if(isIdentifierStart(ot,nt,at)){var st=this.consumeName();return{type:7,value:st}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(_,this.peekCodePoint(0)))return this.reconsumeCodePoint(_),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var lt=this.peekCodePoint(0),dt=this.peekCodePoint(1);return lt===PLUS_SIGN&&(isHex(dt)||dt===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(_),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(_)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(_)?(this.reconsumeCodePoint(_),this.consumeNumericToken()):isNameStartCodePoint(_)?(this.reconsumeCodePoint(_),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(_)}},et.prototype.consumeCodePoint=function(){var _=this._value.shift();return typeof _>"u"?-1:_},et.prototype.reconsumeCodePoint=function(_){this._value.unshift(_)},et.prototype.peekCodePoint=function(_){return _>=this._value.length?-1:this._value[_]},et.prototype.consumeUnicodeRangeToken=function(){for(var _=[],_e=this.consumeCodePoint();isHex(_e)&&_.length<6;)_.push(_e),_e=this.consumeCodePoint();for(var tt=!1;_e===QUESTION_MARK&&_.length<6;)_.push(_e),_e=this.consumeCodePoint(),tt=!0;if(tt){var rt=parseInt(fromCodePoint$1.apply(void 0,_.map(function(ut){return ut===QUESTION_MARK?ZERO:ut})),16),it=parseInt(fromCodePoint$1.apply(void 0,_.map(function(ut){return ut===QUESTION_MARK?F:ut})),16);return{type:30,start:rt,end:it}}var st=parseInt(fromCodePoint$1.apply(void 0,_),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),_e=this.consumeCodePoint();for(var At=[];isHex(_e)&&At.length<6;)At.push(_e),_e=this.consumeCodePoint();var it=parseInt(fromCodePoint$1.apply(void 0,At),16);return{type:30,start:st,end:it}}else return{type:30,start:st,end:st}},et.prototype.consumeIdentLikeToken=function(){var _=this.consumeName();return _.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:_}):{type:20,value:_}},et.prototype.consumeUrlToken=function(){var _=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var _e=this.peekCodePoint(0);if(_e===APOSTROPHE||_e===QUOTATION_MARK){var tt=this.consumeStringToken(this.consumeCodePoint());return tt.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:tt.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var rt=this.consumeCodePoint();if(rt===EOF||rt===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,_)};if(isWhiteSpace(rt))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,_)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(rt===QUOTATION_MARK||rt===APOSTROPHE||rt===LEFT_PARENTHESIS||isNonPrintableCodePoint(rt))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(rt===REVERSE_SOLIDUS)if(isValidEscape(rt,this.peekCodePoint(0)))_.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else _.push(rt)}},et.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},et.prototype.consumeBadUrlRemnants=function(){for(;;){var _=this.consumeCodePoint();if(_===RIGHT_PARENTHESIS||_===EOF)return;isValidEscape(_,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},et.prototype.consumeStringSlice=function(_){for(var _e=5e4,tt="";_>0;){var rt=Math.min(_e,_);tt+=fromCodePoint$1.apply(void 0,this._value.splice(0,rt)),_-=rt}return this._value.shift(),tt},et.prototype.consumeStringToken=function(_){var _e="",tt=0;do{var rt=this._value[tt];if(rt===EOF||rt===void 0||rt===_)return _e+=this.consumeStringSlice(tt),{type:0,value:_e};if(rt===LINE_FEED)return this._value.splice(0,tt),BAD_STRING_TOKEN;if(rt===REVERSE_SOLIDUS){var it=this._value[tt+1];it!==EOF&&it!==void 0&&(it===LINE_FEED?(_e+=this.consumeStringSlice(tt),tt=-1,this._value.shift()):isValidEscape(rt,it)&&(_e+=this.consumeStringSlice(tt),_e+=fromCodePoint$1(this.consumeEscapedCodePoint()),tt=-1))}tt++}while(!0)},et.prototype.consumeNumber=function(){var _=[],_e=FLAG_INTEGER,tt=this.peekCodePoint(0);for((tt===PLUS_SIGN||tt===HYPHEN_MINUS)&&_.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)_.push(this.consumeCodePoint());tt=this.peekCodePoint(0);var rt=this.peekCodePoint(1);if(tt===FULL_STOP&&isDigit(rt))for(_.push(this.consumeCodePoint(),this.consumeCodePoint()),_e=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)_.push(this.consumeCodePoint());tt=this.peekCodePoint(0),rt=this.peekCodePoint(1);var it=this.peekCodePoint(2);if((tt===E||tt===e)&&((rt===PLUS_SIGN||rt===HYPHEN_MINUS)&&isDigit(it)||isDigit(rt)))for(_.push(this.consumeCodePoint(),this.consumeCodePoint()),_e=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)_.push(this.consumeCodePoint());return[stringToNumber(_),_e]},et.prototype.consumeNumericToken=function(){var _=this.consumeNumber(),_e=_[0],tt=_[1],rt=this.peekCodePoint(0),it=this.peekCodePoint(1),st=this.peekCodePoint(2);if(isIdentifierStart(rt,it,st)){var At=this.consumeName();return{type:15,number:_e,flags:tt,unit:At}}return rt===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:_e,flags:tt}):{type:17,number:_e,flags:tt}},et.prototype.consumeEscapedCodePoint=function(){var _=this.consumeCodePoint();if(isHex(_)){for(var _e=fromCodePoint$1(_);isHex(this.peekCodePoint(0))&&_e.length<6;)_e+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var tt=parseInt(_e,16);return tt===0||isSurrogateCodePoint(tt)||tt>1114111?REPLACEMENT_CHARACTER:tt}return _===EOF?REPLACEMENT_CHARACTER:_},et.prototype.consumeName=function(){for(var _="";;){var _e=this.consumeCodePoint();if(isNameCodePoint(_e))_+=fromCodePoint$1(_e);else if(isValidEscape(_e,this.peekCodePoint(0)))_+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(_e),_}},et}(),Parser=function(){function et(_){this._tokens=_}return et.create=function(_){var _e=new Tokenizer;return _e.write(_),new et(_e.read())},et.parseValue=function(_){return et.create(_).parseComponentValue()},et.parseValues=function(_){return et.create(_).parseComponentValues()},et.prototype.parseComponentValue=function(){for(var _=this.consumeToken();_.type===31;)_=this.consumeToken();if(_.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(_);var _e=this.consumeComponentValue();do _=this.consumeToken();while(_.type===31);if(_.type===32)return _e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},et.prototype.parseComponentValues=function(){for(var _=[];;){var _e=this.consumeComponentValue();if(_e.type===32)return _;_.push(_e),_.push()}},et.prototype.consumeComponentValue=function(){var _=this.consumeToken();switch(_.type){case 11:case 28:case 2:return this.consumeSimpleBlock(_.type);case 19:return this.consumeFunction(_)}return _},et.prototype.consumeSimpleBlock=function(_){for(var _e={type:_,values:[]},tt=this.consumeToken();;){if(tt.type===32||isEndingTokenFor(tt,_))return _e;this.reconsumeToken(tt),_e.values.push(this.consumeComponentValue()),tt=this.consumeToken()}},et.prototype.consumeFunction=function(_){for(var _e={name:_.value,values:[],type:18};;){var tt=this.consumeToken();if(tt.type===32||tt.type===3)return _e;this.reconsumeToken(tt),_e.values.push(this.consumeComponentValue())}},et.prototype.consumeToken=function(){var _=this._tokens.shift();return typeof _>"u"?EOF_TOKEN:_},et.prototype.reconsumeToken=function(_){this._tokens.unshift(_)},et}(),isDimensionToken=function(et){return et.type===15},isNumberToken=function(et){return et.type===17},isIdentToken=function(et){return et.type===20},isStringToken=function(et){return et.type===0},isIdentWithValue=function(et,_){return isIdentToken(et)&&et.value===_},nonWhiteSpace=function(et){return et.type!==31},nonFunctionArgSeparator=function(et){return et.type!==31&&et.type!==4},parseFunctionArgs=function(et){var _=[],_e=[];return et.forEach(function(tt){if(tt.type===4){if(_e.length===0)throw new Error("Error parsing function args, zero tokens for arg");_.push(_e),_e=[];return}tt.type!==31&&_e.push(tt)}),_e.length&&_.push(_e),_},isEndingTokenFor=function(et,_){return _===11&&et.type===12||_===28&&et.type===29?!0:_===2&&et.type===3},isLength=function(et){return et.type===17||et.type===15},isLengthPercentage=function(et){return et.type===16||isLength(et)},parseLengthPercentageTuple=function(et){return et.length>1?[et[0],et[1]]:[et[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(et,_,_e){var tt=et[0],rt=et[1];return[getAbsoluteValue(tt,_),getAbsoluteValue(typeof rt<"u"?rt:tt,_e)]},getAbsoluteValue=function(et,_){if(et.type===16)return et.number/100*_;if(isDimensionToken(et))switch(et.unit){case"rem":case"em":return 16*et.number;case"px":default:return et.number}return et.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(et,_){if(_.type===15)switch(_.unit){case DEG:return Math.PI*_.number/180;case GRAD:return Math.PI/200*_.number;case RAD:return _.number;case TURN:return Math.PI*2*_.number}throw new Error("Unsupported angle type")}},isAngle=function(et){return et.type===15&&(et.unit===DEG||et.unit===GRAD||et.unit===RAD||et.unit===TURN)},parseNamedSide=function(et){var _=et.filter(isIdentToken).map(function(_e){return _e.value}).join(" ");switch(_){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(et){return Math.PI*et/180},color$1={name:"color",parse:function(et,_){if(_.type===18){var _e=SUPPORTED_COLOR_FUNCTIONS[_.name];if(typeof _e>"u")throw new Error('Attempting to parse an unsupported color function "'+_.name+'"');return _e(et,_.values)}if(_.type===5){if(_.value.length===3){var tt=_.value.substring(0,1),rt=_.value.substring(1,2),it=_.value.substring(2,3);return pack(parseInt(tt+tt,16),parseInt(rt+rt,16),parseInt(it+it,16),1)}if(_.value.length===4){var tt=_.value.substring(0,1),rt=_.value.substring(1,2),it=_.value.substring(2,3),st=_.value.substring(3,4);return pack(parseInt(tt+tt,16),parseInt(rt+rt,16),parseInt(it+it,16),parseInt(st+st,16)/255)}if(_.value.length===6){var tt=_.value.substring(0,2),rt=_.value.substring(2,4),it=_.value.substring(4,6);return pack(parseInt(tt,16),parseInt(rt,16),parseInt(it,16),1)}if(_.value.length===8){var tt=_.value.substring(0,2),rt=_.value.substring(2,4),it=_.value.substring(4,6),st=_.value.substring(6,8);return pack(parseInt(tt,16),parseInt(rt,16),parseInt(it,16),parseInt(st,16)/255)}}if(_.type===20){var At=COLORS[_.value.toUpperCase()];if(typeof At<"u")return At}return COLORS.TRANSPARENT}},isTransparent=function(et){return(255&et)===0},asString=function(et){var _=255&et,_e=255&et>>8,tt=255&et>>16,rt=255&et>>24;return _<255?"rgba("+rt+","+tt+","+_e+","+_/255+")":"rgb("+rt+","+tt+","+_e+")"},pack=function(et,_,_e,tt){return(et<<24|_<<16|_e<<8|Math.round(tt*255)<<0)>>>0},getTokenColorValue=function(et,_){if(et.type===17)return et.number;if(et.type===16){var _e=_===3?1:255;return _===3?et.number/100*_e:Math.round(et.number/100*_e)}return 0},rgb=function(et,_){var _e=_.filter(nonFunctionArgSeparator);if(_e.length===3){var tt=_e.map(getTokenColorValue),rt=tt[0],it=tt[1],st=tt[2];return pack(rt,it,st,1)}if(_e.length===4){var At=_e.map(getTokenColorValue),rt=At[0],it=At[1],st=At[2],ut=At[3];return pack(rt,it,st,ut)}return 0};function hue2rgb(et,_,_e){return _e<0&&(_e+=1),_e>=1&&(_e-=1),_e<1/6?(_-et)*_e*6+et:_e<1/2?_:_e<2/3?(_-et)*6*(2/3-_e)+et:et}var hsl=function(et,_){var _e=_.filter(nonFunctionArgSeparator),tt=_e[0],rt=_e[1],it=_e[2],st=_e[3],At=(tt.type===17?deg(tt.number):angle.parse(et,tt))/(Math.PI*2),ut=isLengthPercentage(rt)?rt.number/100:0,ct=isLengthPercentage(it)?it.number/100:0,ht=typeof st<"u"&&isLengthPercentage(st)?getAbsoluteValue(st,1):1;if(ut===0)return pack(ct*255,ct*255,ct*255,1);var ot=ct<=.5?ct*(ut+1):ct+ut-ct*ut,nt=ct*2-ot,at=hue2rgb(nt,ot,At+1/3),lt=hue2rgb(nt,ot,At),dt=hue2rgb(nt,ot,At-1/3);return pack(at*255,lt*255,dt*255,ht)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(et,_){return color$1.parse(et,Parser.create(_).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(et,_){return _.map(function(_e){if(isIdentToken(_e))switch(_e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(et,_){var _e=color$1.parse(et,_[0]),tt=_[1];return tt&&isLengthPercentage(tt)?{color:_e,stop:tt}:{color:_e,stop:null}},processColorStops=function(et,_){var _e=et[0],tt=et[et.length-1];_e.stop===null&&(_e.stop=ZERO_LENGTH),tt.stop===null&&(tt.stop=HUNDRED_PERCENT);for(var rt=[],it=0,st=0;st<et.length;st++){var At=et[st].stop;if(At!==null){var ut=getAbsoluteValue(At,_);ut>it?rt.push(ut):rt.push(it),it=ut}else rt.push(null)}for(var ct=null,st=0;st<rt.length;st++){var ht=rt[st];if(ht===null)ct===null&&(ct=st);else if(ct!==null){for(var ot=st-ct,nt=rt[ct-1],at=(ht-nt)/(ot+1),lt=1;lt<=ot;lt++)rt[ct+lt-1]=at*lt;ct=null}}return et.map(function(dt,ft){var pt=dt.color;return{color:pt,stop:Math.max(Math.min(1,rt[ft]/_),0)}})},getAngleFromCorner=function(et,_,_e){var tt=_/2,rt=_e/2,it=getAbsoluteValue(et[0],_)-tt,st=rt-getAbsoluteValue(et[1],_e);return(Math.atan2(st,it)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(et,_,_e){var tt=typeof et=="number"?et:getAngleFromCorner(et,_,_e),rt=Math.abs(_*Math.sin(tt))+Math.abs(_e*Math.cos(tt)),it=_/2,st=_e/2,At=rt/2,ut=Math.sin(tt-Math.PI/2)*At,ct=Math.cos(tt-Math.PI/2)*At;return[rt,it-ct,it+ct,st-ut,st+ut]},distance=function(et,_){return Math.sqrt(et*et+_*_)},findCorner=function(et,_,_e,tt,rt){var it=[[0,0],[0,_],[et,0],[et,_]];return it.reduce(function(st,At){var ut=At[0],ct=At[1],ht=distance(_e-ut,tt-ct);return(rt?ht<st.optimumDistance:ht>st.optimumDistance)?{optimumCorner:At,optimumDistance:ht}:st},{optimumDistance:rt?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(et,_,_e,tt,rt){var it=0,st=0;switch(et.size){case 0:et.shape===0?it=st=Math.min(Math.abs(_),Math.abs(_-tt),Math.abs(_e),Math.abs(_e-rt)):et.shape===1&&(it=Math.min(Math.abs(_),Math.abs(_-tt)),st=Math.min(Math.abs(_e),Math.abs(_e-rt)));break;case 2:if(et.shape===0)it=st=Math.min(distance(_,_e),distance(_,_e-rt),distance(_-tt,_e),distance(_-tt,_e-rt));else if(et.shape===1){var At=Math.min(Math.abs(_e),Math.abs(_e-rt))/Math.min(Math.abs(_),Math.abs(_-tt)),ut=findCorner(tt,rt,_,_e,!0),ct=ut[0],ht=ut[1];it=distance(ct-_,(ht-_e)/At),st=At*it}break;case 1:et.shape===0?it=st=Math.max(Math.abs(_),Math.abs(_-tt),Math.abs(_e),Math.abs(_e-rt)):et.shape===1&&(it=Math.max(Math.abs(_),Math.abs(_-tt)),st=Math.max(Math.abs(_e),Math.abs(_e-rt)));break;case 3:if(et.shape===0)it=st=Math.max(distance(_,_e),distance(_,_e-rt),distance(_-tt,_e),distance(_-tt,_e-rt));else if(et.shape===1){var At=Math.max(Math.abs(_e),Math.abs(_e-rt))/Math.max(Math.abs(_),Math.abs(_-tt)),ot=findCorner(tt,rt,_,_e,!1),ct=ot[0],ht=ot[1];it=distance(ct-_,(ht-_e)/At),st=At*it}break}return Array.isArray(et.size)&&(it=getAbsoluteValue(et.size[0],tt),st=et.size.length===2?getAbsoluteValue(et.size[1],rt):it),[it,st]},linearGradient=function(et,_){var _e=deg(180),tt=[];return parseFunctionArgs(_).forEach(function(rt,it){if(it===0){var st=rt[0];if(st.type===20&&st.value==="to"){_e=parseNamedSide(rt);return}else if(isAngle(st)){_e=angle.parse(et,st);return}}var At=parseColorStop(et,rt);tt.push(At)}),{angle:_e,stops:tt,type:1}},prefixLinearGradient=function(et,_){var _e=deg(180),tt=[];return parseFunctionArgs(_).forEach(function(rt,it){if(it===0){var st=rt[0];if(st.type===20&&["top","left","right","bottom"].indexOf(st.value)!==-1){_e=parseNamedSide(rt);return}else if(isAngle(st)){_e=(angle.parse(et,st)+deg(270))%deg(360);return}}var At=parseColorStop(et,rt);tt.push(At)}),{angle:_e,stops:tt,type:1}},webkitGradient=function(et,_){var _e=deg(180),tt=[],rt=1,it=0,st=3,At=[];return parseFunctionArgs(_).forEach(function(ut,ct){var ht=ut[0];if(ct===0){if(isIdentToken(ht)&&ht.value==="linear"){rt=1;return}else if(isIdentToken(ht)&&ht.value==="radial"){rt=2;return}}if(ht.type===18){if(ht.name==="from"){var ot=color$1.parse(et,ht.values[0]);tt.push({stop:ZERO_LENGTH,color:ot})}else if(ht.name==="to"){var ot=color$1.parse(et,ht.values[0]);tt.push({stop:HUNDRED_PERCENT,color:ot})}else if(ht.name==="color-stop"){var nt=ht.values.filter(nonFunctionArgSeparator);if(nt.length===2){var ot=color$1.parse(et,nt[1]),at=nt[0];isNumberToken(at)&&tt.push({stop:{type:16,number:at.number*100,flags:at.flags},color:ot})}}}}),rt===1?{angle:(_e+deg(180))%deg(360),stops:tt,type:rt}:{size:st,shape:it,stops:tt,position:At,type:rt}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(et,_){var _e=0,tt=3,rt=[],it=[];return parseFunctionArgs(_).forEach(function(st,At){var ut=!0;if(At===0){var ct=!1;ut=st.reduce(function(ot,nt){if(ct)if(isIdentToken(nt))switch(nt.value){case"center":return it.push(FIFTY_PERCENT),ot;case"top":case"left":return it.push(ZERO_LENGTH),ot;case"right":case"bottom":return it.push(HUNDRED_PERCENT),ot}else(isLengthPercentage(nt)||isLength(nt))&&it.push(nt);else if(isIdentToken(nt))switch(nt.value){case CIRCLE:return _e=0,!1;case ELLIPSE:return _e=1,!1;case"at":return ct=!0,!1;case CLOSEST_SIDE:return tt=0,!1;case COVER:case FARTHEST_SIDE:return tt=1,!1;case CONTAIN:case CLOSEST_CORNER:return tt=2,!1;case FARTHEST_CORNER:return tt=3,!1}else if(isLength(nt)||isLengthPercentage(nt))return Array.isArray(tt)||(tt=[]),tt.push(nt),!1;return ot},ut)}if(ut){var ht=parseColorStop(et,st);rt.push(ht)}}),{size:tt,shape:_e,stops:rt,position:it,type:2}},prefixRadialGradient=function(et,_){var _e=0,tt=3,rt=[],it=[];return parseFunctionArgs(_).forEach(function(st,At){var ut=!0;if(At===0?ut=st.reduce(function(ht,ot){if(isIdentToken(ot))switch(ot.value){case"center":return it.push(FIFTY_PERCENT),!1;case"top":case"left":return it.push(ZERO_LENGTH),!1;case"right":case"bottom":return it.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(ot)||isLength(ot))return it.push(ot),!1;return ht},ut):At===1&&(ut=st.reduce(function(ht,ot){if(isIdentToken(ot))switch(ot.value){case CIRCLE:return _e=0,!1;case ELLIPSE:return _e=1,!1;case CONTAIN:case CLOSEST_SIDE:return tt=0,!1;case FARTHEST_SIDE:return tt=1,!1;case CLOSEST_CORNER:return tt=2,!1;case COVER:case FARTHEST_CORNER:return tt=3,!1}else if(isLength(ot)||isLengthPercentage(ot))return Array.isArray(tt)||(tt=[]),tt.push(ot),!1;return ht},ut)),ut){var ct=parseColorStop(et,st);rt.push(ct)}}),{size:tt,shape:_e,stops:rt,position:it,type:2}},isLinearGradient=function(et){return et.type===1},isRadialGradient=function(et){return et.type===2},image={name:"image",parse:function(et,_){if(_.type===22){var _e={url:_.value,type:0};return et.cache.addImage(_.value),_e}if(_.type===18){var tt=SUPPORTED_IMAGE_FUNCTIONS[_.name];if(typeof tt>"u")throw new Error('Attempting to parse an unsupported image function "'+_.name+'"');return tt(et,_.values)}throw new Error("Unsupported image type "+_.type)}};function isSupportedImage(et){return!(et.type===20&&et.value==="none")&&(et.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[et.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(et,_){if(_.length===0)return[];var _e=_[0];return _e.type===20&&_e.value==="none"?[]:_.filter(function(tt){return nonFunctionArgSeparator(tt)&&isSupportedImage(tt)}).map(function(tt){return image.parse(et,tt)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(et,_){return _.map(function(_e){if(isIdentToken(_e))switch(_e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(et,_){return parseFunctionArgs(_).map(function(_e){return _e.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(et,_){return parseFunctionArgs(_).map(function(_e){return _e.filter(isIdentToken).map(function(tt){return tt.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(et){switch(et){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(et){et.AUTO="auto",et.CONTAIN="contain",et.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(et,_){return parseFunctionArgs(_).map(function(_e){return _e.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(et){return isIdentToken(et)||isLengthPercentage(et)},borderColorForSide=function(et){return{name:"border-"+et+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(et){return{name:"border-radius-"+et,initialValue:"0 0",prefix:!1,type:1,parse:function(_,_e){return parseLengthPercentageTuple(_e.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(et){return{name:"border-"+et+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(_,_e){switch(_e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(et){return{name:"border-"+et+"-width",initialValue:"0",type:0,prefix:!1,parse:function(_,_e){return isDimensionToken(_e)?_e.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(et,_){switch(_){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(et,_){return _.filter(isIdentToken).reduce(function(_e,tt){return _e|parseDisplayValue(tt.value)},0)}},parseDisplayValue=function(et){switch(et){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(et,_){switch(_){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(et,_){return _.type===20&&_.value==="normal"?0:_.type===17||_.type===15?_.number:0}},LINE_BREAK;(function(et){et.NORMAL="normal",et.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(et,_){switch(_){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(et,_){return isIdentToken(et)&&et.value==="normal"?1.2*_:et.type===17?_*et.number:isLengthPercentage(et)?getAbsoluteValue(et,_):_},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(et,_){return _.type===20&&_.value==="none"?null:image.parse(et,_)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(et,_){switch(_){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(et,_){switch(_){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(et){return{name:"margin-"+et,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(et,_){return _.filter(isIdentToken).map(function(_e){switch(_e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(et,_){switch(_){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(et){return{name:"padding-"+et,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(et,_){switch(_){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(et,_){switch(_){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(et,_){return _.length===1&&isIdentWithValue(_[0],"none")?[]:parseFunctionArgs(_).map(function(_e){for(var tt={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},rt=0,it=0;it<_e.length;it++){var st=_e[it];isLength(st)?(rt===0?tt.offsetX=st:rt===1?tt.offsetY=st:tt.blur=st,rt++):tt.color=color$1.parse(et,st)}return tt})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(et,_){switch(_){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(et,_){if(_.type===20&&_.value==="none")return null;if(_.type===18){var _e=SUPPORTED_TRANSFORM_FUNCTIONS[_.name];if(typeof _e>"u")throw new Error('Attempting to parse an unsupported transform function "'+_.name+'"');return _e(_.values)}return null}},matrix=function(et){var _=et.filter(function(_e){return _e.type===17}).map(function(_e){return _e.number});return _.length===6?_:null},matrix3d=function(et){var _=et.filter(function(ut){return ut.type===17}).map(function(ut){return ut.number}),_e=_[0],tt=_[1];_[2],_[3];var rt=_[4],it=_[5];_[6],_[7],_[8],_[9],_[10],_[11];var st=_[12],At=_[13];return _[14],_[15],_.length===16?[_e,tt,rt,it,st,At]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(et,_){var _e=_.filter(isLengthPercentage);return _e.length!==2?DEFAULT:[_e[0],_e[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(et,_){switch(_){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(et){et.NORMAL="normal",et.BREAK_ALL="break-all",et.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(et,_){switch(_){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(et,_){if(_.type===20)return{auto:!0,order:0};if(isNumberToken(_))return{auto:!1,order:_.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(et,_){if(_.type===15)switch(_.unit.toLowerCase()){case"s":return 1e3*_.number;case"ms":return _.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(et,_){return isNumberToken(_)?_.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(et,_){return _.filter(isIdentToken).map(function(_e){switch(_e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(_e){return _e!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(et,_){var _e=[],tt=[];return _.forEach(function(rt){switch(rt.type){case 20:case 0:_e.push(rt.value);break;case 17:_e.push(rt.number.toString());break;case 4:tt.push(_e.join(" ")),_e.length=0;break}}),_e.length&&tt.push(_e.join(" ")),tt.map(function(rt){return rt.indexOf(" ")===-1?rt:"'"+rt+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(et,_){if(isNumberToken(_))return _.number;if(isIdentToken(_))switch(_.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(et,_){return _.filter(isIdentToken).map(function(_e){return _e.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(et,_){switch(_){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(et,_){return(et&_)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(et,_){if(_.length===0)return[];var _e=_[0];return _e.type===20&&_e.value==="none"?[]:_}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(et,_){if(_.length===0)return null;var _e=_[0];if(_e.type===20&&_e.value==="none")return null;for(var tt=[],rt=_.filter(nonWhiteSpace),it=0;it<rt.length;it++){var st=rt[it],At=rt[it+1];if(st.type===20){var ut=At&&isNumberToken(At)?At.number:1;tt.push({counter:st.value,increment:ut})}}return tt}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(et,_){if(_.length===0)return[];for(var _e=[],tt=_.filter(nonWhiteSpace),rt=0;rt<tt.length;rt++){var it=tt[rt],st=tt[rt+1];if(isIdentToken(it)&&it.value!=="none"){var At=st&&isNumberToken(st)?st.number:0;_e.push({counter:it.value,reset:At})}}return _e}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(et,_){return _.filter(isDimensionToken).map(function(_e){return time.parse(et,_e)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(et,_){if(_.length===0)return null;var _e=_[0];if(_e.type===20&&_e.value==="none")return null;var tt=[],rt=_.filter(isStringToken);if(rt.length%2!==0)return null;for(var it=0;it<rt.length;it+=2){var st=rt[it].value,At=rt[it+1].value;tt.push({open:st,close:At})}return tt}},getQuote=function(et,_,_e){if(!et)return"";var tt=et[Math.min(_,et.length-1)];return tt?_e?tt.open:tt.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(et,_){return _.length===1&&isIdentWithValue(_[0],"none")?[]:parseFunctionArgs(_).map(function(_e){for(var tt={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},rt=0,it=0;it<_e.length;it++){var st=_e[it];isIdentWithValue(st,"inset")?tt.inset=!0:isLength(st)?(rt===0?tt.offsetX=st:rt===1?tt.offsetY=st:rt===2?tt.blur=st:tt.spread=st,rt++):tt.color=color$1.parse(et,st)}return tt})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(et,_){var _e=[0,1,2],tt=[];return _.filter(isIdentToken).forEach(function(rt){switch(rt.value){case"stroke":tt.push(1);break;case"fill":tt.push(0);break;case"markers":tt.push(2);break}}),_e.forEach(function(rt){tt.indexOf(rt)===-1&&tt.push(rt)}),tt}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(et,_){return isDimensionToken(_)?_.number:0}},CSSParsedDeclaration=function(){function et(_,_e){var tt,rt;this.animationDuration=parse(_,duration,_e.animationDuration),this.backgroundClip=parse(_,backgroundClip,_e.backgroundClip),this.backgroundColor=parse(_,backgroundColor,_e.backgroundColor),this.backgroundImage=parse(_,backgroundImage,_e.backgroundImage),this.backgroundOrigin=parse(_,backgroundOrigin,_e.backgroundOrigin),this.backgroundPosition=parse(_,backgroundPosition,_e.backgroundPosition),this.backgroundRepeat=parse(_,backgroundRepeat,_e.backgroundRepeat),this.backgroundSize=parse(_,backgroundSize,_e.backgroundSize),this.borderTopColor=parse(_,borderTopColor,_e.borderTopColor),this.borderRightColor=parse(_,borderRightColor,_e.borderRightColor),this.borderBottomColor=parse(_,borderBottomColor,_e.borderBottomColor),this.borderLeftColor=parse(_,borderLeftColor,_e.borderLeftColor),this.borderTopLeftRadius=parse(_,borderTopLeftRadius,_e.borderTopLeftRadius),this.borderTopRightRadius=parse(_,borderTopRightRadius,_e.borderTopRightRadius),this.borderBottomRightRadius=parse(_,borderBottomRightRadius,_e.borderBottomRightRadius),this.borderBottomLeftRadius=parse(_,borderBottomLeftRadius,_e.borderBottomLeftRadius),this.borderTopStyle=parse(_,borderTopStyle,_e.borderTopStyle),this.borderRightStyle=parse(_,borderRightStyle,_e.borderRightStyle),this.borderBottomStyle=parse(_,borderBottomStyle,_e.borderBottomStyle),this.borderLeftStyle=parse(_,borderLeftStyle,_e.borderLeftStyle),this.borderTopWidth=parse(_,borderTopWidth,_e.borderTopWidth),this.borderRightWidth=parse(_,borderRightWidth,_e.borderRightWidth),this.borderBottomWidth=parse(_,borderBottomWidth,_e.borderBottomWidth),this.borderLeftWidth=parse(_,borderLeftWidth,_e.borderLeftWidth),this.boxShadow=parse(_,boxShadow,_e.boxShadow),this.color=parse(_,color,_e.color),this.direction=parse(_,direction,_e.direction),this.display=parse(_,display,_e.display),this.float=parse(_,float,_e.cssFloat),this.fontFamily=parse(_,fontFamily,_e.fontFamily),this.fontSize=parse(_,fontSize,_e.fontSize),this.fontStyle=parse(_,fontStyle,_e.fontStyle),this.fontVariant=parse(_,fontVariant,_e.fontVariant),this.fontWeight=parse(_,fontWeight,_e.fontWeight),this.letterSpacing=parse(_,letterSpacing,_e.letterSpacing),this.lineBreak=parse(_,lineBreak,_e.lineBreak),this.lineHeight=parse(_,lineHeight,_e.lineHeight),this.listStyleImage=parse(_,listStyleImage,_e.listStyleImage),this.listStylePosition=parse(_,listStylePosition,_e.listStylePosition),this.listStyleType=parse(_,listStyleType,_e.listStyleType),this.marginTop=parse(_,marginTop,_e.marginTop),this.marginRight=parse(_,marginRight,_e.marginRight),this.marginBottom=parse(_,marginBottom,_e.marginBottom),this.marginLeft=parse(_,marginLeft,_e.marginLeft),this.opacity=parse(_,opacity,_e.opacity);var it=parse(_,overflow,_e.overflow);this.overflowX=it[0],this.overflowY=it[it.length>1?1:0],this.overflowWrap=parse(_,overflowWrap,_e.overflowWrap),this.paddingTop=parse(_,paddingTop,_e.paddingTop),this.paddingRight=parse(_,paddingRight,_e.paddingRight),this.paddingBottom=parse(_,paddingBottom,_e.paddingBottom),this.paddingLeft=parse(_,paddingLeft,_e.paddingLeft),this.paintOrder=parse(_,paintOrder,_e.paintOrder),this.position=parse(_,position,_e.position),this.textAlign=parse(_,textAlign,_e.textAlign),this.textDecorationColor=parse(_,textDecorationColor,(tt=_e.textDecorationColor)!==null&&tt!==void 0?tt:_e.color),this.textDecorationLine=parse(_,textDecorationLine,(rt=_e.textDecorationLine)!==null&&rt!==void 0?rt:_e.textDecoration),this.textShadow=parse(_,textShadow,_e.textShadow),this.textTransform=parse(_,textTransform,_e.textTransform),this.transform=parse(_,transform$1,_e.transform),this.transformOrigin=parse(_,transformOrigin,_e.transformOrigin),this.visibility=parse(_,visibility,_e.visibility),this.webkitTextStrokeColor=parse(_,webkitTextStrokeColor,_e.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(_,webkitTextStrokeWidth,_e.webkitTextStrokeWidth),this.wordBreak=parse(_,wordBreak,_e.wordBreak),this.zIndex=parse(_,zIndex,_e.zIndex)}return et.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},et.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},et.prototype.isTransformed=function(){return this.transform!==null},et.prototype.isPositioned=function(){return this.position!==0},et.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},et.prototype.isFloating=function(){return this.float!==0},et.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},et}(),CSSParsedPseudoDeclaration=function(){function et(_,_e){this.content=parse(_,content,_e.content),this.quotes=parse(_,quotes,_e.quotes)}return et}(),CSSParsedCounterDeclaration=function(){function et(_,_e){this.counterIncrement=parse(_,counterIncrement,_e.counterIncrement),this.counterReset=parse(_,counterReset,_e.counterReset)}return et}(),parse=function(et,_,_e){var tt=new Tokenizer,rt=_e!==null&&typeof _e<"u"?_e.toString():_.initialValue;tt.write(rt);var it=new Parser(tt.read());switch(_.type){case 2:var st=it.parseComponentValue();return _.parse(et,isIdentToken(st)?st.value:_.initialValue);case 0:return _.parse(et,it.parseComponentValue());case 1:return _.parse(et,it.parseComponentValues());case 4:return it.parseComponentValue();case 3:switch(_.format){case"angle":return angle.parse(et,it.parseComponentValue());case"color":return color$1.parse(et,it.parseComponentValue());case"image":return image.parse(et,it.parseComponentValue());case"length":var At=it.parseComponentValue();return isLength(At)?At:ZERO_LENGTH;case"length-percentage":var ut=it.parseComponentValue();return isLengthPercentage(ut)?ut:ZERO_LENGTH;case"time":return time.parse(et,it.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(et){var _=et.getAttribute(elementDebuggerAttribute);switch(_){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(et,_){var _e=getElementDebugType(et);return _e===1||_===_e},ElementContainer=function(){function et(_,_e){if(this.context=_,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(_e,3))debugger;this.styles=new CSSParsedDeclaration(_,window.getComputedStyle(_e,null)),isHTMLElementNode(_e)&&(this.styles.animationDuration.some(function(tt){return tt>0})&&(_e.style.animationDuration="0s"),this.styles.transform!==null&&(_e.style.transform="none")),this.bounds=parseBounds(this.context,_e),isDebugging(_e,4)&&(this.flags|=16)}return et}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(et){var _=et.length*.75,_e=et.length,tt,rt=0,it,st,At,ut;et[et.length-1]==="="&&(_--,et[et.length-2]==="="&&_--);var ct=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(_):new Array(_),ht=Array.isArray(ct)?ct:new Uint8Array(ct);for(tt=0;tt<_e;tt+=4)it=lookup$1[et.charCodeAt(tt)],st=lookup$1[et.charCodeAt(tt+1)],At=lookup$1[et.charCodeAt(tt+2)],ut=lookup$1[et.charCodeAt(tt+3)],ht[rt++]=it<<2|st>>4,ht[rt++]=(st&15)<<4|At>>2,ht[rt++]=(At&3)<<6|ut&63;return ct},polyUint16Array=function(et){for(var _=et.length,_e=[],tt=0;tt<_;tt+=2)_e.push(et[tt+1]<<8|et[tt]);return _e},polyUint32Array=function(et){for(var _=et.length,_e=[],tt=0;tt<_;tt+=4)_e.push(et[tt+3]<<24|et[tt+2]<<16|et[tt+1]<<8|et[tt]);return _e},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(et,_,_e){return et.slice?et.slice(_,_e):new Uint16Array(Array.prototype.slice.call(et,_,_e))},slice32=function(et,_,_e){return et.slice?et.slice(_,_e):new Uint32Array(Array.prototype.slice.call(et,_,_e))},createTrieFromBase64=function(et,_){var _e=decode(et),tt=Array.isArray(_e)?polyUint32Array(_e):new Uint32Array(_e),rt=Array.isArray(_e)?polyUint16Array(_e):new Uint16Array(_e),it=24,st=slice16(rt,it/2,tt[4]/2),At=tt[5]===2?slice16(rt,(it+tt[4])/2):slice32(tt,Math.ceil((it+tt[4])/4));return new Trie(tt[0],tt[1],tt[2],tt[3],st,At)},Trie=function(){function et(_,_e,tt,rt,it,st){this.initialValue=_,this.errorValue=_e,this.highStart=tt,this.highValueIndex=rt,this.index=it,this.data=st}return et.prototype.get=function(_){var _e;if(_>=0){if(_<55296||_>56319&&_<=65535)return _e=this.index[_>>UTRIE2_SHIFT_2],_e=(_e<<UTRIE2_INDEX_SHIFT)+(_&UTRIE2_DATA_MASK),this.data[_e];if(_<=65535)return _e=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(_-55296>>UTRIE2_SHIFT_2)],_e=(_e<<UTRIE2_INDEX_SHIFT)+(_&UTRIE2_DATA_MASK),this.data[_e];if(_<this.highStart)return _e=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(_>>UTRIE2_SHIFT_1),_e=this.index[_e],_e+=_>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,_e=this.index[_e],_e=(_e<<UTRIE2_INDEX_SHIFT)+(_&UTRIE2_DATA_MASK),this.data[_e];if(_<=1114111)return this.data[this.highValueIndex]}return this.errorValue},et}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(et){for(var _=[],_e=0,tt=et.length;_e<tt;){var rt=et.charCodeAt(_e++);if(rt>=55296&&rt<=56319&&_e<tt){var it=et.charCodeAt(_e++);(it&64512)===56320?_.push(((rt&1023)<<10)+(it&1023)+65536):(_.push(rt),_e--)}else _.push(rt)}return _},fromCodePoint=function(){for(var et=[],_=0;_<arguments.length;_++)et[_]=arguments[_];if(String.fromCodePoint)return String.fromCodePoint.apply(String,et);var _e=et.length;if(!_e)return"";for(var tt=[],rt=-1,it="";++rt<_e;){var st=et[rt];st<=65535?tt.push(st):(st-=65536,tt.push((st>>10)+55296,st%1024+56320)),(rt+1===_e||tt.length>16384)&&(it+=String.fromCharCode.apply(String,tt),tt.length=0)}return it},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="×",BREAK_ALLOWED="÷",codePointToClass=function(et){return UnicodeTrie.get(et)},_graphemeBreakAtIndex=function(et,_,_e){var tt=_e-2,rt=_[tt],it=_[_e-1],st=_[_e];if(it===CR&&st===LF)return BREAK_NOT_ALLOWED;if(it===CR||it===LF||it===Control||st===CR||st===LF||st===Control)return BREAK_ALLOWED;if(it===L&&[L,V,LV,LVT].indexOf(st)!==-1||(it===LV||it===V)&&(st===V||st===T)||(it===LVT||it===T)&&st===T||st===ZWJ||st===Extend||st===SpacingMark||it===Prepend)return BREAK_NOT_ALLOWED;if(it===ZWJ&&st===Extended_Pictographic){for(;rt===Extend;)rt=_[--tt];if(rt===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(it===RI&&st===RI){for(var At=0;rt===RI;)At++,rt=_[--tt];if(At%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(et){var _=toCodePoints(et),_e=_.length,tt=0,rt=0,it=_.map(codePointToClass);return{next:function(){if(tt>=_e)return{done:!0,value:null};for(var st=BREAK_NOT_ALLOWED;tt<_e&&(st=_graphemeBreakAtIndex(_,it,++tt))===BREAK_NOT_ALLOWED;);if(st!==BREAK_NOT_ALLOWED||tt===_e){var At=fromCodePoint.apply(null,_.slice(rt,tt));return rt=tt,{value:At,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(et){for(var _=GraphemeBreaker(et),_e=[],tt;!(tt=_.next()).done;)tt.value&&_e.push(tt.value.slice());return _e},testRangeBounds=function(et){var _=123;if(et.createRange){var _e=et.createRange();if(_e.getBoundingClientRect){var tt=et.createElement("boundtest");tt.style.height=_+"px",tt.style.display="block",et.body.appendChild(tt),_e.selectNode(tt);var rt=_e.getBoundingClientRect(),it=Math.round(rt.height);if(et.body.removeChild(tt),it===_)return!0}}return!1},testIOSLineBreak=function(et){var _=et.createElement("boundtest");_.style.width="50px",_.style.display="block",_.style.fontSize="12px",_.style.letterSpacing="0px",_.style.wordSpacing="0px",et.body.appendChild(_);var _e=et.createRange();_.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var tt=_.firstChild,rt=toCodePoints$1(tt.data).map(function(ut){return fromCodePoint$1(ut)}),it=0,st={},At=rt.every(function(ut,ct){_e.setStart(tt,it),_e.setEnd(tt,it+ut.length);var ht=_e.getBoundingClientRect();it+=ut.length;var ot=ht.x>st.x||ht.y>st.y;return st=ht,ct===0?!0:ot});return et.body.removeChild(_),At},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(et){var _=new Image,_e=et.createElement("canvas"),tt=_e.getContext("2d");if(!tt)return!1;_.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{tt.drawImage(_,0,0),_e.toDataURL()}catch{return!1}return!0},isGreenPixel=function(et){return et[0]===0&&et[1]===255&&et[2]===0&&et[3]===255},testForeignObject=function(et){var _=et.createElement("canvas"),_e=100;_.width=_e,_.height=_e;var tt=_.getContext("2d");if(!tt)return Promise.reject(!1);tt.fillStyle="rgb(0, 255, 0)",tt.fillRect(0,0,_e,_e);var rt=new Image,it=_.toDataURL();rt.src=it;var st=createForeignObjectSVG(_e,_e,0,0,rt);return tt.fillStyle="red",tt.fillRect(0,0,_e,_e),loadSerializedSVG$1(st).then(function(At){tt.drawImage(At,0,0);var ut=tt.getImageData(0,0,_e,_e).data;tt.fillStyle="red",tt.fillRect(0,0,_e,_e);var ct=et.createElement("div");return ct.style.backgroundImage="url("+it+")",ct.style.height=_e+"px",isGreenPixel(ut)?loadSerializedSVG$1(createForeignObjectSVG(_e,_e,0,0,ct)):Promise.reject(!1)}).then(function(At){return tt.drawImage(At,0,0),isGreenPixel(tt.getImageData(0,0,_e,_e).data)}).catch(function(){return!1})},createForeignObjectSVG=function(et,_,_e,tt,rt){var it="http://www.w3.org/2000/svg",st=document.createElementNS(it,"svg"),At=document.createElementNS(it,"foreignObject");return st.setAttributeNS(null,"width",et.toString()),st.setAttributeNS(null,"height",_.toString()),At.setAttributeNS(null,"width","100%"),At.setAttributeNS(null,"height","100%"),At.setAttributeNS(null,"x",_e.toString()),At.setAttributeNS(null,"y",tt.toString()),At.setAttributeNS(null,"externalResourcesRequired","true"),st.appendChild(At),At.appendChild(rt),st},loadSerializedSVG$1=function(et){return new Promise(function(_,_e){var tt=new Image;tt.onload=function(){return _(tt)},tt.onerror=_e,tt.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(et))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var et=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:et}),et},get SUPPORT_WORD_BREAKING(){var et=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:et}),et},get SUPPORT_SVG_DRAWING(){var et=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:et}),et},get SUPPORT_FOREIGNOBJECT_DRAWING(){var et=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:et}),et},get SUPPORT_CORS_IMAGES(){var et=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:et}),et},get SUPPORT_RESPONSE_TYPE(){var et=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:et}),et},get SUPPORT_CORS_XHR(){var et="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:et}),et},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var et=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:et}),et}},TextBounds=function(){function et(_,_e){this.text=_,this.bounds=_e}return et}(),parseTextBounds=function(et,_,_e,tt){var rt=breakText(_,_e),it=[],st=0;return rt.forEach(function(At){if(_e.textDecorationLine.length||At.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var ut=createRange(tt,st,At.length).getClientRects();if(ut.length>1){var ct=segmentGraphemes(At),ht=0;ct.forEach(function(nt){it.push(new TextBounds(nt,Bounds.fromDOMRectList(et,createRange(tt,ht+st,nt.length).getClientRects()))),ht+=nt.length})}else it.push(new TextBounds(At,Bounds.fromDOMRectList(et,ut)))}else{var ot=tt.splitText(At.length);it.push(new TextBounds(At,getWrapperBounds(et,tt))),tt=ot}else FEATURES.SUPPORT_RANGE_BOUNDS||(tt=tt.splitText(At.length));st+=At.length}),it},getWrapperBounds=function(et,_){var _e=_.ownerDocument;if(_e){var tt=_e.createElement("html2canvaswrapper");tt.appendChild(_.cloneNode(!0));var rt=_.parentNode;if(rt){rt.replaceChild(tt,_);var it=parseBounds(et,tt);return tt.firstChild&&rt.replaceChild(tt.firstChild,tt),it}}return Bounds.EMPTY},createRange=function(et,_,_e){var tt=et.ownerDocument;if(!tt)throw new Error("Node has no owner document");var rt=tt.createRange();return rt.setStart(et,_),rt.setEnd(et,_+_e),rt},segmentGraphemes=function(et){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var _=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(_.segment(et)).map(function(_e){return _e.segment})}return splitGraphemes(et)},segmentWords=function(et,_){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var _e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(_e.segment(et)).map(function(tt){return tt.segment})}return breakWords(et,_)},breakText=function(et,_){return _.letterSpacing!==0?segmentGraphemes(et):segmentWords(et,_)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(et,_){for(var _e=LineBreaker(et,{lineBreak:_.lineBreak,wordBreak:_.overflowWrap==="break-word"?"break-word":_.wordBreak}),tt=[],rt,it=function(){if(rt.value){var st=rt.value.slice(),At=toCodePoints$1(st),ut="";At.forEach(function(ct){wordSeparators.indexOf(ct)===-1?ut+=fromCodePoint$1(ct):(ut.length&&tt.push(ut),tt.push(fromCodePoint$1(ct)),ut="")}),ut.length&&tt.push(ut)}};!(rt=_e.next()).done;)it();return tt},TextContainer=function(){function et(_,_e,tt){this.text=transform(_e.data,tt.textTransform),this.textBounds=parseTextBounds(_,this.text,tt,_e)}return et}(),transform=function(et,_){switch(_){case 1:return et.toLowerCase();case 3:return et.replace(CAPITALIZE,capitalize);case 2:return et.toUpperCase();default:return et}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(et,_,_e){return et.length>0?_+_e.toUpperCase():et},ImageElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.src=tt.currentSrc||tt.src,rt.intrinsicWidth=tt.naturalWidth,rt.intrinsicHeight=tt.naturalHeight,rt.context.cache.addImage(rt.src),rt}return _}(ElementContainer),CanvasElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.canvas=tt,rt.intrinsicWidth=tt.width,rt.intrinsicHeight=tt.height,rt}return _}(ElementContainer),SVGElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this,it=new XMLSerializer,st=parseBounds(_e,tt);return tt.setAttribute("width",st.width+"px"),tt.setAttribute("height",st.height+"px"),rt.svg="data:image/svg+xml,"+encodeURIComponent(it.serializeToString(tt)),rt.intrinsicWidth=tt.width.baseVal.value,rt.intrinsicHeight=tt.height.baseVal.value,rt.context.cache.addImage(rt.svg),rt}return _}(ElementContainer),LIElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.value=tt.value,rt}return _}(ElementContainer),OLElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.start=tt.start,rt.reversed=typeof tt.reversed=="boolean"&&tt.reversed===!0,rt}return _}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(et){return et.width>et.height?new Bounds(et.left+(et.width-et.height)/2,et.top,et.height,et.height):et.width<et.height?new Bounds(et.left,et.top+(et.height-et.width)/2,et.width,et.width):et},getInputValue=function(et){var _=et.type===PASSWORD?new Array(et.value.length+1).join("•"):et.value;return _.length===0?et.placeholder||"":_},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;switch(rt.type=tt.type.toLowerCase(),rt.checked=tt.checked,rt.value=getInputValue(tt),(rt.type===CHECKBOX||rt.type===RADIO)&&(rt.styles.backgroundColor=3739148031,rt.styles.borderTopColor=rt.styles.borderRightColor=rt.styles.borderBottomColor=rt.styles.borderLeftColor=2779096575,rt.styles.borderTopWidth=rt.styles.borderRightWidth=rt.styles.borderBottomWidth=rt.styles.borderLeftWidth=1,rt.styles.borderTopStyle=rt.styles.borderRightStyle=rt.styles.borderBottomStyle=rt.styles.borderLeftStyle=1,rt.styles.backgroundClip=[0],rt.styles.backgroundOrigin=[0],rt.bounds=reformatInputBounds(rt.bounds)),rt.type){case CHECKBOX:rt.styles.borderTopRightRadius=rt.styles.borderTopLeftRadius=rt.styles.borderBottomRightRadius=rt.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:rt.styles.borderTopRightRadius=rt.styles.borderTopLeftRadius=rt.styles.borderBottomRightRadius=rt.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return rt}return _}(ElementContainer),SelectElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this,it=tt.options[tt.selectedIndex||0];return rt.value=it&&it.text||"",rt}return _}(ElementContainer),TextareaElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.value=tt.value,rt}return _}(ElementContainer),IFrameElementContainer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;rt.src=tt.src,rt.width=parseInt(tt.width,10)||0,rt.height=parseInt(tt.height,10)||0,rt.backgroundColor=rt.styles.backgroundColor;try{if(tt.contentWindow&&tt.contentWindow.document&&tt.contentWindow.document.documentElement){rt.tree=parseTree(_e,tt.contentWindow.document.documentElement);var it=tt.contentWindow.document.documentElement?parseColor(_e,getComputedStyle(tt.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,st=tt.contentWindow.document.body?parseColor(_e,getComputedStyle(tt.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;rt.backgroundColor=isTransparent(it)?isTransparent(st)?rt.styles.backgroundColor:st:it}}catch{}return rt}return _}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(et,_,_e,tt){for(var rt=_.firstChild,it=void 0;rt;rt=it)if(it=rt.nextSibling,isTextNode(rt)&&rt.data.trim().length>0)_e.textNodes.push(new TextContainer(et,rt,_e.styles));else if(isElementNode(rt))if(isSlotElement(rt)&&rt.assignedNodes)rt.assignedNodes().forEach(function(At){return parseNodeTree(et,At,_e,tt)});else{var st=createContainer(et,rt);st.styles.isVisible()&&(createsRealStackingContext(rt,st,tt)?st.flags|=4:createsStackingContext(st.styles)&&(st.flags|=2),LIST_OWNERS.indexOf(rt.tagName)!==-1&&(st.flags|=8),_e.elements.push(st),rt.slot,rt.shadowRoot?parseNodeTree(et,rt.shadowRoot,st,tt):!isTextareaElement(rt)&&!isSVGElement(rt)&&!isSelectElement(rt)&&parseNodeTree(et,rt,st,tt))}},createContainer=function(et,_){return isImageElement(_)?new ImageElementContainer(et,_):isCanvasElement(_)?new CanvasElementContainer(et,_):isSVGElement(_)?new SVGElementContainer(et,_):isLIElement(_)?new LIElementContainer(et,_):isOLElement(_)?new OLElementContainer(et,_):isInputElement(_)?new InputElementContainer(et,_):isSelectElement(_)?new SelectElementContainer(et,_):isTextareaElement(_)?new TextareaElementContainer(et,_):isIFrameElement(_)?new IFrameElementContainer(et,_):new ElementContainer(et,_)},parseTree=function(et,_){var _e=createContainer(et,_);return _e.flags|=4,parseNodeTree(et,_,_e,_e),_e},createsRealStackingContext=function(et,_,_e){return _.styles.isPositionedWithZIndex()||_.styles.opacity<1||_.styles.isTransformed()||isBodyElement(et)&&_e.styles.isTransparent()},createsStackingContext=function(et){return et.isPositioned()||et.isFloating()},isTextNode=function(et){return et.nodeType===Node.TEXT_NODE},isElementNode=function(et){return et.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(et){return isElementNode(et)&&typeof et.style<"u"&&!isSVGElementNode(et)},isSVGElementNode=function(et){return typeof et.className=="object"},isLIElement=function(et){return et.tagName==="LI"},isOLElement=function(et){return et.tagName==="OL"},isInputElement=function(et){return et.tagName==="INPUT"},isHTMLElement=function(et){return et.tagName==="HTML"},isSVGElement=function(et){return et.tagName==="svg"},isBodyElement=function(et){return et.tagName==="BODY"},isCanvasElement=function(et){return et.tagName==="CANVAS"},isVideoElement=function(et){return et.tagName==="VIDEO"},isImageElement=function(et){return et.tagName==="IMG"},isIFrameElement=function(et){return et.tagName==="IFRAME"},isStyleElement=function(et){return et.tagName==="STYLE"},isScriptElement=function(et){return et.tagName==="SCRIPT"},isTextareaElement=function(et){return et.tagName==="TEXTAREA"},isSelectElement=function(et){return et.tagName==="SELECT"},isSlotElement=function(et){return et.tagName==="SLOT"},isCustomElement=function(et){return et.tagName.indexOf("-")>0},CounterState=function(){function et(){this.counters={}}return et.prototype.getCounterValue=function(_){var _e=this.counters[_];return _e&&_e.length?_e[_e.length-1]:1},et.prototype.getCounterValues=function(_){var _e=this.counters[_];return _e||[]},et.prototype.pop=function(_){var _e=this;_.forEach(function(tt){return _e.counters[tt].pop()})},et.prototype.parse=function(_){var _e=this,tt=_.counterIncrement,rt=_.counterReset,it=!0;tt!==null&&tt.forEach(function(At){var ut=_e.counters[At.counter];ut&&At.increment!==0&&(it=!1,ut.length||ut.push(1),ut[Math.max(0,ut.length-1)]+=At.increment)});var st=[];return it&&rt.forEach(function(At){var ut=_e.counters[At.counter];st.push(At.counter),ut||(ut=_e.counters[At.counter]=[]),ut.push(At.reset)}),st},et}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},createAdditiveCounter=function(et,_,_e,tt,rt,it){return et<_||et>_e?createCounterText(et,rt,it.length>0):tt.integers.reduce(function(st,At,ut){for(;et>=At;)et-=At,st+=tt.values[ut];return st},"")+it},createCounterStyleWithSymbolResolver=function(et,_,_e,tt){var rt="";do _e||et--,rt=tt(et)+rt,et/=_;while(et*_>=_);return rt},createCounterStyleFromRange=function(et,_,_e,tt,rt){var it=_e-_+1;return(et<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(et),it,tt,function(st){return fromCodePoint$1(Math.floor(st%it)+_)})+rt)},createCounterStyleFromSymbols=function(et,_,_e){_e===void 0&&(_e=". ");var tt=_.length;return createCounterStyleWithSymbolResolver(Math.abs(et),tt,!1,function(rt){return _[Math.floor(rt%tt)]})+_e},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(et,_,_e,tt,rt,it){if(et<-9999||et>9999)return createCounterText(et,4,rt.length>0);var st=Math.abs(et),At=rt;if(st===0)return _[0]+At;for(var ut=0;st>0&&ut<=4;ut++){var ct=st%10;ct===0&&contains(it,CJK_ZEROS)&&At!==""?At=_[ct]+At:ct>1||ct===1&&ut===0||ct===1&&ut===1&&contains(it,CJK_TEN_COEFFICIENTS)||ct===1&&ut===1&&contains(it,CJK_TEN_HIGH_COEFFICIENTS)&&et>100||ct===1&&ut>1&&contains(it,CJK_HUNDRED_COEFFICIENTS)?At=_[ct]+(ut>0?_e[ut-1]:"")+At:ct===1&&ut>0&&(At=_e[ut-1]+At),st=Math.floor(st/10)}return(et<0?tt:"")+At},CHINESE_INFORMAL_MULTIPLIERS="十百千萬",CHINESE_FORMAL_MULTIPLIERS="拾佰仟萬",JAPANESE_NEGATIVE="マイナス",KOREAN_NEGATIVE="마이너스",createCounterText=function(et,_,_e){var tt=_e?". ":"",rt=_e?"、":"",it=_e?", ":"",st=_e?" ":"";switch(_){case 0:return"•"+st;case 1:return"◦"+st;case 2:return"◾"+st;case 5:var At=createCounterStyleFromRange(et,48,57,!0,tt);return At.length<4?"0"+At:At;case 4:return createCounterStyleFromSymbols(et,"〇一二三四五六七八九",rt);case 6:return createAdditiveCounter(et,1,3999,ROMAN_UPPER,3,tt).toLowerCase();case 7:return createAdditiveCounter(et,1,3999,ROMAN_UPPER,3,tt);case 8:return createCounterStyleFromRange(et,945,969,!1,tt);case 9:return createCounterStyleFromRange(et,97,122,!1,tt);case 10:return createCounterStyleFromRange(et,65,90,!1,tt);case 11:return createCounterStyleFromRange(et,1632,1641,!0,tt);case 12:case 49:return createAdditiveCounter(et,1,9999,ARMENIAN,3,tt);case 35:return createAdditiveCounter(et,1,9999,ARMENIAN,3,tt).toLowerCase();case 13:return createCounterStyleFromRange(et,2534,2543,!0,tt);case 14:case 30:return createCounterStyleFromRange(et,6112,6121,!0,tt);case 15:return createCounterStyleFromSymbols(et,"子丑寅卯辰巳午未申酉戌亥",rt);case 16:return createCounterStyleFromSymbols(et,"甲乙丙丁戊己庚辛壬癸",rt);case 17:case 48:return createCJKCounter(et,"零一二三四五六七八九",CHINESE_INFORMAL_MULTIPLIERS,"負",rt,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(et,"零壹貳參肆伍陸柒捌玖",CHINESE_FORMAL_MULTIPLIERS,"負",rt,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(et,"零一二三四五六七八九",CHINESE_INFORMAL_MULTIPLIERS,"负",rt,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(et,"零壹贰叁肆伍陆柒捌玖",CHINESE_FORMAL_MULTIPLIERS,"负",rt,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(et,"〇一二三四五六七八九","十百千万",JAPANESE_NEGATIVE,rt,0);case 25:return createCJKCounter(et,"零壱弐参四伍六七八九","拾百千万",JAPANESE_NEGATIVE,rt,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(et,"영일이삼사오육칠팔구","십백천만",KOREAN_NEGATIVE,it,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(et,"零一二三四五六七八九","十百千萬",KOREAN_NEGATIVE,it,0);case 32:return createCJKCounter(et,"零壹貳參四五六七八九","拾百千",KOREAN_NEGATIVE,it,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(et,2406,2415,!0,tt);case 20:return createAdditiveCounter(et,1,19999,GEORGIAN,3,tt);case 21:return createCounterStyleFromRange(et,2790,2799,!0,tt);case 22:return createCounterStyleFromRange(et,2662,2671,!0,tt);case 22:return createAdditiveCounter(et,1,10999,HEBREW,3,tt);case 23:return createCounterStyleFromSymbols(et,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return createCounterStyleFromSymbols(et,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return createCounterStyleFromRange(et,3302,3311,!0,tt);case 28:return createCounterStyleFromSymbols(et,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",rt);case 29:return createCounterStyleFromSymbols(et,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",rt);case 34:return createCounterStyleFromRange(et,3792,3801,!0,tt);case 37:return createCounterStyleFromRange(et,6160,6169,!0,tt);case 38:return createCounterStyleFromRange(et,4160,4169,!0,tt);case 39:return createCounterStyleFromRange(et,2918,2927,!0,tt);case 40:return createCounterStyleFromRange(et,1776,1785,!0,tt);case 43:return createCounterStyleFromRange(et,3046,3055,!0,tt);case 44:return createCounterStyleFromRange(et,3174,3183,!0,tt);case 45:return createCounterStyleFromRange(et,3664,3673,!0,tt);case 46:return createCounterStyleFromRange(et,3872,3881,!0,tt);case 3:default:return createCounterStyleFromRange(et,48,57,!0,tt)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function et(_,_e,tt){if(this.context=_,this.options=tt,this.scrolledElements=[],this.referenceElement=_e,this.counters=new CounterState,this.quoteDepth=0,!_e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(_e.ownerDocument.documentElement,!1)}return et.prototype.toIFrame=function(_,_e){var tt=this,rt=createIFrameContainer(_,_e);if(!rt.contentWindow)return Promise.reject("Unable to find iframe window");var it=_.defaultView.pageXOffset,st=_.defaultView.pageYOffset,At=rt.contentWindow,ut=At.document,ct=iframeLoader(rt).then(function(){return __awaiter(tt,void 0,void 0,function(){var ht,ot;return __generator(this,function(nt){switch(nt.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),At&&(At.scrollTo(_e.left,_e.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(At.scrollY!==_e.top||At.scrollX!==_e.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(At.scrollX-_e.left,At.scrollY-_e.top,0,0))),ht=this.options.onclone,ot=this.clonedReferenceElement,typeof ot>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ut.fonts&&ut.fonts.ready?[4,ut.fonts.ready]:[3,2];case 1:nt.sent(),nt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(ut)]:[3,4];case 3:nt.sent(),nt.label=4;case 4:return typeof ht=="function"?[2,Promise.resolve().then(function(){return ht(ut,ot)}).then(function(){return rt})]:[2,rt]}})})});return ut.open(),ut.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,it,st),ut.replaceChild(ut.adoptNode(this.documentElement),ut.documentElement),ut.close(),ct},et.prototype.createElementClone=function(_){if(isDebugging(_,2))debugger;if(isCanvasElement(_))return this.createCanvasClone(_);if(isVideoElement(_))return this.createVideoClone(_);if(isStyleElement(_))return this.createStyleClone(_);var _e=_.cloneNode(!1);return isImageElement(_e)&&(isImageElement(_)&&_.currentSrc&&_.currentSrc!==_.src&&(_e.src=_.currentSrc,_e.srcset=""),_e.loading==="lazy"&&(_e.loading="eager")),isCustomElement(_e)?this.createCustomElementClone(_e):_e},et.prototype.createCustomElementClone=function(_){var _e=document.createElement("html2canvascustomelement");return copyCSSStyles(_.style,_e),_e},et.prototype.createStyleClone=function(_){try{var _e=_.sheet;if(_e&&_e.cssRules){var tt=[].slice.call(_e.cssRules,0).reduce(function(it,st){return st&&typeof st.cssText=="string"?it+st.cssText:it},""),rt=_.cloneNode(!1);return rt.textContent=tt,rt}}catch(it){if(this.context.logger.error("Unable to access cssRules property",it),it.name!=="SecurityError")throw it}return _.cloneNode(!1)},et.prototype.createCanvasClone=function(_){var _e;if(this.options.inlineImages&&_.ownerDocument){var tt=_.ownerDocument.createElement("img");try{return tt.src=_.toDataURL(),tt}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",_)}}var rt=_.cloneNode(!1);try{rt.width=_.width,rt.height=_.height;var it=_.getContext("2d"),st=rt.getContext("2d");if(st)if(!this.options.allowTaint&&it)st.putImageData(it.getImageData(0,0,_.width,_.height),0,0);else{var At=(_e=_.getContext("webgl2"))!==null&&_e!==void 0?_e:_.getContext("webgl");if(At){var ut=At.getContextAttributes();(ut==null?void 0:ut.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",_)}st.drawImage(_,0,0)}return rt}catch{this.context.logger.info("Unable to clone canvas as it is tainted",_)}return rt},et.prototype.createVideoClone=function(_){var _e=_.ownerDocument.createElement("canvas");_e.width=_.offsetWidth,_e.height=_.offsetHeight;var tt=_e.getContext("2d");try{return tt&&(tt.drawImage(_,0,0,_e.width,_e.height),this.options.allowTaint||tt.getImageData(0,0,_e.width,_e.height)),_e}catch{this.context.logger.info("Unable to clone video as it is tainted",_)}var rt=_.ownerDocument.createElement("canvas");return rt.width=_.offsetWidth,rt.height=_.offsetHeight,rt},et.prototype.appendChildNode=function(_,_e,tt){(!isElementNode(_e)||!isScriptElement(_e)&&!_e.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(_e)))&&(!this.options.copyStyles||!isElementNode(_e)||!isStyleElement(_e))&&_.appendChild(this.cloneNode(_e,tt))},et.prototype.cloneChildNodes=function(_,_e,tt){for(var rt=this,it=_.shadowRoot?_.shadowRoot.firstChild:_.firstChild;it;it=it.nextSibling)if(isElementNode(it)&&isSlotElement(it)&&typeof it.assignedNodes=="function"){var st=it.assignedNodes();st.length&&st.forEach(function(At){return rt.appendChildNode(_e,At,tt)})}else this.appendChildNode(_e,it,tt)},et.prototype.cloneNode=function(_,_e){if(isTextNode(_))return document.createTextNode(_.data);if(!_.ownerDocument)return _.cloneNode(!1);var tt=_.ownerDocument.defaultView;if(tt&&isElementNode(_)&&(isHTMLElementNode(_)||isSVGElementNode(_))){var rt=this.createElementClone(_);rt.style.transitionProperty="none";var it=tt.getComputedStyle(_),st=tt.getComputedStyle(_,":before"),At=tt.getComputedStyle(_,":after");this.referenceElement===_&&isHTMLElementNode(rt)&&(this.clonedReferenceElement=rt),isBodyElement(rt)&&createPseudoHideStyles(rt);var ut=this.counters.parse(new CSSParsedCounterDeclaration(this.context,it)),ct=this.resolvePseudoContent(_,rt,st,PseudoElementType.BEFORE);isCustomElement(_)&&(_e=!0),isVideoElement(_)||this.cloneChildNodes(_,rt,_e),ct&&rt.insertBefore(ct,rt.firstChild);var ht=this.resolvePseudoContent(_,rt,At,PseudoElementType.AFTER);return ht&&rt.appendChild(ht),this.counters.pop(ut),(it&&(this.options.copyStyles||isSVGElementNode(_))&&!isIFrameElement(_)||_e)&&copyCSSStyles(it,rt),(_.scrollTop!==0||_.scrollLeft!==0)&&this.scrolledElements.push([rt,_.scrollLeft,_.scrollTop]),(isTextareaElement(_)||isSelectElement(_))&&(isTextareaElement(rt)||isSelectElement(rt))&&(rt.value=_.value),rt}return _.cloneNode(!1)},et.prototype.resolvePseudoContent=function(_,_e,tt,rt){var it=this;if(tt){var st=tt.content,At=_e.ownerDocument;if(!(!At||!st||st==="none"||st==="-moz-alt-content"||tt.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,tt));var ut=new CSSParsedPseudoDeclaration(this.context,tt),ct=At.createElement("html2canvaspseudoelement");copyCSSStyles(tt,ct),ut.content.forEach(function(ot){if(ot.type===0)ct.appendChild(At.createTextNode(ot.value));else if(ot.type===22){var nt=At.createElement("img");nt.src=ot.value,nt.style.opacity="1",ct.appendChild(nt)}else if(ot.type===18){if(ot.name==="attr"){var at=ot.values.filter(isIdentToken);at.length&&ct.appendChild(At.createTextNode(_.getAttribute(at[0].value)||""))}else if(ot.name==="counter"){var lt=ot.values.filter(nonFunctionArgSeparator),dt=lt[0],ft=lt[1];if(dt&&isIdentToken(dt)){var pt=it.counters.getCounterValue(dt.value),gt=ft&&isIdentToken(ft)?listStyleType.parse(it.context,ft.value):3;ct.appendChild(At.createTextNode(createCounterText(pt,gt,!1)))}}else if(ot.name==="counters"){var mt=ot.values.filter(nonFunctionArgSeparator),dt=mt[0],yt=mt[1],ft=mt[2];if(dt&&isIdentToken(dt)){var vt=it.counters.getCounterValues(dt.value),wt=ft&&isIdentToken(ft)?listStyleType.parse(it.context,ft.value):3,bt=yt&&yt.type===0?yt.value:"",Bt=vt.map(function(Dt){return createCounterText(Dt,wt,!1)}).join(bt);ct.appendChild(At.createTextNode(Bt))}}}else if(ot.type===20)switch(ot.value){case"open-quote":ct.appendChild(At.createTextNode(getQuote(ut.quotes,it.quoteDepth++,!0)));break;case"close-quote":ct.appendChild(At.createTextNode(getQuote(ut.quotes,--it.quoteDepth,!1)));break;default:ct.appendChild(At.createTextNode(ot.value))}}),ct.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var ht=rt===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(_e)?_e.className.baseValue+=ht:_e.className+=ht,ct}}},et.destroy=function(_){return _.parentNode?(_.parentNode.removeChild(_),!0):!1},et}(),PseudoElementType;(function(et){et[et.BEFORE=0]="BEFORE",et[et.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(et,_){var _e=et.createElement("iframe");return _e.className="html2canvas-container",_e.style.visibility="hidden",_e.style.position="fixed",_e.style.left="-10000px",_e.style.top="0px",_e.style.border="0",_e.width=_.width.toString(),_e.height=_.height.toString(),_e.scrolling="no",_e.setAttribute(IGNORE_ATTRIBUTE,"true"),et.body.appendChild(_e),_e},imageReady=function(et){return new Promise(function(_){if(et.complete){_();return}if(!et.src){_();return}et.onload=_,et.onerror=_})},imagesReady=function(et){return Promise.all([].slice.call(et.images,0).map(imageReady))},iframeLoader=function(et){return new Promise(function(_,_e){var tt=et.contentWindow;if(!tt)return _e("No window assigned for iframe");var rt=tt.document;tt.onload=et.onload=function(){tt.onload=et.onload=null;var it=setInterval(function(){rt.body.childNodes.length>0&&rt.readyState==="complete"&&(clearInterval(it),_(et))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(et,_){for(var _e=et.length-1;_e>=0;_e--){var tt=et.item(_e);ignoredStyleProperties.indexOf(tt)===-1&&_.style.setProperty(tt,et.getPropertyValue(tt))}return _},serializeDoctype=function(et){var _="";return et&&(_+="<!DOCTYPE ",et.name&&(_+=et.name),et.internalSubset&&(_+=et.internalSubset),et.publicId&&(_+='"'+et.publicId+'"'),et.systemId&&(_+='"'+et.systemId+'"'),_+=">"),_},restoreOwnerScroll=function(et,_,_e){et&&et.defaultView&&(_!==et.defaultView.pageXOffset||_e!==et.defaultView.pageYOffset)&&et.defaultView.scrollTo(_,_e)},restoreNodeScroll=function(et){var _=et[0],_e=et[1],tt=et[2];_.scrollLeft=_e,_.scrollTop=tt},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(et){createStyles(et,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(et,_){var _e=et.ownerDocument;if(_e){var tt=_e.createElement("style");tt.textContent=_,et.appendChild(tt)}},CacheStorage=function(){function et(){}return et.getOrigin=function(_){var _e=et._link;return _e?(_e.href=_,_e.href=_e.href,_e.protocol+_e.hostname+_e.port):"about:blank"},et.isSameOrigin=function(_){return et.getOrigin(_)===et._origin},et.setContext=function(_){et._link=_.document.createElement("a"),et._origin=et.getOrigin(_.location.href)},et._origin="about:blank",et}(),Cache=function(){function et(_,_e){this.context=_,this._options=_e,this._cache={}}return et.prototype.addImage=function(_){var _e=Promise.resolve();return this.has(_)||(isBlobImage(_)||isRenderable(_))&&(this._cache[_]=this.loadImage(_)).catch(function(){}),_e},et.prototype.match=function(_){return this._cache[_]},et.prototype.loadImage=function(_){return __awaiter(this,void 0,void 0,function(){var _e,tt,rt,it,st=this;return __generator(this,function(At){switch(At.label){case 0:return _e=CacheStorage.isSameOrigin(_),tt=!isInlineImage(_)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!_e,rt=!isInlineImage(_)&&!_e&&!isBlobImage(_)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!tt,!_e&&this._options.allowTaint===!1&&!isInlineImage(_)&&!isBlobImage(_)&&!rt&&!tt?[2]:(it=_,rt?[4,this.proxy(it)]:[3,2]);case 1:it=At.sent(),At.label=2;case 2:return this.context.logger.debug("Added image "+_.substring(0,256)),[4,new Promise(function(ut,ct){var ht=new Image;ht.onload=function(){return ut(ht)},ht.onerror=ct,(isInlineBase64Image(it)||tt)&&(ht.crossOrigin="anonymous"),ht.src=it,ht.complete===!0&&setTimeout(function(){return ut(ht)},500),st._options.imageTimeout>0&&setTimeout(function(){return ct("Timed out ("+st._options.imageTimeout+"ms) loading image")},st._options.imageTimeout)})];case 3:return[2,At.sent()]}})})},et.prototype.has=function(_){return typeof this._cache[_]<"u"},et.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},et.prototype.proxy=function(_){var _e=this,tt=this._options.proxy;if(!tt)throw new Error("No proxy defined");var rt=_.substring(0,256);return new Promise(function(it,st){var At=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",ut=new XMLHttpRequest;ut.onload=function(){if(ut.status===200)if(At==="text")it(ut.response);else{var ot=new FileReader;ot.addEventListener("load",function(){return it(ot.result)},!1),ot.addEventListener("error",function(nt){return st(nt)},!1),ot.readAsDataURL(ut.response)}else st("Failed to proxy resource "+rt+" with status code "+ut.status)},ut.onerror=st;var ct=tt.indexOf("?")>-1?"&":"?";if(ut.open("GET",""+tt+ct+"url="+encodeURIComponent(_)+"&responseType="+At),At!=="text"&&ut instanceof XMLHttpRequest&&(ut.responseType=At),_e._options.imageTimeout){var ht=_e._options.imageTimeout;ut.timeout=ht,ut.ontimeout=function(){return st("Timed out ("+ht+"ms) proxying "+rt)}}ut.send()})},et}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(et){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(et)},isInlineImage=function(et){return INLINE_IMG.test(et)},isInlineBase64Image=function(et){return INLINE_BASE64.test(et)},isBlobImage=function(et){return et.substr(0,4)==="blob"},isSVG=function(et){return et.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(et)},Vector=function(){function et(_,_e){this.type=0,this.x=_,this.y=_e}return et.prototype.add=function(_,_e){return new et(this.x+_,this.y+_e)},et}(),lerp=function(et,_,_e){return new Vector(et.x+(_.x-et.x)*_e,et.y+(_.y-et.y)*_e)},BezierCurve=function(){function et(_,_e,tt,rt){this.type=1,this.start=_,this.startControl=_e,this.endControl=tt,this.end=rt}return et.prototype.subdivide=function(_,_e){var tt=lerp(this.start,this.startControl,_),rt=lerp(this.startControl,this.endControl,_),it=lerp(this.endControl,this.end,_),st=lerp(tt,rt,_),At=lerp(rt,it,_),ut=lerp(st,At,_);return _e?new et(this.start,tt,st,ut):new et(ut,At,it,this.end)},et.prototype.add=function(_,_e){return new et(this.start.add(_,_e),this.startControl.add(_,_e),this.endControl.add(_,_e),this.end.add(_,_e))},et.prototype.reverse=function(){return new et(this.end,this.endControl,this.startControl,this.start)},et}(),isBezierCurve=function(et){return et.type===1},BoundCurves=function(){function et(_){var _e=_.styles,tt=_.bounds,rt=getAbsoluteValueForTuple(_e.borderTopLeftRadius,tt.width,tt.height),it=rt[0],st=rt[1],At=getAbsoluteValueForTuple(_e.borderTopRightRadius,tt.width,tt.height),ut=At[0],ct=At[1],ht=getAbsoluteValueForTuple(_e.borderBottomRightRadius,tt.width,tt.height),ot=ht[0],nt=ht[1],at=getAbsoluteValueForTuple(_e.borderBottomLeftRadius,tt.width,tt.height),lt=at[0],dt=at[1],ft=[];ft.push((it+ut)/tt.width),ft.push((lt+ot)/tt.width),ft.push((st+dt)/tt.height),ft.push((ct+nt)/tt.height);var pt=Math.max.apply(Math,ft);pt>1&&(it/=pt,st/=pt,ut/=pt,ct/=pt,ot/=pt,nt/=pt,lt/=pt,dt/=pt);var gt=tt.width-ut,mt=tt.height-nt,yt=tt.width-ot,vt=tt.height-dt,wt=_e.borderTopWidth,bt=_e.borderRightWidth,Bt=_e.borderBottomWidth,Tt=_e.borderLeftWidth,It=getAbsoluteValue(_e.paddingTop,_.bounds.width),Dt=getAbsoluteValue(_e.paddingRight,_.bounds.width),Ut=getAbsoluteValue(_e.paddingBottom,_.bounds.width),_t=getAbsoluteValue(_e.paddingLeft,_.bounds.width);this.topLeftBorderDoubleOuterBox=it>0||st>0?getCurvePoints(tt.left+Tt/3,tt.top+wt/3,it-Tt/3,st-wt/3,CORNER.TOP_LEFT):new Vector(tt.left+Tt/3,tt.top+wt/3),this.topRightBorderDoubleOuterBox=it>0||st>0?getCurvePoints(tt.left+gt,tt.top+wt/3,ut-bt/3,ct-wt/3,CORNER.TOP_RIGHT):new Vector(tt.left+tt.width-bt/3,tt.top+wt/3),this.bottomRightBorderDoubleOuterBox=ot>0||nt>0?getCurvePoints(tt.left+yt,tt.top+mt,ot-bt/3,nt-Bt/3,CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width-bt/3,tt.top+tt.height-Bt/3),this.bottomLeftBorderDoubleOuterBox=lt>0||dt>0?getCurvePoints(tt.left+Tt/3,tt.top+vt,lt-Tt/3,dt-Bt/3,CORNER.BOTTOM_LEFT):new Vector(tt.left+Tt/3,tt.top+tt.height-Bt/3),this.topLeftBorderDoubleInnerBox=it>0||st>0?getCurvePoints(tt.left+Tt*2/3,tt.top+wt*2/3,it-Tt*2/3,st-wt*2/3,CORNER.TOP_LEFT):new Vector(tt.left+Tt*2/3,tt.top+wt*2/3),this.topRightBorderDoubleInnerBox=it>0||st>0?getCurvePoints(tt.left+gt,tt.top+wt*2/3,ut-bt*2/3,ct-wt*2/3,CORNER.TOP_RIGHT):new Vector(tt.left+tt.width-bt*2/3,tt.top+wt*2/3),this.bottomRightBorderDoubleInnerBox=ot>0||nt>0?getCurvePoints(tt.left+yt,tt.top+mt,ot-bt*2/3,nt-Bt*2/3,CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width-bt*2/3,tt.top+tt.height-Bt*2/3),this.bottomLeftBorderDoubleInnerBox=lt>0||dt>0?getCurvePoints(tt.left+Tt*2/3,tt.top+vt,lt-Tt*2/3,dt-Bt*2/3,CORNER.BOTTOM_LEFT):new Vector(tt.left+Tt*2/3,tt.top+tt.height-Bt*2/3),this.topLeftBorderStroke=it>0||st>0?getCurvePoints(tt.left+Tt/2,tt.top+wt/2,it-Tt/2,st-wt/2,CORNER.TOP_LEFT):new Vector(tt.left+Tt/2,tt.top+wt/2),this.topRightBorderStroke=it>0||st>0?getCurvePoints(tt.left+gt,tt.top+wt/2,ut-bt/2,ct-wt/2,CORNER.TOP_RIGHT):new Vector(tt.left+tt.width-bt/2,tt.top+wt/2),this.bottomRightBorderStroke=ot>0||nt>0?getCurvePoints(tt.left+yt,tt.top+mt,ot-bt/2,nt-Bt/2,CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width-bt/2,tt.top+tt.height-Bt/2),this.bottomLeftBorderStroke=lt>0||dt>0?getCurvePoints(tt.left+Tt/2,tt.top+vt,lt-Tt/2,dt-Bt/2,CORNER.BOTTOM_LEFT):new Vector(tt.left+Tt/2,tt.top+tt.height-Bt/2),this.topLeftBorderBox=it>0||st>0?getCurvePoints(tt.left,tt.top,it,st,CORNER.TOP_LEFT):new Vector(tt.left,tt.top),this.topRightBorderBox=ut>0||ct>0?getCurvePoints(tt.left+gt,tt.top,ut,ct,CORNER.TOP_RIGHT):new Vector(tt.left+tt.width,tt.top),this.bottomRightBorderBox=ot>0||nt>0?getCurvePoints(tt.left+yt,tt.top+mt,ot,nt,CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width,tt.top+tt.height),this.bottomLeftBorderBox=lt>0||dt>0?getCurvePoints(tt.left,tt.top+vt,lt,dt,CORNER.BOTTOM_LEFT):new Vector(tt.left,tt.top+tt.height),this.topLeftPaddingBox=it>0||st>0?getCurvePoints(tt.left+Tt,tt.top+wt,Math.max(0,it-Tt),Math.max(0,st-wt),CORNER.TOP_LEFT):new Vector(tt.left+Tt,tt.top+wt),this.topRightPaddingBox=ut>0||ct>0?getCurvePoints(tt.left+Math.min(gt,tt.width-bt),tt.top+wt,gt>tt.width+bt?0:Math.max(0,ut-bt),Math.max(0,ct-wt),CORNER.TOP_RIGHT):new Vector(tt.left+tt.width-bt,tt.top+wt),this.bottomRightPaddingBox=ot>0||nt>0?getCurvePoints(tt.left+Math.min(yt,tt.width-Tt),tt.top+Math.min(mt,tt.height-Bt),Math.max(0,ot-bt),Math.max(0,nt-Bt),CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width-bt,tt.top+tt.height-Bt),this.bottomLeftPaddingBox=lt>0||dt>0?getCurvePoints(tt.left+Tt,tt.top+Math.min(vt,tt.height-Bt),Math.max(0,lt-Tt),Math.max(0,dt-Bt),CORNER.BOTTOM_LEFT):new Vector(tt.left+Tt,tt.top+tt.height-Bt),this.topLeftContentBox=it>0||st>0?getCurvePoints(tt.left+Tt+_t,tt.top+wt+It,Math.max(0,it-(Tt+_t)),Math.max(0,st-(wt+It)),CORNER.TOP_LEFT):new Vector(tt.left+Tt+_t,tt.top+wt+It),this.topRightContentBox=ut>0||ct>0?getCurvePoints(tt.left+Math.min(gt,tt.width+Tt+_t),tt.top+wt+It,gt>tt.width+Tt+_t?0:ut-Tt+_t,ct-(wt+It),CORNER.TOP_RIGHT):new Vector(tt.left+tt.width-(bt+Dt),tt.top+wt+It),this.bottomRightContentBox=ot>0||nt>0?getCurvePoints(tt.left+Math.min(yt,tt.width-(Tt+_t)),tt.top+Math.min(mt,tt.height+wt+It),Math.max(0,ot-(bt+Dt)),nt-(Bt+Ut),CORNER.BOTTOM_RIGHT):new Vector(tt.left+tt.width-(bt+Dt),tt.top+tt.height-(Bt+Ut)),this.bottomLeftContentBox=lt>0||dt>0?getCurvePoints(tt.left+Tt+_t,tt.top+vt,Math.max(0,lt-(Tt+_t)),dt-(Bt+Ut),CORNER.BOTTOM_LEFT):new Vector(tt.left+Tt+_t,tt.top+tt.height-(Bt+Ut))}return et}(),CORNER;(function(et){et[et.TOP_LEFT=0]="TOP_LEFT",et[et.TOP_RIGHT=1]="TOP_RIGHT",et[et.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",et[et.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(et,_,_e,tt,rt){var it=4*((Math.sqrt(2)-1)/3),st=_e*it,At=tt*it,ut=et+_e,ct=_+tt;switch(rt){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(et,ct),new Vector(et,ct-At),new Vector(ut-st,_),new Vector(ut,_));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(et,_),new Vector(et+st,_),new Vector(ut,ct-At),new Vector(ut,ct));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(ut,_),new Vector(ut,_+At),new Vector(et+st,ct),new Vector(et,ct));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(ut,ct),new Vector(ut-st,ct),new Vector(et,_+At),new Vector(et,_))}},calculateBorderBoxPath=function(et){return[et.topLeftBorderBox,et.topRightBorderBox,et.bottomRightBorderBox,et.bottomLeftBorderBox]},calculateContentBoxPath=function(et){return[et.topLeftContentBox,et.topRightContentBox,et.bottomRightContentBox,et.bottomLeftContentBox]},calculatePaddingBoxPath=function(et){return[et.topLeftPaddingBox,et.topRightPaddingBox,et.bottomRightPaddingBox,et.bottomLeftPaddingBox]},TransformEffect=function(){function et(_,_e,tt){this.offsetX=_,this.offsetY=_e,this.matrix=tt,this.type=0,this.target=6}return et}(),ClipEffect=function(){function et(_,_e){this.path=_,this.target=_e,this.type=1}return et}(),OpacityEffect=function(){function et(_){this.opacity=_,this.type=2,this.target=6}return et}(),isTransformEffect=function(et){return et.type===0},isClipEffect=function(et){return et.type===1},isOpacityEffect=function(et){return et.type===2},equalPath=function(et,_){return et.length===_.length?et.some(function(_e,tt){return _e===_[tt]}):!1},transformPath=function(et,_,_e,tt,rt){return et.map(function(it,st){switch(st){case 0:return it.add(_,_e);case 1:return it.add(_+tt,_e);case 2:return it.add(_+tt,_e+rt);case 3:return it.add(_,_e+rt)}return it})},StackingContext=function(){function et(_){this.element=_,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return et}(),ElementPaint=function(){function et(_,_e){if(this.container=_,this.parent=_e,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var tt=this.container.bounds.left+this.container.styles.transformOrigin[0].number,rt=this.container.bounds.top+this.container.styles.transformOrigin[1].number,it=this.container.styles.transform;this.effects.push(new TransformEffect(tt,rt,it))}if(this.container.styles.overflowX!==0){var st=calculateBorderBoxPath(this.curves),At=calculatePaddingBoxPath(this.curves);equalPath(st,At)?this.effects.push(new ClipEffect(st,6)):(this.effects.push(new ClipEffect(st,2)),this.effects.push(new ClipEffect(At,4)))}}return et.prototype.getEffects=function(_){for(var _e=[2,3].indexOf(this.container.styles.position)===-1,tt=this.parent,rt=this.effects.slice(0);tt;){var it=tt.effects.filter(function(ut){return!isClipEffect(ut)});if(_e||tt.container.styles.position!==0||!tt.parent){if(rt.unshift.apply(rt,it),_e=[2,3].indexOf(tt.container.styles.position)===-1,tt.container.styles.overflowX!==0){var st=calculateBorderBoxPath(tt.curves),At=calculatePaddingBoxPath(tt.curves);equalPath(st,At)||rt.unshift(new ClipEffect(At,6))}}else rt.unshift.apply(rt,it);tt=tt.parent}return rt.filter(function(ut){return contains(ut.target,_)})},et}(),parseStackTree=function(et,_,_e,tt){et.container.elements.forEach(function(rt){var it=contains(rt.flags,4),st=contains(rt.flags,2),At=new ElementPaint(rt,et);contains(rt.styles.display,2048)&&tt.push(At);var ut=contains(rt.flags,8)?[]:tt;if(it||st){var ct=it||rt.styles.isPositioned()?_e:_,ht=new StackingContext(At);if(rt.styles.isPositioned()||rt.styles.opacity<1||rt.styles.isTransformed()){var ot=rt.styles.zIndex.order;if(ot<0){var nt=0;ct.negativeZIndex.some(function(lt,dt){return ot>lt.element.container.styles.zIndex.order?(nt=dt,!1):nt>0}),ct.negativeZIndex.splice(nt,0,ht)}else if(ot>0){var at=0;ct.positiveZIndex.some(function(lt,dt){return ot>=lt.element.container.styles.zIndex.order?(at=dt+1,!1):at>0}),ct.positiveZIndex.splice(at,0,ht)}else ct.zeroOrAutoZIndexOrTransformedOrOpacity.push(ht)}else rt.styles.isFloating()?ct.nonPositionedFloats.push(ht):ct.nonPositionedInlineLevel.push(ht);parseStackTree(At,ht,it?ht:_e,ut)}else rt.styles.isInlineLevel()?_.inlineLevel.push(At):_.nonInlineLevel.push(At),parseStackTree(At,_,_e,ut);contains(rt.flags,8)&&processListItems(rt,ut)})},processListItems=function(et,_){for(var _e=et instanceof OLElementContainer?et.start:1,tt=et instanceof OLElementContainer?et.reversed:!1,rt=0;rt<_.length;rt++){var it=_[rt];it.container instanceof LIElementContainer&&typeof it.container.value=="number"&&it.container.value!==0&&(_e=it.container.value),it.listValue=createCounterText(_e,it.container.styles.listStyleType,!0),_e+=tt?-1:1}},parseStackingContexts=function(et){var _=new ElementPaint(et,null),_e=new StackingContext(_),tt=[];return parseStackTree(_,_e,_e,tt),processListItems(_.container,tt),_e},parsePathForBorder=function(et,_){switch(_){case 0:return createPathFromCurves(et.topLeftBorderBox,et.topLeftPaddingBox,et.topRightBorderBox,et.topRightPaddingBox);case 1:return createPathFromCurves(et.topRightBorderBox,et.topRightPaddingBox,et.bottomRightBorderBox,et.bottomRightPaddingBox);case 2:return createPathFromCurves(et.bottomRightBorderBox,et.bottomRightPaddingBox,et.bottomLeftBorderBox,et.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(et.bottomLeftBorderBox,et.bottomLeftPaddingBox,et.topLeftBorderBox,et.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(et,_){switch(_){case 0:return createPathFromCurves(et.topLeftBorderBox,et.topLeftBorderDoubleOuterBox,et.topRightBorderBox,et.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(et.topRightBorderBox,et.topRightBorderDoubleOuterBox,et.bottomRightBorderBox,et.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(et.bottomRightBorderBox,et.bottomRightBorderDoubleOuterBox,et.bottomLeftBorderBox,et.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(et.bottomLeftBorderBox,et.bottomLeftBorderDoubleOuterBox,et.topLeftBorderBox,et.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(et,_){switch(_){case 0:return createPathFromCurves(et.topLeftBorderDoubleInnerBox,et.topLeftPaddingBox,et.topRightBorderDoubleInnerBox,et.topRightPaddingBox);case 1:return createPathFromCurves(et.topRightBorderDoubleInnerBox,et.topRightPaddingBox,et.bottomRightBorderDoubleInnerBox,et.bottomRightPaddingBox);case 2:return createPathFromCurves(et.bottomRightBorderDoubleInnerBox,et.bottomRightPaddingBox,et.bottomLeftBorderDoubleInnerBox,et.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(et.bottomLeftBorderDoubleInnerBox,et.bottomLeftPaddingBox,et.topLeftBorderDoubleInnerBox,et.topLeftPaddingBox)}},parsePathForBorderStroke=function(et,_){switch(_){case 0:return createStrokePathFromCurves(et.topLeftBorderStroke,et.topRightBorderStroke);case 1:return createStrokePathFromCurves(et.topRightBorderStroke,et.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(et.bottomRightBorderStroke,et.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(et.bottomLeftBorderStroke,et.topLeftBorderStroke)}},createStrokePathFromCurves=function(et,_){var _e=[];return isBezierCurve(et)?_e.push(et.subdivide(.5,!1)):_e.push(et),isBezierCurve(_)?_e.push(_.subdivide(.5,!0)):_e.push(_),_e},createPathFromCurves=function(et,_,_e,tt){var rt=[];return isBezierCurve(et)?rt.push(et.subdivide(.5,!1)):rt.push(et),isBezierCurve(_e)?rt.push(_e.subdivide(.5,!0)):rt.push(_e),isBezierCurve(tt)?rt.push(tt.subdivide(.5,!0).reverse()):rt.push(tt),isBezierCurve(_)?rt.push(_.subdivide(.5,!1).reverse()):rt.push(_),rt},paddingBox=function(et){var _=et.bounds,_e=et.styles;return _.add(_e.borderLeftWidth,_e.borderTopWidth,-(_e.borderRightWidth+_e.borderLeftWidth),-(_e.borderTopWidth+_e.borderBottomWidth))},contentBox=function(et){var _=et.styles,_e=et.bounds,tt=getAbsoluteValue(_.paddingLeft,_e.width),rt=getAbsoluteValue(_.paddingRight,_e.width),it=getAbsoluteValue(_.paddingTop,_e.width),st=getAbsoluteValue(_.paddingBottom,_e.width);return _e.add(tt+_.borderLeftWidth,it+_.borderTopWidth,-(_.borderRightWidth+_.borderLeftWidth+tt+rt),-(_.borderTopWidth+_.borderBottomWidth+it+st))},calculateBackgroundPositioningArea=function(et,_){return et===0?_.bounds:et===2?contentBox(_):paddingBox(_)},calculateBackgroundPaintingArea=function(et,_){return et===0?_.bounds:et===2?contentBox(_):paddingBox(_)},calculateBackgroundRendering=function(et,_,_e){var tt=calculateBackgroundPositioningArea(getBackgroundValueForIndex(et.styles.backgroundOrigin,_),et),rt=calculateBackgroundPaintingArea(getBackgroundValueForIndex(et.styles.backgroundClip,_),et),it=calculateBackgroundSize(getBackgroundValueForIndex(et.styles.backgroundSize,_),_e,tt),st=it[0],At=it[1],ut=getAbsoluteValueForTuple(getBackgroundValueForIndex(et.styles.backgroundPosition,_),tt.width-st,tt.height-At),ct=calculateBackgroundRepeatPath(getBackgroundValueForIndex(et.styles.backgroundRepeat,_),ut,it,tt,rt),ht=Math.round(tt.left+ut[0]),ot=Math.round(tt.top+ut[1]);return[ct,ht,ot,st,At]},isAuto=function(et){return isIdentToken(et)&&et.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(et){return typeof et=="number"},calculateBackgroundSize=function(et,_,_e){var tt=_[0],rt=_[1],it=_[2],st=et[0],At=et[1];if(!st)return[0,0];if(isLengthPercentage(st)&&At&&isLengthPercentage(At))return[getAbsoluteValue(st,_e.width),getAbsoluteValue(At,_e.height)];var ut=hasIntrinsicValue(it);if(isIdentToken(st)&&(st.value===BACKGROUND_SIZE.CONTAIN||st.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(it)){var ct=_e.width/_e.height;return ct<it!=(st.value===BACKGROUND_SIZE.COVER)?[_e.width,_e.width/it]:[_e.height*it,_e.height]}return[_e.width,_e.height]}var ht=hasIntrinsicValue(tt),ot=hasIntrinsicValue(rt),nt=ht||ot;if(isAuto(st)&&(!At||isAuto(At))){if(ht&&ot)return[tt,rt];if(!ut&&!nt)return[_e.width,_e.height];if(nt&&ut){var at=ht?tt:rt*it,lt=ot?rt:tt/it;return[at,lt]}var dt=ht?tt:_e.width,ft=ot?rt:_e.height;return[dt,ft]}if(ut){var pt=0,gt=0;return isLengthPercentage(st)?pt=getAbsoluteValue(st,_e.width):isLengthPercentage(At)&&(gt=getAbsoluteValue(At,_e.height)),isAuto(st)?pt=gt*it:(!At||isAuto(At))&&(gt=pt/it),[pt,gt]}var mt=null,yt=null;if(isLengthPercentage(st)?mt=getAbsoluteValue(st,_e.width):At&&isLengthPercentage(At)&&(yt=getAbsoluteValue(At,_e.height)),mt!==null&&(!At||isAuto(At))&&(yt=ht&&ot?mt/tt*rt:_e.height),yt!==null&&isAuto(st)&&(mt=ht&&ot?yt/rt*tt:_e.width),mt!==null&&yt!==null)return[mt,yt];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(et,_){var _e=et[_];return typeof _e>"u"?et[0]:_e},calculateBackgroundRepeatPath=function(et,_,_e,tt,rt){var it=_[0],st=_[1],At=_e[0],ut=_e[1];switch(et){case 2:return[new Vector(Math.round(tt.left),Math.round(tt.top+st)),new Vector(Math.round(tt.left+tt.width),Math.round(tt.top+st)),new Vector(Math.round(tt.left+tt.width),Math.round(ut+tt.top+st)),new Vector(Math.round(tt.left),Math.round(ut+tt.top+st))];case 3:return[new Vector(Math.round(tt.left+it),Math.round(tt.top)),new Vector(Math.round(tt.left+it+At),Math.round(tt.top)),new Vector(Math.round(tt.left+it+At),Math.round(tt.height+tt.top)),new Vector(Math.round(tt.left+it),Math.round(tt.height+tt.top))];case 1:return[new Vector(Math.round(tt.left+it),Math.round(tt.top+st)),new Vector(Math.round(tt.left+it+At),Math.round(tt.top+st)),new Vector(Math.round(tt.left+it+At),Math.round(tt.top+st+ut)),new Vector(Math.round(tt.left+it),Math.round(tt.top+st+ut))];default:return[new Vector(Math.round(rt.left),Math.round(rt.top)),new Vector(Math.round(rt.left+rt.width),Math.round(rt.top)),new Vector(Math.round(rt.left+rt.width),Math.round(rt.height+rt.top)),new Vector(Math.round(rt.left),Math.round(rt.height+rt.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function et(_){this._data={},this._document=_}return et.prototype.parseMetrics=function(_,_e){var tt=this._document.createElement("div"),rt=this._document.createElement("img"),it=this._document.createElement("span"),st=this._document.body;tt.style.visibility="hidden",tt.style.fontFamily=_,tt.style.fontSize=_e,tt.style.margin="0",tt.style.padding="0",tt.style.whiteSpace="nowrap",st.appendChild(tt),rt.src=SMALL_IMAGE,rt.width=1,rt.height=1,rt.style.margin="0",rt.style.padding="0",rt.style.verticalAlign="baseline",it.style.fontFamily=_,it.style.fontSize=_e,it.style.margin="0",it.style.padding="0",it.appendChild(this._document.createTextNode(SAMPLE_TEXT)),tt.appendChild(it),tt.appendChild(rt);var At=rt.offsetTop-it.offsetTop+2;tt.removeChild(it),tt.appendChild(this._document.createTextNode(SAMPLE_TEXT)),tt.style.lineHeight="normal",rt.style.verticalAlign="super";var ut=rt.offsetTop-tt.offsetTop+2;return st.removeChild(tt),{baseline:At,middle:ut}},et.prototype.getMetrics=function(_,_e){var tt=_+" "+_e;return typeof this._data[tt]>"u"&&(this._data[tt]=this.parseMetrics(_,_e)),this._data[tt]},et}(),Renderer=function(){function et(_,_e){this.context=_,this.options=_e}return et}(),MASK_OFFSET=1e4,CanvasRenderer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt._activeEffects=[],rt.canvas=tt.canvas?tt.canvas:document.createElement("canvas"),rt.ctx=rt.canvas.getContext("2d"),tt.canvas||(rt.canvas.width=Math.floor(tt.width*tt.scale),rt.canvas.height=Math.floor(tt.height*tt.scale),rt.canvas.style.width=tt.width+"px",rt.canvas.style.height=tt.height+"px"),rt.fontMetrics=new FontMetrics(document),rt.ctx.scale(rt.options.scale,rt.options.scale),rt.ctx.translate(-tt.x,-tt.y),rt.ctx.textBaseline="bottom",rt._activeEffects=[],rt.context.logger.debug("Canvas renderer initialized ("+tt.width+"x"+tt.height+") with scale "+tt.scale),rt}return _.prototype.applyEffects=function(_e){for(var tt=this;this._activeEffects.length;)this.popEffect();_e.forEach(function(rt){return tt.applyEffect(rt)})},_.prototype.applyEffect=function(_e){this.ctx.save(),isOpacityEffect(_e)&&(this.ctx.globalAlpha=_e.opacity),isTransformEffect(_e)&&(this.ctx.translate(_e.offsetX,_e.offsetY),this.ctx.transform(_e.matrix[0],_e.matrix[1],_e.matrix[2],_e.matrix[3],_e.matrix[4],_e.matrix[5]),this.ctx.translate(-_e.offsetX,-_e.offsetY)),isClipEffect(_e)&&(this.path(_e.path),this.ctx.clip()),this._activeEffects.push(_e)},_.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},_.prototype.renderStack=function(_e){return __awaiter(this,void 0,void 0,function(){var tt;return __generator(this,function(rt){switch(rt.label){case 0:return tt=_e.element.container.styles,tt.isVisible()?[4,this.renderStackContent(_e)]:[3,2];case 1:rt.sent(),rt.label=2;case 2:return[2]}})})},_.prototype.renderNode=function(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(tt){switch(tt.label){case 0:if(contains(_e.container.flags,16))debugger;return _e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(_e)]:[3,3];case 1:return tt.sent(),[4,this.renderNodeContent(_e)];case 2:tt.sent(),tt.label=3;case 3:return[2]}})})},_.prototype.renderTextWithLetterSpacing=function(_e,tt,rt){var it=this;if(tt===0)this.ctx.fillText(_e.text,_e.bounds.left,_e.bounds.top+rt);else{var st=segmentGraphemes(_e.text);st.reduce(function(At,ut){return it.ctx.fillText(ut,At,_e.bounds.top+rt),At+it.ctx.measureText(ut).width},_e.bounds.left)}},_.prototype.createFontStyle=function(_e){var tt=_e.fontVariant.filter(function(st){return st==="normal"||st==="small-caps"}).join(""),rt=fixIOSSystemFonts(_e.fontFamily).join(", "),it=isDimensionToken(_e.fontSize)?""+_e.fontSize.number+_e.fontSize.unit:_e.fontSize.number+"px";return[[_e.fontStyle,tt,_e.fontWeight,it,rt].join(" "),rt,it]},_.prototype.renderTextNode=function(_e,tt){return __awaiter(this,void 0,void 0,function(){var rt,it,st,At,ut,ct,ht,ot,nt=this;return __generator(this,function(at){return rt=this.createFontStyle(tt),it=rt[0],st=rt[1],At=rt[2],this.ctx.font=it,this.ctx.direction=tt.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ut=this.fontMetrics.getMetrics(st,At),ct=ut.baseline,ht=ut.middle,ot=tt.paintOrder,_e.textBounds.forEach(function(lt){ot.forEach(function(dt){switch(dt){case 0:nt.ctx.fillStyle=asString(tt.color),nt.renderTextWithLetterSpacing(lt,tt.letterSpacing,ct);var ft=tt.textShadow;ft.length&&lt.text.trim().length&&(ft.slice(0).reverse().forEach(function(pt){nt.ctx.shadowColor=asString(pt.color),nt.ctx.shadowOffsetX=pt.offsetX.number*nt.options.scale,nt.ctx.shadowOffsetY=pt.offsetY.number*nt.options.scale,nt.ctx.shadowBlur=pt.blur.number,nt.renderTextWithLetterSpacing(lt,tt.letterSpacing,ct)}),nt.ctx.shadowColor="",nt.ctx.shadowOffsetX=0,nt.ctx.shadowOffsetY=0,nt.ctx.shadowBlur=0),tt.textDecorationLine.length&&(nt.ctx.fillStyle=asString(tt.textDecorationColor||tt.color),tt.textDecorationLine.forEach(function(pt){switch(pt){case 1:nt.ctx.fillRect(lt.bounds.left,Math.round(lt.bounds.top+ct),lt.bounds.width,1);break;case 2:nt.ctx.fillRect(lt.bounds.left,Math.round(lt.bounds.top),lt.bounds.width,1);break;case 3:nt.ctx.fillRect(lt.bounds.left,Math.ceil(lt.bounds.top+ht),lt.bounds.width,1);break}}));break;case 1:tt.webkitTextStrokeWidth&&lt.text.trim().length&&(nt.ctx.strokeStyle=asString(tt.webkitTextStrokeColor),nt.ctx.lineWidth=tt.webkitTextStrokeWidth,nt.ctx.lineJoin=window.chrome?"miter":"round",nt.ctx.strokeText(lt.text,lt.bounds.left,lt.bounds.top+ct)),nt.ctx.strokeStyle="",nt.ctx.lineWidth=0,nt.ctx.lineJoin="miter";break}})}),[2]})})},_.prototype.renderReplacedElement=function(_e,tt,rt){if(rt&&_e.intrinsicWidth>0&&_e.intrinsicHeight>0){var it=contentBox(_e),st=calculatePaddingBoxPath(tt);this.path(st),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(rt,0,0,_e.intrinsicWidth,_e.intrinsicHeight,it.left,it.top,it.width,it.height),this.ctx.restore()}},_.prototype.renderNodeContent=function(_e){return __awaiter(this,void 0,void 0,function(){var tt,rt,it,st,At,ut,gt,gt,ct,ht,ot,nt,yt,at,lt,vt,dt,ft,pt,gt,mt,yt,vt;return __generator(this,function(wt){switch(wt.label){case 0:this.applyEffects(_e.getEffects(4)),tt=_e.container,rt=_e.curves,it=tt.styles,st=0,At=tt.textNodes,wt.label=1;case 1:return st<At.length?(ut=At[st],[4,this.renderTextNode(ut,it)]):[3,4];case 2:wt.sent(),wt.label=3;case 3:return st++,[3,1];case 4:if(!(tt instanceof ImageElementContainer))return[3,8];wt.label=5;case 5:return wt.trys.push([5,7,,8]),[4,this.context.cache.match(tt.src)];case 6:return gt=wt.sent(),this.renderReplacedElement(tt,rt,gt),[3,8];case 7:return wt.sent(),this.context.logger.error("Error loading image "+tt.src),[3,8];case 8:if(tt instanceof CanvasElementContainer&&this.renderReplacedElement(tt,rt,tt.canvas),!(tt instanceof SVGElementContainer))return[3,12];wt.label=9;case 9:return wt.trys.push([9,11,,12]),[4,this.context.cache.match(tt.svg)];case 10:return gt=wt.sent(),this.renderReplacedElement(tt,rt,gt),[3,12];case 11:return wt.sent(),this.context.logger.error("Error loading svg "+tt.svg.substring(0,255)),[3,12];case 12:return tt instanceof IFrameElementContainer&&tt.tree?(ct=new _(this.context,{scale:this.options.scale,backgroundColor:tt.backgroundColor,x:0,y:0,width:tt.width,height:tt.height}),[4,ct.render(tt.tree)]):[3,14];case 13:ht=wt.sent(),tt.width&&tt.height&&this.ctx.drawImage(ht,0,0,tt.width,tt.height,tt.bounds.left,tt.bounds.top,tt.bounds.width,tt.bounds.height),wt.label=14;case 14:if(tt instanceof InputElementContainer&&(ot=Math.min(tt.bounds.width,tt.bounds.height),tt.type===CHECKBOX?tt.checked&&(this.ctx.save(),this.path([new Vector(tt.bounds.left+ot*.39363,tt.bounds.top+ot*.79),new Vector(tt.bounds.left+ot*.16,tt.bounds.top+ot*.5549),new Vector(tt.bounds.left+ot*.27347,tt.bounds.top+ot*.44071),new Vector(tt.bounds.left+ot*.39694,tt.bounds.top+ot*.5649),new Vector(tt.bounds.left+ot*.72983,tt.bounds.top+ot*.23),new Vector(tt.bounds.left+ot*.84,tt.bounds.top+ot*.34085),new Vector(tt.bounds.left+ot*.39363,tt.bounds.top+ot*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):tt.type===RADIO&&tt.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(tt.bounds.left+ot/2,tt.bounds.top+ot/2,ot/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(tt)&&tt.value.length){switch(nt=this.createFontStyle(it),yt=nt[0],at=nt[1],lt=this.fontMetrics.getMetrics(yt,at).baseline,this.ctx.font=yt,this.ctx.fillStyle=asString(it.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(tt.styles.textAlign),vt=contentBox(tt),dt=0,tt.styles.textAlign){case 1:dt+=vt.width/2;break;case 2:dt+=vt.width;break}ft=vt.add(dt,0,0,-vt.height/2+1),this.ctx.save(),this.path([new Vector(vt.left,vt.top),new Vector(vt.left+vt.width,vt.top),new Vector(vt.left+vt.width,vt.top+vt.height),new Vector(vt.left,vt.top+vt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(tt.value,ft),it.letterSpacing,lt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(tt.styles.display,2048))return[3,20];if(tt.styles.listStyleImage===null)return[3,19];if(pt=tt.styles.listStyleImage,pt.type!==0)return[3,18];gt=void 0,mt=pt.url,wt.label=15;case 15:return wt.trys.push([15,17,,18]),[4,this.context.cache.match(mt)];case 16:return gt=wt.sent(),this.ctx.drawImage(gt,tt.bounds.left-(gt.width+10),tt.bounds.top),[3,18];case 17:return wt.sent(),this.context.logger.error("Error loading list-style-image "+mt),[3,18];case 18:return[3,20];case 19:_e.listValue&&tt.styles.listStyleType!==-1&&(yt=this.createFontStyle(it)[0],this.ctx.font=yt,this.ctx.fillStyle=asString(it.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",vt=new Bounds(tt.bounds.left,tt.bounds.top+getAbsoluteValue(tt.styles.paddingTop,tt.bounds.width),tt.bounds.width,computeLineHeight(it.lineHeight,it.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(_e.listValue,vt),it.letterSpacing,computeLineHeight(it.lineHeight,it.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),wt.label=20;case 20:return[2]}})})},_.prototype.renderStackContent=function(_e){return __awaiter(this,void 0,void 0,function(){var tt,rt,pt,it,st,pt,At,ut,pt,ct,ht,pt,ot,nt,pt,at,lt,pt,dt,ft,pt;return __generator(this,function(gt){switch(gt.label){case 0:if(contains(_e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(_e.element)];case 1:gt.sent(),tt=0,rt=_e.negativeZIndex,gt.label=2;case 2:return tt<rt.length?(pt=rt[tt],[4,this.renderStack(pt)]):[3,5];case 3:gt.sent(),gt.label=4;case 4:return tt++,[3,2];case 5:return[4,this.renderNodeContent(_e.element)];case 6:gt.sent(),it=0,st=_e.nonInlineLevel,gt.label=7;case 7:return it<st.length?(pt=st[it],[4,this.renderNode(pt)]):[3,10];case 8:gt.sent(),gt.label=9;case 9:return it++,[3,7];case 10:At=0,ut=_e.nonPositionedFloats,gt.label=11;case 11:return At<ut.length?(pt=ut[At],[4,this.renderStack(pt)]):[3,14];case 12:gt.sent(),gt.label=13;case 13:return At++,[3,11];case 14:ct=0,ht=_e.nonPositionedInlineLevel,gt.label=15;case 15:return ct<ht.length?(pt=ht[ct],[4,this.renderStack(pt)]):[3,18];case 16:gt.sent(),gt.label=17;case 17:return ct++,[3,15];case 18:ot=0,nt=_e.inlineLevel,gt.label=19;case 19:return ot<nt.length?(pt=nt[ot],[4,this.renderNode(pt)]):[3,22];case 20:gt.sent(),gt.label=21;case 21:return ot++,[3,19];case 22:at=0,lt=_e.zeroOrAutoZIndexOrTransformedOrOpacity,gt.label=23;case 23:return at<lt.length?(pt=lt[at],[4,this.renderStack(pt)]):[3,26];case 24:gt.sent(),gt.label=25;case 25:return at++,[3,23];case 26:dt=0,ft=_e.positiveZIndex,gt.label=27;case 27:return dt<ft.length?(pt=ft[dt],[4,this.renderStack(pt)]):[3,30];case 28:gt.sent(),gt.label=29;case 29:return dt++,[3,27];case 30:return[2]}})})},_.prototype.mask=function(_e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(_e.slice(0).reverse()),this.ctx.closePath()},_.prototype.path=function(_e){this.ctx.beginPath(),this.formatPath(_e),this.ctx.closePath()},_.prototype.formatPath=function(_e){var tt=this;_e.forEach(function(rt,it){var st=isBezierCurve(rt)?rt.start:rt;it===0?tt.ctx.moveTo(st.x,st.y):tt.ctx.lineTo(st.x,st.y),isBezierCurve(rt)&&tt.ctx.bezierCurveTo(rt.startControl.x,rt.startControl.y,rt.endControl.x,rt.endControl.y,rt.end.x,rt.end.y)})},_.prototype.renderRepeat=function(_e,tt,rt,it){this.path(_e),this.ctx.fillStyle=tt,this.ctx.translate(rt,it),this.ctx.fill(),this.ctx.translate(-rt,-it)},_.prototype.resizeImage=function(_e,tt,rt){var it;if(_e.width===tt&&_e.height===rt)return _e;var st=(it=this.canvas.ownerDocument)!==null&&it!==void 0?it:document,At=st.createElement("canvas");At.width=Math.max(1,tt),At.height=Math.max(1,rt);var ut=At.getContext("2d");return ut.drawImage(_e,0,0,_e.width,_e.height,0,0,tt,rt),At},_.prototype.renderBackgroundImage=function(_e){return __awaiter(this,void 0,void 0,function(){var tt,rt,it,st,At,ut;return __generator(this,function(ct){switch(ct.label){case 0:tt=_e.styles.backgroundImage.length-1,rt=function(ht){var ot,nt,at,It,Ct,Ft,_t,St,Bt,lt,It,Ct,Ft,_t,St,dt,ft,pt,gt,mt,yt,vt,wt,bt,Bt,Tt,It,Dt,Ut,_t,St,xt,Ct,Ft,Lt,Mt,Rt,Nt,Gt,Wt,Xt,Yt;return __generator(this,function(Zt){switch(Zt.label){case 0:if(ht.type!==0)return[3,5];ot=void 0,nt=ht.url,Zt.label=1;case 1:return Zt.trys.push([1,3,,4]),[4,it.context.cache.match(nt)];case 2:return ot=Zt.sent(),[3,4];case 3:return Zt.sent(),it.context.logger.error("Error loading background-image "+nt),[3,4];case 4:return ot&&(at=calculateBackgroundRendering(_e,tt,[ot.width,ot.height,ot.width/ot.height]),It=at[0],Ct=at[1],Ft=at[2],_t=at[3],St=at[4],Bt=it.ctx.createPattern(it.resizeImage(ot,_t,St),"repeat"),it.renderRepeat(It,Bt,Ct,Ft)),[3,6];case 5:isLinearGradient(ht)?(lt=calculateBackgroundRendering(_e,tt,[null,null,null]),It=lt[0],Ct=lt[1],Ft=lt[2],_t=lt[3],St=lt[4],dt=calculateGradientDirection(ht.angle,_t,St),ft=dt[0],pt=dt[1],gt=dt[2],mt=dt[3],yt=dt[4],vt=document.createElement("canvas"),vt.width=_t,vt.height=St,wt=vt.getContext("2d"),bt=wt.createLinearGradient(pt,mt,gt,yt),processColorStops(ht.stops,ft).forEach(function(er){return bt.addColorStop(er.stop,asString(er.color))}),wt.fillStyle=bt,wt.fillRect(0,0,_t,St),_t>0&&St>0&&(Bt=it.ctx.createPattern(vt,"repeat"),it.renderRepeat(It,Bt,Ct,Ft))):isRadialGradient(ht)&&(Tt=calculateBackgroundRendering(_e,tt,[null,null,null]),It=Tt[0],Dt=Tt[1],Ut=Tt[2],_t=Tt[3],St=Tt[4],xt=ht.position.length===0?[FIFTY_PERCENT]:ht.position,Ct=getAbsoluteValue(xt[0],_t),Ft=getAbsoluteValue(xt[xt.length-1],St),Lt=calculateRadius(ht,Ct,Ft,_t,St),Mt=Lt[0],Rt=Lt[1],Mt>0&&Rt>0&&(Nt=it.ctx.createRadialGradient(Dt+Ct,Ut+Ft,0,Dt+Ct,Ut+Ft,Mt),processColorStops(ht.stops,Mt*2).forEach(function(er){return Nt.addColorStop(er.stop,asString(er.color))}),it.path(It),it.ctx.fillStyle=Nt,Mt!==Rt?(Gt=_e.bounds.left+.5*_e.bounds.width,Wt=_e.bounds.top+.5*_e.bounds.height,Xt=Rt/Mt,Yt=1/Xt,it.ctx.save(),it.ctx.translate(Gt,Wt),it.ctx.transform(1,0,0,Xt,0,0),it.ctx.translate(-Gt,-Wt),it.ctx.fillRect(Dt,Yt*(Ut-Wt)+Wt,_t,St*Yt),it.ctx.restore()):it.ctx.fill())),Zt.label=6;case 6:return tt--,[2]}})},it=this,st=0,At=_e.styles.backgroundImage.slice(0).reverse(),ct.label=1;case 1:return st<At.length?(ut=At[st],[5,rt(ut)]):[3,4];case 2:ct.sent(),ct.label=3;case 3:return st++,[3,1];case 4:return[2]}})})},_.prototype.renderSolidBorder=function(_e,tt,rt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(it){return this.path(parsePathForBorder(rt,tt)),this.ctx.fillStyle=asString(_e),this.ctx.fill(),[2]})})},_.prototype.renderDoubleBorder=function(_e,tt,rt,it){return __awaiter(this,void 0,void 0,function(){var st,At;return __generator(this,function(ut){switch(ut.label){case 0:return tt<3?[4,this.renderSolidBorder(_e,rt,it)]:[3,2];case 1:return ut.sent(),[2];case 2:return st=parsePathForBorderDoubleOuter(it,rt),this.path(st),this.ctx.fillStyle=asString(_e),this.ctx.fill(),At=parsePathForBorderDoubleInner(it,rt),this.path(At),this.ctx.fill(),[2]}})})},_.prototype.renderNodeBackgroundAndBorders=function(_e){return __awaiter(this,void 0,void 0,function(){var tt,rt,it,st,At,ut,ct,ht,ot=this;return __generator(this,function(nt){switch(nt.label){case 0:return this.applyEffects(_e.getEffects(2)),tt=_e.container.styles,rt=!isTransparent(tt.backgroundColor)||tt.backgroundImage.length,it=[{style:tt.borderTopStyle,color:tt.borderTopColor,width:tt.borderTopWidth},{style:tt.borderRightStyle,color:tt.borderRightColor,width:tt.borderRightWidth},{style:tt.borderBottomStyle,color:tt.borderBottomColor,width:tt.borderBottomWidth},{style:tt.borderLeftStyle,color:tt.borderLeftColor,width:tt.borderLeftWidth}],st=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(tt.backgroundClip,0),_e.curves),rt||tt.boxShadow.length?(this.ctx.save(),this.path(st),this.ctx.clip(),isTransparent(tt.backgroundColor)||(this.ctx.fillStyle=asString(tt.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(_e.container)]):[3,2];case 1:nt.sent(),this.ctx.restore(),tt.boxShadow.slice(0).reverse().forEach(function(at){ot.ctx.save();var lt=calculateBorderBoxPath(_e.curves),dt=at.inset?0:MASK_OFFSET,ft=transformPath(lt,-dt+(at.inset?1:-1)*at.spread.number,(at.inset?1:-1)*at.spread.number,at.spread.number*(at.inset?-2:2),at.spread.number*(at.inset?-2:2));at.inset?(ot.path(lt),ot.ctx.clip(),ot.mask(ft)):(ot.mask(lt),ot.ctx.clip(),ot.path(ft)),ot.ctx.shadowOffsetX=at.offsetX.number+dt,ot.ctx.shadowOffsetY=at.offsetY.number,ot.ctx.shadowColor=asString(at.color),ot.ctx.shadowBlur=at.blur.number,ot.ctx.fillStyle=at.inset?asString(at.color):"rgba(0,0,0,1)",ot.ctx.fill(),ot.ctx.restore()}),nt.label=2;case 2:At=0,ut=0,ct=it,nt.label=3;case 3:return ut<ct.length?(ht=ct[ut],ht.style!==0&&!isTransparent(ht.color)&&ht.width>0?ht.style!==2?[3,5]:[4,this.renderDashedDottedBorder(ht.color,ht.width,At,_e.curves,2)]:[3,11]):[3,13];case 4:return nt.sent(),[3,11];case 5:return ht.style!==3?[3,7]:[4,this.renderDashedDottedBorder(ht.color,ht.width,At,_e.curves,3)];case 6:return nt.sent(),[3,11];case 7:return ht.style!==4?[3,9]:[4,this.renderDoubleBorder(ht.color,ht.width,At,_e.curves)];case 8:return nt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ht.color,At,_e.curves)];case 10:nt.sent(),nt.label=11;case 11:At++,nt.label=12;case 12:return ut++,[3,3];case 13:return[2]}})})},_.prototype.renderDashedDottedBorder=function(_e,tt,rt,it,st){return __awaiter(this,void 0,void 0,function(){var At,ut,ct,ht,ot,nt,at,lt,dt,ft,pt,gt,mt,yt,vt,wt,vt,wt;return __generator(this,function(bt){return this.ctx.save(),At=parsePathForBorderStroke(it,rt),ut=parsePathForBorder(it,rt),st===2&&(this.path(ut),this.ctx.clip()),isBezierCurve(ut[0])?(ct=ut[0].start.x,ht=ut[0].start.y):(ct=ut[0].x,ht=ut[0].y),isBezierCurve(ut[1])?(ot=ut[1].end.x,nt=ut[1].end.y):(ot=ut[1].x,nt=ut[1].y),rt===0||rt===2?at=Math.abs(ct-ot):at=Math.abs(ht-nt),this.ctx.beginPath(),st===3?this.formatPath(At):this.formatPath(ut.slice(0,2)),lt=tt<3?tt*3:tt*2,dt=tt<3?tt*2:tt,st===3&&(lt=tt,dt=tt),ft=!0,at<=lt*2?ft=!1:at<=lt*2+dt?(pt=at/(2*lt+dt),lt*=pt,dt*=pt):(gt=Math.floor((at+dt)/(lt+dt)),mt=(at-gt*lt)/(gt-1),yt=(at-(gt+1)*lt)/gt,dt=yt<=0||Math.abs(dt-mt)<Math.abs(dt-yt)?mt:yt),ft&&(st===3?this.ctx.setLineDash([0,lt+dt]):this.ctx.setLineDash([lt,dt])),st===3?(this.ctx.lineCap="round",this.ctx.lineWidth=tt):this.ctx.lineWidth=tt*2+1.1,this.ctx.strokeStyle=asString(_e),this.ctx.stroke(),this.ctx.setLineDash([]),st===2&&(isBezierCurve(ut[0])&&(vt=ut[3],wt=ut[0],this.ctx.beginPath(),this.formatPath([new Vector(vt.end.x,vt.end.y),new Vector(wt.start.x,wt.start.y)]),this.ctx.stroke()),isBezierCurve(ut[1])&&(vt=ut[1],wt=ut[2],this.ctx.beginPath(),this.formatPath([new Vector(vt.end.x,vt.end.y),new Vector(wt.start.x,wt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},_.prototype.render=function(_e){return __awaiter(this,void 0,void 0,function(){var tt;return __generator(this,function(rt){switch(rt.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),tt=parseStackingContexts(_e),[4,this.renderStack(tt)];case 1:return rt.sent(),this.applyEffects([]),[2,this.canvas]}})})},_}(Renderer),isTextInputElement=function(et){return et instanceof TextareaElementContainer||et instanceof SelectElementContainer?!0:et instanceof InputElementContainer&&et.type!==RADIO&&et.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(et,_){switch(et){case 0:return calculateBorderBoxPath(_);case 2:return calculateContentBoxPath(_);case 1:default:return calculatePaddingBoxPath(_)}},canvasTextAlign=function(et){switch(et){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(et){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?et.filter(function(_){return iOSBrokenFonts.indexOf(_)===-1}):et},ForeignObjectRenderer=function(et){__extends(_,et);function _(_e,tt){var rt=et.call(this,_e,tt)||this;return rt.canvas=tt.canvas?tt.canvas:document.createElement("canvas"),rt.ctx=rt.canvas.getContext("2d"),rt.options=tt,rt.canvas.width=Math.floor(tt.width*tt.scale),rt.canvas.height=Math.floor(tt.height*tt.scale),rt.canvas.style.width=tt.width+"px",rt.canvas.style.height=tt.height+"px",rt.ctx.scale(rt.options.scale,rt.options.scale),rt.ctx.translate(-tt.x,-tt.y),rt.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+tt.width+"x"+tt.height+" at "+tt.x+","+tt.y+") with scale "+tt.scale),rt}return _.prototype.render=function(_e){return __awaiter(this,void 0,void 0,function(){var tt,rt;return __generator(this,function(it){switch(it.label){case 0:return tt=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,_e),[4,loadSerializedSVG(tt)];case 1:return rt=it.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(rt,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},_}(Renderer),loadSerializedSVG=function(et){return new Promise(function(_,_e){var tt=new Image;tt.onload=function(){_(tt)},tt.onerror=_e,tt.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(et))})},Logger=function(){function et(_){var _e=_.id,tt=_.enabled;this.id=_e,this.enabled=tt,this.start=Date.now()}return et.prototype.debug=function(){for(var _=[],_e=0;_e<arguments.length;_e++)_[_e]=arguments[_e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_)):this.info.apply(this,_))},et.prototype.getTime=function(){return Date.now()-this.start},et.prototype.info=function(){for(var _=[],_e=0;_e<arguments.length;_e++)_[_e]=arguments[_e];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_))},et.prototype.warn=function(){for(var _=[],_e=0;_e<arguments.length;_e++)_[_e]=arguments[_e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_)):this.info.apply(this,_))},et.prototype.error=function(){for(var _=[],_e=0;_e<arguments.length;_e++)_[_e]=arguments[_e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_)):this.info.apply(this,_))},et.instances={},et}(),Context=function(){function et(_,_e){var tt;this.windowBounds=_e,this.instanceName="#"+et.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:_.logging}),this.cache=(tt=_.cache)!==null&&tt!==void 0?tt:new Cache(this,_)}return et.instanceCount=1,et}(),html2canvas=function(et,_){return _===void 0&&(_={}),renderElement(et,_)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(et,_){return __awaiter(void 0,void 0,void 0,function(){var _e,tt,rt,it,st,At,ut,ct,ht,ot,nt,at,lt,dt,ft,pt,gt,mt,yt,vt,bt,wt,bt,Bt,Tt,It,Dt,Ut,_t,St,xt,Ct,Ft,Lt,Mt,Rt,Nt,Gt,Wt,Xt;return __generator(this,function(Yt){switch(Yt.label){case 0:if(!et||typeof et!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(_e=et.ownerDocument,!_e)throw new Error("Element is not attached to a Document");if(tt=_e.defaultView,!tt)throw new Error("Document is not attached to a Window");return rt={allowTaint:(Bt=_.allowTaint)!==null&&Bt!==void 0?Bt:!1,imageTimeout:(Tt=_.imageTimeout)!==null&&Tt!==void 0?Tt:15e3,proxy:_.proxy,useCORS:(It=_.useCORS)!==null&&It!==void 0?It:!1},it=__assign({logging:(Dt=_.logging)!==null&&Dt!==void 0?Dt:!0,cache:_.cache},rt),st={windowWidth:(Ut=_.windowWidth)!==null&&Ut!==void 0?Ut:tt.innerWidth,windowHeight:(_t=_.windowHeight)!==null&&_t!==void 0?_t:tt.innerHeight,scrollX:(St=_.scrollX)!==null&&St!==void 0?St:tt.pageXOffset,scrollY:(xt=_.scrollY)!==null&&xt!==void 0?xt:tt.pageYOffset},At=new Bounds(st.scrollX,st.scrollY,st.windowWidth,st.windowHeight),ut=new Context(it,At),ct=(Ct=_.foreignObjectRendering)!==null&&Ct!==void 0?Ct:!1,ht={allowTaint:(Ft=_.allowTaint)!==null&&Ft!==void 0?Ft:!1,onclone:_.onclone,ignoreElements:_.ignoreElements,inlineImages:ct,copyStyles:ct},ut.logger.debug("Starting document clone with size "+At.width+"x"+At.height+" scrolled to "+-At.left+","+-At.top),ot=new DocumentCloner(ut,et,ht),nt=ot.clonedReferenceElement,nt?[4,ot.toIFrame(_e,At)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return at=Yt.sent(),lt=isBodyElement(nt)||isHTMLElement(nt)?parseDocumentSize(nt.ownerDocument):parseBounds(ut,nt),dt=lt.width,ft=lt.height,pt=lt.left,gt=lt.top,mt=parseBackgroundColor(ut,nt,_.backgroundColor),yt={canvas:_.canvas,backgroundColor:mt,scale:(Mt=(Lt=_.scale)!==null&&Lt!==void 0?Lt:tt.devicePixelRatio)!==null&&Mt!==void 0?Mt:1,x:((Rt=_.x)!==null&&Rt!==void 0?Rt:0)+pt,y:((Nt=_.y)!==null&&Nt!==void 0?Nt:0)+gt,width:(Gt=_.width)!==null&&Gt!==void 0?Gt:Math.ceil(dt),height:(Wt=_.height)!==null&&Wt!==void 0?Wt:Math.ceil(ft)},ct?(ut.logger.debug("Document cloned, using foreign object rendering"),bt=new ForeignObjectRenderer(ut,yt),[4,bt.render(nt)]):[3,3];case 2:return vt=Yt.sent(),[3,5];case 3:return ut.logger.debug("Document cloned, element located at "+pt+","+gt+" with size "+dt+"x"+ft+" using computed rendering"),ut.logger.debug("Starting DOM parsing"),wt=parseTree(ut,nt),mt===wt.styles.backgroundColor&&(wt.styles.backgroundColor=COLORS.TRANSPARENT),ut.logger.debug("Starting renderer for element at "+yt.x+","+yt.y+" with size "+yt.width+"x"+yt.height),bt=new CanvasRenderer(ut,yt),[4,bt.render(wt)];case 4:vt=Yt.sent(),Yt.label=5;case 5:return(!((Xt=_.removeContainer)!==null&&Xt!==void 0)||Xt)&&(DocumentCloner.destroy(at)||ut.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ut.logger.debug("Finished rendering"),[2,vt]}})})},parseBackgroundColor=function(et,_,_e){var tt=_.ownerDocument,rt=tt.documentElement?parseColor(et,getComputedStyle(tt.documentElement).backgroundColor):COLORS.TRANSPARENT,it=tt.body?parseColor(et,getComputedStyle(tt.body).backgroundColor):COLORS.TRANSPARENT,st=typeof _e=="string"?parseColor(et,_e):_e===null?COLORS.TRANSPARENT:4294967295;return _===tt.documentElement?isTransparent(rt)?isTransparent(it)?st:it:rt:st};const FontDropdown=({fonts:et,selectedFont:_,setSelectedFont:_e})=>jsxRuntimeExports.jsx("select",{value:_.label,onChange:tt=>{const rt=et.find(it=>it.label===tt.target.value);_e(rt)},style:{minHeight:"45px",marginRight:"10px",padding:"5px",borderRadius:"5px",border:"1px solid #ccc"},children:et.map((tt,rt)=>jsxRuntimeExports.jsx("option",{value:tt.label,style:{fontFamily:tt.value,fontWeight:tt.weight,fontStyle:tt.style},children:tt.label},rt))}),getFonts=()=>[{label:"Anton",value:"Anton",weight:"normal",style:"normal"},{label:"Indie Flower",value:"Indie Flower",weight:"normal",style:"normal"},{label:"Londrina Outline",value:"Londrina Outline",weight:"normal",style:"normal"},{label:"Patua One",value:"Patua One",weight:"normal",style:"normal"},{label:"Pixelify Sans",value:"Pixelify Sans",weight:"normal",style:"normal"},{label:"Press Start 2P",value:"Press Start 2P",weight:"normal",style:"normal"},{label:"Roboto 400",value:"Roboto",weight:400,style:"normal"},{label:"Roboto 500",value:"Roboto",weight:500,style:"normal"},{label:"Roboto 700",value:"Roboto",weight:700,style:"normal"},{label:"Roboto 900",value:"Roboto",weight:900,style:"normal"},{label:"Roboto Italic 400",value:"Roboto",weight:400,style:"italic"},{label:"Roboto Italic 500",value:"Roboto",weight:500,style:"italic"},{label:"Roboto Italic 700",value:"Roboto",weight:700,style:"italic"},{label:"Roboto Italic 900",value:"Roboto",weight:900,style:"italic"},{label:"Rubik Mono One",value:"Rubik Mono One",weight:"normal",style:"normal"},{label:"Young Serif",value:"Young Serif",weight:"normal",style:"normal"}],ColorPickerPopup=({color:et,setColor:_,label:_e})=>{const[tt,rt]=reactExports.useState(!1),it=reactExports.useRef();return reactExports.useEffect(()=>{const st=At=>{it.current&&!it.current.contains(At.target)&&rt(!1)};return document.addEventListener("mousedown",st),()=>document.removeEventListener("mousedown",st)},[]),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},ref:it,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>rt(!tt),style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},children:[jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:et,border:"1px solid #ccc",marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:_e})]}),tt&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"30px",zIndex:1e3},children:jsxRuntimeExports.jsx(Z$1,{color:et,onChange:_})})]})},FontSizeSelector=({fontSizes:et,setFontSize:_})=>{var tt;const _e=(tt=et.find(rt=>rt.label==="Medium Font"))==null?void 0:tt.value;return jsxRuntimeExports.jsx("select",{onChange:rt=>_(rt.target.value),style:{marginLeft:"10px",borderRadius:"5px",border:"1px solid #ccc",minWidth:"90px",minHeight:"45px"},defaultValue:_e,children:et.map((rt,it)=>jsxRuntimeExports.jsx("option",{value:rt.value,children:rt.label},it))})},StrokeWidthSlider=({strokeWidth:et,setStrokeWidth:_})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{children:"Stroke Width: "}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"10",value:et,onChange:_e=>_(_e.target.value),style:{verticalAlign:"middle",marginLeft:"5px"}}),jsxRuntimeExports.jsxs("span",{style:{marginLeft:"10px"},children:[et,"px"]})]}),getTextScreenshot=async et=>{const _={width:et.style.width,overflowX:et.style.overflowX};et.style.width=`${et.scrollWidth}px`,et.style.overflowX="visible",await new Promise(rt=>setTimeout(rt,0));const _e=document.createElement("canvas");return _e.width=et.scrollWidth,_e.height=et.scrollHeight,await html2canvas(et,{canvas:_e,backgroundColor:null,scale:1,useCORS:!0,logging:!0,width:et.scrollWidth,height:et.scrollHeight,x:0,y:0,scrollX:0,scrollY:0}),Object.assign(et.style,_),await createImageBitmap(_e)};function saveSetting(et,_){localStorage.setItem(`textToolSettings_${et}`,JSON.stringify(_))}function getInitialSetting(et,_){const _e=localStorage.getItem(`textToolSettings_${et}`);return _e?JSON.parse(_e):_}const TextEditingPlatform=({onCaptureTextButtonPress:et})=>{const[_,_e]=reactExports.useState(getInitialSetting("selectedFont",{label:"Anton",value:"Anton",weight:"normal",style:"normal"})),[tt,rt]=reactExports.useState(getInitialSetting("fontSize","80px")),[it,st]=reactExports.useState(getInitialSetting("fillColor","#ffffff")),[At,ut]=reactExports.useState(getInitialSetting("strokeColor","#000000")),[ct,ht]=reactExports.useState(getInitialSetting("strokeWidth",1)),ot=getFonts(),nt=[{label:"Small Font",value:"46px"},{label:"Medium Font",value:"80px"},{label:"Large Font",value:"150px"}];reactExports.useEffect(()=>{saveSetting("selectedFont",_),saveSetting("fontSize",tt),saveSetting("fillColor",it),saveSetting("strokeColor",At),saveSetting("strokeWidth",ct)},[_,tt,it,At,ct]),reactExports.useEffect(()=>{const dt=document.getElementById("customTextArea");dt&&dt.focus()},[]);const at=async()=>{const dt=document.getElementById("customTextArea"),ft=await getTextScreenshot(dt);et(ft)},lt=dt=>{if(dt.stopPropagation(),dt.key==="Enter"&&!dt.shiftKey)return dt.preventDefault(),at();dt.key==="Escape"&&dt.currentTarget.blur()};return jsxRuntimeExports.jsxs("div",{style:{border:"1px solid #ccc",padding:"10px",borderRadius:"5px",minWidth:window.innerWidth<370?window.innerWidth:"370px"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"10px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[jsxRuntimeExports.jsx(FontDropdown,{fonts:ot,selectedFont:_,setSelectedFont:_e}),jsxRuntimeExports.jsx(FontSizeSelector,{fontSizes:nt,setFontSize:rt}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"20px"},children:[jsxRuntimeExports.jsx(ColorPickerPopup,{color:it,setColor:st,label:"Fill Color"}),jsxRuntimeExports.jsx(ColorPickerPopup,{color:At,setColor:ut,label:"Stroke Color"})]})]}),jsxRuntimeExports.jsx(StrokeWidthSlider,{strokeWidth:ct,setStrokeWidth:ht}),jsxRuntimeExports.jsx("div",{style:{width:"100%",border:"1px solid #ccc",borderRadius:"5px"},children:jsxRuntimeExports.jsx("div",{contentEditable:!0,id:"customTextArea",onKeyDown:lt,style:{width:"100%",padding:"10px",fontWeight:_.weight,fontStyle:_.style,fontFamily:_.value,fontSize:tt,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",overflowX:"auto",textShadow:ct>0?`0px 0px ${ct}px ${At}`:"none",resize:"both",WebkitTextStroke:`${ct}px ${At}`,textStroke:`${ct}px ${At}`,color:it,background:"transparent"},children:" "})}),jsxRuntimeExports.jsx("button",{onClick:at,style:{margin:"10px"},children:"DING THE TEXT!"})]})},DingButton=({text:et,onClick:_,disabled:_e,active:tt})=>{const rt=colorPalette.selection,st=_e?{backgroundColor:colorPalette.current_line,color:colorPalette.foreground_light,outline:"none"}:tt?{backgroundColor:colorPalette.pink,color:colorPalette.foreground_light,outline:"none"}:{backgroundColor:colorPalette.light_background,color:colorPalette.foreground_light,outline:"none"},At={backgroundColor:colorPalette.dark_background};return jsxRuntimeExports.jsx("button",{style:{...st,width:"100px"},onClick:_,onMouseOver:ut=>!_e&&(ut.currentTarget.style.backgroundColor=At.backgroundColor),onMouseOut:ut=>!_e&&(ut.currentTarget.style.backgroundColor=st.backgroundColor),onPointerDown:ut=>!_e&&(ut.currentTarget.style.backgroundColor=rt),onPointerUp:ut=>!_e&&(ut.currentTarget.style.backgroundColor=At.backgroundColor),disabled:_e,onFocus:ut=>ut.currentTarget.style.outlineColor=rt,onBlur:ut=>ut.currentTarget.style.outlineColor="none",children:et})},TextInputTool=({onCaptureTextButtonPress:et})=>jsxRuntimeExports.jsx(TextEditingPlatform,{onCaptureTextButtonPress:et}),selectedToolStyle={padding:"0px 5px 3px 0px",borderRadius:"4px",textAlign:"left"},dropdownStyle={backgroundColor:colorPalette.light_background,color:colorPalette.foreground_light,border:`1px solid ${colorPalette.current_line}`,padding:"8px",borderRadius:"4px",zIndex:1e3},listStyle={listStyle:"none",padding:0,margin:0},listItemStyle=et=>({padding:"4px 8px",backgroundColor:et?colorPalette.current_line:"transparent",cursor:"pointer"}),ToolDropdown=({onToolChange:et})=>{const[_,_e]=reactExports.useState(!1),[tt,rt]=reactExports.useState(""),[it,st]=reactExports.useState(null),[At,ut]=reactExports.useState([]),ct=reactExports.useRef(null),ht=[{id:"text",name:"Text"},{id:"inpaint",name:"Inpaint"}];reactExports.useEffect(()=>{const ft=gt=>{if(gt.key.toLowerCase()==="q"&&gt.shiftKey)return gt.stopPropagation(),gt.preventDefault(),et(""),_e(!1);if(gt.key.toLowerCase()==="q")return gt.stopPropagation(),gt.preventDefault(),_e(!_)},pt=gt=>{ct.current&&!ct.current.contains(gt.target)&&_e(!1)};return _?document.addEventListener("mousedown",pt):document.removeEventListener("mousedown",pt),window.addEventListener("keydown",ft),()=>{window.removeEventListener("keydown",ft),document.removeEventListener("mousedown",pt)}},[_,ct]);const ot=ft=>{ft.stopPropagation(),ft.key==="Escape"?(_e(!1),rt("")):ft.key==="Enter"&&_&&At.length>0&&(ft.preventDefault(),at(At[0].id))};reactExports.useEffect(()=>{ut(ht.filter(ft=>ft.name.toLowerCase().includes(tt.toLowerCase())))},[tt]);const nt=ft=>{ft.stopPropagation(),ft.preventDefault(),rt(ft.target.value)},at=ft=>{et(ft),_e(!1),rt(""),st(ft)},lt=()=>{_e(!_)},dt=()=>{et(""),_e(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_&&jsxRuntimeExports.jsxs("div",{ref:ct,style:dropdownStyle,children:[jsxRuntimeExports.jsx("ul",{style:listStyle,children:At.map((ft,pt)=>jsxRuntimeExports.jsxs("li",{onClick:()=>at(ft.id),style:listItemStyle(pt===0),children:[ft.name,ft.id===it&&jsxRuntimeExports.jsx("span",{children:"✔"})]},ft.id))}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search tools...",value:tt,onChange:nt,onKeyDown:ot,style:{padding:"4px",marginBottom:"4px",marginTop:"4px",color:colorPalette.foreground_light,backgroundColor:colorPalette.dark_background,border:"none"},autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("div",{style:selectedToolStyle,onClick:lt,children:jsxRuntimeExports.jsx(DingButton,{text:"change tool (q)",onClick:lt,disabled:!1,active:!1})}),jsxRuntimeExports.jsx("div",{style:selectedToolStyle,onClick:dt,children:jsxRuntimeExports.jsx(DingButton,{text:"close (shift q)",onClick:dt,disabled:!1,active:!1})})]})]})},Inpaint=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{children:"INPAINTING TOOL NOT IMPLEMENTED"})}),ToolHost=({onToolChange:et,onCaptureTextButtonPress:_})=>{const[_e,tt]=reactExports.useState(""),rt=st=>{tt(st),et(st)};let it;return _e==="text"?it=jsxRuntimeExports.jsx(TextInputTool,{onCaptureTextButtonPress:_}):_e==="inpaint"?it=jsxRuntimeExports.jsx(Inpaint,{}):it=jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:120,margin:10},children:[jsxRuntimeExports.jsx(ToolDropdown,{onToolChange:rt}),it]})},PixiApp=()=>{const[et,_]=reactExports.useState(()=>{}),[_e,tt]=reactExports.useState(()=>{}),[rt,it]=reactExports.useState(()=>{}),st=reactExports.useRef(null);return reactExports.useEffect(()=>((async()=>{const{app:ut,onTextChange:ct,onToolChange:ht,onCaptureTextButtonPress:ot}=await strapScene();_(()=>ct),tt(()=>ht),it(()=>ot),st.current&&st.current.appendChild(ut.view)})(),()=>{}),[]),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:st}),jsxRuntimeExports.jsx(ToolHost,{onToolChange:_e,onCaptureTextButtonPress:rt})]})},reactRoot=document.getElementById("react-root");reactRoot&&createRoot(reactRoot).render(jsxRuntimeExports.jsx(PixiApp,{}));
